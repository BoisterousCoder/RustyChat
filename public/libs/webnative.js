"use strict";var webnative=(()=>{var Z7=Object.create;var _y=Object.defineProperty;var eK=Object.getOwnPropertyDescriptor;var tK=Object.getOwnPropertyNames;var rK=Object.getPrototypeOf,nK=Object.prototype.hasOwnProperty;var Nc=(r=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(r,{get:(e,t)=>(typeof require!="undefined"?require:e)[t]}):r)(function(r){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var Qt=(r,e)=>()=>(r&&(e=r(r=0)),e);var ee=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Re=(r,e)=>{for(var t in e)_y(r,t,{get:e[t],enumerable:!0})},kS=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of tK(e))!nK.call(r,i)&&i!==t&&_y(r,i,{get:()=>e[i],enumerable:!(n=eK(e,i))||n.enumerable});return r};var Ie=(r,e,t)=>(t=r!=null?Z7(rK(r)):{},kS(e||!r||!r.__esModule?_y(t,"default",{value:r,enumerable:!0}):t,r)),qn=r=>kS(_y({},"__esModule",{value:!0}),r);var hd=ee((IS,cv)=>{(function(r){if(typeof IS=="object"&&typeof cv<"u")cv.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var e;typeof window<"u"?e=window:typeof globalThis<"u"?e=globalThis:typeof self<"u"?e=self:e=this,e.localforage=r()}})(function(){var r,e,t;return function n(i,o,a){function c(m,y){if(!o[m]){if(!i[m]){var E=typeof Nc=="function"&&Nc;if(!y&&E)return E(m,!0);if(l)return l(m,!0);var k=new Error("Cannot find module '"+m+"'");throw k.code="MODULE_NOT_FOUND",k}var T=o[m]={exports:{}};i[m][0].call(T.exports,function(O){var ue=i[m][1][O];return c(ue||O)},T,T.exports,n,i,o,a)}return o[m].exports}for(var l=typeof Nc=="function"&&Nc,h=0;h<a.length;h++)c(a[h]);return c}({1:[function(n,i,o){(function(a){"use strict";var c=a.MutationObserver||a.WebKitMutationObserver,l;if(c){var h=0,m=new c(O),y=a.document.createTextNode("");m.observe(y,{characterData:!0}),l=function(){y.data=h=++h%2}}else if(!a.setImmediate&&typeof a.MessageChannel<"u"){var E=new a.MessageChannel;E.port1.onmessage=O,l=function(){E.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?l=function(){var ne=a.document.createElement("script");ne.onreadystatechange=function(){O(),ne.onreadystatechange=null,ne.parentNode.removeChild(ne),ne=null},a.document.documentElement.appendChild(ne)}:l=function(){setTimeout(O,0)};var k,T=[];function O(){k=!0;for(var ne,ve,X=T.length;X;){for(ve=T,T=[],ne=-1;++ne<X;)ve[ne]();X=T.length}k=!1}i.exports=ue;function ue(ne){T.push(ne)===1&&!k&&l()}}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,i,o){"use strict";var a=n(1);function c(){}var l={},h=["REJECTED"],m=["FULFILLED"],y=["PENDING"];i.exports=E;function E(W){if(typeof W!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,W!==c&&ue(this,W)}E.prototype.catch=function(W){return this.then(null,W)},E.prototype.then=function(W,de){if(typeof W!="function"&&this.state===m||typeof de!="function"&&this.state===h)return this;var ge=new this.constructor(c);if(this.state!==y){var Ue=this.state===m?W:de;T(ge,Ue,this.outcome)}else this.queue.push(new k(ge,W,de));return ge};function k(W,de,ge){this.promise=W,typeof de=="function"&&(this.onFulfilled=de,this.callFulfilled=this.otherCallFulfilled),typeof ge=="function"&&(this.onRejected=ge,this.callRejected=this.otherCallRejected)}k.prototype.callFulfilled=function(W){l.resolve(this.promise,W)},k.prototype.otherCallFulfilled=function(W){T(this.promise,this.onFulfilled,W)},k.prototype.callRejected=function(W){l.reject(this.promise,W)},k.prototype.otherCallRejected=function(W){T(this.promise,this.onRejected,W)};function T(W,de,ge){a(function(){var Ue;try{Ue=de(ge)}catch(St){return l.reject(W,St)}Ue===W?l.reject(W,new TypeError("Cannot resolve promise with itself")):l.resolve(W,Ue)})}l.resolve=function(W,de){var ge=ne(O,de);if(ge.status==="error")return l.reject(W,ge.value);var Ue=ge.value;if(Ue)ue(W,Ue);else{W.state=m,W.outcome=de;for(var St=-1,$t=W.queue.length;++St<$t;)W.queue[St].callFulfilled(de)}return W},l.reject=function(W,de){W.state=h,W.outcome=de;for(var ge=-1,Ue=W.queue.length;++ge<Ue;)W.queue[ge].callRejected(de);return W};function O(W){var de=W&&W.then;if(W&&(typeof W=="object"||typeof W=="function")&&typeof de=="function")return function(){de.apply(W,arguments)}}function ue(W,de){var ge=!1;function Ue(qt){ge||(ge=!0,l.reject(W,qt))}function St(qt){ge||(ge=!0,l.resolve(W,qt))}function $t(){de(St,Ue)}var Bt=ne($t);Bt.status==="error"&&Ue(Bt.value)}function ne(W,de){var ge={};try{ge.value=W(de),ge.status="success"}catch(Ue){ge.status="error",ge.value=Ue}return ge}E.resolve=ve;function ve(W){return W instanceof this?W:l.resolve(new this(c),W)}E.reject=X;function X(W){var de=new this(c);return l.reject(de,W)}E.all=me;function me(W){var de=this;if(Object.prototype.toString.call(W)!=="[object Array]")return this.reject(new TypeError("must be an array"));var ge=W.length,Ue=!1;if(!ge)return this.resolve([]);for(var St=new Array(ge),$t=0,Bt=-1,qt=new this(c);++Bt<ge;)yr(W[Bt],Bt);return qt;function yr(Ut,Wr){de.resolve(Ut).then(Un,function(Ur){Ue||(Ue=!0,l.reject(qt,Ur))});function Un(Ur){St[Wr]=Ur,++$t===ge&&!Ue&&(Ue=!0,l.resolve(qt,St))}}}E.race=be;function be(W){var de=this;if(Object.prototype.toString.call(W)!=="[object Array]")return this.reject(new TypeError("must be an array"));var ge=W.length,Ue=!1;if(!ge)return this.resolve([]);for(var St=-1,$t=new this(c);++St<ge;)Bt(W[St]);return $t;function Bt(qt){de.resolve(qt).then(function(yr){Ue||(Ue=!0,l.resolve($t,yr))},function(yr){Ue||(Ue=!0,l.reject($t,yr))})}}},{1:1}],3:[function(n,i,o){(function(a){"use strict";typeof a.Promise!="function"&&(a.Promise=n(2))}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,i,o){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};function c(b,C){if(!(b instanceof C))throw new TypeError("Cannot call a class as a function")}function l(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var h=l();function m(){try{if(!h||!h.open)return!1;var b=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),C=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!b||C)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function y(b,C){b=b||[],C=C||{};try{return new Blob(b,C)}catch(w){if(w.name!=="TypeError")throw w;for(var S=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,F=new S,B=0;B<b.length;B+=1)F.append(b[B]);return F.getBlob(C.type)}}typeof Promise>"u"&&n(3);var E=Promise;function k(b,C){C&&b.then(function(S){C(null,S)},function(S){C(S)})}function T(b,C,S){typeof C=="function"&&b.then(C),typeof S=="function"&&b.catch(S)}function O(b){return typeof b!="string"&&(console.warn(b+" used as a key, but it is not a string."),b=String(b)),b}function ue(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var ne="local-forage-detect-blob-support",ve=void 0,X={},me=Object.prototype.toString,be="readonly",W="readwrite";function de(b){for(var C=b.length,S=new ArrayBuffer(C),F=new Uint8Array(S),B=0;B<C;B++)F[B]=b.charCodeAt(B);return S}function ge(b){return new E(function(C){var S=b.transaction(ne,W),F=y([""]);S.objectStore(ne).put(F,"key"),S.onabort=function(B){B.preventDefault(),B.stopPropagation(),C(!1)},S.oncomplete=function(){var B=navigator.userAgent.match(/Chrome\/(\d+)/),w=navigator.userAgent.match(/Edge\//);C(w||!B||parseInt(B[1],10)>=43)}}).catch(function(){return!1})}function Ue(b){return typeof ve=="boolean"?E.resolve(ve):ge(b).then(function(C){return ve=C,ve})}function St(b){var C=X[b.name],S={};S.promise=new E(function(F,B){S.resolve=F,S.reject=B}),C.deferredOperations.push(S),C.dbReady?C.dbReady=C.dbReady.then(function(){return S.promise}):C.dbReady=S.promise}function $t(b){var C=X[b.name],S=C.deferredOperations.pop();if(S)return S.resolve(),S.promise}function Bt(b,C){var S=X[b.name],F=S.deferredOperations.pop();if(F)return F.reject(C),F.promise}function qt(b,C){return new E(function(S,F){if(X[b.name]=X[b.name]||Er(),b.db)if(C)St(b),b.db.close();else return S(b.db);var B=[b.name];C&&B.push(b.version);var w=h.open.apply(h,B);C&&(w.onupgradeneeded=function($){var H=w.result;try{H.createObjectStore(b.storeName),$.oldVersion<=1&&H.createObjectStore(ne)}catch(Y){if(Y.name==="ConstraintError")console.warn('The database "'+b.name+'" has been upgraded from version '+$.oldVersion+" to version "+$.newVersion+', but the storage "'+b.storeName+'" already exists.');else throw Y}}),w.onerror=function($){$.preventDefault(),F(w.error)},w.onsuccess=function(){var $=w.result;$.onversionchange=function(H){H.target.close()},S($),$t(b)}})}function yr(b){return qt(b,!1)}function Ut(b){return qt(b,!0)}function Wr(b,C){if(!b.db)return!0;var S=!b.db.objectStoreNames.contains(b.storeName),F=b.version<b.db.version,B=b.version>b.db.version;if(F&&(b.version!==C&&console.warn('The database "'+b.name+`" can't be downgraded from version `+b.db.version+" to version "+b.version+"."),b.version=b.db.version),B||S){if(S){var w=b.db.version+1;w>b.version&&(b.version=w)}return!0}return!1}function Un(b){return new E(function(C,S){var F=new FileReader;F.onerror=S,F.onloadend=function(B){var w=btoa(B.target.result||"");C({__local_forage_encoded_blob:!0,data:w,type:b.type})},F.readAsBinaryString(b)})}function Ur(b){var C=de(atob(b.data));return y([C],{type:b.type})}function en(b){return b&&b.__local_forage_encoded_blob}function ua(b){var C=this,S=C._initReady().then(function(){var F=X[C._dbInfo.name];if(F&&F.dbReady)return F.dbReady});return T(S,b,b),S}function er(b){St(b);for(var C=X[b.name],S=C.forages,F=0;F<S.length;F++){var B=S[F];B._dbInfo.db&&(B._dbInfo.db.close(),B._dbInfo.db=null)}return b.db=null,yr(b).then(function(w){return b.db=w,Wr(b)?Ut(b):w}).then(function(w){b.db=C.db=w;for(var $=0;$<S.length;$++)S[$]._dbInfo.db=w}).catch(function(w){throw Bt(b,w),w})}function Ht(b,C,S,F){F===void 0&&(F=1);try{var B=b.db.transaction(b.storeName,C);S(null,B)}catch(w){if(F>0&&(!b.db||w.name==="InvalidStateError"||w.name==="NotFoundError"))return E.resolve().then(function(){if(!b.db||w.name==="NotFoundError"&&!b.db.objectStoreNames.contains(b.storeName)&&b.version<=b.db.version)return b.db&&(b.version=b.db.version+1),Ut(b)}).then(function(){return er(b).then(function(){Ht(b,C,S,F-1)})}).catch(S);S(w)}}function Er(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ve(b){var C=this,S={db:null};if(b)for(var F in b)S[F]=b[F];var B=X[S.name];B||(B=Er(),X[S.name]=B),B.forages.push(C),C._initReady||(C._initReady=C.ready,C.ready=ua);var w=[];function $(){return E.resolve()}for(var H=0;H<B.forages.length;H++){var Y=B.forages[H];Y!==C&&w.push(Y._initReady().catch($))}var V=B.forages.slice(0);return E.all(w).then(function(){return S.db=B.db,yr(S)}).then(function(te){return S.db=te,Wr(S,C._defaultConfig.version)?Ut(S):te}).then(function(te){S.db=B.db=te,C._dbInfo=S;for(var pe=0;pe<V.length;pe++){var ze=V[pe];ze!==C&&(ze._dbInfo.db=S.db,ze._dbInfo.version=S.version)}})}function fn(b,C){var S=this;b=O(b);var F=new E(function(B,w){S.ready().then(function(){Ht(S._dbInfo,be,function($,H){if($)return w($);try{var Y=H.objectStore(S._dbInfo.storeName),V=Y.get(b);V.onsuccess=function(){var te=V.result;te===void 0&&(te=null),en(te)&&(te=Ur(te)),B(te)},V.onerror=function(){w(V.error)}}catch(te){w(te)}})}).catch(w)});return k(F,C),F}function eo(b,C){var S=this,F=new E(function(B,w){S.ready().then(function(){Ht(S._dbInfo,be,function($,H){if($)return w($);try{var Y=H.objectStore(S._dbInfo.storeName),V=Y.openCursor(),te=1;V.onsuccess=function(){var pe=V.result;if(pe){var ze=pe.value;en(ze)&&(ze=Ur(ze));var Oe=b(ze,pe.key,te++);Oe!==void 0?B(Oe):pe.continue()}else B()},V.onerror=function(){w(V.error)}}catch(pe){w(pe)}})}).catch(w)});return k(F,C),F}function to(b,C,S){var F=this;b=O(b);var B=new E(function(w,$){var H;F.ready().then(function(){return H=F._dbInfo,me.call(C)==="[object Blob]"?Ue(H.db).then(function(Y){return Y?C:Un(C)}):C}).then(function(Y){Ht(F._dbInfo,W,function(V,te){if(V)return $(V);try{var pe=te.objectStore(F._dbInfo.storeName);Y===null&&(Y=void 0);var ze=pe.put(Y,b);te.oncomplete=function(){Y===void 0&&(Y=null),w(Y)},te.onabort=te.onerror=function(){var Oe=ze.error?ze.error:ze.transaction.error;$(Oe)}}catch(Oe){$(Oe)}})}).catch($)});return k(B,S),B}function Cs(b,C){var S=this;b=O(b);var F=new E(function(B,w){S.ready().then(function(){Ht(S._dbInfo,W,function($,H){if($)return w($);try{var Y=H.objectStore(S._dbInfo.storeName),V=Y.delete(b);H.oncomplete=function(){B()},H.onerror=function(){w(V.error)},H.onabort=function(){var te=V.error?V.error:V.transaction.error;w(te)}}catch(te){w(te)}})}).catch(w)});return k(F,C),F}function Kr(b){var C=this,S=new E(function(F,B){C.ready().then(function(){Ht(C._dbInfo,W,function(w,$){if(w)return B(w);try{var H=$.objectStore(C._dbInfo.storeName),Y=H.clear();$.oncomplete=function(){F()},$.onabort=$.onerror=function(){var V=Y.error?Y.error:Y.transaction.error;B(V)}}catch(V){B(V)}})}).catch(B)});return k(S,b),S}function ro(b){var C=this,S=new E(function(F,B){C.ready().then(function(){Ht(C._dbInfo,be,function(w,$){if(w)return B(w);try{var H=$.objectStore(C._dbInfo.storeName),Y=H.count();Y.onsuccess=function(){F(Y.result)},Y.onerror=function(){B(Y.error)}}catch(V){B(V)}})}).catch(B)});return k(S,b),S}function Tn(b,C){var S=this,F=new E(function(B,w){if(b<0){B(null);return}S.ready().then(function(){Ht(S._dbInfo,be,function($,H){if($)return w($);try{var Y=H.objectStore(S._dbInfo.storeName),V=!1,te=Y.openKeyCursor();te.onsuccess=function(){var pe=te.result;if(!pe){B(null);return}b===0||V?B(pe.key):(V=!0,pe.advance(b))},te.onerror=function(){w(te.error)}}catch(pe){w(pe)}})}).catch(w)});return k(F,C),F}function tn(b){var C=this,S=new E(function(F,B){C.ready().then(function(){Ht(C._dbInfo,be,function(w,$){if(w)return B(w);try{var H=$.objectStore(C._dbInfo.storeName),Y=H.openKeyCursor(),V=[];Y.onsuccess=function(){var te=Y.result;if(!te){F(V);return}V.push(te.key),te.continue()},Y.onerror=function(){B(Y.error)}}catch(te){B(te)}})}).catch(B)});return k(S,b),S}function Ko(b,C){C=ue.apply(this,arguments);var S=this.config();b=typeof b!="function"&&b||{},b.name||(b.name=b.name||S.name,b.storeName=b.storeName||S.storeName);var F=this,B;if(!b.name)B=E.reject("Invalid arguments");else{var w=b.name===S.name&&F._dbInfo.db,$=w?E.resolve(F._dbInfo.db):yr(b).then(function(H){var Y=X[b.name],V=Y.forages;Y.db=H;for(var te=0;te<V.length;te++)V[te]._dbInfo.db=H;return H});b.storeName?B=$.then(function(H){if(!!H.objectStoreNames.contains(b.storeName)){var Y=H.version+1;St(b);var V=X[b.name],te=V.forages;H.close();for(var pe=0;pe<te.length;pe++){var ze=te[pe];ze._dbInfo.db=null,ze._dbInfo.version=Y}var Oe=new E(function(Qe,dt){var pt=h.open(b.name,Y);pt.onerror=function(Lt){var hr=pt.result;hr.close(),dt(Lt)},pt.onupgradeneeded=function(){var Lt=pt.result;Lt.deleteObjectStore(b.storeName)},pt.onsuccess=function(){var Lt=pt.result;Lt.close(),Qe(Lt)}});return Oe.then(function(Qe){V.db=Qe;for(var dt=0;dt<te.length;dt++){var pt=te[dt];pt._dbInfo.db=Qe,$t(pt._dbInfo)}}).catch(function(Qe){throw(Bt(b,Qe)||E.resolve()).catch(function(){}),Qe})}}):B=$.then(function(H){St(b);var Y=X[b.name],V=Y.forages;H.close();for(var te=0;te<V.length;te++){var pe=V[te];pe._dbInfo.db=null}var ze=new E(function(Oe,Qe){var dt=h.deleteDatabase(b.name);dt.onerror=function(){var pt=dt.result;pt&&pt.close(),Qe(dt.error)},dt.onblocked=function(){console.warn('dropInstance blocked for database "'+b.name+'" until all open connections are closed')},dt.onsuccess=function(){var pt=dt.result;pt&&pt.close(),Oe(pt)}});return ze.then(function(Oe){Y.db=Oe;for(var Qe=0;Qe<V.length;Qe++){var dt=V[Qe];$t(dt._dbInfo)}}).catch(function(Oe){throw(Bt(b,Oe)||E.resolve()).catch(function(){}),Oe})})}return k(B,C),B}var su={_driver:"asyncStorage",_initStorage:Ve,_support:m(),iterate:eo,getItem:fn,setItem:to,removeItem:Cs,clear:Kr,length:ro,key:Tn,keys:tn,dropInstance:Ko};function Kn(){return typeof openDatabase=="function"}var Fn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",au="~~local_forage_type~",ln=/^~~local_forage_type~([^~]+)~/,lr="__lfsc__:",ni=lr.length,ii="arbf",$o="blob",xn="si08",K="ui08",G="uic8",fe="si16",_e="si32",$e="ur16",sr="ui32",tt="fl32",ut="fl64",He=ni+ii.length,mt=Object.prototype.toString;function ht(b){var C=b.length*.75,S=b.length,F,B=0,w,$,H,Y;b[b.length-1]==="="&&(C--,b[b.length-2]==="="&&C--);var V=new ArrayBuffer(C),te=new Uint8Array(V);for(F=0;F<S;F+=4)w=Fn.indexOf(b[F]),$=Fn.indexOf(b[F+1]),H=Fn.indexOf(b[F+2]),Y=Fn.indexOf(b[F+3]),te[B++]=w<<2|$>>4,te[B++]=($&15)<<4|H>>2,te[B++]=(H&3)<<6|Y&63;return V}function Cr(b){var C=new Uint8Array(b),S="",F;for(F=0;F<C.length;F+=3)S+=Fn[C[F]>>2],S+=Fn[(C[F]&3)<<4|C[F+1]>>4],S+=Fn[(C[F+1]&15)<<2|C[F+2]>>6],S+=Fn[C[F+2]&63];return C.length%3===2?S=S.substring(0,S.length-1)+"=":C.length%3===1&&(S=S.substring(0,S.length-2)+"=="),S}function zo(b,C){var S="";if(b&&(S=mt.call(b)),b&&(S==="[object ArrayBuffer]"||b.buffer&&mt.call(b.buffer)==="[object ArrayBuffer]")){var F,B=lr;b instanceof ArrayBuffer?(F=b,B+=ii):(F=b.buffer,S==="[object Int8Array]"?B+=xn:S==="[object Uint8Array]"?B+=K:S==="[object Uint8ClampedArray]"?B+=G:S==="[object Int16Array]"?B+=fe:S==="[object Uint16Array]"?B+=$e:S==="[object Int32Array]"?B+=_e:S==="[object Uint32Array]"?B+=sr:S==="[object Float32Array]"?B+=tt:S==="[object Float64Array]"?B+=ut:C(new Error("Failed to get type for BinaryArray"))),C(B+Cr(F))}else if(S==="[object Blob]"){var w=new FileReader;w.onload=function(){var $=au+b.type+"~"+Cr(this.result);C(lr+$o+$)},w.readAsArrayBuffer(b)}else try{C(JSON.stringify(b))}catch($){console.error("Couldn't convert value into a JSON string: ",b),C(null,$)}}function ca(b){if(b.substring(0,ni)!==lr)return JSON.parse(b);var C=b.substring(He),S=b.substring(ni,He),F;if(S===$o&&ln.test(C)){var B=C.match(ln);F=B[1],C=C.substring(B[0].length)}var w=ht(C);switch(S){case ii:return w;case $o:return y([w],{type:F});case xn:return new Int8Array(w);case K:return new Uint8Array(w);case G:return new Uint8ClampedArray(w);case fe:return new Int16Array(w);case $e:return new Uint16Array(w);case _e:return new Int32Array(w);case sr:return new Uint32Array(w);case tt:return new Float32Array(w);case ut:return new Float64Array(w);default:throw new Error("Unkown type: "+S)}}var jo={serialize:zo,deserialize:ca,stringToBuffer:ht,bufferToString:Cr};function fa(b,C,S,F){b.executeSql("CREATE TABLE IF NOT EXISTS "+C.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],S,F)}function Ec(b){var C=this,S={db:null};if(b)for(var F in b)S[F]=typeof b[F]!="string"?b[F].toString():b[F];var B=new E(function(w,$){try{S.db=openDatabase(S.name,String(S.version),S.description,S.size)}catch(H){return $(H)}S.db.transaction(function(H){fa(H,S,function(){C._dbInfo=S,w()},function(Y,V){$(V)})},$)});return S.serializer=jo,B}function no(b,C,S,F,B,w){b.executeSql(S,F,B,function($,H){H.code===H.SYNTAX_ERR?$.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[C.storeName],function(Y,V){V.rows.length?w(Y,H):fa(Y,C,function(){Y.executeSql(S,F,B,w)},w)},w):w($,H)},w)}function Yh(b,C){var S=this;b=O(b);var F=new E(function(B,w){S.ready().then(function(){var $=S._dbInfo;$.db.transaction(function(H){no(H,$,"SELECT * FROM "+$.storeName+" WHERE key = ? LIMIT 1",[b],function(Y,V){var te=V.rows.length?V.rows.item(0).value:null;te&&(te=$.serializer.deserialize(te)),B(te)},function(Y,V){w(V)})})}).catch(w)});return k(F,C),F}function vi(b,C){var S=this,F=new E(function(B,w){S.ready().then(function(){var $=S._dbInfo;$.db.transaction(function(H){no(H,$,"SELECT * FROM "+$.storeName,[],function(Y,V){for(var te=V.rows,pe=te.length,ze=0;ze<pe;ze++){var Oe=te.item(ze),Qe=Oe.value;if(Qe&&(Qe=$.serializer.deserialize(Qe)),Qe=b(Qe,Oe.key,ze+1),Qe!==void 0){B(Qe);return}}B()},function(Y,V){w(V)})})}).catch(w)});return k(F,C),F}function io(b,C,S,F){var B=this;b=O(b);var w=new E(function($,H){B.ready().then(function(){C===void 0&&(C=null);var Y=C,V=B._dbInfo;V.serializer.serialize(C,function(te,pe){pe?H(pe):V.db.transaction(function(ze){no(ze,V,"INSERT OR REPLACE INTO "+V.storeName+" (key, value) VALUES (?, ?)",[b,te],function(){$(Y)},function(Oe,Qe){H(Qe)})},function(ze){if(ze.code===ze.QUOTA_ERR){if(F>0){$(io.apply(B,[b,Y,S,F-1]));return}H(ze)}})})}).catch(H)});return k(w,S),w}function qo(b,C,S){return io.apply(this,[b,C,S,1])}function Ac(b,C){var S=this;b=O(b);var F=new E(function(B,w){S.ready().then(function(){var $=S._dbInfo;$.db.transaction(function(H){no(H,$,"DELETE FROM "+$.storeName+" WHERE key = ?",[b],function(){B()},function(Y,V){w(V)})})}).catch(w)});return k(F,C),F}function Sc(b){var C=this,S=new E(function(F,B){C.ready().then(function(){var w=C._dbInfo;w.db.transaction(function($){no($,w,"DELETE FROM "+w.storeName,[],function(){F()},function(H,Y){B(Y)})})}).catch(B)});return k(S,b),S}function el(b){var C=this,S=new E(function(F,B){C.ready().then(function(){var w=C._dbInfo;w.db.transaction(function($){no($,w,"SELECT COUNT(key) as c FROM "+w.storeName,[],function(H,Y){var V=Y.rows.item(0).c;F(V)},function(H,Y){B(Y)})})}).catch(B)});return k(S,b),S}function Pc(b,C){var S=this,F=new E(function(B,w){S.ready().then(function(){var $=S._dbInfo;$.db.transaction(function(H){no(H,$,"SELECT key FROM "+$.storeName+" WHERE id = ? LIMIT 1",[b+1],function(Y,V){var te=V.rows.length?V.rows.item(0).key:null;B(te)},function(Y,V){w(V)})})}).catch(w)});return k(F,C),F}function En(b){var C=this,S=new E(function(F,B){C.ready().then(function(){var w=C._dbInfo;w.db.transaction(function($){no($,w,"SELECT key FROM "+w.storeName,[],function(H,Y){for(var V=[],te=0;te<Y.rows.length;te++)V.push(Y.rows.item(te).key);F(V)},function(H,Y){B(Y)})})}).catch(B)});return k(S,b),S}function uu(b){return new E(function(C,S){b.transaction(function(F){F.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(B,w){for(var $=[],H=0;H<w.rows.length;H++)$.push(w.rows.item(H).name);C({db:b,storeNames:$})},function(B,w){S(w)})},function(F){S(F)})})}function g(b,C){C=ue.apply(this,arguments);var S=this.config();b=typeof b!="function"&&b||{},b.name||(b.name=b.name||S.name,b.storeName=b.storeName||S.storeName);var F=this,B;return b.name?B=new E(function(w){var $;b.name===S.name?$=F._dbInfo.db:$=openDatabase(b.name,"","",0),b.storeName?w({db:$,storeNames:[b.storeName]}):w(uu($))}).then(function(w){return new E(function($,H){w.db.transaction(function(Y){function V(Oe){return new E(function(Qe,dt){Y.executeSql("DROP TABLE IF EXISTS "+Oe,[],function(){Qe()},function(pt,Lt){dt(Lt)})})}for(var te=[],pe=0,ze=w.storeNames.length;pe<ze;pe++)te.push(V(w.storeNames[pe]));E.all(te).then(function(){$()}).catch(function(Oe){H(Oe)})},function(Y){H(Y)})})}):B=E.reject("Invalid arguments"),k(B,C),B}var x={_driver:"webSQLStorage",_initStorage:Ec,_support:Kn(),iterate:vi,getItem:Yh,setItem:qo,removeItem:Ac,clear:Sc,length:el,key:Pc,keys:En,dropInstance:g};function _(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function d(b,C){var S=b.name+"/";return b.storeName!==C.storeName&&(S+=b.storeName+"/"),S}function D(){var b="_localforage_support_test";try{return localStorage.setItem(b,!0),localStorage.removeItem(b),!1}catch{return!0}}function R(){return!D()||localStorage.length>0}function U(b){var C=this,S={};if(b)for(var F in b)S[F]=b[F];return S.keyPrefix=d(b,C._defaultConfig),R()?(C._dbInfo=S,S.serializer=jo,E.resolve()):E.reject()}function oe(b){var C=this,S=C.ready().then(function(){for(var F=C._dbInfo.keyPrefix,B=localStorage.length-1;B>=0;B--){var w=localStorage.key(B);w.indexOf(F)===0&&localStorage.removeItem(w)}});return k(S,b),S}function ye(b,C){var S=this;b=O(b);var F=S.ready().then(function(){var B=S._dbInfo,w=localStorage.getItem(B.keyPrefix+b);return w&&(w=B.serializer.deserialize(w)),w});return k(F,C),F}function Ke(b,C){var S=this,F=S.ready().then(function(){for(var B=S._dbInfo,w=B.keyPrefix,$=w.length,H=localStorage.length,Y=1,V=0;V<H;V++){var te=localStorage.key(V);if(te.indexOf(w)===0){var pe=localStorage.getItem(te);if(pe&&(pe=B.serializer.deserialize(pe)),pe=b(pe,te.substring($),Y++),pe!==void 0)return pe}}});return k(F,C),F}function Se(b,C){var S=this,F=S.ready().then(function(){var B=S._dbInfo,w;try{w=localStorage.key(b)}catch{w=null}return w&&(w=w.substring(B.keyPrefix.length)),w});return k(F,C),F}function Ct(b){var C=this,S=C.ready().then(function(){for(var F=C._dbInfo,B=localStorage.length,w=[],$=0;$<B;$++){var H=localStorage.key($);H.indexOf(F.keyPrefix)===0&&w.push(H.substring(F.keyPrefix.length))}return w});return k(S,b),S}function Te(b){var C=this,S=C.keys().then(function(F){return F.length});return k(S,b),S}function rt(b,C){var S=this;b=O(b);var F=S.ready().then(function(){var B=S._dbInfo;localStorage.removeItem(B.keyPrefix+b)});return k(F,C),F}function ot(b,C,S){var F=this;b=O(b);var B=F.ready().then(function(){C===void 0&&(C=null);var w=C;return new E(function($,H){var Y=F._dbInfo;Y.serializer.serialize(C,function(V,te){if(te)H(te);else try{localStorage.setItem(Y.keyPrefix+b,V),$(w)}catch(pe){(pe.name==="QuotaExceededError"||pe.name==="NS_ERROR_DOM_QUOTA_REACHED")&&H(pe),H(pe)}})})});return k(B,S),B}function ct(b,C){if(C=ue.apply(this,arguments),b=typeof b!="function"&&b||{},!b.name){var S=this.config();b.name=b.name||S.name,b.storeName=b.storeName||S.storeName}var F=this,B;return b.name?B=new E(function(w){b.storeName?w(d(b,F._defaultConfig)):w(b.name+"/")}).then(function(w){for(var $=localStorage.length-1;$>=0;$--){var H=localStorage.key($);H.indexOf(w)===0&&localStorage.removeItem(H)}}):B=E.reject("Invalid arguments"),k(B,C),B}var lt={_driver:"localStorageWrapper",_initStorage:U,_support:_(),iterate:Ke,getItem:ye,setItem:ot,removeItem:rt,clear:oe,length:Te,key:Se,keys:Ct,dropInstance:ct},et=function(C,S){return C===S||typeof C=="number"&&typeof S=="number"&&isNaN(C)&&isNaN(S)},ft=function(C,S){for(var F=C.length,B=0;B<F;){if(et(C[B],S))return!0;B++}return!1},nt=Array.isArray||function(b){return Object.prototype.toString.call(b)==="[object Array]"},Ce={},qe={},xe={INDEXEDDB:su,WEBSQL:x,LOCALSTORAGE:lt},Be=[xe.INDEXEDDB._driver,xe.WEBSQL._driver,xe.LOCALSTORAGE._driver],Le=["dropInstance"],Ee=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Le),z={description:"",driver:Be.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function j(b,C){b[C]=function(){var S=arguments;return b.ready().then(function(){return b[C].apply(b,S)})}}function ce(){for(var b=1;b<arguments.length;b++){var C=arguments[b];if(C)for(var S in C)C.hasOwnProperty(S)&&(nt(C[S])?arguments[0][S]=C[S].slice():arguments[0][S]=C[S])}return arguments[0]}var re=function(){function b(C){c(this,b);for(var S in xe)if(xe.hasOwnProperty(S)){var F=xe[S],B=F._driver;this[S]=B,Ce[B]||this.defineDriver(F)}this._defaultConfig=ce({},z),this._config=ce({},this._defaultConfig,C),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return b.prototype.config=function(S){if((typeof S>"u"?"undefined":a(S))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var F in S){if(F==="storeName"&&(S[F]=S[F].replace(/\W/g,"_")),F==="version"&&typeof S[F]!="number")return new Error("Database version must be a number.");this._config[F]=S[F]}return"driver"in S&&S.driver?this.setDriver(this._config.driver):!0}else return typeof S=="string"?this._config[S]:this._config},b.prototype.defineDriver=function(S,F,B){var w=new E(function($,H){try{var Y=S._driver,V=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!S._driver){H(V);return}for(var te=Ee.concat("_initStorage"),pe=0,ze=te.length;pe<ze;pe++){var Oe=te[pe],Qe=!ft(Le,Oe);if((Qe||S[Oe])&&typeof S[Oe]!="function"){H(V);return}}var dt=function(){for(var hr=function(rb){return function(){var Lm=new Error("Method "+rb+" is not implemented by the current driver"),Om=E.reject(Lm);return k(Om,arguments[arguments.length-1]),Om}},Ar=0,$r=Le.length;Ar<$r;Ar++){var Jh=Le[Ar];S[Jh]||(S[Jh]=hr(Jh))}};dt();var pt=function(hr){Ce[Y]&&console.info("Redefining LocalForage driver: "+Y),Ce[Y]=S,qe[Y]=hr,$()};"_support"in S?S._support&&typeof S._support=="function"?S._support().then(pt,H):pt(!!S._support):pt(!0)}catch(Lt){H(Lt)}});return T(w,F,B),w},b.prototype.driver=function(){return this._driver||null},b.prototype.getDriver=function(S,F,B){var w=Ce[S]?E.resolve(Ce[S]):E.reject(new Error("Driver not found."));return T(w,F,B),w},b.prototype.getSerializer=function(S){var F=E.resolve(jo);return T(F,S),F},b.prototype.ready=function(S){var F=this,B=F._driverSet.then(function(){return F._ready===null&&(F._ready=F._initDriver()),F._ready});return T(B,S,S),B},b.prototype.setDriver=function(S,F,B){var w=this;nt(S)||(S=[S]);var $=this._getSupportedDrivers(S);function H(){w._config.driver=w.driver()}function Y(pe){return w._extend(pe),H(),w._ready=w._initStorage(w._config),w._ready}function V(pe){return function(){var ze=0;function Oe(){for(;ze<pe.length;){var Qe=pe[ze];return ze++,w._dbInfo=null,w._ready=null,w.getDriver(Qe).then(Y).catch(Oe)}H();var dt=new Error("No available storage method found.");return w._driverSet=E.reject(dt),w._driverSet}return Oe()}}var te=this._driverSet!==null?this._driverSet.catch(function(){return E.resolve()}):E.resolve();return this._driverSet=te.then(function(){var pe=$[0];return w._dbInfo=null,w._ready=null,w.getDriver(pe).then(function(ze){w._driver=ze._driver,H(),w._wrapLibraryMethodsWithReady(),w._initDriver=V($)})}).catch(function(){H();var pe=new Error("No available storage method found.");return w._driverSet=E.reject(pe),w._driverSet}),T(this._driverSet,F,B),this._driverSet},b.prototype.supports=function(S){return!!qe[S]},b.prototype._extend=function(S){ce(this,S)},b.prototype._getSupportedDrivers=function(S){for(var F=[],B=0,w=S.length;B<w;B++){var $=S[B];this.supports($)&&F.push($)}return F},b.prototype._wrapLibraryMethodsWithReady=function(){for(var S=0,F=Ee.length;S<F;S++)j(this,Ee[S])},b.prototype.createInstance=function(S){return new b(S)},b}(),ie=new re;i.exports=ie},{3:3}]},{},[4])(4)})});var pv={};Re(pv,{concat:()=>pn});function pn(r,e){e||(e=r.reduce((i,o)=>i+o.length,0));let t=new Uint8Array(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return t}var Kc=Qt(()=>{});var qS={};Re(qS,{equals:()=>$c});function $c(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}var wd=Qt(()=>{});function gK(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),a=o.charCodeAt(0);if(t[a]!==255)throw new TypeError(o+" is ambiguous");t[a]=i}var c=r.length,l=r.charAt(0),h=Math.log(c)/Math.log(256),m=Math.log(256)/Math.log(c);function y(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length===0)return"";for(var O=0,ue=0,ne=0,ve=T.length;ne!==ve&&T[ne]===0;)ne++,O++;for(var X=(ve-ne)*m+1>>>0,me=new Uint8Array(X);ne!==ve;){for(var be=T[ne],W=0,de=X-1;(be!==0||W<ue)&&de!==-1;de--,W++)be+=256*me[de]>>>0,me[de]=be%c>>>0,be=be/c>>>0;if(be!==0)throw new Error("Non-zero carry");ue=W,ne++}for(var ge=X-ue;ge!==X&&me[ge]===0;)ge++;for(var Ue=l.repeat(O);ge<X;++ge)Ue+=r.charAt(me[ge]);return Ue}function E(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return new Uint8Array;var O=0;if(T[O]!==" "){for(var ue=0,ne=0;T[O]===l;)ue++,O++;for(var ve=(T.length-O)*h+1>>>0,X=new Uint8Array(ve);T[O];){var me=t[T.charCodeAt(O)];if(me===255)return;for(var be=0,W=ve-1;(me!==0||be<ne)&&W!==-1;W--,be++)me+=c*X[W]>>>0,X[W]=me%256>>>0,me=me/256>>>0;if(me!==0)throw new Error("Non-zero carry");ne=be,O++}if(T[O]!==" "){for(var de=ve-ne;de!==ve&&X[de]===0;)de++;for(var ge=new Uint8Array(ue+(ve-de)),Ue=ue;de!==ve;)ge[Ue++]=X[de++];return ge}}}function k(T){var O=E(T);if(O)return O;throw new Error(`Non-${e} character`)}return{encode:y,decodeUnsafe:E,decode:k}}var wK,bK,HS,WS=Qt(()=>{wK=gK,bK=wK,HS=bK});var gZ,VS,Xo,GS,YS,vu=Qt(()=>{gZ=new Uint8Array(0),VS=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},Xo=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},GS=r=>new TextEncoder().encode(r),YS=r=>new TextDecoder().decode(r)});var yv,gv,wv,JS,bv,Ay,_u,vK,_K,Ir,Fs=Qt(()=>{WS();vu();yv=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},gv=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseDecode=n}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){return JS(this,e)}},wv=class{constructor(e){this.decoders=e}or(e){return JS(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},JS=(r,e)=>new wv({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),bv=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new yv(e,t,n),this.decoder=new gv(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Ay=({name:r,prefix:e,encode:t,decode:n})=>new bv(r,e,t,n),_u=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=HS(t,e);return Ay({prefix:r,name:e,encode:n,decode:o=>Xo(i(o))})},vK=(r,e,t,n)=>{let i={};for(let m=0;m<e.length;++m)i[e[m]]=m;let o=r.length;for(;r[o-1]==="=";)--o;let a=new Uint8Array(o*t/8|0),c=0,l=0,h=0;for(let m=0;m<o;++m){let y=i[r[m]];if(y===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<t|y,c+=t,c>=8&&(c-=8,a[h++]=255&l>>c)}if(c>=t||255&l<<8-c)throw new SyntaxError("Unexpected end of data");return a},_K=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",a=0,c=0;for(let l=0;l<r.length;++l)for(c=c<<8|r[l],a+=8;a>t;)a-=t,o+=e[i&c>>a];if(a&&(o+=e[i&c<<t-a]),n)for(;o.length*t&7;)o+="=";return o},Ir=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Ay({prefix:e,name:r,encode(i){return _K(i,n,t)},decode(i){return vK(i,n,t,r)}})});var vv={};Re(vv,{identity:()=>xK});var xK,XS=Qt(()=>{Fs();vu();xK=Ay({prefix:"\0",name:"identity",encode:r=>YS(r),decode:r=>GS(r)})});var _v={};Re(_v,{base2:()=>EK});var EK,QS=Qt(()=>{Fs();EK=Ir({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var xv={};Re(xv,{base8:()=>AK});var AK,ZS=Qt(()=>{Fs();AK=Ir({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var Ev={};Re(Ev,{base10:()=>SK});var SK,eP=Qt(()=>{Fs();SK=_u({prefix:"9",name:"base10",alphabet:"0123456789"})});var Av={};Re(Av,{base16:()=>PK,base16upper:()=>DK});var PK,DK,tP=Qt(()=>{Fs();PK=Ir({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),DK=Ir({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var Sy={};Re(Sy,{base32:()=>Vt,base32hex:()=>IK,base32hexpad:()=>FK,base32hexpadupper:()=>BK,base32hexupper:()=>TK,base32pad:()=>Sv,base32padupper:()=>kK,base32upper:()=>CK,base32z:()=>LK});var Vt,CK,Sv,kK,IK,TK,FK,BK,LK,Qo=Qt(()=>{Fs();Vt=Ir({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),CK=Ir({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Sv=Ir({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),kK=Ir({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),IK=Ir({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),TK=Ir({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),FK=Ir({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),BK=Ir({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),LK=Ir({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var Pv={};Re(Pv,{base36:()=>OK,base36upper:()=>NK});var OK,NK,rP=Qt(()=>{Fs();OK=_u({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),NK=_u({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var bd={};Re(bd,{base58btc:()=>Pn,base58flickr:()=>RK});var Pn,RK,xu=Qt(()=>{Fs();Pn=_u({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),RK=_u({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var Dv={};Re(Dv,{base64:()=>MK,base64pad:()=>UK,base64url:()=>KK,base64urlpad:()=>$K});var MK,UK,KK,$K,nP=Qt(()=>{Fs();MK=Ir({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),UK=Ir({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),KK=Ir({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),$K=Ir({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});function sP(r,e,t){e=e||[],t=t||0;for(var n=t;r>=HK;)e[t++]=r&255|iP,r/=128;for(;r&qK;)e[t++]=r&255|iP,r>>>=7;return e[t]=r|0,sP.bytes=t-n+1,e}function Cv(r,n){var t=0,n=n||0,i=0,o=n,a,c=r.length;do{if(o>=c)throw Cv.bytes=0,new RangeError("Could not decode varint");a=r[o++],t+=i<28?(a&oP)<<i:(a&oP)*Math.pow(2,i),i+=7}while(a>=VK);return Cv.bytes=o-n,t}var zK,iP,jK,qK,HK,WK,VK,oP,GK,YK,JK,XK,QK,ZK,e$,t$,r$,n$,i$,o$,vd,aP=Qt(()=>{zK=sP,iP=128,jK=127,qK=~jK,HK=Math.pow(2,31);WK=Cv,VK=128,oP=127;GK=Math.pow(2,7),YK=Math.pow(2,14),JK=Math.pow(2,21),XK=Math.pow(2,28),QK=Math.pow(2,35),ZK=Math.pow(2,42),e$=Math.pow(2,49),t$=Math.pow(2,56),r$=Math.pow(2,63),n$=function(r){return r<GK?1:r<YK?2:r<JK?3:r<XK?4:r<QK?5:r<ZK?6:r<e$?7:r<t$?8:r<r$?9:10},i$={encode:zK,decode:WK,encodingLength:n$},o$=i$,vd=o$});var _d,gl,wl,Dy=Qt(()=>{aP();_d=r=>[vd.decode(r),vd.decode.bytes],gl=(r,e,t=0)=>(vd.encode(r,e,t),e),wl=r=>vd.encodingLength(r)});var po={};Re(po,{Digest:()=>zc,create:()=>Eu,decode:()=>Ci,equals:()=>kv});var Eu,Ci,kv,zc,Zo=Qt(()=>{vu();Dy();Eu=(r,e)=>{let t=e.byteLength,n=wl(r),i=n+wl(t),o=new Uint8Array(i+t);return gl(r,o,0),gl(t,o,n),o.set(e,i),new zc(r,t,e,o)},Ci=r=>{let e=Xo(r),[t,n]=_d(e),[i,o]=_d(e.subarray(n)),a=e.subarray(n+o);if(a.byteLength!==i)throw new Error("Incorrect length");return new zc(t,i,a,e)},kv=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&VS(r.bytes,e.bytes),zc=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}}});var Tv,Iv,Fv=Qt(()=>{Zo();Tv=({name:r,code:e,encode:t})=>new Iv(r,e,t),Iv=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?Eu(this.code,t):t.then(n=>Eu(this.code,n))}else throw Error("Unknown type, must be binary type")}}});var Bv={};Re(Bv,{sha256:()=>bl,sha512:()=>s$});var cP,bl,s$,Cy=Qt(()=>{Fv();cP=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),bl=Tv({name:"sha2-256",code:18,encode:cP("SHA-256")}),s$=Tv({name:"sha2-512",code:19,encode:cP("SHA-512")})});var Ov={};Re(Ov,{identity:()=>Lv});var fP,a$,lP,u$,Lv,Nv=Qt(()=>{vu();Zo();fP=0,a$="identity",lP=Xo,u$=r=>Eu(fP,lP(r)),Lv={code:fP,name:a$,encode:lP,digest:u$}});var Ls={};Re(Ls,{code:()=>Bs,decode:()=>f$,encode:()=>c$,name:()=>Rv});var Rv,Bs,c$,f$,jc=Qt(()=>{vu();Rv="raw",Bs=85,c$=r=>Xo(r),f$=r=>Xo(r)});var RZ,MZ,hP=Qt(()=>{RZ=new TextEncoder,MZ=new TextDecoder});var Mv={};Re(Mv,{CID:()=>we});var we,h$,d$,p$,xd,m$,dP,pP,ky,Iy,y$,g$,w$,ur=Qt(()=>{Dy();Zo();xu();Qo();vu();we=class{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Iy,byteLength:Iy,code:ky,version:ky,multihash:ky,bytes:ky,_baseCache:Iy,asCID:Iy})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==xd)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==m$)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return we.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=Eu(e,t);return we.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&kv(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:i}=this;switch(n){case 0:return d$(t,i,e||Pn.encoder);default:return p$(t,i,e||Vt.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return g$(/^0\.0/,w$),!!(e&&(e[pP]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof we)return e;if(e!=null&&e.asCID===e){let{version:t,code:n,multihash:i,bytes:o}=e;return new we(t,n,i,o||dP(t,n,i.bytes))}else if(e!=null&&e[pP]===!0){let{version:t,multihash:n,code:i}=e,o=Ci(n);return we.create(t,i,o)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==xd)throw new Error(`Version 0 CID must use dag-pb (code: ${xd}) block encoding`);return new we(e,t,n,n.bytes)}case 1:{let i=dP(e,t,n.bytes);return new we(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return we.create(0,xd,e)}static createV1(e,t){return we.create(1,e,t)}static decode(e){let[t,n]=we.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=we.inspectBytes(e),n=t.size-t.multihashSize,i=Xo(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),a=new zc(t.multihashCode,t.digestSize,o,i);return[t.version===0?we.createV0(a):we.createV1(t.codec,a),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[y,E]=_d(e.subarray(t));return t+=E,y},i=n(),o=xd;if(i===18?(i=0,t=0):i===1&&(o=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let a=t,c=n(),l=n(),h=t+l,m=h-a;return{version:i,codec:o,multihashCode:c,digestSize:l,multihashSize:m,size:h}}static parse(e,t){let[n,i]=h$(e,t),o=we.decode(i);return o._baseCache.set(n,e),o}},h$=(r,e)=>{switch(r[0]){case"Q":{let t=e||Pn;return[Pn.prefix,t.decode(`${Pn.prefix}${r}`)]}case Pn.prefix:{let t=e||Pn;return[Pn.prefix,t.decode(r)]}case Vt.prefix:{let t=e||Vt;return[Vt.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},d$=(r,e,t)=>{let{prefix:n}=t;if(n!==Pn.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i},p$=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i},xd=112,m$=18,dP=(r,e,t)=>{let n=wl(r),i=n+wl(e),o=new Uint8Array(i+t.byteLength);return gl(r,o,0),gl(e,o,n),o.set(t,i),o},pP=Symbol.for("@ipld/js-cid/CID"),ky={writable:!1,configurable:!1,enumerable:!0},Iy={writable:!1,enumerable:!1,configurable:!1},y$="0.0.0-dev",g$=(r,e)=>{if(r.test(y$))console.warn(e);else throw new Error(e)},w$=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var Ed=Qt(()=>{ur();Dy();vu();Fv();Zo()});var Uv,HZ,mP=Qt(()=>{XS();QS();ZS();eP();tP();Qo();rP();xu();nP();Cy();Nv();jc();hP();Ed();Uv={...vv,..._v,...xv,...Ev,...Av,...Sy,...Pv,...bd,...Dv},HZ={...Bv,...Ov}});function gP(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var yP,Kv,b$,Ty,$v=Qt(()=>{mP();yP=gP("utf8","u",r=>{let e=new TextDecoder("utf8");return"u"+e.decode(r)},r=>new TextEncoder().encode(r.substring(1))),Kv=gP("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),b$={utf8:yP,"utf-8":yP,hex:Uv.base16,latin1:Kv,ascii:Kv,binary:Kv,...Uv},Ty=b$});var wP={};Re(wP,{fromString:()=>wt});function wt(r,e="utf8"){let t=Ty[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return t.decoder.decode(`${t.prefix}${r}`)}var mo=Qt(()=>{$v()});var Ad={};Re(Ad,{toString:()=>Ze});function Ze(r,e="utf8"){let t=Ty[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return t.encoder.encode(r).substring(1)}var Dn=Qt(()=>{$v()});var i_=ee(()=>{});var MP=ee((zee,Gy)=>{(function(r){"use strict";var e=function(g){var x,_=new Float64Array(16);if(g)for(x=0;x<g.length;x++)_[x]=g[x];return _},t=function(){throw new Error("no PRNG")},n=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var o=e(),a=e([1]),c=e([56129,1]),l=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),m=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),y=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),E=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function k(g,x,_,d){g[x]=_>>24&255,g[x+1]=_>>16&255,g[x+2]=_>>8&255,g[x+3]=_&255,g[x+4]=d>>24&255,g[x+5]=d>>16&255,g[x+6]=d>>8&255,g[x+7]=d&255}function T(g,x,_,d,D){var R,U=0;for(R=0;R<D;R++)U|=g[x+R]^_[d+R];return(1&U-1>>>8)-1}function O(g,x,_,d){return T(g,x,_,d,16)}function ue(g,x,_,d){return T(g,x,_,d,32)}function ne(g,x,_,d){for(var D=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,R=_[0]&255|(_[1]&255)<<8|(_[2]&255)<<16|(_[3]&255)<<24,U=_[4]&255|(_[5]&255)<<8|(_[6]&255)<<16|(_[7]&255)<<24,oe=_[8]&255|(_[9]&255)<<8|(_[10]&255)<<16|(_[11]&255)<<24,ye=_[12]&255|(_[13]&255)<<8|(_[14]&255)<<16|(_[15]&255)<<24,Ke=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,Se=x[0]&255|(x[1]&255)<<8|(x[2]&255)<<16|(x[3]&255)<<24,Ct=x[4]&255|(x[5]&255)<<8|(x[6]&255)<<16|(x[7]&255)<<24,Te=x[8]&255|(x[9]&255)<<8|(x[10]&255)<<16|(x[11]&255)<<24,rt=x[12]&255|(x[13]&255)<<8|(x[14]&255)<<16|(x[15]&255)<<24,ot=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,ct=_[16]&255|(_[17]&255)<<8|(_[18]&255)<<16|(_[19]&255)<<24,lt=_[20]&255|(_[21]&255)<<8|(_[22]&255)<<16|(_[23]&255)<<24,et=_[24]&255|(_[25]&255)<<8|(_[26]&255)<<16|(_[27]&255)<<24,ft=_[28]&255|(_[29]&255)<<8|(_[30]&255)<<16|(_[31]&255)<<24,nt=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24,Ce=D,qe=R,xe=U,Be=oe,Le=ye,Ee=Ke,z=Se,j=Ct,ce=Te,re=rt,ie=ot,b=ct,C=lt,S=et,F=ft,B=nt,w,$=0;$<20;$+=2)w=Ce+C|0,Le^=w<<7|w>>>32-7,w=Le+Ce|0,ce^=w<<9|w>>>32-9,w=ce+Le|0,C^=w<<13|w>>>32-13,w=C+ce|0,Ce^=w<<18|w>>>32-18,w=Ee+qe|0,re^=w<<7|w>>>32-7,w=re+Ee|0,S^=w<<9|w>>>32-9,w=S+re|0,qe^=w<<13|w>>>32-13,w=qe+S|0,Ee^=w<<18|w>>>32-18,w=ie+z|0,F^=w<<7|w>>>32-7,w=F+ie|0,xe^=w<<9|w>>>32-9,w=xe+F|0,z^=w<<13|w>>>32-13,w=z+xe|0,ie^=w<<18|w>>>32-18,w=B+b|0,Be^=w<<7|w>>>32-7,w=Be+B|0,j^=w<<9|w>>>32-9,w=j+Be|0,b^=w<<13|w>>>32-13,w=b+j|0,B^=w<<18|w>>>32-18,w=Ce+Be|0,qe^=w<<7|w>>>32-7,w=qe+Ce|0,xe^=w<<9|w>>>32-9,w=xe+qe|0,Be^=w<<13|w>>>32-13,w=Be+xe|0,Ce^=w<<18|w>>>32-18,w=Ee+Le|0,z^=w<<7|w>>>32-7,w=z+Ee|0,j^=w<<9|w>>>32-9,w=j+z|0,Le^=w<<13|w>>>32-13,w=Le+j|0,Ee^=w<<18|w>>>32-18,w=ie+re|0,b^=w<<7|w>>>32-7,w=b+ie|0,ce^=w<<9|w>>>32-9,w=ce+b|0,re^=w<<13|w>>>32-13,w=re+ce|0,ie^=w<<18|w>>>32-18,w=B+F|0,C^=w<<7|w>>>32-7,w=C+B|0,S^=w<<9|w>>>32-9,w=S+C|0,F^=w<<13|w>>>32-13,w=F+S|0,B^=w<<18|w>>>32-18;Ce=Ce+D|0,qe=qe+R|0,xe=xe+U|0,Be=Be+oe|0,Le=Le+ye|0,Ee=Ee+Ke|0,z=z+Se|0,j=j+Ct|0,ce=ce+Te|0,re=re+rt|0,ie=ie+ot|0,b=b+ct|0,C=C+lt|0,S=S+et|0,F=F+ft|0,B=B+nt|0,g[0]=Ce>>>0&255,g[1]=Ce>>>8&255,g[2]=Ce>>>16&255,g[3]=Ce>>>24&255,g[4]=qe>>>0&255,g[5]=qe>>>8&255,g[6]=qe>>>16&255,g[7]=qe>>>24&255,g[8]=xe>>>0&255,g[9]=xe>>>8&255,g[10]=xe>>>16&255,g[11]=xe>>>24&255,g[12]=Be>>>0&255,g[13]=Be>>>8&255,g[14]=Be>>>16&255,g[15]=Be>>>24&255,g[16]=Le>>>0&255,g[17]=Le>>>8&255,g[18]=Le>>>16&255,g[19]=Le>>>24&255,g[20]=Ee>>>0&255,g[21]=Ee>>>8&255,g[22]=Ee>>>16&255,g[23]=Ee>>>24&255,g[24]=z>>>0&255,g[25]=z>>>8&255,g[26]=z>>>16&255,g[27]=z>>>24&255,g[28]=j>>>0&255,g[29]=j>>>8&255,g[30]=j>>>16&255,g[31]=j>>>24&255,g[32]=ce>>>0&255,g[33]=ce>>>8&255,g[34]=ce>>>16&255,g[35]=ce>>>24&255,g[36]=re>>>0&255,g[37]=re>>>8&255,g[38]=re>>>16&255,g[39]=re>>>24&255,g[40]=ie>>>0&255,g[41]=ie>>>8&255,g[42]=ie>>>16&255,g[43]=ie>>>24&255,g[44]=b>>>0&255,g[45]=b>>>8&255,g[46]=b>>>16&255,g[47]=b>>>24&255,g[48]=C>>>0&255,g[49]=C>>>8&255,g[50]=C>>>16&255,g[51]=C>>>24&255,g[52]=S>>>0&255,g[53]=S>>>8&255,g[54]=S>>>16&255,g[55]=S>>>24&255,g[56]=F>>>0&255,g[57]=F>>>8&255,g[58]=F>>>16&255,g[59]=F>>>24&255,g[60]=B>>>0&255,g[61]=B>>>8&255,g[62]=B>>>16&255,g[63]=B>>>24&255}function ve(g,x,_,d){for(var D=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,R=_[0]&255|(_[1]&255)<<8|(_[2]&255)<<16|(_[3]&255)<<24,U=_[4]&255|(_[5]&255)<<8|(_[6]&255)<<16|(_[7]&255)<<24,oe=_[8]&255|(_[9]&255)<<8|(_[10]&255)<<16|(_[11]&255)<<24,ye=_[12]&255|(_[13]&255)<<8|(_[14]&255)<<16|(_[15]&255)<<24,Ke=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,Se=x[0]&255|(x[1]&255)<<8|(x[2]&255)<<16|(x[3]&255)<<24,Ct=x[4]&255|(x[5]&255)<<8|(x[6]&255)<<16|(x[7]&255)<<24,Te=x[8]&255|(x[9]&255)<<8|(x[10]&255)<<16|(x[11]&255)<<24,rt=x[12]&255|(x[13]&255)<<8|(x[14]&255)<<16|(x[15]&255)<<24,ot=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,ct=_[16]&255|(_[17]&255)<<8|(_[18]&255)<<16|(_[19]&255)<<24,lt=_[20]&255|(_[21]&255)<<8|(_[22]&255)<<16|(_[23]&255)<<24,et=_[24]&255|(_[25]&255)<<8|(_[26]&255)<<16|(_[27]&255)<<24,ft=_[28]&255|(_[29]&255)<<8|(_[30]&255)<<16|(_[31]&255)<<24,nt=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24,Ce=D,qe=R,xe=U,Be=oe,Le=ye,Ee=Ke,z=Se,j=Ct,ce=Te,re=rt,ie=ot,b=ct,C=lt,S=et,F=ft,B=nt,w,$=0;$<20;$+=2)w=Ce+C|0,Le^=w<<7|w>>>32-7,w=Le+Ce|0,ce^=w<<9|w>>>32-9,w=ce+Le|0,C^=w<<13|w>>>32-13,w=C+ce|0,Ce^=w<<18|w>>>32-18,w=Ee+qe|0,re^=w<<7|w>>>32-7,w=re+Ee|0,S^=w<<9|w>>>32-9,w=S+re|0,qe^=w<<13|w>>>32-13,w=qe+S|0,Ee^=w<<18|w>>>32-18,w=ie+z|0,F^=w<<7|w>>>32-7,w=F+ie|0,xe^=w<<9|w>>>32-9,w=xe+F|0,z^=w<<13|w>>>32-13,w=z+xe|0,ie^=w<<18|w>>>32-18,w=B+b|0,Be^=w<<7|w>>>32-7,w=Be+B|0,j^=w<<9|w>>>32-9,w=j+Be|0,b^=w<<13|w>>>32-13,w=b+j|0,B^=w<<18|w>>>32-18,w=Ce+Be|0,qe^=w<<7|w>>>32-7,w=qe+Ce|0,xe^=w<<9|w>>>32-9,w=xe+qe|0,Be^=w<<13|w>>>32-13,w=Be+xe|0,Ce^=w<<18|w>>>32-18,w=Ee+Le|0,z^=w<<7|w>>>32-7,w=z+Ee|0,j^=w<<9|w>>>32-9,w=j+z|0,Le^=w<<13|w>>>32-13,w=Le+j|0,Ee^=w<<18|w>>>32-18,w=ie+re|0,b^=w<<7|w>>>32-7,w=b+ie|0,ce^=w<<9|w>>>32-9,w=ce+b|0,re^=w<<13|w>>>32-13,w=re+ce|0,ie^=w<<18|w>>>32-18,w=B+F|0,C^=w<<7|w>>>32-7,w=C+B|0,S^=w<<9|w>>>32-9,w=S+C|0,F^=w<<13|w>>>32-13,w=F+S|0,B^=w<<18|w>>>32-18;g[0]=Ce>>>0&255,g[1]=Ce>>>8&255,g[2]=Ce>>>16&255,g[3]=Ce>>>24&255,g[4]=Ee>>>0&255,g[5]=Ee>>>8&255,g[6]=Ee>>>16&255,g[7]=Ee>>>24&255,g[8]=ie>>>0&255,g[9]=ie>>>8&255,g[10]=ie>>>16&255,g[11]=ie>>>24&255,g[12]=B>>>0&255,g[13]=B>>>8&255,g[14]=B>>>16&255,g[15]=B>>>24&255,g[16]=z>>>0&255,g[17]=z>>>8&255,g[18]=z>>>16&255,g[19]=z>>>24&255,g[20]=j>>>0&255,g[21]=j>>>8&255,g[22]=j>>>16&255,g[23]=j>>>24&255,g[24]=ce>>>0&255,g[25]=ce>>>8&255,g[26]=ce>>>16&255,g[27]=ce>>>24&255,g[28]=re>>>0&255,g[29]=re>>>8&255,g[30]=re>>>16&255,g[31]=re>>>24&255}function X(g,x,_,d){ne(g,x,_,d)}function me(g,x,_,d){ve(g,x,_,d)}var be=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function W(g,x,_,d,D,R,U){var oe=new Uint8Array(16),ye=new Uint8Array(64),Ke,Se;for(Se=0;Se<16;Se++)oe[Se]=0;for(Se=0;Se<8;Se++)oe[Se]=R[Se];for(;D>=64;){for(X(ye,oe,U,be),Se=0;Se<64;Se++)g[x+Se]=_[d+Se]^ye[Se];for(Ke=1,Se=8;Se<16;Se++)Ke=Ke+(oe[Se]&255)|0,oe[Se]=Ke&255,Ke>>>=8;D-=64,x+=64,d+=64}if(D>0)for(X(ye,oe,U,be),Se=0;Se<D;Se++)g[x+Se]=_[d+Se]^ye[Se];return 0}function de(g,x,_,d,D){var R=new Uint8Array(16),U=new Uint8Array(64),oe,ye;for(ye=0;ye<16;ye++)R[ye]=0;for(ye=0;ye<8;ye++)R[ye]=d[ye];for(;_>=64;){for(X(U,R,D,be),ye=0;ye<64;ye++)g[x+ye]=U[ye];for(oe=1,ye=8;ye<16;ye++)oe=oe+(R[ye]&255)|0,R[ye]=oe&255,oe>>>=8;_-=64,x+=64}if(_>0)for(X(U,R,D,be),ye=0;ye<_;ye++)g[x+ye]=U[ye];return 0}function ge(g,x,_,d,D){var R=new Uint8Array(32);me(R,d,D,be);for(var U=new Uint8Array(8),oe=0;oe<8;oe++)U[oe]=d[oe+16];return de(g,x,_,U,R)}function Ue(g,x,_,d,D,R,U){var oe=new Uint8Array(32);me(oe,R,U,be);for(var ye=new Uint8Array(8),Ke=0;Ke<8;Ke++)ye[Ke]=R[Ke+16];return W(g,x,_,d,D,ye,oe)}var St=function(g){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var x,_,d,D,R,U,oe,ye;x=g[0]&255|(g[1]&255)<<8,this.r[0]=x&8191,_=g[2]&255|(g[3]&255)<<8,this.r[1]=(x>>>13|_<<3)&8191,d=g[4]&255|(g[5]&255)<<8,this.r[2]=(_>>>10|d<<6)&7939,D=g[6]&255|(g[7]&255)<<8,this.r[3]=(d>>>7|D<<9)&8191,R=g[8]&255|(g[9]&255)<<8,this.r[4]=(D>>>4|R<<12)&255,this.r[5]=R>>>1&8190,U=g[10]&255|(g[11]&255)<<8,this.r[6]=(R>>>14|U<<2)&8191,oe=g[12]&255|(g[13]&255)<<8,this.r[7]=(U>>>11|oe<<5)&8065,ye=g[14]&255|(g[15]&255)<<8,this.r[8]=(oe>>>8|ye<<8)&8191,this.r[9]=ye>>>5&127,this.pad[0]=g[16]&255|(g[17]&255)<<8,this.pad[1]=g[18]&255|(g[19]&255)<<8,this.pad[2]=g[20]&255|(g[21]&255)<<8,this.pad[3]=g[22]&255|(g[23]&255)<<8,this.pad[4]=g[24]&255|(g[25]&255)<<8,this.pad[5]=g[26]&255|(g[27]&255)<<8,this.pad[6]=g[28]&255|(g[29]&255)<<8,this.pad[7]=g[30]&255|(g[31]&255)<<8};St.prototype.blocks=function(g,x,_){for(var d=this.fin?0:2048,D,R,U,oe,ye,Ke,Se,Ct,Te,rt,ot,ct,lt,et,ft,nt,Ce,qe,xe,Be=this.h[0],Le=this.h[1],Ee=this.h[2],z=this.h[3],j=this.h[4],ce=this.h[5],re=this.h[6],ie=this.h[7],b=this.h[8],C=this.h[9],S=this.r[0],F=this.r[1],B=this.r[2],w=this.r[3],$=this.r[4],H=this.r[5],Y=this.r[6],V=this.r[7],te=this.r[8],pe=this.r[9];_>=16;)D=g[x+0]&255|(g[x+1]&255)<<8,Be+=D&8191,R=g[x+2]&255|(g[x+3]&255)<<8,Le+=(D>>>13|R<<3)&8191,U=g[x+4]&255|(g[x+5]&255)<<8,Ee+=(R>>>10|U<<6)&8191,oe=g[x+6]&255|(g[x+7]&255)<<8,z+=(U>>>7|oe<<9)&8191,ye=g[x+8]&255|(g[x+9]&255)<<8,j+=(oe>>>4|ye<<12)&8191,ce+=ye>>>1&8191,Ke=g[x+10]&255|(g[x+11]&255)<<8,re+=(ye>>>14|Ke<<2)&8191,Se=g[x+12]&255|(g[x+13]&255)<<8,ie+=(Ke>>>11|Se<<5)&8191,Ct=g[x+14]&255|(g[x+15]&255)<<8,b+=(Se>>>8|Ct<<8)&8191,C+=Ct>>>5|d,Te=0,rt=Te,rt+=Be*S,rt+=Le*(5*pe),rt+=Ee*(5*te),rt+=z*(5*V),rt+=j*(5*Y),Te=rt>>>13,rt&=8191,rt+=ce*(5*H),rt+=re*(5*$),rt+=ie*(5*w),rt+=b*(5*B),rt+=C*(5*F),Te+=rt>>>13,rt&=8191,ot=Te,ot+=Be*F,ot+=Le*S,ot+=Ee*(5*pe),ot+=z*(5*te),ot+=j*(5*V),Te=ot>>>13,ot&=8191,ot+=ce*(5*Y),ot+=re*(5*H),ot+=ie*(5*$),ot+=b*(5*w),ot+=C*(5*B),Te+=ot>>>13,ot&=8191,ct=Te,ct+=Be*B,ct+=Le*F,ct+=Ee*S,ct+=z*(5*pe),ct+=j*(5*te),Te=ct>>>13,ct&=8191,ct+=ce*(5*V),ct+=re*(5*Y),ct+=ie*(5*H),ct+=b*(5*$),ct+=C*(5*w),Te+=ct>>>13,ct&=8191,lt=Te,lt+=Be*w,lt+=Le*B,lt+=Ee*F,lt+=z*S,lt+=j*(5*pe),Te=lt>>>13,lt&=8191,lt+=ce*(5*te),lt+=re*(5*V),lt+=ie*(5*Y),lt+=b*(5*H),lt+=C*(5*$),Te+=lt>>>13,lt&=8191,et=Te,et+=Be*$,et+=Le*w,et+=Ee*B,et+=z*F,et+=j*S,Te=et>>>13,et&=8191,et+=ce*(5*pe),et+=re*(5*te),et+=ie*(5*V),et+=b*(5*Y),et+=C*(5*H),Te+=et>>>13,et&=8191,ft=Te,ft+=Be*H,ft+=Le*$,ft+=Ee*w,ft+=z*B,ft+=j*F,Te=ft>>>13,ft&=8191,ft+=ce*S,ft+=re*(5*pe),ft+=ie*(5*te),ft+=b*(5*V),ft+=C*(5*Y),Te+=ft>>>13,ft&=8191,nt=Te,nt+=Be*Y,nt+=Le*H,nt+=Ee*$,nt+=z*w,nt+=j*B,Te=nt>>>13,nt&=8191,nt+=ce*F,nt+=re*S,nt+=ie*(5*pe),nt+=b*(5*te),nt+=C*(5*V),Te+=nt>>>13,nt&=8191,Ce=Te,Ce+=Be*V,Ce+=Le*Y,Ce+=Ee*H,Ce+=z*$,Ce+=j*w,Te=Ce>>>13,Ce&=8191,Ce+=ce*B,Ce+=re*F,Ce+=ie*S,Ce+=b*(5*pe),Ce+=C*(5*te),Te+=Ce>>>13,Ce&=8191,qe=Te,qe+=Be*te,qe+=Le*V,qe+=Ee*Y,qe+=z*H,qe+=j*$,Te=qe>>>13,qe&=8191,qe+=ce*w,qe+=re*B,qe+=ie*F,qe+=b*S,qe+=C*(5*pe),Te+=qe>>>13,qe&=8191,xe=Te,xe+=Be*pe,xe+=Le*te,xe+=Ee*V,xe+=z*Y,xe+=j*H,Te=xe>>>13,xe&=8191,xe+=ce*$,xe+=re*w,xe+=ie*B,xe+=b*F,xe+=C*S,Te+=xe>>>13,xe&=8191,Te=(Te<<2)+Te|0,Te=Te+rt|0,rt=Te&8191,Te=Te>>>13,ot+=Te,Be=rt,Le=ot,Ee=ct,z=lt,j=et,ce=ft,re=nt,ie=Ce,b=qe,C=xe,x+=16,_-=16;this.h[0]=Be,this.h[1]=Le,this.h[2]=Ee,this.h[3]=z,this.h[4]=j,this.h[5]=ce,this.h[6]=re,this.h[7]=ie,this.h[8]=b,this.h[9]=C},St.prototype.finish=function(g,x){var _=new Uint16Array(10),d,D,R,U;if(this.leftover){for(U=this.leftover,this.buffer[U++]=1;U<16;U++)this.buffer[U]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(d=this.h[1]>>>13,this.h[1]&=8191,U=2;U<10;U++)this.h[U]+=d,d=this.h[U]>>>13,this.h[U]&=8191;for(this.h[0]+=d*5,d=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=d,d=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=d,_[0]=this.h[0]+5,d=_[0]>>>13,_[0]&=8191,U=1;U<10;U++)_[U]=this.h[U]+d,d=_[U]>>>13,_[U]&=8191;for(_[9]-=1<<13,D=(d^1)-1,U=0;U<10;U++)_[U]&=D;for(D=~D,U=0;U<10;U++)this.h[U]=this.h[U]&D|_[U];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,R=this.h[0]+this.pad[0],this.h[0]=R&65535,U=1;U<8;U++)R=(this.h[U]+this.pad[U]|0)+(R>>>16)|0,this.h[U]=R&65535;g[x+0]=this.h[0]>>>0&255,g[x+1]=this.h[0]>>>8&255,g[x+2]=this.h[1]>>>0&255,g[x+3]=this.h[1]>>>8&255,g[x+4]=this.h[2]>>>0&255,g[x+5]=this.h[2]>>>8&255,g[x+6]=this.h[3]>>>0&255,g[x+7]=this.h[3]>>>8&255,g[x+8]=this.h[4]>>>0&255,g[x+9]=this.h[4]>>>8&255,g[x+10]=this.h[5]>>>0&255,g[x+11]=this.h[5]>>>8&255,g[x+12]=this.h[6]>>>0&255,g[x+13]=this.h[6]>>>8&255,g[x+14]=this.h[7]>>>0&255,g[x+15]=this.h[7]>>>8&255},St.prototype.update=function(g,x,_){var d,D;if(this.leftover){for(D=16-this.leftover,D>_&&(D=_),d=0;d<D;d++)this.buffer[this.leftover+d]=g[x+d];if(_-=D,x+=D,this.leftover+=D,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(_>=16&&(D=_-_%16,this.blocks(g,x,D),x+=D,_-=D),_){for(d=0;d<_;d++)this.buffer[this.leftover+d]=g[x+d];this.leftover+=_}};function $t(g,x,_,d,D,R){var U=new St(R);return U.update(_,d,D),U.finish(g,x),0}function Bt(g,x,_,d,D,R){var U=new Uint8Array(16);return $t(U,0,_,d,D,R),O(g,x,U,0)}function qt(g,x,_,d,D){var R;if(_<32)return-1;for(Ue(g,0,x,0,_,d,D),$t(g,16,g,32,_-32,g),R=0;R<16;R++)g[R]=0;return 0}function yr(g,x,_,d,D){var R,U=new Uint8Array(32);if(_<32||(ge(U,0,32,d,D),Bt(x,16,x,32,_-32,U)!==0))return-1;for(Ue(g,0,x,0,_,d,D),R=0;R<32;R++)g[R]=0;return 0}function Ut(g,x){var _;for(_=0;_<16;_++)g[_]=x[_]|0}function Wr(g){var x,_,d=1;for(x=0;x<16;x++)_=g[x]+d+65535,d=Math.floor(_/65536),g[x]=_-d*65536;g[0]+=d-1+37*(d-1)}function Un(g,x,_){for(var d,D=~(_-1),R=0;R<16;R++)d=D&(g[R]^x[R]),g[R]^=d,x[R]^=d}function Ur(g,x){var _,d,D,R=e(),U=e();for(_=0;_<16;_++)U[_]=x[_];for(Wr(U),Wr(U),Wr(U),d=0;d<2;d++){for(R[0]=U[0]-65517,_=1;_<15;_++)R[_]=U[_]-65535-(R[_-1]>>16&1),R[_-1]&=65535;R[15]=U[15]-32767-(R[14]>>16&1),D=R[15]>>16&1,R[14]&=65535,Un(U,R,1-D)}for(_=0;_<16;_++)g[2*_]=U[_]&255,g[2*_+1]=U[_]>>8}function en(g,x){var _=new Uint8Array(32),d=new Uint8Array(32);return Ur(_,g),Ur(d,x),ue(_,0,d,0)}function ua(g){var x=new Uint8Array(32);return Ur(x,g),x[0]&1}function er(g,x){var _;for(_=0;_<16;_++)g[_]=x[2*_]+(x[2*_+1]<<8);g[15]&=32767}function Ht(g,x,_){for(var d=0;d<16;d++)g[d]=x[d]+_[d]}function Er(g,x,_){for(var d=0;d<16;d++)g[d]=x[d]-_[d]}function Ve(g,x,_){var d,D,R=0,U=0,oe=0,ye=0,Ke=0,Se=0,Ct=0,Te=0,rt=0,ot=0,ct=0,lt=0,et=0,ft=0,nt=0,Ce=0,qe=0,xe=0,Be=0,Le=0,Ee=0,z=0,j=0,ce=0,re=0,ie=0,b=0,C=0,S=0,F=0,B=0,w=_[0],$=_[1],H=_[2],Y=_[3],V=_[4],te=_[5],pe=_[6],ze=_[7],Oe=_[8],Qe=_[9],dt=_[10],pt=_[11],Lt=_[12],hr=_[13],Ar=_[14],$r=_[15];d=x[0],R+=d*w,U+=d*$,oe+=d*H,ye+=d*Y,Ke+=d*V,Se+=d*te,Ct+=d*pe,Te+=d*ze,rt+=d*Oe,ot+=d*Qe,ct+=d*dt,lt+=d*pt,et+=d*Lt,ft+=d*hr,nt+=d*Ar,Ce+=d*$r,d=x[1],U+=d*w,oe+=d*$,ye+=d*H,Ke+=d*Y,Se+=d*V,Ct+=d*te,Te+=d*pe,rt+=d*ze,ot+=d*Oe,ct+=d*Qe,lt+=d*dt,et+=d*pt,ft+=d*Lt,nt+=d*hr,Ce+=d*Ar,qe+=d*$r,d=x[2],oe+=d*w,ye+=d*$,Ke+=d*H,Se+=d*Y,Ct+=d*V,Te+=d*te,rt+=d*pe,ot+=d*ze,ct+=d*Oe,lt+=d*Qe,et+=d*dt,ft+=d*pt,nt+=d*Lt,Ce+=d*hr,qe+=d*Ar,xe+=d*$r,d=x[3],ye+=d*w,Ke+=d*$,Se+=d*H,Ct+=d*Y,Te+=d*V,rt+=d*te,ot+=d*pe,ct+=d*ze,lt+=d*Oe,et+=d*Qe,ft+=d*dt,nt+=d*pt,Ce+=d*Lt,qe+=d*hr,xe+=d*Ar,Be+=d*$r,d=x[4],Ke+=d*w,Se+=d*$,Ct+=d*H,Te+=d*Y,rt+=d*V,ot+=d*te,ct+=d*pe,lt+=d*ze,et+=d*Oe,ft+=d*Qe,nt+=d*dt,Ce+=d*pt,qe+=d*Lt,xe+=d*hr,Be+=d*Ar,Le+=d*$r,d=x[5],Se+=d*w,Ct+=d*$,Te+=d*H,rt+=d*Y,ot+=d*V,ct+=d*te,lt+=d*pe,et+=d*ze,ft+=d*Oe,nt+=d*Qe,Ce+=d*dt,qe+=d*pt,xe+=d*Lt,Be+=d*hr,Le+=d*Ar,Ee+=d*$r,d=x[6],Ct+=d*w,Te+=d*$,rt+=d*H,ot+=d*Y,ct+=d*V,lt+=d*te,et+=d*pe,ft+=d*ze,nt+=d*Oe,Ce+=d*Qe,qe+=d*dt,xe+=d*pt,Be+=d*Lt,Le+=d*hr,Ee+=d*Ar,z+=d*$r,d=x[7],Te+=d*w,rt+=d*$,ot+=d*H,ct+=d*Y,lt+=d*V,et+=d*te,ft+=d*pe,nt+=d*ze,Ce+=d*Oe,qe+=d*Qe,xe+=d*dt,Be+=d*pt,Le+=d*Lt,Ee+=d*hr,z+=d*Ar,j+=d*$r,d=x[8],rt+=d*w,ot+=d*$,ct+=d*H,lt+=d*Y,et+=d*V,ft+=d*te,nt+=d*pe,Ce+=d*ze,qe+=d*Oe,xe+=d*Qe,Be+=d*dt,Le+=d*pt,Ee+=d*Lt,z+=d*hr,j+=d*Ar,ce+=d*$r,d=x[9],ot+=d*w,ct+=d*$,lt+=d*H,et+=d*Y,ft+=d*V,nt+=d*te,Ce+=d*pe,qe+=d*ze,xe+=d*Oe,Be+=d*Qe,Le+=d*dt,Ee+=d*pt,z+=d*Lt,j+=d*hr,ce+=d*Ar,re+=d*$r,d=x[10],ct+=d*w,lt+=d*$,et+=d*H,ft+=d*Y,nt+=d*V,Ce+=d*te,qe+=d*pe,xe+=d*ze,Be+=d*Oe,Le+=d*Qe,Ee+=d*dt,z+=d*pt,j+=d*Lt,ce+=d*hr,re+=d*Ar,ie+=d*$r,d=x[11],lt+=d*w,et+=d*$,ft+=d*H,nt+=d*Y,Ce+=d*V,qe+=d*te,xe+=d*pe,Be+=d*ze,Le+=d*Oe,Ee+=d*Qe,z+=d*dt,j+=d*pt,ce+=d*Lt,re+=d*hr,ie+=d*Ar,b+=d*$r,d=x[12],et+=d*w,ft+=d*$,nt+=d*H,Ce+=d*Y,qe+=d*V,xe+=d*te,Be+=d*pe,Le+=d*ze,Ee+=d*Oe,z+=d*Qe,j+=d*dt,ce+=d*pt,re+=d*Lt,ie+=d*hr,b+=d*Ar,C+=d*$r,d=x[13],ft+=d*w,nt+=d*$,Ce+=d*H,qe+=d*Y,xe+=d*V,Be+=d*te,Le+=d*pe,Ee+=d*ze,z+=d*Oe,j+=d*Qe,ce+=d*dt,re+=d*pt,ie+=d*Lt,b+=d*hr,C+=d*Ar,S+=d*$r,d=x[14],nt+=d*w,Ce+=d*$,qe+=d*H,xe+=d*Y,Be+=d*V,Le+=d*te,Ee+=d*pe,z+=d*ze,j+=d*Oe,ce+=d*Qe,re+=d*dt,ie+=d*pt,b+=d*Lt,C+=d*hr,S+=d*Ar,F+=d*$r,d=x[15],Ce+=d*w,qe+=d*$,xe+=d*H,Be+=d*Y,Le+=d*V,Ee+=d*te,z+=d*pe,j+=d*ze,ce+=d*Oe,re+=d*Qe,ie+=d*dt,b+=d*pt,C+=d*Lt,S+=d*hr,F+=d*Ar,B+=d*$r,R+=38*qe,U+=38*xe,oe+=38*Be,ye+=38*Le,Ke+=38*Ee,Se+=38*z,Ct+=38*j,Te+=38*ce,rt+=38*re,ot+=38*ie,ct+=38*b,lt+=38*C,et+=38*S,ft+=38*F,nt+=38*B,D=1,d=R+D+65535,D=Math.floor(d/65536),R=d-D*65536,d=U+D+65535,D=Math.floor(d/65536),U=d-D*65536,d=oe+D+65535,D=Math.floor(d/65536),oe=d-D*65536,d=ye+D+65535,D=Math.floor(d/65536),ye=d-D*65536,d=Ke+D+65535,D=Math.floor(d/65536),Ke=d-D*65536,d=Se+D+65535,D=Math.floor(d/65536),Se=d-D*65536,d=Ct+D+65535,D=Math.floor(d/65536),Ct=d-D*65536,d=Te+D+65535,D=Math.floor(d/65536),Te=d-D*65536,d=rt+D+65535,D=Math.floor(d/65536),rt=d-D*65536,d=ot+D+65535,D=Math.floor(d/65536),ot=d-D*65536,d=ct+D+65535,D=Math.floor(d/65536),ct=d-D*65536,d=lt+D+65535,D=Math.floor(d/65536),lt=d-D*65536,d=et+D+65535,D=Math.floor(d/65536),et=d-D*65536,d=ft+D+65535,D=Math.floor(d/65536),ft=d-D*65536,d=nt+D+65535,D=Math.floor(d/65536),nt=d-D*65536,d=Ce+D+65535,D=Math.floor(d/65536),Ce=d-D*65536,R+=D-1+37*(D-1),D=1,d=R+D+65535,D=Math.floor(d/65536),R=d-D*65536,d=U+D+65535,D=Math.floor(d/65536),U=d-D*65536,d=oe+D+65535,D=Math.floor(d/65536),oe=d-D*65536,d=ye+D+65535,D=Math.floor(d/65536),ye=d-D*65536,d=Ke+D+65535,D=Math.floor(d/65536),Ke=d-D*65536,d=Se+D+65535,D=Math.floor(d/65536),Se=d-D*65536,d=Ct+D+65535,D=Math.floor(d/65536),Ct=d-D*65536,d=Te+D+65535,D=Math.floor(d/65536),Te=d-D*65536,d=rt+D+65535,D=Math.floor(d/65536),rt=d-D*65536,d=ot+D+65535,D=Math.floor(d/65536),ot=d-D*65536,d=ct+D+65535,D=Math.floor(d/65536),ct=d-D*65536,d=lt+D+65535,D=Math.floor(d/65536),lt=d-D*65536,d=et+D+65535,D=Math.floor(d/65536),et=d-D*65536,d=ft+D+65535,D=Math.floor(d/65536),ft=d-D*65536,d=nt+D+65535,D=Math.floor(d/65536),nt=d-D*65536,d=Ce+D+65535,D=Math.floor(d/65536),Ce=d-D*65536,R+=D-1+37*(D-1),g[0]=R,g[1]=U,g[2]=oe,g[3]=ye,g[4]=Ke,g[5]=Se,g[6]=Ct,g[7]=Te,g[8]=rt,g[9]=ot,g[10]=ct,g[11]=lt,g[12]=et,g[13]=ft,g[14]=nt,g[15]=Ce}function fn(g,x){Ve(g,x,x)}function eo(g,x){var _=e(),d;for(d=0;d<16;d++)_[d]=x[d];for(d=253;d>=0;d--)fn(_,_),d!==2&&d!==4&&Ve(_,_,x);for(d=0;d<16;d++)g[d]=_[d]}function to(g,x){var _=e(),d;for(d=0;d<16;d++)_[d]=x[d];for(d=250;d>=0;d--)fn(_,_),d!==1&&Ve(_,_,x);for(d=0;d<16;d++)g[d]=_[d]}function Cs(g,x,_){var d=new Uint8Array(32),D=new Float64Array(80),R,U,oe=e(),ye=e(),Ke=e(),Se=e(),Ct=e(),Te=e();for(U=0;U<31;U++)d[U]=x[U];for(d[31]=x[31]&127|64,d[0]&=248,er(D,_),U=0;U<16;U++)ye[U]=D[U],Se[U]=oe[U]=Ke[U]=0;for(oe[0]=Se[0]=1,U=254;U>=0;--U)R=d[U>>>3]>>>(U&7)&1,Un(oe,ye,R),Un(Ke,Se,R),Ht(Ct,oe,Ke),Er(oe,oe,Ke),Ht(Ke,ye,Se),Er(ye,ye,Se),fn(Se,Ct),fn(Te,oe),Ve(oe,Ke,oe),Ve(Ke,ye,Ct),Ht(Ct,oe,Ke),Er(oe,oe,Ke),fn(ye,oe),Er(Ke,Se,Te),Ve(oe,Ke,c),Ht(oe,oe,Se),Ve(Ke,Ke,oe),Ve(oe,Se,Te),Ve(Se,ye,D),fn(ye,Ct),Un(oe,ye,R),Un(Ke,Se,R);for(U=0;U<16;U++)D[U+16]=oe[U],D[U+32]=Ke[U],D[U+48]=ye[U],D[U+64]=Se[U];var rt=D.subarray(32),ot=D.subarray(16);return eo(rt,rt),Ve(ot,ot,rt),Ur(g,ot),0}function Kr(g,x){return Cs(g,x,i)}function ro(g,x){return t(x,32),Kr(g,x)}function Tn(g,x,_){var d=new Uint8Array(32);return Cs(d,_,x),me(g,n,d,be)}var tn=qt,Ko=yr;function su(g,x,_,d,D,R){var U=new Uint8Array(32);return Tn(U,D,R),tn(g,x,_,d,U)}function Kn(g,x,_,d,D,R){var U=new Uint8Array(32);return Tn(U,D,R),Ko(g,x,_,d,U)}var Fn=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function au(g,x,_,d){for(var D=new Int32Array(16),R=new Int32Array(16),U,oe,ye,Ke,Se,Ct,Te,rt,ot,ct,lt,et,ft,nt,Ce,qe,xe,Be,Le,Ee,z,j,ce,re,ie,b,C=g[0],S=g[1],F=g[2],B=g[3],w=g[4],$=g[5],H=g[6],Y=g[7],V=x[0],te=x[1],pe=x[2],ze=x[3],Oe=x[4],Qe=x[5],dt=x[6],pt=x[7],Lt=0;d>=128;){for(Le=0;Le<16;Le++)Ee=8*Le+Lt,D[Le]=_[Ee+0]<<24|_[Ee+1]<<16|_[Ee+2]<<8|_[Ee+3],R[Le]=_[Ee+4]<<24|_[Ee+5]<<16|_[Ee+6]<<8|_[Ee+7];for(Le=0;Le<80;Le++)if(U=C,oe=S,ye=F,Ke=B,Se=w,Ct=$,Te=H,rt=Y,ot=V,ct=te,lt=pe,et=ze,ft=Oe,nt=Qe,Ce=dt,qe=pt,z=Y,j=pt,ce=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=(w>>>14|Oe<<32-14)^(w>>>18|Oe<<32-18)^(Oe>>>41-32|w<<32-(41-32)),j=(Oe>>>14|w<<32-14)^(Oe>>>18|w<<32-18)^(w>>>41-32|Oe<<32-(41-32)),ce+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,z=w&$^~w&H,j=Oe&Qe^~Oe&dt,ce+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,z=Fn[Le*2],j=Fn[Le*2+1],ce+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,z=D[Le%16],j=R[Le%16],ce+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=ce>>>16,ie+=re>>>16,b+=ie>>>16,xe=ie&65535|b<<16,Be=ce&65535|re<<16,z=xe,j=Be,ce=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=(C>>>28|V<<32-28)^(V>>>34-32|C<<32-(34-32))^(V>>>39-32|C<<32-(39-32)),j=(V>>>28|C<<32-28)^(C>>>34-32|V<<32-(34-32))^(C>>>39-32|V<<32-(39-32)),ce+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,z=C&S^C&F^S&F,j=V&te^V&pe^te&pe,ce+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=ce>>>16,ie+=re>>>16,b+=ie>>>16,rt=ie&65535|b<<16,qe=ce&65535|re<<16,z=Ke,j=et,ce=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=xe,j=Be,ce+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=ce>>>16,ie+=re>>>16,b+=ie>>>16,Ke=ie&65535|b<<16,et=ce&65535|re<<16,S=U,F=oe,B=ye,w=Ke,$=Se,H=Ct,Y=Te,C=rt,te=ot,pe=ct,ze=lt,Oe=et,Qe=ft,dt=nt,pt=Ce,V=qe,Le%16===15)for(Ee=0;Ee<16;Ee++)z=D[Ee],j=R[Ee],ce=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=D[(Ee+9)%16],j=R[(Ee+9)%16],ce+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,xe=D[(Ee+1)%16],Be=R[(Ee+1)%16],z=(xe>>>1|Be<<32-1)^(xe>>>8|Be<<32-8)^xe>>>7,j=(Be>>>1|xe<<32-1)^(Be>>>8|xe<<32-8)^(Be>>>7|xe<<32-7),ce+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,xe=D[(Ee+14)%16],Be=R[(Ee+14)%16],z=(xe>>>19|Be<<32-19)^(Be>>>61-32|xe<<32-(61-32))^xe>>>6,j=(Be>>>19|xe<<32-19)^(xe>>>61-32|Be<<32-(61-32))^(Be>>>6|xe<<32-6),ce+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=ce>>>16,ie+=re>>>16,b+=ie>>>16,D[Ee]=ie&65535|b<<16,R[Ee]=ce&65535|re<<16;z=C,j=V,ce=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=g[0],j=x[0],ce+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=ce>>>16,ie+=re>>>16,b+=ie>>>16,g[0]=C=ie&65535|b<<16,x[0]=V=ce&65535|re<<16,z=S,j=te,ce=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=g[1],j=x[1],ce+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=ce>>>16,ie+=re>>>16,b+=ie>>>16,g[1]=S=ie&65535|b<<16,x[1]=te=ce&65535|re<<16,z=F,j=pe,ce=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=g[2],j=x[2],ce+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=ce>>>16,ie+=re>>>16,b+=ie>>>16,g[2]=F=ie&65535|b<<16,x[2]=pe=ce&65535|re<<16,z=B,j=ze,ce=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=g[3],j=x[3],ce+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=ce>>>16,ie+=re>>>16,b+=ie>>>16,g[3]=B=ie&65535|b<<16,x[3]=ze=ce&65535|re<<16,z=w,j=Oe,ce=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=g[4],j=x[4],ce+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=ce>>>16,ie+=re>>>16,b+=ie>>>16,g[4]=w=ie&65535|b<<16,x[4]=Oe=ce&65535|re<<16,z=$,j=Qe,ce=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=g[5],j=x[5],ce+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=ce>>>16,ie+=re>>>16,b+=ie>>>16,g[5]=$=ie&65535|b<<16,x[5]=Qe=ce&65535|re<<16,z=H,j=dt,ce=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=g[6],j=x[6],ce+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=ce>>>16,ie+=re>>>16,b+=ie>>>16,g[6]=H=ie&65535|b<<16,x[6]=dt=ce&65535|re<<16,z=Y,j=pt,ce=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=g[7],j=x[7],ce+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=ce>>>16,ie+=re>>>16,b+=ie>>>16,g[7]=Y=ie&65535|b<<16,x[7]=pt=ce&65535|re<<16,Lt+=128,d-=128}return d}function ln(g,x,_){var d=new Int32Array(8),D=new Int32Array(8),R=new Uint8Array(256),U,oe=_;for(d[0]=1779033703,d[1]=3144134277,d[2]=1013904242,d[3]=2773480762,d[4]=1359893119,d[5]=2600822924,d[6]=528734635,d[7]=1541459225,D[0]=4089235720,D[1]=2227873595,D[2]=4271175723,D[3]=1595750129,D[4]=2917565137,D[5]=725511199,D[6]=4215389547,D[7]=327033209,au(d,D,x,_),_%=128,U=0;U<_;U++)R[U]=x[oe-_+U];for(R[_]=128,_=256-128*(_<112?1:0),R[_-9]=0,k(R,_-8,oe/536870912|0,oe<<3),au(d,D,R,_),U=0;U<8;U++)k(g,8*U,d[U],D[U]);return 0}function lr(g,x){var _=e(),d=e(),D=e(),R=e(),U=e(),oe=e(),ye=e(),Ke=e(),Se=e();Er(_,g[1],g[0]),Er(Se,x[1],x[0]),Ve(_,_,Se),Ht(d,g[0],g[1]),Ht(Se,x[0],x[1]),Ve(d,d,Se),Ve(D,g[3],x[3]),Ve(D,D,h),Ve(R,g[2],x[2]),Ht(R,R,R),Er(U,d,_),Er(oe,R,D),Ht(ye,R,D),Ht(Ke,d,_),Ve(g[0],U,oe),Ve(g[1],Ke,ye),Ve(g[2],ye,oe),Ve(g[3],U,Ke)}function ni(g,x,_){var d;for(d=0;d<4;d++)Un(g[d],x[d],_)}function ii(g,x){var _=e(),d=e(),D=e();eo(D,x[2]),Ve(_,x[0],D),Ve(d,x[1],D),Ur(g,d),g[31]^=ua(_)<<7}function $o(g,x,_){var d,D;for(Ut(g[0],o),Ut(g[1],a),Ut(g[2],a),Ut(g[3],o),D=255;D>=0;--D)d=_[D/8|0]>>(D&7)&1,ni(g,x,d),lr(x,g),lr(g,g),ni(g,x,d)}function xn(g,x){var _=[e(),e(),e(),e()];Ut(_[0],m),Ut(_[1],y),Ut(_[2],a),Ve(_[3],m,y),$o(g,_,x)}function K(g,x,_){var d=new Uint8Array(64),D=[e(),e(),e(),e()],R;for(_||t(x,32),ln(d,x,32),d[0]&=248,d[31]&=127,d[31]|=64,xn(D,d),ii(g,D),R=0;R<32;R++)x[R+32]=g[R];return 0}var G=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function fe(g,x){var _,d,D,R;for(d=63;d>=32;--d){for(_=0,D=d-32,R=d-12;D<R;++D)x[D]+=_-16*x[d]*G[D-(d-32)],_=Math.floor((x[D]+128)/256),x[D]-=_*256;x[D]+=_,x[d]=0}for(_=0,D=0;D<32;D++)x[D]+=_-(x[31]>>4)*G[D],_=x[D]>>8,x[D]&=255;for(D=0;D<32;D++)x[D]-=_*G[D];for(d=0;d<32;d++)x[d+1]+=x[d]>>8,g[d]=x[d]&255}function _e(g){var x=new Float64Array(64),_;for(_=0;_<64;_++)x[_]=g[_];for(_=0;_<64;_++)g[_]=0;fe(g,x)}function $e(g,x,_,d){var D=new Uint8Array(64),R=new Uint8Array(64),U=new Uint8Array(64),oe,ye,Ke=new Float64Array(64),Se=[e(),e(),e(),e()];ln(D,d,32),D[0]&=248,D[31]&=127,D[31]|=64;var Ct=_+64;for(oe=0;oe<_;oe++)g[64+oe]=x[oe];for(oe=0;oe<32;oe++)g[32+oe]=D[32+oe];for(ln(U,g.subarray(32),_+32),_e(U),xn(Se,U),ii(g,Se),oe=32;oe<64;oe++)g[oe]=d[oe];for(ln(R,g,_+64),_e(R),oe=0;oe<64;oe++)Ke[oe]=0;for(oe=0;oe<32;oe++)Ke[oe]=U[oe];for(oe=0;oe<32;oe++)for(ye=0;ye<32;ye++)Ke[oe+ye]+=R[oe]*D[ye];return fe(g.subarray(32),Ke),Ct}function sr(g,x){var _=e(),d=e(),D=e(),R=e(),U=e(),oe=e(),ye=e();return Ut(g[2],a),er(g[1],x),fn(D,g[1]),Ve(R,D,l),Er(D,D,g[2]),Ht(R,g[2],R),fn(U,R),fn(oe,U),Ve(ye,oe,U),Ve(_,ye,D),Ve(_,_,R),to(_,_),Ve(_,_,D),Ve(_,_,R),Ve(_,_,R),Ve(g[0],_,R),fn(d,g[0]),Ve(d,d,R),en(d,D)&&Ve(g[0],g[0],E),fn(d,g[0]),Ve(d,d,R),en(d,D)?-1:(ua(g[0])===x[31]>>7&&Er(g[0],o,g[0]),Ve(g[3],g[0],g[1]),0)}function tt(g,x,_,d){var D,R=new Uint8Array(32),U=new Uint8Array(64),oe=[e(),e(),e(),e()],ye=[e(),e(),e(),e()];if(_<64||sr(ye,d))return-1;for(D=0;D<_;D++)g[D]=x[D];for(D=0;D<32;D++)g[D+32]=d[D];if(ln(U,g,_),_e(U),$o(oe,ye,U),xn(ye,x.subarray(32)),lr(oe,ye),ii(R,oe),_-=64,ue(x,0,R,0)){for(D=0;D<_;D++)g[D]=0;return-1}for(D=0;D<_;D++)g[D]=x[D+64];return _}var ut=32,He=24,mt=32,ht=16,Cr=32,zo=32,ca=32,jo=32,fa=32,Ec=He,no=mt,Yh=ht,vi=64,io=32,qo=64,Ac=32,Sc=64;r.lowlevel={crypto_core_hsalsa20:me,crypto_stream_xor:Ue,crypto_stream:ge,crypto_stream_salsa20_xor:W,crypto_stream_salsa20:de,crypto_onetimeauth:$t,crypto_onetimeauth_verify:Bt,crypto_verify_16:O,crypto_verify_32:ue,crypto_secretbox:qt,crypto_secretbox_open:yr,crypto_scalarmult:Cs,crypto_scalarmult_base:Kr,crypto_box_beforenm:Tn,crypto_box_afternm:tn,crypto_box:su,crypto_box_open:Kn,crypto_box_keypair:ro,crypto_hash:ln,crypto_sign:$e,crypto_sign_keypair:K,crypto_sign_open:tt,crypto_secretbox_KEYBYTES:ut,crypto_secretbox_NONCEBYTES:He,crypto_secretbox_ZEROBYTES:mt,crypto_secretbox_BOXZEROBYTES:ht,crypto_scalarmult_BYTES:Cr,crypto_scalarmult_SCALARBYTES:zo,crypto_box_PUBLICKEYBYTES:ca,crypto_box_SECRETKEYBYTES:jo,crypto_box_BEFORENMBYTES:fa,crypto_box_NONCEBYTES:Ec,crypto_box_ZEROBYTES:no,crypto_box_BOXZEROBYTES:Yh,crypto_sign_BYTES:vi,crypto_sign_PUBLICKEYBYTES:io,crypto_sign_SECRETKEYBYTES:qo,crypto_sign_SEEDBYTES:Ac,crypto_hash_BYTES:Sc,gf:e,D:l,L:G,pack25519:Ur,unpack25519:er,M:Ve,A:Ht,S:fn,Z:Er,pow2523:to,add:lr,set25519:Ut,modL:fe,scalarmult:$o,scalarbase:xn};function el(g,x){if(g.length!==ut)throw new Error("bad key size");if(x.length!==He)throw new Error("bad nonce size")}function Pc(g,x){if(g.length!==ca)throw new Error("bad public key size");if(x.length!==jo)throw new Error("bad secret key size")}function En(){for(var g=0;g<arguments.length;g++)if(!(arguments[g]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function uu(g){for(var x=0;x<g.length;x++)g[x]=0}r.randomBytes=function(g){var x=new Uint8Array(g);return t(x,g),x},r.secretbox=function(g,x,_){En(g,x,_),el(_,x);for(var d=new Uint8Array(mt+g.length),D=new Uint8Array(d.length),R=0;R<g.length;R++)d[R+mt]=g[R];return qt(D,d,d.length,x,_),D.subarray(ht)},r.secretbox.open=function(g,x,_){En(g,x,_),el(_,x);for(var d=new Uint8Array(ht+g.length),D=new Uint8Array(d.length),R=0;R<g.length;R++)d[R+ht]=g[R];return d.length<32||yr(D,d,d.length,x,_)!==0?null:D.subarray(mt)},r.secretbox.keyLength=ut,r.secretbox.nonceLength=He,r.secretbox.overheadLength=ht,r.scalarMult=function(g,x){if(En(g,x),g.length!==zo)throw new Error("bad n size");if(x.length!==Cr)throw new Error("bad p size");var _=new Uint8Array(Cr);return Cs(_,g,x),_},r.scalarMult.base=function(g){if(En(g),g.length!==zo)throw new Error("bad n size");var x=new Uint8Array(Cr);return Kr(x,g),x},r.scalarMult.scalarLength=zo,r.scalarMult.groupElementLength=Cr,r.box=function(g,x,_,d){var D=r.box.before(_,d);return r.secretbox(g,x,D)},r.box.before=function(g,x){En(g,x),Pc(g,x);var _=new Uint8Array(fa);return Tn(_,g,x),_},r.box.after=r.secretbox,r.box.open=function(g,x,_,d){var D=r.box.before(_,d);return r.secretbox.open(g,x,D)},r.box.open.after=r.secretbox.open,r.box.keyPair=function(){var g=new Uint8Array(ca),x=new Uint8Array(jo);return ro(g,x),{publicKey:g,secretKey:x}},r.box.keyPair.fromSecretKey=function(g){if(En(g),g.length!==jo)throw new Error("bad secret key size");var x=new Uint8Array(ca);return Kr(x,g),{publicKey:x,secretKey:new Uint8Array(g)}},r.box.publicKeyLength=ca,r.box.secretKeyLength=jo,r.box.sharedKeyLength=fa,r.box.nonceLength=Ec,r.box.overheadLength=r.secretbox.overheadLength,r.sign=function(g,x){if(En(g,x),x.length!==qo)throw new Error("bad secret key size");var _=new Uint8Array(vi+g.length);return $e(_,g,g.length,x),_},r.sign.open=function(g,x){if(En(g,x),x.length!==io)throw new Error("bad public key size");var _=new Uint8Array(g.length),d=tt(_,g,g.length,x);if(d<0)return null;for(var D=new Uint8Array(d),R=0;R<D.length;R++)D[R]=_[R];return D},r.sign.detached=function(g,x){for(var _=r.sign(g,x),d=new Uint8Array(vi),D=0;D<d.length;D++)d[D]=_[D];return d},r.sign.detached.verify=function(g,x,_){if(En(g,x,_),x.length!==vi)throw new Error("bad signature size");if(_.length!==io)throw new Error("bad public key size");var d=new Uint8Array(vi+g.length),D=new Uint8Array(vi+g.length),R;for(R=0;R<vi;R++)d[R]=x[R];for(R=0;R<g.length;R++)d[R+vi]=g[R];return tt(D,d,d.length,_)>=0},r.sign.keyPair=function(){var g=new Uint8Array(io),x=new Uint8Array(qo);return K(g,x),{publicKey:g,secretKey:x}},r.sign.keyPair.fromSecretKey=function(g){if(En(g),g.length!==qo)throw new Error("bad secret key size");for(var x=new Uint8Array(io),_=0;_<x.length;_++)x[_]=g[32+_];return{publicKey:x,secretKey:new Uint8Array(g)}},r.sign.keyPair.fromSeed=function(g){if(En(g),g.length!==Ac)throw new Error("bad seed size");for(var x=new Uint8Array(io),_=new Uint8Array(qo),d=0;d<32;d++)_[d]=g[d];return K(x,_,!0),{publicKey:x,secretKey:_}},r.sign.publicKeyLength=io,r.sign.secretKeyLength=qo,r.sign.seedLength=Ac,r.sign.signatureLength=vi,r.hash=function(g){En(g);var x=new Uint8Array(Sc);return ln(x,g,g.length),x},r.hash.hashLength=Sc,r.verify=function(g,x){return En(g,x),g.length===0||x.length===0||g.length!==x.length?!1:T(g,0,x,0,g.length)===0},r.setPRNG=function(g){t=g},function(){var g=typeof self<"u"?self.crypto||self.msCrypto:null;if(g&&g.getRandomValues){var x=65536;r.setPRNG(function(_,d){var D,R=new Uint8Array(d);for(D=0;D<d;D+=x)g.getRandomValues(R.subarray(D,D+Math.min(d-D,x)));for(D=0;D<d;D++)_[D]=R[D];uu(R)})}else typeof Nc<"u"&&(g=i_(),g&&g.randomBytes&&r.setPRNG(function(_,d){var D,R=g.randomBytes(d);for(D=0;D<d;D++)_[D]=R[D];uu(R)}))}()})(typeof Gy<"u"&&Gy.exports?Gy.exports:self.nacl=self.nacl||{})});var Z3=ee((hie,Q3)=>{Q3.exports=Z_;var X3=128,rz=127,nz=~rz,iz=Math.pow(2,31);function Z_(r,e,t){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw Z_.bytes=0,new RangeError("Could not encode varint");e=e||[],t=t||0;for(var n=t;r>=iz;)e[t++]=r&255|X3,r/=128;for(;r&nz;)e[t++]=r&255|X3,r>>>=7;return e[t]=r|0,Z_.bytes=t-n+1,e}});var rD=ee((die,tD)=>{tD.exports=e1;var oz=128,eD=127;function e1(r,n){var t=0,n=n||0,i=0,o=n,a,c=r.length;do{if(o>=c||i>49)throw e1.bytes=0,new RangeError("Could not decode varint");a=r[o++],t+=i<28?(a&eD)<<i:(a&eD)*Math.pow(2,i),i+=7}while(a>=oz);return e1.bytes=o-n,t}});var iD=ee((pie,nD)=>{var sz=Math.pow(2,7),az=Math.pow(2,14),uz=Math.pow(2,21),cz=Math.pow(2,28),fz=Math.pow(2,35),lz=Math.pow(2,42),hz=Math.pow(2,49),dz=Math.pow(2,56),pz=Math.pow(2,63);nD.exports=function(r){return r<sz?1:r<az?2:r<uz?3:r<cz?4:r<fz?5:r<lz?6:r<hz?7:r<dz?8:r<pz?9:10}});var Ku=ee((mie,oD)=>{oD.exports={encode:Z3(),decode:rD(),encodingLength:iD()}});var So=ee((Cie,pD)=>{"use strict";function dD(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function Cz(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return dD(r,t)}catch{t.message=r.message,t.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),dD(new i,t)}}pD.exports=Cz});var jD=ee((Aoe,zD)=>{var zl=1e3,jl=zl*60,ql=jl*60,tf=ql*24,jj=tf*7,qj=tf*365.25;zD.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Hj(r);if(t==="number"&&isFinite(r))return e.long?Vj(r):Wj(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Hj(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*qj;case"weeks":case"week":case"w":return t*jj;case"days":case"day":case"d":return t*tf;case"hours":case"hour":case"hrs":case"hr":case"h":return t*ql;case"minutes":case"minute":case"mins":case"min":case"m":return t*jl;case"seconds":case"second":case"secs":case"sec":case"s":return t*zl;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Wj(r){var e=Math.abs(r);return e>=tf?Math.round(r/tf)+"d":e>=ql?Math.round(r/ql)+"h":e>=jl?Math.round(r/jl)+"m":e>=zl?Math.round(r/zl)+"s":r+"ms"}function Vj(r){var e=Math.abs(r);return e>=tf?Ug(r,e,tf,"day"):e>=ql?Ug(r,e,ql,"hour"):e>=jl?Ug(r,e,jl,"minute"):e>=zl?Ug(r,e,zl,"second"):r+" ms"}function Ug(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var HD=ee((Soe,qD)=>{function Gj(r){t.debug=t,t.default=t,t.coerce=l,t.disable=o,t.enable=i,t.enabled=a,t.humanize=jD(),t.destroy=h,Object.keys(r).forEach(m=>{t[m]=r[m]}),t.names=[],t.skips=[],t.formatters={};function e(m){let y=0;for(let E=0;E<m.length;E++)y=(y<<5)-y+m.charCodeAt(E),y|=0;return t.colors[Math.abs(y)%t.colors.length]}t.selectColor=e;function t(m){let y,E=null,k,T;function O(...ue){if(!O.enabled)return;let ne=O,ve=Number(new Date),X=ve-(y||ve);ne.diff=X,ne.prev=y,ne.curr=ve,y=ve,ue[0]=t.coerce(ue[0]),typeof ue[0]!="string"&&ue.unshift("%O");let me=0;ue[0]=ue[0].replace(/%([a-zA-Z%])/g,(W,de)=>{if(W==="%%")return"%";me++;let ge=t.formatters[de];if(typeof ge=="function"){let Ue=ue[me];W=ge.call(ne,Ue),ue.splice(me,1),me--}return W}),t.formatArgs.call(ne,ue),(ne.log||t.log).apply(ne,ue)}return O.namespace=m,O.useColors=t.useColors(),O.color=t.selectColor(m),O.extend=n,O.destroy=t.destroy,Object.defineProperty(O,"enabled",{enumerable:!0,configurable:!1,get:()=>E!==null?E:(k!==t.namespaces&&(k=t.namespaces,T=t.enabled(m)),T),set:ue=>{E=ue}}),typeof t.init=="function"&&t.init(O),O}function n(m,y){let E=t(this.namespace+(typeof y>"u"?":":y)+m);return E.log=this.log,E}function i(m){t.save(m),t.namespaces=m,t.names=[],t.skips=[];let y,E=(typeof m=="string"?m:"").split(/[\s,]+/),k=E.length;for(y=0;y<k;y++)!E[y]||(m=E[y].replace(/\*/g,".*?"),m[0]==="-"?t.skips.push(new RegExp("^"+m.slice(1)+"$")):t.names.push(new RegExp("^"+m+"$")))}function o(){let m=[...t.names.map(c),...t.skips.map(c).map(y=>"-"+y)].join(",");return t.enable(""),m}function a(m){if(m[m.length-1]==="*")return!0;let y,E;for(y=0,E=t.skips.length;y<E;y++)if(t.skips[y].test(m))return!1;for(y=0,E=t.names.length;y<E;y++)if(t.names[y].test(m))return!0;return!1}function c(m){return m.toString().substring(2,m.toString().length-2).replace(/\.\*\?$/,"*")}function l(m){return m instanceof Error?m.stack||m.message:m}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}qD.exports=Gj});var fs=ee((Mi,Kg)=>{Mi.formatArgs=Jj;Mi.save=Xj;Mi.load=Qj;Mi.useColors=Yj;Mi.storage=Zj();Mi.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Mi.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Yj(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Jj(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+Kg.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}Mi.log=console.debug||console.log||(()=>{});function Xj(r){try{r?Mi.storage.setItem("debug",r):Mi.storage.removeItem("debug")}catch{}}function Qj(){let r;try{r=Mi.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function Zj(){try{return localStorage}catch{}}Kg.exports=HD()(Mi);var{formatters:eq}=Kg.exports;eq.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var C1=ee((Loe,VD)=>{"use strict";var iq=async r=>{let e=0;for await(let t of r)e++;return e};VD.exports=iq});var cC=ee((Joe,uC)=>{"use strict";uC.exports=bq;function bq(r,e){for(var t=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)t[n++]=arguments[i++];return new Promise(function(c,l){t[n]=function(m){if(o)if(o=!1,m)l(m);else{for(var y=new Array(arguments.length-1),E=0;E<y.length;)y[E++]=arguments[E];c.apply(null,y)}};try{r.apply(e||null,t)}catch(h){o&&(o=!1,l(h))}})}});var dC=ee(hC=>{"use strict";var Hg=hC;Hg.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&e.charAt(t)==="=";)++n;return Math.ceil(e.length*3)/4-n};var Wl=new Array(64),lC=new Array(123);for(ls=0;ls<64;)lC[Wl[ls]=ls<26?ls+65:ls<52?ls+71:ls<62?ls-4:ls-59|43]=ls++;var ls;Hg.encode=function(e,t,n){for(var i=null,o=[],a=0,c=0,l;t<n;){var h=e[t++];switch(c){case 0:o[a++]=Wl[h>>2],l=(h&3)<<4,c=1;break;case 1:o[a++]=Wl[l|h>>4],l=(h&15)<<2,c=2;break;case 2:o[a++]=Wl[l|h>>6],o[a++]=Wl[h&63],c=0;break}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0)}return c&&(o[a++]=Wl[l],o[a++]=61,c===1&&(o[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var fC="invalid encoding";Hg.decode=function(e,t,n){for(var i=n,o=0,a,c=0;c<e.length;){var l=e.charCodeAt(c++);if(l===61&&o>1)break;if((l=lC[l])===void 0)throw Error(fC);switch(o){case 0:a=l,o=1;break;case 1:t[n++]=a<<2|(l&48)>>4,a=l,o=2;break;case 2:t[n++]=(a&15)<<4|(l&60)>>2,a=l,o=3;break;case 3:t[n++]=(a&3)<<6|l,o=0;break}}if(o===1)throw Error(fC);return n-i};Hg.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var mC=ee((Qoe,pC)=>{"use strict";pC.exports=Wg;function Wg(){this._listeners={}}Wg.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this};Wg.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this};Wg.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}});var xC=ee((Zoe,_C)=>{"use strict";_C.exports=yC(yC);function yC(r){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),n=t[3]===128;function i(l,h,m){e[0]=l,h[m]=t[0],h[m+1]=t[1],h[m+2]=t[2],h[m+3]=t[3]}function o(l,h,m){e[0]=l,h[m]=t[3],h[m+1]=t[2],h[m+2]=t[1],h[m+3]=t[0]}r.writeFloatLE=n?i:o,r.writeFloatBE=n?o:i;function a(l,h){return t[0]=l[h],t[1]=l[h+1],t[2]=l[h+2],t[3]=l[h+3],e[0]}function c(l,h){return t[3]=l[h],t[2]=l[h+1],t[1]=l[h+2],t[0]=l[h+3],e[0]}r.readFloatLE=n?a:c,r.readFloatBE=n?c:a}():function(){function e(n,i,o,a){var c=i<0?1:0;if(c&&(i=-i),i===0)n(1/i>0?0:2147483648,o,a);else if(isNaN(i))n(2143289344,o,a);else if(i>34028234663852886e22)n((c<<31|2139095040)>>>0,o,a);else if(i<11754943508222875e-54)n((c<<31|Math.round(i/1401298464324817e-60))>>>0,o,a);else{var l=Math.floor(Math.log(i)/Math.LN2),h=Math.round(i*Math.pow(2,-l)*8388608)&8388607;n((c<<31|l+127<<23|h)>>>0,o,a)}}r.writeFloatLE=e.bind(null,gC),r.writeFloatBE=e.bind(null,wC);function t(n,i,o){var a=n(i,o),c=(a>>31)*2+1,l=a>>>23&255,h=a&8388607;return l===255?h?NaN:c*(1/0):l===0?c*1401298464324817e-60*h:c*Math.pow(2,l-150)*(h+8388608)}r.readFloatLE=t.bind(null,bC),r.readFloatBE=t.bind(null,vC)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),n=t[7]===128;function i(l,h,m){e[0]=l,h[m]=t[0],h[m+1]=t[1],h[m+2]=t[2],h[m+3]=t[3],h[m+4]=t[4],h[m+5]=t[5],h[m+6]=t[6],h[m+7]=t[7]}function o(l,h,m){e[0]=l,h[m]=t[7],h[m+1]=t[6],h[m+2]=t[5],h[m+3]=t[4],h[m+4]=t[3],h[m+5]=t[2],h[m+6]=t[1],h[m+7]=t[0]}r.writeDoubleLE=n?i:o,r.writeDoubleBE=n?o:i;function a(l,h){return t[0]=l[h],t[1]=l[h+1],t[2]=l[h+2],t[3]=l[h+3],t[4]=l[h+4],t[5]=l[h+5],t[6]=l[h+6],t[7]=l[h+7],e[0]}function c(l,h){return t[7]=l[h],t[6]=l[h+1],t[5]=l[h+2],t[4]=l[h+3],t[3]=l[h+4],t[2]=l[h+5],t[1]=l[h+6],t[0]=l[h+7],e[0]}r.readDoubleLE=n?a:c,r.readDoubleBE=n?c:a}():function(){function e(n,i,o,a,c,l){var h=a<0?1:0;if(h&&(a=-a),a===0)n(0,c,l+i),n(1/a>0?0:2147483648,c,l+o);else if(isNaN(a))n(0,c,l+i),n(2146959360,c,l+o);else if(a>17976931348623157e292)n(0,c,l+i),n((h<<31|2146435072)>>>0,c,l+o);else{var m;if(a<22250738585072014e-324)m=a/5e-324,n(m>>>0,c,l+i),n((h<<31|m/4294967296)>>>0,c,l+o);else{var y=Math.floor(Math.log(a)/Math.LN2);y===1024&&(y=1023),m=a*Math.pow(2,-y),n(m*4503599627370496>>>0,c,l+i),n((h<<31|y+1023<<20|m*1048576&1048575)>>>0,c,l+o)}}}r.writeDoubleLE=e.bind(null,gC,0,4),r.writeDoubleBE=e.bind(null,wC,4,0);function t(n,i,o,a,c){var l=n(a,c+i),h=n(a,c+o),m=(h>>31)*2+1,y=h>>>20&2047,E=4294967296*(h&1048575)+l;return y===2047?E?NaN:m*(1/0):y===0?m*5e-324*E:m*Math.pow(2,y-1075)*(E+4503599627370496)}r.readDoubleLE=t.bind(null,bC,0,4),r.readDoubleBE=t.bind(null,vC,4,0)}(),r}function gC(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function wC(r,e,t){e[t]=r>>>24,e[t+1]=r>>>16&255,e[t+2]=r>>>8&255,e[t+3]=r&255}function bC(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0}function vC(r,e){return(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}});var EC=ee((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}});var SC=ee(AC=>{"use strict";var I1=AC;I1.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?t+=1:n<2048?t+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,t+=4):t+=3;return t};I1.read=function(e,t,n){var i=n-t;if(i<1)return"";for(var o=null,a=[],c=0,l;t<n;)l=e[t++],l<128?a[c++]=l:l>191&&l<224?a[c++]=(l&31)<<6|e[t++]&63:l>239&&l<365?(l=((l&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,a[c++]=55296+(l>>10),a[c++]=56320+(l&1023)):a[c++]=(l&15)<<12|(e[t++]&63)<<6|e[t++]&63,c>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),c=0);return o?(c&&o.push(String.fromCharCode.apply(String,a.slice(0,c))),o.join("")):String.fromCharCode.apply(String,a.slice(0,c))};I1.write=function(e,t,n){for(var i=n,o,a,c=0;c<e.length;++c)o=e.charCodeAt(c),o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&((a=e.charCodeAt(c+1))&64512)===56320?(o=65536+((o&1023)<<10)+(a&1023),++c,t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128);return n-i}});var DC=ee((tse,PC)=>{"use strict";PC.exports=vq;function vq(r,e,t){var n=t||8192,i=n>>>1,o=null,a=n;return function(l){if(l<1||l>i)return r(l);a+l>n&&(o=r(n),a=0);var h=e.call(o,a,a+=l);return a&7&&(a=(a|7)+1),h}}});var kC=ee((rse,CC)=>{"use strict";CC.exports=wn;var cp=qu();function wn(r,e){this.lo=r>>>0,this.hi=e>>>0}var rf=wn.zero=new wn(0,0);rf.toNumber=function(){return 0};rf.zzEncode=rf.zzDecode=function(){return this};rf.length=function(){return 1};var _q=wn.zeroHash="\0\0\0\0\0\0\0\0";wn.fromNumber=function(e){if(e===0)return rf;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new wn(n,i)};wn.from=function(e){if(typeof e=="number")return wn.fromNumber(e);if(cp.isString(e))if(cp.Long)e=cp.Long.fromString(e);else return wn.fromNumber(parseInt(e,10));return e.low||e.high?new wn(e.low>>>0,e.high>>>0):rf};wn.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296};wn.prototype.toLong=function(e){return cp.Long?new cp.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var ju=String.prototype.charCodeAt;wn.fromHash=function(e){return e===_q?rf:new wn((ju.call(e,0)|ju.call(e,1)<<8|ju.call(e,2)<<16|ju.call(e,3)<<24)>>>0,(ju.call(e,4)|ju.call(e,5)<<8|ju.call(e,6)<<16|ju.call(e,7)<<24)>>>0)};wn.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};wn.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};wn.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};wn.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}});var qu=ee(T1=>{"use strict";var Je=T1;Je.asPromise=cC();Je.base64=dC();Je.EventEmitter=mC();Je.float=xC();Je.inquire=EC();Je.utf8=SC();Je.pool=DC();Je.LongBits=kC();Je.isNode=Boolean(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);Je.global=Je.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||T1;Je.emptyArray=Object.freeze?Object.freeze([]):[];Je.emptyObject=Object.freeze?Object.freeze({}):{};Je.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Je.isString=function(e){return typeof e=="string"||e instanceof String};Je.isObject=function(e){return e&&typeof e=="object"};Je.isset=Je.isSet=function(e,t){var n=e[t];return n!=null&&e.hasOwnProperty(t)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};Je.Buffer=function(){try{var r=Je.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch{return null}}();Je._Buffer_from=null;Je._Buffer_allocUnsafe=null;Je.newBuffer=function(e){return typeof e=="number"?Je.Buffer?Je._Buffer_allocUnsafe(e):new Je.Array(e):Je.Buffer?Je._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};Je.Array=typeof Uint8Array<"u"?Uint8Array:Array;Je.Long=Je.global.dcodeIO&&Je.global.dcodeIO.Long||Je.global.Long||Je.inquire("long");Je.key2Re=/^true|false|0|1$/;Je.key32Re=/^-?(?:0|[1-9][0-9]*)$/;Je.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;Je.longToHash=function(e){return e?Je.LongBits.from(e).toHash():Je.LongBits.zeroHash};Je.longFromHash=function(e,t){var n=Je.LongBits.fromHash(e);return Je.Long?Je.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))};function IC(r,e,t){for(var n=Object.keys(e),i=0;i<n.length;++i)(r[n[i]]===void 0||!t)&&(r[n[i]]=e[n[i]]);return r}Je.merge=IC;Je.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function TC(r){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&IC(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get(){return r},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}Je.newError=TC;Je.ProtocolError=TC("ProtocolError");Je.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var i=Object.keys(this),o=i.length-1;o>-1;--o)if(t[i[o]]===1&&this[i[o]]!==void 0&&this[i[o]]!==null)return i[o]}};Je.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}};Je.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};Je._configure=function(){var r=Je.Buffer;if(!r){Je._Buffer_from=Je._Buffer_allocUnsafe=null;return}Je._Buffer_from=r.from!==Uint8Array.from&&r.from||function(t,n){return new r(t,n)},Je._Buffer_allocUnsafe=r.allocUnsafe||function(t){return new r(t)}}});var M1=ee((ise,OC)=>{"use strict";OC.exports=Mt;var Po=qu(),F1,Vg=Po.LongBits,FC=Po.base64,BC=Po.utf8;function fp(r,e,t){this.fn=r,this.len=e,this.next=void 0,this.val=t}function L1(){}function xq(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function Mt(){this.len=0,this.head=new fp(L1,0,0),this.tail=this.head,this.states=null}var LC=function(){return Po.Buffer?function(){return(Mt.create=function(){return new F1})()}:function(){return new Mt}};Mt.create=LC();Mt.alloc=function(e){return new Po.Array(e)};Po.Array!==Array&&(Mt.alloc=Po.pool(Mt.alloc,Po.Array.prototype.subarray));Mt.prototype._push=function(e,t,n){return this.tail=this.tail.next=new fp(e,t,n),this.len+=t,this};function O1(r,e,t){e[t]=r&255}function Eq(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}function N1(r,e){this.len=r,this.next=void 0,this.val=e}N1.prototype=Object.create(fp.prototype);N1.prototype.fn=Eq;Mt.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new N1((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Mt.prototype.int32=function(e){return e<0?this._push(R1,10,Vg.fromNumber(e)):this.uint32(e)};Mt.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function R1(r,e,t){for(;r.hi;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}Mt.prototype.uint64=function(e){var t=Vg.from(e);return this._push(R1,t.length(),t)};Mt.prototype.int64=Mt.prototype.uint64;Mt.prototype.sint64=function(e){var t=Vg.from(e).zzEncode();return this._push(R1,t.length(),t)};Mt.prototype.bool=function(e){return this._push(O1,1,e?1:0)};function B1(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}Mt.prototype.fixed32=function(e){return this._push(B1,4,e>>>0)};Mt.prototype.sfixed32=Mt.prototype.fixed32;Mt.prototype.fixed64=function(e){var t=Vg.from(e);return this._push(B1,4,t.lo)._push(B1,4,t.hi)};Mt.prototype.sfixed64=Mt.prototype.fixed64;Mt.prototype.float=function(e){return this._push(Po.float.writeFloatLE,4,e)};Mt.prototype.double=function(e){return this._push(Po.float.writeDoubleLE,8,e)};var Aq=Po.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};Mt.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(O1,1,0);if(Po.isString(e)){var n=Mt.alloc(t=FC.length(e));FC.decode(e,n,0),e=n}return this.uint32(t)._push(Aq,t,e)};Mt.prototype.string=function(e){var t=BC.length(e);return t?this.uint32(t)._push(BC.write,t,e):this._push(O1,1,0)};Mt.prototype.fork=function(){return this.states=new xq(this),this.head=this.tail=new fp(L1,0,0),this.len=0,this};Mt.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new fp(L1,0,0),this.len=0),this};Mt.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this};Mt.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t};Mt._configure=function(r){F1=r,Mt.create=LC(),F1._configure()}});var MC=ee((ose,RC)=>{"use strict";RC.exports=Ys;var NC=M1();(Ys.prototype=Object.create(NC.prototype)).constructor=Ys;var Hu=qu();function Ys(){NC.call(this)}Ys._configure=function(){Ys.alloc=Hu._Buffer_allocUnsafe,Ys.writeBytesBuffer=Hu.Buffer&&Hu.Buffer.prototype instanceof Uint8Array&&Hu.Buffer.prototype.set.name==="set"?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}};Ys.prototype.bytes=function(e){Hu.isString(e)&&(e=Hu._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(Ys.writeBytesBuffer,t,e),this};function Sq(r,e,t){r.length<40?Hu.utf8.write(r,e,t):e.utf8Write?e.utf8Write(r,t):e.write(r,t)}Ys.prototype.string=function(e){var t=Hu.Buffer.byteLength(e);return this.uint32(t),t&&this._push(Sq,t,e),this};Ys._configure()});var $1=ee((sse,jC)=>{"use strict";jC.exports=qr;var Js=qu(),K1,$C=Js.LongBits,Pq=Js.utf8;function hs(r,e){return RangeError("index out of range: "+r.pos+" + "+(e||1)+" > "+r.len)}function qr(r){this.buf=r,this.pos=0,this.len=r.length}var UC=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new qr(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new qr(e);throw Error("illegal buffer")},zC=function(){return Js.Buffer?function(t){return(qr.create=function(i){return Js.Buffer.isBuffer(i)?new K1(i):UC(i)})(t)}:UC};qr.create=zC();qr.prototype._slice=Js.Array.prototype.subarray||Js.Array.prototype.slice;qr.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,hs(this,10);return e}}();qr.prototype.int32=function(){return this.uint32()|0};qr.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function U1(){var r=new $C(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw hs(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,r}if(this.len-this.pos>4){for(;e<5;++e)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;e<5;++e){if(this.pos>=this.len)throw hs(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}qr.prototype.bool=function(){return this.uint32()!==0};function Gg(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}qr.prototype.fixed32=function(){if(this.pos+4>this.len)throw hs(this,4);return Gg(this.buf,this.pos+=4)};qr.prototype.sfixed32=function(){if(this.pos+4>this.len)throw hs(this,4);return Gg(this.buf,this.pos+=4)|0};function KC(){if(this.pos+8>this.len)throw hs(this,8);return new $C(Gg(this.buf,this.pos+=4),Gg(this.buf,this.pos+=4))}qr.prototype.float=function(){if(this.pos+4>this.len)throw hs(this,4);var e=Js.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};qr.prototype.double=function(){if(this.pos+8>this.len)throw hs(this,4);var e=Js.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};qr.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw hs(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)};qr.prototype.string=function(){var e=this.bytes();return Pq.read(e,0,e.length)};qr.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw hs(this,e);this.pos+=e}else do if(this.pos>=this.len)throw hs(this);while(this.buf[this.pos++]&128);return this};qr.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};qr._configure=function(r){K1=r,qr.create=zC(),K1._configure();var e=Js.Long?"toLong":"toNumber";Js.merge(qr.prototype,{int64:function(){return U1.call(this)[e](!1)},uint64:function(){return U1.call(this)[e](!0)},sint64:function(){return U1.call(this).zzDecode()[e](!1)},fixed64:function(){return KC.call(this)[e](!0)},sfixed64:function(){return KC.call(this)[e](!1)}})}});var VC=ee((ase,WC)=>{"use strict";WC.exports=nf;var HC=$1();(nf.prototype=Object.create(HC.prototype)).constructor=nf;var qC=qu();function nf(r){HC.call(this,r)}nf._configure=function(){qC.Buffer&&(nf.prototype._slice=qC.Buffer.prototype.slice)};nf.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};nf._configure()});var YC=ee((use,GC)=>{"use strict";GC.exports=lp;var z1=qu();(lp.prototype=Object.create(z1.EventEmitter.prototype)).constructor=lp;function lp(r,e,t){if(typeof r!="function")throw TypeError("rpcImpl must be a function");z1.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(t)}lp.prototype.rpcCall=function r(e,t,n,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return z1.asPromise(r,a,e,t,n,i);if(!a.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return a.rpcImpl(e,t[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(l,h){if(l)return a.emit("error",l,e),o(l);if(h===null){a.end(!0);return}if(!(h instanceof n))try{h=n[a.responseDelimited?"decodeDelimited":"decode"](h)}catch(m){return a.emit("error",m,e),o(m)}return a.emit("data",h,e),o(null,h)})}catch(c){a.emit("error",c,e),setTimeout(function(){o(c)},0);return}};lp.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var XC=ee(JC=>{"use strict";var Dq=JC;Dq.Service=YC()});var ZC=ee((fse,QC)=>{"use strict";QC.exports={}});var rk=ee(tk=>{"use strict";var li=tk;li.build="minimal";li.Writer=M1();li.BufferWriter=MC();li.Reader=$1();li.BufferReader=VC();li.util=qu();li.rpc=XC();li.roots=ZC();li.configure=ek;function ek(){li.util._configure(),li.Writer._configure(li.BufferWriter),li.Reader._configure(li.BufferReader)}ek()});var Wu=ee((hse,nk)=>{"use strict";nk.exports=rk()});var ak=ee((j1,sk)=>{"use strict";Object.defineProperty(j1,"__esModule",{value:!0});Jg.BASE=2166136261;function Jg(r,e=Jg.BASE){let t=r.length;for(let n=0;n<t;n++)e^=r.charCodeAt(n),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0}j1.default=Jg;sk.exports=Jg});var Pk=ee((Gse,Sk)=>{"use strict";var Ak="[a-fA-F\\d:]",Yu=r=>r&&r.includeBoundaries?`(?:(?<=\\s|^)(?=${Ak})|(?<=${Ak})(?=\\s|$))`:"",ps="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",Zr="[a-fA-F\\d]{1,4}",iw=`
(?:
(?:${Zr}:){7}(?:${Zr}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${Zr}:){6}(?:${ps}|:${Zr}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${Zr}:){5}(?::${ps}|(?::${Zr}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${Zr}:){4}(?:(?::${Zr}){0,1}:${ps}|(?::${Zr}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${Zr}:){3}(?:(?::${Zr}){0,2}:${ps}|(?::${Zr}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${Zr}:){2}(?:(?::${Zr}){0,3}:${ps}|(?::${Zr}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${Zr}:){1}(?:(?::${Zr}){0,4}:${ps}|(?::${Zr}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${Zr}){0,5}:${ps}|(?::${Zr}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),Hq=new RegExp(`(?:^${ps}$)|(?:^${iw}$)`),Wq=new RegExp(`^${ps}$`),Vq=new RegExp(`^${iw}$`),nx=r=>r&&r.exact?Hq:new RegExp(`(?:${Yu(r)}${ps}${Yu(r)})|(?:${Yu(r)}${iw}${Yu(r)})`,"g");nx.v4=r=>r&&r.exact?Wq:new RegExp(`${Yu(r)}${ps}${Yu(r)}`,"g");nx.v6=r=>r&&r.exact?Vq:new RegExp(`${Yu(r)}${iw}${Yu(r)}`,"g");Sk.exports=nx});var Ck=ee((Yse,Dk)=>{"use strict";var ix=Pk(),Jl=r=>ix({exact:!0}).test(r);Jl.v4=r=>ix.v4({exact:!0}).test(r);Jl.v6=r=>ix.v6({exact:!0}).test(r);Jl.version=r=>Jl(r)?Jl.v4(r)?4:6:void 0;Dk.exports=Jl});var Bk=ee((Jse,Fk)=>{"use strict";var sx=Ck(),{toString:kk}=(Dn(),qn(Ad)),Gq=sx,ox=sx.v4,Ik=sx.v6,Tk=function(r,e,t){t=~~t;let n;if(ox(r))n=e||new Uint8Array(t+4),r.split(/\./g).map(function(i){n[t++]=parseInt(i,10)&255});else if(Ik(r)){let i=r.split(":",8),o;for(o=0;o<i.length;o++){let a=ox(i[o]),c;a&&(c=Tk(i[o]),i[o]=kk(c.slice(0,2),"base16")),c&&++o<8&&i.splice(o,0,kk(c.slice(2,4),"base16"))}if(i[0]==="")for(;i.length<8;)i.unshift("0");else if(i[i.length-1]==="")for(;i.length<8;)i.push("0");else if(i.length<8){for(o=0;o<i.length&&i[o]!=="";o++);let a=[o,"1"];for(o=9-i.length;o>0;o--)a.push("0");i.splice.apply(i,a)}for(n=e||new Uint8Array(t+16),o=0;o<i.length;o++){let a=parseInt(i[o],16);n[t++]=a>>8&255,n[t++]=a&255}}if(!n)throw Error("Invalid ip address: "+r);return n},Yq=function(r,e,t){e=~~e,t=t||r.length-e;let n=[],i,o=new DataView(r.buffer);if(t===4){for(let a=0;a<t;a++)n.push(r[e+a]);i=n.join(".")}else if(t===16){for(let a=0;a<t;a+=2)n.push(o.getUint16(e+a).toString(16));i=n.join(":"),i=i.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),i=i.replace(/:{3,4}/,"::")}return i};Fk.exports={isIP:Gq,isV4:ox,isV6:Ik,toBytes:Tk,toString:Yq}});var ow=ee((Xse,Ok)=>{"use strict";function hi(r){if(typeof r=="number"){if(hi.codes[r])return hi.codes[r];throw new Error("no protocol with code: "+r)}else if(typeof r=="string"){if(hi.names[r])return hi.names[r];throw new Error("no protocol with name: "+r)}throw new Error("invalid protocol id type: "+r)}var Co=-1;hi.lengthPrefixedVarSize=Co;hi.V=Co;hi.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,Co,"ip6zone"],[53,Co,"dns","resolvable"],[54,Co,"dns4","resolvable"],[55,Co,"dns6","resolvable"],[56,Co,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,Co,"unix",!1,"path"],[421,Co,"ipfs"],[421,Co,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,Co,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,Co,"memory"]];hi.names={};hi.codes={};hi.table.map(r=>{let e=Lk.apply(null,r);return hi.codes[e.code]=e,hi.names[e.name]=e,null});hi.object=Lk;function Lk(r,e,t,n,i){return{code:r,size:e,name:t,resolvable:Boolean(n),path:Boolean(i)}}Ok.exports=hi});var jk=ee((Qse,zk)=>{"use strict";var sw=Bk(),Mk=ow(),{CID:Jq}=(ur(),qn(Mv)),{base32:Uk}=(Qo(),qn(Sy)),{base58btc:Xq}=(xu(),qn(bd)),Qq=(Zo(),qn(po)),Xl=Ku(),{toString:aw}=(Dn(),qn(Ad)),{fromString:Kk}=(mo(),qn(wP)),{concat:uw}=(Kc(),qn(pv));zk.exports=yp;function yp(r,e){return e instanceof Uint8Array?yp.toString(r,e):yp.toBytes(r,e)}yp.toString=function(e,t){switch(Mk(e).code){case 4:case 41:return Zq(t);case 6:case 273:case 33:case 132:return $k(t).toString();case 53:case 54:case 55:case 56:case 400:case 777:return tH(t);case 421:return nH(t);case 444:return Rk(t);case 445:return Rk(t);default:return aw(t,"base16")}};yp.toBytes=function(e,t){switch(Mk(e).code){case 4:return Nk(t);case 41:return Nk(t);case 6:case 273:case 33:case 132:return ax(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 777:return eH(t);case 421:return rH(t);case 444:return iH(t);case 445:return oH(t);default:return Kk(t,"base16")}};function Nk(r){if(!sw.isIP(r))throw new Error("invalid ip address");return sw.toBytes(r)}function Zq(r){let e=sw.toString(r);if(!e||!sw.isIP(e))throw new Error("invalid ip address");return e}function ax(r){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function $k(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function eH(r){let e=Kk(r),t=Uint8Array.from(Xl.encode(e.length));return uw([t,e],t.length+e.length)}function tH(r){let e=Xl.decode(r);if(r=r.slice(Xl.decode.bytes),r.length!==e)throw new Error("inconsistent lengths");return aw(r)}function rH(r){let e;r[0]==="Q"||r[0]==="1"?e=Qq.decode(Xq.decode(`z${r}`)).bytes:e=Jq.parse(r).multihash.bytes;let t=Uint8Array.from(Xl.encode(e.length));return uw([t,e],t.length+e.length)}function nH(r){let e=Xl.decode(r),t=r.slice(Xl.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return aw(t,"base58btc")}function iH(r){let e=r.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==16)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion address.");let t=Uk.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=ax(n);return uw([t,i],t.length+i.length)}function oH(r){let e=r.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==56)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion3 address.");let t=Uk.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=ax(n);return uw([t,i],t.length+i.length)}function Rk(r){let e=r.slice(0,r.length-2),t=r.slice(r.length-2),n=aw(e,"base32"),i=$k(t);return n+":"+i}});var tI=ee((Zse,eI)=>{"use strict";var Hk=jk(),ux=ow(),gp=Ku(),{concat:qk}=(Kc(),qn(pv)),{toString:sH}=(Dn(),qn(Ad));eI.exports={stringToStringTuples:Wk,stringTuplesToString:Vk,tuplesToStringTuples:Yk,stringTuplesToTuples:Gk,bytesToTuples:cx,tuplesToBytes:Jk,bytesToString:aH,stringToBytes:Qk,fromString:uH,fromBytes:Zk,validateBytes:fx,isValidBytes:cH,cleanPath:cw,ParseError:lx,protoFromTuple:wp,sizeForAddr:Xk};function Wk(r){let e=[],t=r.split("/").slice(1);if(t.length===1&&t[0]==="")return[];for(let n=0;n<t.length;n++){let i=t[n],o=ux(i);if(o.size===0){e.push([i]);continue}if(n++,n>=t.length)throw lx("invalid address: "+r);if(o.path){e.push([i,cw(t.slice(n).join("/"))]);break}e.push([i,t[n]])}return e}function Vk(r){let e=[];return r.map(t=>{let n=wp(t);return e.push(n.name),t.length>1&&e.push(t[1]),null}),cw(e.join("/"))}function Gk(r){return r.map(e=>{Array.isArray(e)||(e=[e]);let t=wp(e);return e.length>1?[t.code,Hk.toBytes(t.code,e[1])]:[t.code]})}function Yk(r){return r.map(e=>{let t=wp(e);return e[1]?[t.code,Hk.toString(t.code,e[1])]:[t.code]})}function Jk(r){return Zk(qk(r.map(e=>{let t=wp(e),n=Uint8Array.from(gp.encode(t.code));return e.length>1&&(n=qk([n,e[1]])),n})))}function Xk(r,e){return r.size>0?r.size/8:r.size===0?0:gp.decode(e)+gp.decode.bytes}function cx(r){let e=[],t=0;for(;t<r.length;){let n=gp.decode(r,t),i=gp.decode.bytes,o=ux(n),a=Xk(o,r.slice(t+i));if(a===0){e.push([n]),t+=i;continue}let c=r.slice(t+i,t+i+a);if(t+=a+i,t>r.length)throw lx("Invalid address Uint8Array: "+sH(r,"base16"));e.push([n,c])}return e}function aH(r){let e=cx(r),t=Yk(e);return Vk(t)}function Qk(r){r=cw(r);let e=Wk(r),t=Gk(e);return Jk(t)}function uH(r){return Qk(r)}function Zk(r){let e=fx(r);if(e)throw e;return Uint8Array.from(r)}function fx(r){try{cx(r)}catch(e){return e}}function cH(r){return fx(r)===void 0}function cw(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function lx(r){return new Error("Error parsing address: "+r)}function wp(r){return ux(r[0])}});var oI=ee((eae,iI)=>{"use strict";var ms=tI(),Ql=ow(),rI=Ku(),{CID:fH}=(ur(),qn(Mv)),{base58btc:lH}=(xu(),qn(bd)),hH=So(),dH=Symbol.for("nodejs.util.inspect.custom"),{toString:fw}=(Dn(),qn(Ad)),{equals:pH}=(wd(),qn(qS)),hx=new Map,nI=Symbol.for("@multiformats/js-multiaddr/multiaddr"),On=class{constructor(e){if(e==null&&(e=""),Object.defineProperty(this,nI,{value:!0}),e instanceof Uint8Array)this.bytes=ms.fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=ms.fromString(e)}else if(On.isMultiaddr(e))this.bytes=ms.fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return ms.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let e={},t=this.toString().split("/");return e.family=t[1]==="ip4"?4:6,e.host=t[2],e.transport=t[3],e.port=parseInt(t[4]),e}protos(){return this.protoCodes().map(e=>Object.assign({},Ql(e)))}protoCodes(){let e=[],t=this.bytes,n=0;for(;n<t.length;){let i=rI.decode(t,n),o=rI.decode.bytes,a=Ql(i);n+=ms.sizeForAddr(a,t.slice(n+o))+o,e.push(i)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return ms.bytesToTuples(this.bytes)}stringTuples(){let e=ms.bytesToTuples(this.bytes);return ms.tuplesToStringTuples(e)}encapsulate(e){return e=new On(e),new On(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),n=this.toString(),i=n.lastIndexOf(t);if(i<0)throw new Error("Address "+this+" does not contain subaddress: "+e);return new On(n.slice(0,i))}decapsulateCode(e){let t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new On(ms.tuplesToBytes(t.slice(0,n)));return this}getPeerId(){try{let t=this.stringTuples().filter(n=>n[0]===Ql.names.ipfs.code).pop();if(t&&t[1]){let n=t[1];return n[0]==="Q"||n[0]==="1"?fw(lH.decode(`z${n}`),"base58btc"):fw(fH.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>!!Ql(t[0]).path)[0][1],e||(e=null)}catch{e=null}return e}equals(e){return pH(this.bytes,e.bytes)}async resolve(){let e=this.protos().find(i=>i.resolvable);if(!e)return[this];let t=hx.get(e.name);if(!t)throw hH(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await t(this)).map(i=>new On(i))}nodeAddress(){let e=this.protoCodes(),t=this.protoNames(),n=this.toString().split("/").slice(1);if(n.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(e[0]!==4&&e[0]!==41&&e[0]!==54&&e[0]!==55)throw new Error(`no protocol with name: "'${t[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(n[2]!=="tcp"&&n[2]!=="udp")throw new Error(`no protocol with name: "'${t[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:e[0]===41||e[0]===55?6:4,address:n[1],port:parseInt(n[3])}}isThinWaistAddress(e){let t=(e||this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}static fromNodeAddress(e,t){if(!e)throw new Error("requires node address object");if(!t)throw new Error("requires transport protocol");let n;switch(e.family){case 4:n="ip4";break;case 6:n="ip6";break;default:throw Error(`Invalid addr family. Got '${e.family}' instead of 4 or 6`)}return new On("/"+[n,e.address,t,e.port].join("/"))}static isName(e){return On.isMultiaddr(e)?e.protos().some(t=>t.resolvable):!1}static isMultiaddr(e){return e instanceof On||Boolean(e&&e[nI])}[dH](){return"<Multiaddr "+fw(this.bytes,"base16")+" - "+ms.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+fw(this.bytes,"base16")+" - "+ms.bytesToString(this.bytes)+">"}};On.protocols=Ql;On.resolvers=hx;function mH(r){return new On(r)}iI.exports={Multiaddr:On,multiaddr:mH,protocols:Ql,resolvers:hx}});var mI=ee((Aae,hw)=>{"use strict";hw.exports=AH;hw.exports.format=dI;hw.exports.parse=pI;var _H=/\B(?=(\d{3})+(?!\d))/g,xH=/(?:\.0*|(\.[^0]+)0+)$/,Xu={b:1,kb:1<<10,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},EH=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function AH(r,e){return typeof r=="string"?pI(r):typeof r=="number"?dI(r,e):null}function dI(r,e){if(!Number.isFinite(r))return null;var t=Math.abs(r),n=e&&e.thousandsSeparator||"",i=e&&e.unitSeparator||"",o=e&&e.decimalPlaces!==void 0?e.decimalPlaces:2,a=Boolean(e&&e.fixedDecimals),c=e&&e.unit||"";(!c||!Xu[c.toLowerCase()])&&(t>=Xu.pb?c="PB":t>=Xu.tb?c="TB":t>=Xu.gb?c="GB":t>=Xu.mb?c="MB":t>=Xu.kb?c="KB":c="B");var l=r/Xu[c.toLowerCase()],h=l.toFixed(o);return a||(h=h.replace(xH,"$1")),n&&(h=h.split(".").map(function(m,y){return y===0?m.replace(_H,n):m}).join(".")),h+i+c}function pI(r){if(typeof r=="number"&&!isNaN(r))return r;if(typeof r!="string")return null;var e=EH.exec(r),t,n="b";return e?(t=parseFloat(e[1]),n=e[4].toLowerCase()):(t=parseInt(r,10),n="b"),isNaN(t)?null:Math.floor(Xu[n]*t)}});var gI=ee((Sae,yI)=>{"use strict";yI.exports=r=>{if(Object.prototype.toString.call(r)!=="[object Object]")return!1;let e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}});var EI=ee((_I,xI)=>{"use strict";var dw=gI(),{hasOwnProperty:bI}=Object.prototype,{propertyIsEnumerable:SH}=Object,rh=(r,e,t)=>Object.defineProperty(r,e,{value:t,writable:!0,enumerable:!0,configurable:!0}),PH=_I,wI={concatArrays:!1,ignoreUndefined:!1},pw=r=>{let e=[];for(let t in r)bI.call(r,t)&&e.push(t);if(Object.getOwnPropertySymbols){let t=Object.getOwnPropertySymbols(r);for(let n of t)SH.call(r,n)&&e.push(n)}return e};function nh(r){return Array.isArray(r)?DH(r):dw(r)?CH(r):r}function DH(r){let e=r.slice(0,0);return pw(r).forEach(t=>{rh(e,t,nh(r[t]))}),e}function CH(r){let e=Object.getPrototypeOf(r)===null?Object.create(null):{};return pw(r).forEach(t=>{rh(e,t,nh(r[t]))}),e}var vI=(r,e,t,n)=>(t.forEach(i=>{typeof e[i]>"u"&&n.ignoreUndefined||(i in r&&r[i]!==Object.getPrototypeOf(r)?rh(r,i,wx(r[i],e[i],n)):rh(r,i,nh(e[i])))}),r),kH=(r,e,t)=>{let n=r.slice(0,0),i=0;return[r,e].forEach(o=>{let a=[];for(let c=0;c<o.length;c++)!bI.call(o,c)||(a.push(String(c)),o===r?rh(n,i++,o[c]):rh(n,i++,nh(o[c])));n=vI(n,o,pw(o).filter(c=>!a.includes(c)),t)}),n};function wx(r,e,t){return t.concatArrays&&Array.isArray(r)&&Array.isArray(e)?kH(r,e,t):!dw(e)||!dw(r)?nh(e):vI(r,e,pw(e),t)}xI.exports=function(...r){let e=wx(nh(wI),this!==PH&&this||{},wI),t={_:{}};for(let n of r)if(n!==void 0){if(!dw(n))throw new TypeError("`"+n+"` is not an Option Object");t=wx(t,{_:n},e)}return t._}});var FI=ee((Lae,vx)=>{"use strict";var BH=Object.prototype.hasOwnProperty,Gn="~";function _p(){}Object.create&&(_p.prototype=Object.create(null),new _p().__proto__||(Gn=!1));function LH(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function TI(r,e,t,n,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var o=new LH(t,n||r,i),a=Gn?Gn+e:e;return r._events[a]?r._events[a].fn?r._events[a]=[r._events[a],o]:r._events[a].push(o):(r._events[a]=o,r._eventsCount++),r}function gw(r,e){--r._eventsCount===0?r._events=new _p:delete r._events[e]}function Nn(){this._events=new _p,this._eventsCount=0}Nn.prototype.eventNames=function(){var e=[],t,n;if(this._eventsCount===0)return e;for(n in t=this._events)BH.call(t,n)&&e.push(Gn?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Nn.prototype.listeners=function(e){var t=Gn?Gn+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a};Nn.prototype.listenerCount=function(e){var t=Gn?Gn+e:e,n=this._events[t];return n?n.fn?1:n.length:0};Nn.prototype.emit=function(e,t,n,i,o,a){var c=Gn?Gn+e:e;if(!this._events[c])return!1;var l=this._events[c],h=arguments.length,m,y;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,o),!0;case 6:return l.fn.call(l.context,t,n,i,o,a),!0}for(y=1,m=new Array(h-1);y<h;y++)m[y-1]=arguments[y];l.fn.apply(l.context,m)}else{var E=l.length,k;for(y=0;y<E;y++)switch(l[y].once&&this.removeListener(e,l[y].fn,void 0,!0),h){case 1:l[y].fn.call(l[y].context);break;case 2:l[y].fn.call(l[y].context,t);break;case 3:l[y].fn.call(l[y].context,t,n);break;case 4:l[y].fn.call(l[y].context,t,n,i);break;default:if(!m)for(k=1,m=new Array(h-1);k<h;k++)m[k-1]=arguments[k];l[y].fn.apply(l[y].context,m)}}return!0};Nn.prototype.on=function(e,t,n){return TI(this,e,t,n,!1)};Nn.prototype.once=function(e,t,n){return TI(this,e,t,n,!0)};Nn.prototype.removeListener=function(e,t,n,i){var o=Gn?Gn+e:e;if(!this._events[o])return this;if(!t)return gw(this,o),this;var a=this._events[o];if(a.fn)a.fn===t&&(!i||a.once)&&(!n||a.context===n)&&gw(this,o);else{for(var c=0,l=[],h=a.length;c<h;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&l.push(a[c]);l.length?this._events[o]=l.length===1?l[0]:l:gw(this,o)}return this};Nn.prototype.removeAllListeners=function(e){var t;return e?(t=Gn?Gn+e:e,this._events[t]&&gw(this,t)):(this._events=new _p,this._eventsCount=0),this};Nn.prototype.off=Nn.prototype.removeListener;Nn.prototype.addListener=Nn.prototype.on;Nn.prefixed=Gn;Nn.EventEmitter=Nn;typeof vx<"u"&&(vx.exports=Nn)});var df=ee((lue,VI)=>{"use strict";var MH=async function*(r,e){for await(let t of r)await e(t)&&(yield t)};VI.exports=MH});var oh=ee((mue,GI)=>{"use strict";var KH=async r=>{for await(let e of r);};GI.exports=KH});var oT=ee((Sue,iT)=>{"use strict";var jH=async r=>{for await(let e of r)return e};iT.exports=jH});var Lp=ee((sce,fT)=>{"use strict";var GH=async function*(r,e){for await(let t of r)yield e(t)};fT.exports=GH});var bT=ee((bce,wT)=>{"use strict";async function*QH(r,e=1){let t=[];e<1&&(e=1);for await(let n of r)for(t.push(n);t.length>=e;)yield t.slice(0,e),t=t.slice(e);for(;t.length;)yield t.slice(0,e),t=t.slice(e)}wT.exports=QH});var _T=ee((vce,vT)=>{"use strict";var ZH=bT();async function*eW(r,e=1){for await(let t of ZH(r,e)){let n=t.map(i=>i().then(o=>({ok:!0,value:o}),o=>({ok:!1,err:o})));for(let i=0;i<n.length;i++){let o=await n[i];if(o.ok)yield o.value;else throw o.err}}}vT.exports=eW});var ET=ee((xce,xT)=>{xT.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var PT=ee((Ace,ST)=>{var AT=ET();ST.exports=class{constructor(e){this.hwm=e||16,this.head=new AT(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let t=this.head;this.head=t.next=new AT(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return e}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}});var CT=ee((Sce,DT)=>{var Hx=PT();DT.exports=r=>{r=r||{};let e;typeof r=="function"?(e=r,r={}):e=r.onEnd;let t=new Hx,n,i,o,a=()=>{if(!t.isEmpty()){if(r.writev){let O,ue=[];for(;!t.isEmpty();){if(O=t.shift(),O.error)throw O.error;ue.push(O.value)}return{done:O.done,value:ue}}let T=t.shift();if(T.error)throw T.error;return T}return o?{done:!0}:new Promise((T,O)=>{i=ue=>(i=null,ue.error?O(ue.error):r.writev&&!ue.done?T({done:ue.done,value:[ue.value]}):T(ue),n)})},c=T=>i?i(T):(t.push(T),n),l=T=>(t=new Hx,i?i({error:T}):(t.push({error:T}),n)),h=T=>o?n:c({done:!1,value:T}),m=T=>o?n:(o=!0,T?l(T):c({done:!0})),y=()=>(t=new Hx,m(),{done:!0}),E=T=>(m(T),{done:!0});if(n={[Symbol.asyncIterator](){return this},next:a,return:y,throw:E,push:h,end:m},!e)return n;let k=n;return n={[Symbol.asyncIterator](){return this},next(){return k.next()},throw(T){return k.throw(T),e&&(e(T),e=null),{done:!0}},return(){return k.return(),e&&(e(),e=null),{done:!0}},push:h,end(T){return k.end(T),e&&(e(T),e=null),n}},n}});var Iw=ee((Pce,kT)=>{"use strict";var tW=CT(),rW=async function*(...r){let e=tW();setTimeout(async()=>{try{await Promise.all(r.map(async t=>{for await(let n of t)e.push(n)})),e.end()}catch(t){e.end(t)}},0),yield*e};kT.exports=rW});var Np=ee((Jce,KT)=>{"use strict";var pW=async function*(r,e){let t=0;if(!(e<1)){for await(let n of r)if(yield n,t++,t===e)return}};KT.exports=pW});var Fw=ee((Xce,$T)=>{"use strict";var mW=async r=>{let e=[];for await(let t of r)e.push(t);return e};$T.exports=mW});var i4=ee((Sle,n4)=>{"use strict";var IW=Fw(),TW=async function*(r,e){yield*(await IW(r)).sort(e)};n4.exports=TW});var s4=ee(o4=>{"use strict";o4.supports=function(...e){let t=e.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})}});var bs=ee((Cle,a4)=>{"use strict";a4.exports=class extends Error{constructor(e,t){super(e||""),typeof t=="object"&&t!==null&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var f4=ee(Nw=>{"use strict";Nw.byteLength=BW;Nw.toByteArray=OW;Nw.fromByteArray=MW;var ta=[],Io=[],FW=typeof Uint8Array<"u"?Uint8Array:Array,uE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(wf=0,u4=uE.length;wf<u4;++wf)ta[wf]=uE[wf],Io[uE.charCodeAt(wf)]=wf;var wf,u4;Io["-".charCodeAt(0)]=62;Io["_".charCodeAt(0)]=63;function c4(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function BW(r){var e=c4(r),t=e[0],n=e[1];return(t+n)*3/4-n}function LW(r,e,t){return(e+t)*3/4-t}function OW(r){var e,t=c4(r),n=t[0],i=t[1],o=new FW(LW(r,n,i)),a=0,c=i>0?n-4:n,l;for(l=0;l<c;l+=4)e=Io[r.charCodeAt(l)]<<18|Io[r.charCodeAt(l+1)]<<12|Io[r.charCodeAt(l+2)]<<6|Io[r.charCodeAt(l+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=e&255;return i===2&&(e=Io[r.charCodeAt(l)]<<2|Io[r.charCodeAt(l+1)]>>4,o[a++]=e&255),i===1&&(e=Io[r.charCodeAt(l)]<<10|Io[r.charCodeAt(l+1)]<<4|Io[r.charCodeAt(l+2)]>>2,o[a++]=e>>8&255,o[a++]=e&255),o}function NW(r){return ta[r>>18&63]+ta[r>>12&63]+ta[r>>6&63]+ta[r&63]}function RW(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(NW(n));return i.join("")}function MW(r){for(var e,t=r.length,n=t%3,i=[],o=16383,a=0,c=t-n;a<c;a+=o)i.push(RW(r,a,a+o>c?c:a+o));return n===1?(e=r[t-1],i.push(ta[e>>2]+ta[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(ta[e>>10]+ta[e>>4&63]+ta[e<<2&63]+"=")),i.join("")}});var l4=ee(cE=>{cE.read=function(r,e,t,n,i){var o,a,c=i*8-n-1,l=(1<<c)-1,h=l>>1,m=-7,y=t?i-1:0,E=t?-1:1,k=r[e+y];for(y+=E,o=k&(1<<-m)-1,k>>=-m,m+=c;m>0;o=o*256+r[e+y],y+=E,m-=8);for(a=o&(1<<-m)-1,o>>=-m,m+=n;m>0;a=a*256+r[e+y],y+=E,m-=8);if(o===0)o=1-h;else{if(o===l)return a?NaN:(k?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-h}return(k?-1:1)*a*Math.pow(2,o-n)};cE.write=function(r,e,t,n,i,o){var a,c,l,h=o*8-i-1,m=(1<<h)-1,y=m>>1,E=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,k=n?0:o-1,T=n?1:-1,O=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,a=m):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+y>=1?e+=E/l:e+=E*Math.pow(2,1-y),e*l>=2&&(a++,l/=2),a+y>=m?(c=0,a=m):a+y>=1?(c=(e*l-1)*Math.pow(2,i),a=a+y):(c=e*Math.pow(2,y-1)*Math.pow(2,i),a=0));i>=8;r[t+k]=c&255,k+=T,c/=256,i-=8);for(a=a<<i|c,h+=i;h>0;r[t+k]=a&255,k+=T,a/=256,h-=8);r[t+k-T]|=O*128}});var vf=ee(hh=>{"use strict";var fE=f4(),fh=l4(),h4=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;hh.Buffer=J;hh.SlowBuffer=qW;hh.INSPECT_MAX_BYTES=50;var Rw=2147483647;hh.kMaxLength=Rw;J.TYPED_ARRAY_SUPPORT=UW();!J.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function UW(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(J.prototype,"parent",{enumerable:!0,get:function(){if(!!J.isBuffer(this))return this.buffer}});Object.defineProperty(J.prototype,"offset",{enumerable:!0,get:function(){if(!!J.isBuffer(this))return this.byteOffset}});function $a(r){if(r>Rw)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,J.prototype),e}function J(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return pE(r)}return y4(r,e,t)}J.poolSize=8192;function y4(r,e,t){if(typeof r=="string")return $W(r,e);if(ArrayBuffer.isView(r))return zW(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(ra(r,ArrayBuffer)||r&&ra(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ra(r,SharedArrayBuffer)||r&&ra(r.buffer,SharedArrayBuffer)))return hE(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return J.from(n,e,t);let i=jW(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return J.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}J.from=function(r,e,t){return y4(r,e,t)};Object.setPrototypeOf(J.prototype,Uint8Array.prototype);Object.setPrototypeOf(J,Uint8Array);function g4(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function KW(r,e,t){return g4(r),r<=0?$a(r):e!==void 0?typeof t=="string"?$a(r).fill(e,t):$a(r).fill(e):$a(r)}J.alloc=function(r,e,t){return KW(r,e,t)};function pE(r){return g4(r),$a(r<0?0:mE(r)|0)}J.allocUnsafe=function(r){return pE(r)};J.allocUnsafeSlow=function(r){return pE(r)};function $W(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!J.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=w4(r,e)|0,n=$a(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function lE(r){let e=r.length<0?0:mE(r.length)|0,t=$a(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function zW(r){if(ra(r,Uint8Array)){let e=new Uint8Array(r);return hE(e.buffer,e.byteOffset,e.byteLength)}return lE(r)}function hE(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,J.prototype),n}function jW(r){if(J.isBuffer(r)){let e=mE(r.length)|0,t=$a(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||gE(r.length)?$a(0):lE(r);if(r.type==="Buffer"&&Array.isArray(r.data))return lE(r.data)}function mE(r){if(r>=Rw)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Rw.toString(16)+" bytes");return r|0}function qW(r){return+r!=r&&(r=0),J.alloc(+r)}J.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==J.prototype};J.compare=function(e,t){if(ra(e,Uint8Array)&&(e=J.from(e,e.offset,e.byteLength)),ra(t,Uint8Array)&&(t=J.from(t,t.offset,t.byteLength)),!J.isBuffer(e)||!J.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};J.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};J.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return J.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=J.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let a=e[n];if(ra(a,Uint8Array))o+a.length>i.length?(J.isBuffer(a)||(a=J.from(a)),a.copy(i,o)):Uint8Array.prototype.set.call(i,a,o);else if(J.isBuffer(a))a.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=a.length}return i};function w4(r,e){if(J.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||ra(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return dE(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return D4(r).length;default:if(i)return n?-1:dE(r).length;e=(""+e).toLowerCase(),i=!0}}J.byteLength=w4;function HW(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return tV(this,e,t);case"utf8":case"utf-8":return v4(this,e,t);case"ascii":return ZW(this,e,t);case"latin1":case"binary":return eV(this,e,t);case"base64":return XW(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return rV(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}J.prototype._isBuffer=!0;function bf(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}J.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)bf(this,t,t+1);return this};J.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)bf(this,t,t+3),bf(this,t+1,t+2);return this};J.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)bf(this,t,t+7),bf(this,t+1,t+6),bf(this,t+2,t+5),bf(this,t+3,t+4);return this};J.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?v4(this,0,e):HW.apply(this,arguments)};J.prototype.toLocaleString=J.prototype.toString;J.prototype.equals=function(e){if(!J.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:J.compare(this,e)===0};J.prototype.inspect=function(){let e="",t=hh.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};h4&&(J.prototype[h4]=J.prototype.inspect);J.prototype.compare=function(e,t,n,i,o){if(ra(e,Uint8Array)&&(e=J.from(e,e.offset,e.byteLength)),!J.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let a=o-i,c=n-t,l=Math.min(a,c),h=this.slice(i,o),m=e.slice(t,n);for(let y=0;y<l;++y)if(h[y]!==m[y]){a=h[y],c=m[y];break}return a<c?-1:c<a?1:0};function b4(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,gE(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=J.from(e,n)),J.isBuffer(e))return e.length===0?-1:d4(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):d4(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function d4(r,e,t,n,i){let o=1,a=r.length,c=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,a/=2,c/=2,t/=2}function l(m,y){return o===1?m[y]:m.readUInt16BE(y*o)}let h;if(i){let m=-1;for(h=t;h<a;h++)if(l(r,h)===l(e,m===-1?0:h-m)){if(m===-1&&(m=h),h-m+1===c)return m*o}else m!==-1&&(h-=h-m),m=-1}else for(t+c>a&&(t=a-c),h=t;h>=0;h--){let m=!0;for(let y=0;y<c;y++)if(l(r,h+y)!==l(e,y)){m=!1;break}if(m)return h}return-1}J.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};J.prototype.indexOf=function(e,t,n){return b4(this,e,t,n,!0)};J.prototype.lastIndexOf=function(e,t,n){return b4(this,e,t,n,!1)};function WW(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let a;for(a=0;a<n;++a){let c=parseInt(e.substr(a*2,2),16);if(gE(c))return a;r[t+a]=c}return a}function VW(r,e,t,n){return Mw(dE(e,r.length-t),r,t,n)}function GW(r,e,t,n){return Mw(sV(e),r,t,n)}function YW(r,e,t,n){return Mw(D4(e),r,t,n)}function JW(r,e,t,n){return Mw(aV(e,r.length-t),r,t,n)}J.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let a=!1;for(;;)switch(i){case"hex":return WW(this,e,t,n);case"utf8":case"utf-8":return VW(this,e,t,n);case"ascii":case"latin1":case"binary":return GW(this,e,t,n);case"base64":return YW(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return JW(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};J.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function XW(r,e,t){return e===0&&t===r.length?fE.fromByteArray(r):fE.fromByteArray(r.slice(e,t))}function v4(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],a=null,c=o>239?4:o>223?3:o>191?2:1;if(i+c<=t){let l,h,m,y;switch(c){case 1:o<128&&(a=o);break;case 2:l=r[i+1],(l&192)===128&&(y=(o&31)<<6|l&63,y>127&&(a=y));break;case 3:l=r[i+1],h=r[i+2],(l&192)===128&&(h&192)===128&&(y=(o&15)<<12|(l&63)<<6|h&63,y>2047&&(y<55296||y>57343)&&(a=y));break;case 4:l=r[i+1],h=r[i+2],m=r[i+3],(l&192)===128&&(h&192)===128&&(m&192)===128&&(y=(o&15)<<18|(l&63)<<12|(h&63)<<6|m&63,y>65535&&y<1114112&&(a=y))}}a===null?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=c}return QW(n)}var p4=4096;function QW(r){let e=r.length;if(e<=p4)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=p4));return t}function ZW(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function eV(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function tV(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=uV[r[o]];return i}function rV(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}J.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,J.prototype),i};function vn(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}J.prototype.readUintLE=J.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||vn(e,t,this.length);let i=this[e],o=1,a=0;for(;++a<t&&(o*=256);)i+=this[e+a]*o;return i};J.prototype.readUintBE=J.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||vn(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};J.prototype.readUint8=J.prototype.readUInt8=function(e,t){return e=e>>>0,t||vn(e,1,this.length),this[e]};J.prototype.readUint16LE=J.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||vn(e,2,this.length),this[e]|this[e+1]<<8};J.prototype.readUint16BE=J.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||vn(e,2,this.length),this[e]<<8|this[e+1]};J.prototype.readUint32LE=J.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||vn(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};J.prototype.readUint32BE=J.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||vn(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};J.prototype.readBigUInt64LE=oc(function(e){e=e>>>0,lh(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Mp(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});J.prototype.readBigUInt64BE=oc(function(e){e=e>>>0,lh(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Mp(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});J.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||vn(e,t,this.length);let i=this[e],o=1,a=0;for(;++a<t&&(o*=256);)i+=this[e+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};J.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||vn(e,t,this.length);let i=t,o=1,a=this[e+--i];for(;i>0&&(o*=256);)a+=this[e+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*t)),a};J.prototype.readInt8=function(e,t){return e=e>>>0,t||vn(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};J.prototype.readInt16LE=function(e,t){e=e>>>0,t||vn(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};J.prototype.readInt16BE=function(e,t){e=e>>>0,t||vn(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};J.prototype.readInt32LE=function(e,t){return e=e>>>0,t||vn(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};J.prototype.readInt32BE=function(e,t){return e=e>>>0,t||vn(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};J.prototype.readBigInt64LE=oc(function(e){e=e>>>0,lh(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Mp(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});J.prototype.readBigInt64BE=oc(function(e){e=e>>>0,lh(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Mp(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});J.prototype.readFloatLE=function(e,t){return e=e>>>0,t||vn(e,4,this.length),fh.read(this,e,!0,23,4)};J.prototype.readFloatBE=function(e,t){return e=e>>>0,t||vn(e,4,this.length),fh.read(this,e,!1,23,4)};J.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||vn(e,8,this.length),fh.read(this,e,!0,52,8)};J.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||vn(e,8,this.length),fh.read(this,e,!1,52,8)};function mi(r,e,t,n,i,o){if(!J.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}J.prototype.writeUintLE=J.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let c=Math.pow(2,8*n)-1;mi(this,e,t,n,c,0)}let o=1,a=0;for(this[t]=e&255;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n};J.prototype.writeUintBE=J.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let c=Math.pow(2,8*n)-1;mi(this,e,t,n,c,0)}let o=n-1,a=1;for(this[t+o]=e&255;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n};J.prototype.writeUint8=J.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||mi(this,e,t,1,255,0),this[t]=e&255,t+1};J.prototype.writeUint16LE=J.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||mi(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};J.prototype.writeUint16BE=J.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||mi(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};J.prototype.writeUint32LE=J.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||mi(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};J.prototype.writeUint32BE=J.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||mi(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function _4(r,e,t,n,i){P4(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=a,a=a>>8,r[t++]=a,a=a>>8,r[t++]=a,a=a>>8,r[t++]=a,t}function x4(r,e,t,n,i){P4(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=a,a=a>>8,r[t+2]=a,a=a>>8,r[t+1]=a,a=a>>8,r[t]=a,t+8}J.prototype.writeBigUInt64LE=oc(function(e,t=0){return _4(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});J.prototype.writeBigUInt64BE=oc(function(e,t=0){return x4(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});J.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let l=Math.pow(2,8*n-1);mi(this,e,t,n,l-1,-l)}let o=0,a=1,c=0;for(this[t]=e&255;++o<n&&(a*=256);)e<0&&c===0&&this[t+o-1]!==0&&(c=1),this[t+o]=(e/a>>0)-c&255;return t+n};J.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let l=Math.pow(2,8*n-1);mi(this,e,t,n,l-1,-l)}let o=n-1,a=1,c=0;for(this[t+o]=e&255;--o>=0&&(a*=256);)e<0&&c===0&&this[t+o+1]!==0&&(c=1),this[t+o]=(e/a>>0)-c&255;return t+n};J.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||mi(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};J.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||mi(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};J.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||mi(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};J.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||mi(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};J.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||mi(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};J.prototype.writeBigInt64LE=oc(function(e,t=0){return _4(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});J.prototype.writeBigInt64BE=oc(function(e,t=0){return x4(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function E4(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function A4(r,e,t,n,i){return e=+e,t=t>>>0,i||E4(r,e,t,4,34028234663852886e22,-34028234663852886e22),fh.write(r,e,t,n,23,4),t+4}J.prototype.writeFloatLE=function(e,t,n){return A4(this,e,t,!0,n)};J.prototype.writeFloatBE=function(e,t,n){return A4(this,e,t,!1,n)};function S4(r,e,t,n,i){return e=+e,t=t>>>0,i||E4(r,e,t,8,17976931348623157e292,-17976931348623157e292),fh.write(r,e,t,n,52,8),t+8}J.prototype.writeDoubleLE=function(e,t,n){return S4(this,e,t,!0,n)};J.prototype.writeDoubleBE=function(e,t,n){return S4(this,e,t,!1,n)};J.prototype.copy=function(e,t,n,i){if(!J.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};J.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!J.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let a=e.charCodeAt(0);(i==="utf8"&&a<128||i==="latin1")&&(e=a)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let a=J.isBuffer(e)?e:J.from(e,i),c=a.length;if(c===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%c]}return this};var ch={};function yE(r,e,t){ch[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}yE("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);yE("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);yE("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=m4(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=m4(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function m4(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function nV(r,e,t){lh(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&Mp(e,r.length-(t+1))}function P4(r,e,t,n,i,o){if(r>t||r<e){let a=typeof e=="bigint"?"n":"",c;throw o>3?e===0||e===BigInt(0)?c=`>= 0${a} and < 2${a} ** ${(o+1)*8}${a}`:c=`>= -(2${a} ** ${(o+1)*8-1}${a}) and < 2 ** ${(o+1)*8-1}${a}`:c=`>= ${e}${a} and <= ${t}${a}`,new ch.ERR_OUT_OF_RANGE("value",c,r)}nV(n,i,o)}function lh(r,e){if(typeof r!="number")throw new ch.ERR_INVALID_ARG_TYPE(e,"number",r)}function Mp(r,e,t){throw Math.floor(r)!==r?(lh(r,t),new ch.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new ch.ERR_BUFFER_OUT_OF_BOUNDS:new ch.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var iV=/[^+/0-9A-Za-z-_]/g;function oV(r){if(r=r.split("=")[0],r=r.trim().replace(iV,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function dE(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let a=0;a<n;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function sV(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function aV(r,e){let t,n,i,o=[];for(let a=0;a<r.length&&!((e-=2)<0);++a)t=r.charCodeAt(a),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function D4(r){return fE.toByteArray(oV(r))}function Mw(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function ra(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function gE(r){return r!==r}var uV=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function oc(r){return typeof BigInt>"u"?cV:r}function cV(){throw new Error("BigInt not supported")}});var bE=ee((Ble,C4)=>{"use strict";var wE=null;C4.exports=function(){return wE===null&&(wE={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),wE}});var xE=ee(k4=>{"use strict";var vE=bs(),fV=new Set(["buffer","view","utf8"]),_E=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!fV.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new vE(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new vE(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new vE(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};k4.Encoding=_E});var PE=ee(Uw=>{"use strict";var{Buffer:AE}=vf()||{},{Encoding:SE}=xE(),lV=bE(),Up=class extends SE{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new Kp({encode:this.encode,decode:e=>this.decode(AE.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},Kp=class extends SE{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new Up({encode:e=>{let t=this.encode(e);return AE.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},EE=class extends SE{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new Up({encode:e=>AE.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:t}=lV();return new Kp({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(t.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};Uw.BufferFormat=Up;Uw.ViewFormat=Kp;Uw.UTF8Format=EE});var B4=ee(_f=>{"use strict";var{Buffer:Rn}=vf()||{Buffer:{isBuffer:()=>!1}},{textEncoder:T4,textDecoder:I4}=bE()(),{BufferFormat:$p,ViewFormat:DE,UTF8Format:F4}=PE(),Kw=r=>r;_f.utf8=new F4({encode:function(r){return Rn.isBuffer(r)?r.toString("utf8"):ArrayBuffer.isView(r)?I4.decode(r):String(r)},decode:Kw,name:"utf8",createViewTranscoder(){return new DE({encode:function(r){return ArrayBuffer.isView(r)?r:T4.encode(r)},decode:function(r){return I4.decode(r)},name:`${this.name}+view`})},createBufferTranscoder(){return new $p({encode:function(r){return Rn.isBuffer(r)?r:ArrayBuffer.isView(r)?Rn.from(r.buffer,r.byteOffset,r.byteLength):Rn.from(String(r),"utf8")},decode:function(r){return r.toString("utf8")},name:`${this.name}+buffer`})}});_f.json=new F4({encode:JSON.stringify,decode:JSON.parse,name:"json"});_f.buffer=new $p({encode:function(r){return Rn.isBuffer(r)?r:ArrayBuffer.isView(r)?Rn.from(r.buffer,r.byteOffset,r.byteLength):Rn.from(String(r),"utf8")},decode:Kw,name:"buffer",createViewTranscoder(){return new DE({encode:function(r){return ArrayBuffer.isView(r)?r:Rn.from(String(r),"utf8")},decode:function(r){return Rn.from(r.buffer,r.byteOffset,r.byteLength)},name:`${this.name}+view`})}});_f.view=new DE({encode:function(r){return ArrayBuffer.isView(r)?r:T4.encode(r)},decode:Kw,name:"view",createBufferTranscoder(){return new $p({encode:function(r){return Rn.isBuffer(r)?r:ArrayBuffer.isView(r)?Rn.from(r.buffer,r.byteOffset,r.byteLength):Rn.from(String(r),"utf8")},decode:Kw,name:`${this.name}+buffer`})}});_f.hex=new $p({encode:function(r){return Rn.isBuffer(r)?r:Rn.from(String(r),"hex")},decode:function(r){return r.toString("hex")},name:"hex"});_f.base64=new $p({encode:function(r){return Rn.isBuffer(r)?r:Rn.from(String(r),"base64")},decode:function(r){return r.toString("base64")},name:"base64"})});var N4=ee(O4=>{"use strict";var L4=bs(),zw=B4(),{Encoding:hV}=xE(),{BufferFormat:dV,ViewFormat:pV,UTF8Format:mV}=PE(),zp=Symbol("formats"),$w=Symbol("encodings"),yV=new Set(["buffer","view","utf8"]),CE=class{constructor(e){if(Array.isArray(e)){if(!e.every(t=>yV.has(t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[$w]=new Map,this[zp]=new Set(e);for(let t in zw)try{this.encoding(t)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[$w].values()))}encoding(e){let t=this[$w].get(e);if(t===void 0){if(typeof e=="string"&&e!==""){if(t=vV[e],!t)throw new L4(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");t=gV(e)}let{name:n,format:i}=t;if(!this[zp].has(i))if(this[zp].has("view"))t=t.createViewTranscoder();else if(this[zp].has("buffer"))t=t.createBufferTranscoder();else if(this[zp].has("utf8"))t=t.createUTF8Transcoder();else throw new L4(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let o of[e,n,t.name,t.commonName])this[$w].set(o,t)}return t}};O4.Transcoder=CE;function gV(r){if(r instanceof hV)return r;let e="type"in r&&typeof r.type=="string"?r.type:void 0,t=r.name||e||`anonymous-${_V++}`;switch(wV(r)){case"view":return new pV({...r,name:t});case"utf8":return new mV({...r,name:t});case"buffer":return new dV({...r,name:t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function wV(r){return"format"in r&&r.format!==void 0?r.format:"buffer"in r&&typeof r.buffer=="boolean"?r.buffer?"buffer":"utf8":"code"in r&&Number.isInteger(r.code)?"view":"buffer"}var bV={binary:zw.buffer,"utf-8":zw.utf8},vV={...zw,...bV},_V=0});var V4=ee((Mle,kE)=>{"use strict";var dh=typeof Reflect=="object"?Reflect:null,R4=dh&&typeof dh.apply=="function"?dh.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},jw;dh&&typeof dh.ownKeys=="function"?jw=dh.ownKeys:Object.getOwnPropertySymbols?jw=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:jw=function(e){return Object.getOwnPropertyNames(e)};function xV(r){console&&console.warn&&console.warn(r)}var U4=Number.isNaN||function(e){return e!==e};function Zt(){Zt.init.call(this)}kE.exports=Zt;kE.exports.once=PV;Zt.EventEmitter=Zt;Zt.prototype._events=void 0;Zt.prototype._eventsCount=0;Zt.prototype._maxListeners=void 0;var M4=10;function qw(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Zt,"defaultMaxListeners",{enumerable:!0,get:function(){return M4},set:function(r){if(typeof r!="number"||r<0||U4(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");M4=r}});Zt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Zt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||U4(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function K4(r){return r._maxListeners===void 0?Zt.defaultMaxListeners:r._maxListeners}Zt.prototype.getMaxListeners=function(){return K4(this)};Zt.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var c=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw c.context=a,c}var l=o[e];if(l===void 0)return!1;if(typeof l=="function")R4(l,this,t);else for(var h=l.length,m=H4(l,h),n=0;n<h;++n)R4(m[n],this,t);return!0};function $4(r,e,t,n){var i,o,a;if(qw(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),a=o[e]),a===void 0)a=o[e]=t,++r._eventsCount;else if(typeof a=="function"?a=o[e]=n?[t,a]:[a,t]:n?a.unshift(t):a.push(t),i=K4(r),i>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=r,c.type=e,c.count=a.length,xV(c)}return r}Zt.prototype.addListener=function(e,t){return $4(this,e,t,!1)};Zt.prototype.on=Zt.prototype.addListener;Zt.prototype.prependListener=function(e,t){return $4(this,e,t,!0)};function EV(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function z4(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=EV.bind(n);return i.listener=t,n.wrapFn=i,i}Zt.prototype.once=function(e,t){return qw(t),this.on(e,z4(this,e,t)),this};Zt.prototype.prependOnceListener=function(e,t){return qw(t),this.prependListener(e,z4(this,e,t)),this};Zt.prototype.removeListener=function(e,t){var n,i,o,a,c;if(qw(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){c=n[a].listener,o=a;break}if(o<0)return this;o===0?n.shift():AV(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,c||t)}return this};Zt.prototype.off=Zt.prototype.removeListener;Zt.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function j4(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?SV(i):H4(i,i.length)}Zt.prototype.listeners=function(e){return j4(this,e,!0)};Zt.prototype.rawListeners=function(e){return j4(this,e,!1)};Zt.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):q4.call(r,e)};Zt.prototype.listenerCount=q4;function q4(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Zt.prototype.eventNames=function(){return this._eventsCount>0?jw(this._events):[]};function H4(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function AV(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function SV(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function PV(r,e){return new Promise(function(t,n){function i(a){r.removeListener(e,o),n(a)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}W4(r,e,o,{once:!0}),e!=="error"&&DV(r,i,{once:!0})})}function DV(r,e,t){typeof r.on=="function"&&W4(r,"error",e,t)}function W4(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(o){n.once&&r.removeEventListener(e,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}});var Y4=ee((Ule,G4)=>{G4.exports=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(r)});var jp=ee(IE=>{"use strict";var J4=Y4();IE.fromCallback=function(r,e){if(r===void 0){var t=new Promise(function(n,i){r=function(o,a){o?i(o):n(a)}});r[e!==void 0?e:"promise"]=t}else if(typeof r!="function")throw new TypeError("Callback must be a function");return r};IE.fromPromise=function(r,e){if(e===void 0)return r;r.then(function(t){J4(()=>e(null,t))}).catch(function(t){J4(()=>e(t))})}});var Hw=ee(TE=>{"use strict";TE.getCallback=function(r,e){return typeof r=="function"?r:e};TE.getOptions=function(r,e){return typeof r=="object"&&r!==null?r:e!==void 0?e:{}}});var lc=ee(Yw=>{"use strict";var{fromCallback:FE}=jp(),zi=bs(),{getOptions:BE,getCallback:X4}=Hw(),xf=Symbol("promise"),ph=Symbol("callback"),na=Symbol("working"),Ef=Symbol("handleOne"),za=Symbol("handleMany"),LE=Symbol("autoClose"),cc=Symbol("finishWork"),ia=Symbol("returnMany"),sc=Symbol("closing"),qp=Symbol("handleClose"),Ww=Symbol("closed"),Hp=Symbol("closeCallbacks"),uc=Symbol("keyEncoding"),Af=Symbol("valueEncoding"),OE=Symbol("abortOnClose"),Vw=Symbol("legacy"),NE=Symbol("keys"),RE=Symbol("values"),ac=Symbol("limit"),To=Symbol("count"),Gw=Object.freeze({}),CV=()=>{},Q4=!1,Wp=class{constructor(e,t,n){if(typeof e!="object"||e===null){let i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof t!="object"||t===null)throw new TypeError("The second argument must be an options object");this[Ww]=!1,this[Hp]=[],this[na]=!1,this[sc]=!1,this[LE]=!1,this[ph]=null,this[Ef]=this[Ef].bind(this),this[za]=this[za].bind(this),this[qp]=this[qp].bind(this),this[uc]=t[uc],this[Af]=t[Af],this[Vw]=n,this[ac]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[To]=0,this[OE]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[To]}get limit(){return this[ac]}next(e){let t;if(e===void 0)t=new Promise((n,i)=>{e=(o,a,c)=>{o?i(o):this[Vw]?a===void 0&&c===void 0?n():n([a,c]):n(a)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[sc]?this.nextTick(e,new zi("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[na]?this.nextTick(e,new zi("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[na]=!0,this[ph]=e,this[To]>=this[ac]?this.nextTick(this[Ef],null):this._next(this[Ef])),t}_next(e){this.nextTick(e)}nextv(e,t,n){return n=X4(t,n),n=FE(n,xf),t=BE(t,Gw),Number.isInteger(e)?(this[sc]?this.nextTick(n,new zi("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[na]?this.nextTick(n,new zi("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[ac]<1/0&&(e=Math.min(e,this[ac]-this[To])),this[na]=!0,this[ph]=n,e<=0?this.nextTick(this[za],null,[]):this._nextv(e,t,this[za])),n[xf]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[xf])}_nextv(e,t,n){let i=[],o=(a,c,l)=>{if(a)return n(a);if(this[Vw]?c===void 0&&l===void 0:c===void 0)return n(null,i);i.push(this[Vw]?[c,l]:c),i.length===e?n(null,i):this._next(o)};this._next(o)}all(e,t){return t=X4(e,t),t=FE(t,xf),e=BE(e,Gw),this[sc]?this.nextTick(t,new zi("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[na]?this.nextTick(t,new zi("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[na]=!0,this[ph]=t,this[LE]=!0,this[To]>=this[ac]?this.nextTick(this[za],null,[]):this._all(e,this[za])),t[xf]}_all(e,t){let n=this[To],i=[],o=()=>{let c=this[ac]<1/0?Math.min(1e3,this[ac]-n):1e3;c<=0?this.nextTick(t,null,i):this._nextv(c,Gw,a)},a=(c,l)=>{c?t(c):l.length===0?t(null,i):(i.push.apply(i,l),n+=l.length,o())};o()}[cc](){let e=this[ph];return this[OE]&&e===null?CV:(this[na]=!1,this[ph]=null,this[sc]&&this._close(this[qp]),e)}[ia](e,t,n){this[LE]?this.close(e.bind(null,t,n)):e(t,n)}seek(e,t){if(t=BE(t,Gw),!this[sc]){if(this[na])throw new zi("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(t.keyEncoding||this[uc]),i=n.format;t.keyEncoding!==i&&(t={...t,keyEncoding:i});let o=this.db.prefixKey(n.encode(e),i);this._seek(o,t)}}}_seek(e,t){throw new zi("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=FE(e,xf),this[Ww]?this.nextTick(e):this[sc]?this[Hp].push(e):(this[sc]=!0,this[Hp].push(e),this[na]?this[OE]&&this[cc]()(new zi("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[qp])),e[xf]}_close(e){this.nextTick(e)}[qp](){this[Ww]=!0,this.db.detachResource(this);let e=this[Hp];this[Hp]=[];for(let t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[Ww]||await this.close()}}},mh=class extends Wp{constructor(e,t){super(e,t,!0),this[NE]=t.keys!==!1,this[RE]=t.values!==!1}[Ef](e,t,n){let i=this[cc]();if(e)return i(e);try{t=this[NE]&&t!==void 0?this[uc].decode(t):void 0,n=this[RE]&&n!==void 0?this[Af].decode(n):void 0}catch(o){return i(new fc("entry",o))}t===void 0&&n===void 0||this[To]++,i(null,t,n)}[za](e,t){let n=this[cc]();if(e)return this[ia](n,e);try{for(let i of t){let o=i[0],a=i[1];i[0]=this[NE]&&o!==void 0?this[uc].decode(o):void 0,i[1]=this[RE]&&a!==void 0?this[Af].decode(a):void 0}}catch(i){return this[ia](n,new fc("entries",i))}this[To]+=t.length,this[ia](n,null,t)}end(e){return!Q4&&typeof console<"u"&&(Q4=!0,console.warn(new zi("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},ME=class extends Wp{constructor(e,t){super(e,t,!1)}[Ef](e,t){let n=this[cc]();if(e)return n(e);try{t=t!==void 0?this[uc].decode(t):void 0}catch(i){return n(new fc("key",i))}t!==void 0&&this[To]++,n(null,t)}[za](e,t){let n=this[cc]();if(e)return this[ia](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[uc].decode(o):void 0}}catch(i){return this[ia](n,new fc("keys",i))}this[To]+=t.length,this[ia](n,null,t)}},UE=class extends Wp{constructor(e,t){super(e,t,!1)}[Ef](e,t){let n=this[cc]();if(e)return n(e);try{t=t!==void 0?this[Af].decode(t):void 0}catch(i){return n(new fc("value",i))}t!==void 0&&this[To]++,n(null,t)}[za](e,t){let n=this[cc]();if(e)return this[ia](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[Af].decode(o):void 0}}catch(i){return this[ia](n,new fc("values",i))}this[To]+=t.length,this[ia](n,null,t)}},fc=class extends zi{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}};for(let r of["_ended property","_nexting property","_end method"])Object.defineProperty(mh.prototype,r.split(" ")[0],{get(){throw new zi(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new zi(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})}});mh.keyEncoding=uc;mh.valueEncoding=Af;Yw.AbstractIterator=mh;Yw.AbstractKeyIterator=ME;Yw.AbstractValueIterator=UE});var Z4=ee(KE=>{"use strict";var{AbstractKeyIterator:kV,AbstractValueIterator:IV}=lc(),Sf=Symbol("iterator"),Vp=Symbol("callback"),yh=Symbol("handleOne"),Pf=Symbol("handleMany"),Gp=class extends kV{constructor(e,t){super(e,t),this[Sf]=e.iterator({...t,keys:!0,values:!1}),this[yh]=this[yh].bind(this),this[Pf]=this[Pf].bind(this)}},Jw=class extends IV{constructor(e,t){super(e,t),this[Sf]=e.iterator({...t,keys:!1,values:!0}),this[yh]=this[yh].bind(this),this[Pf]=this[Pf].bind(this)}};for(let r of[Gp,Jw]){let e=r===Gp,t=e?n=>n[0]:n=>n[1];r.prototype._next=function(n){this[Vp]=n,this[Sf].next(this[yh])},r.prototype[yh]=function(n,i,o){let a=this[Vp];n?a(n):a(null,e?i:o)},r.prototype._nextv=function(n,i,o){this[Vp]=o,this[Sf].nextv(n,i,this[Pf])},r.prototype._all=function(n,i){this[Vp]=i,this[Sf].all(n,this[Pf])},r.prototype[Pf]=function(n,i){let o=this[Vp];n?o(n):o(null,i.map(t))},r.prototype._seek=function(n,i){this[Sf].seek(n,i)},r.prototype._close=function(n){this[Sf].close(n)}}KE.DefaultKeyIterator=Gp;KE.DefaultValueIterator=Jw});var eF=ee(r0=>{"use strict";var{AbstractIterator:TV,AbstractKeyIterator:FV,AbstractValueIterator:BV}=lc(),$E=bs(),yi=Symbol("nut"),e0=Symbol("undefer"),t0=Symbol("factory"),Xw=class extends TV{constructor(e,t){super(e,t),this[yi]=null,this[t0]=()=>e.iterator(t),this.db.defer(()=>this[e0]())}},Qw=class extends FV{constructor(e,t){super(e,t),this[yi]=null,this[t0]=()=>e.keys(t),this.db.defer(()=>this[e0]())}},Zw=class extends BV{constructor(e,t){super(e,t),this[yi]=null,this[t0]=()=>e.values(t),this.db.defer(()=>this[e0]())}};for(let r of[Xw,Qw,Zw])r.prototype[e0]=function(){this.db.status==="open"&&(this[yi]=this[t0]())},r.prototype._next=function(e){this[yi]!==null?this[yi].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new $E("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._nextv=function(e,t,n){this[yi]!==null?this[yi].nextv(e,t,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,t,n)):this.nextTick(n,new $E("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._all=function(e,t){this[yi]!==null?this[yi].all(t):this.db.status==="opening"?this.db.defer(()=>this._all(e,t)):this.nextTick(t,new $E("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._seek=function(e,t){this[yi]!==null?this[yi]._seek(e,t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,t))},r.prototype._close=function(e){this[yi]!==null?this[yi].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};r0.DeferredIterator=Xw;r0.DeferredKeyIterator=Qw;r0.DeferredValueIterator=Zw});var jE=ee(rF=>{"use strict";var{fromCallback:tF}=jp(),n0=bs(),{getCallback:LV,getOptions:OV}=Hw(),i0=Symbol("promise"),Fo=Symbol("status"),gh=Symbol("operations"),Yp=Symbol("finishClose"),wh=Symbol("closeCallbacks"),zE=class{constructor(e){if(typeof e!="object"||e===null){let t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[gh]=[],this[wh]=[],this[Fo]="open",this[Yp]=this[Yp].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[gh].length}put(e,t,n){if(this[Fo]!=="open")throw new n0("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let i=this.db._checkKey(e)||this.db._checkValue(t);if(i)throw i;let o=n&&n.sublevel!=null?n.sublevel:this.db,a=n,c=o.keyEncoding(n&&n.keyEncoding),l=o.valueEncoding(n&&n.valueEncoding),h=c.format;n={...n,keyEncoding:h,valueEncoding:l.format},o!==this.db&&(n.sublevel=null);let m=o.prefixKey(c.encode(e),h),y=l.encode(t);return this._put(m,y,n),this[gh].push({...a,type:"put",key:e,value:t}),this}_put(e,t,n){}del(e,t){if(this[Fo]!=="open")throw new n0("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let i=t&&t.sublevel!=null?t.sublevel:this.db,o=t,a=i.keyEncoding(t&&t.keyEncoding),c=a.format;return t={...t,keyEncoding:c},i!==this.db&&(t.sublevel=null),this._del(i.prefixKey(a.encode(e),c),t),this[gh].push({...o,type:"del",key:e}),this}_del(e,t){}clear(){if(this[Fo]!=="open")throw new n0("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[gh]=[],this}_clear(){}write(e,t){return t=LV(e,t),t=tF(t,i0),e=OV(e),this[Fo]!=="open"?this.nextTick(t,new n0("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(t):(this[Fo]="writing",this._write(e,n=>{this[Fo]="closing",this[wh].push(()=>t(n)),n||this.db.emit("batch",this[gh]),this._close(this[Yp])})),t[i0]}_write(e,t){}close(e){return e=tF(e,i0),this[Fo]==="closing"?this[wh].push(e):this[Fo]==="closed"?this.nextTick(e):(this[wh].push(e),this[Fo]!=="writing"&&(this[Fo]="closing",this._close(this[Yp]))),e[i0]}_close(e){this.nextTick(e)}[Yp](){this[Fo]="closed",this.db.detachResource(this);let e=this[wh];this[wh]=[];for(let t of e)t()}};rF.AbstractChainedBatch=zE});var iF=ee(nF=>{"use strict";var{AbstractChainedBatch:NV}=jE(),RV=bs(),bh=Symbol("encoded"),qE=class extends NV{constructor(e){super(e),this[bh]=[]}_put(e,t,n){this[bh].push({...n,type:"put",key:e,value:t})}_del(e,t){this[bh].push({...t,type:"del",key:e})}_clear(){this[bh]=[]}_write(e,t){this.db.status==="opening"?this.db.defer(()=>this._write(e,t)):this.db.status==="open"?this[bh].length===0?this.nextTick(t):this.db._batch(this[bh],e,t):this.nextTick(t,new RV("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};nF.DefaultChainedBatch=qE});var aF=ee((Vle,sF)=>{"use strict";var oF=bs(),MV=Object.prototype.hasOwnProperty,UV=new Set(["lt","lte","gt","gte"]);sF.exports=function(r,e){let t={};for(let n in r)if(!!MV.call(r,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new oF(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new oF("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});UV.has(n)?t[n]=e.encode(r[n]):t[n]=r[n]}return t.reverse=!!t.reverse,t.limit=Number.isInteger(t.limit)&&t.limit>=0?t.limit:-1,t}});var HE=ee((Gle,cF)=>{var uF;cF.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):r=>(uF||(uF=Promise.resolve())).then(r).catch(e=>setTimeout(()=>{throw e},0))});var hF=ee((Yle,lF)=>{"use strict";var fF=HE();lF.exports=function(r,...e){e.length===0?fF(r):fF(()=>r(...e))}});var dF=ee(o0=>{"use strict";var{AbstractIterator:KV,AbstractKeyIterator:$V,AbstractValueIterator:zV}=lc(),vh=Symbol("unfix"),vs=Symbol("iterator"),Df=Symbol("handleOne"),hc=Symbol("handleMany"),ja=Symbol("callback"),Jp=class extends KV{constructor(e,t,n,i){super(e,t),this[vs]=n,this[vh]=i,this[Df]=this[Df].bind(this),this[hc]=this[hc].bind(this),this[ja]=null}[Df](e,t,n){let i=this[ja];if(e)return i(e);t!==void 0&&(t=this[vh](t)),i(e,t,n)}[hc](e,t){let n=this[ja];if(e)return n(e);for(let i of t){let o=i[0];o!==void 0&&(i[0]=this[vh](o))}n(e,t)}},Xp=class extends $V{constructor(e,t,n,i){super(e,t),this[vs]=n,this[vh]=i,this[Df]=this[Df].bind(this),this[hc]=this[hc].bind(this),this[ja]=null}[Df](e,t){let n=this[ja];if(e)return n(e);t!==void 0&&(t=this[vh](t)),n(e,t)}[hc](e,t){let n=this[ja];if(e)return n(e);for(let i=0;i<t.length;i++){let o=t[i];o!==void 0&&(t[i]=this[vh](o))}n(e,t)}},Qp=class extends zV{constructor(e,t,n){super(e,t),this[vs]=n}};for(let r of[Jp,Xp])r.prototype._next=function(e){this[ja]=e,this[vs].next(this[Df])},r.prototype._nextv=function(e,t,n){this[ja]=n,this[vs].nextv(e,t,this[hc])},r.prototype._all=function(e,t){this[ja]=t,this[vs].all(e,this[hc])};for(let r of[Qp])r.prototype._next=function(e){this[vs].next(e)},r.prototype._nextv=function(e,t,n){this[vs].nextv(e,t,n)},r.prototype._all=function(e,t){this[vs].all(e,t)};for(let r of[Jp,Xp,Qp])r.prototype._seek=function(e,t){this[vs].seek(e,t)},r.prototype._close=function(e){this[vs].close(e)};o0.AbstractSublevelIterator=Jp;o0.AbstractSublevelKeyIterator=Xp;o0.AbstractSublevelValueIterator=Qp});var gF=ee((Xle,yF)=>{"use strict";var WE=bs(),{Buffer:YE}=vf()||{},{AbstractSublevelIterator:jV,AbstractSublevelKeyIterator:qV,AbstractSublevelValueIterator:HV}=dF(),qa=Symbol("prefix"),pF=Symbol("upperBound"),Zp=Symbol("prefixRange"),ji=Symbol("parent"),VE=Symbol("unfix"),mF=new TextEncoder,WV={separator:"!"};yF.exports=function({AbstractLevel:r}){class e extends r{static defaults(n){if(typeof n=="string")throw new WE("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new WE("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?WV:n.separator?n:{...n,separator:"!"}}constructor(n,i,o){let{separator:a,manifest:c,...l}=e.defaults(o);i=GV(i,a);let h=a.charCodeAt(0)+1,m=n[ji]||n;if(!mF.encode(i).every(k=>k>h&&k<127))throw new WE(`Prefix must use bytes > ${h} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(VV(m,c),l);let y=(n.prefix||"")+a+i+a,E=y.slice(0,-1)+String.fromCharCode(h);this[ji]=m,this[qa]=new s0(y),this[pF]=new s0(E),this[VE]=new JE,this.nextTick=m.nextTick}prefixKey(n,i){if(i==="utf8")return this[qa].utf8+n;if(n.byteLength===0)return this[qa][i];if(i==="view"){let o=this[qa].view,a=new Uint8Array(o.byteLength+n.byteLength);return a.set(o,0),a.set(n,o.byteLength),a}else{let o=this[qa].buffer;return YE.concat([o,n],o.byteLength+n.byteLength)}}[Zp](n,i){n.gte!==void 0?n.gte=this.prefixKey(n.gte,i):n.gt!==void 0?n.gt=this.prefixKey(n.gt,i):n.gte=this[qa][i],n.lte!==void 0?n.lte=this.prefixKey(n.lte,i):n.lt!==void 0?n.lt=this.prefixKey(n.lt,i):n.lte=this[pF][i]}get prefix(){return this[qa].utf8}get db(){return this[ji]}_open(n,i){this[ji].open({passive:!0},i)}_put(n,i,o,a){this[ji].put(n,i,o,a)}_get(n,i,o){this[ji].get(n,i,o)}_getMany(n,i,o){this[ji].getMany(n,i,o)}_del(n,i,o){this[ji].del(n,i,o)}_batch(n,i,o){this[ji].batch(n,i,o)}_clear(n,i){this[Zp](n,n.keyEncoding),this[ji].clear(n,i)}_iterator(n){this[Zp](n,n.keyEncoding);let i=this[ji].iterator(n),o=this[VE].get(this[qa].utf8.length,n.keyEncoding);return new jV(this,n,i,o)}_keys(n){this[Zp](n,n.keyEncoding);let i=this[ji].keys(n),o=this[VE].get(this[qa].utf8.length,n.keyEncoding);return new qV(this,n,i,o)}_values(n){this[Zp](n,n.keyEncoding);let i=this[ji].values(n);return new HV(this,n,i)}}return{AbstractSublevel:e}};var VV=function(r,e){return{...r.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:GE(r,"utf8"),buffer:GE(r,"buffer"),view:GE(r,"view")}}},GE=function(r,e){return r.supports.encodings[e]?r.keyEncoding(e).name===e:!1},s0=class{constructor(e){this.utf8=e,this.view=mF.encode(e),this.buffer=YE?YE.from(this.view.buffer,0,this.view.byteLength):{}}},JE=class{constructor(){this.cache=new Map}get(e,t){let n=this.cache.get(t);return n===void 0&&(t==="view"?n=function(i,o){return o.subarray(i)}.bind(null,e):n=function(i,o){return o.slice(i)}.bind(null,e),this.cache.set(t,n)),n}},GV=function(r,e){let t=0,n=r.length;for(;t<n&&r[t]===e;)t++;for(;n>t&&r[n-1]===e;)n--;return r.slice(t,n)}});var t2=ee(e2=>{"use strict";var{supports:YV}=s4(),{Transcoder:JV}=N4(),{EventEmitter:XV}=V4(),{fromCallback:dc}=jp(),_s=bs(),{AbstractIterator:Cf}=lc(),{DefaultKeyIterator:QV,DefaultValueIterator:ZV}=Z4(),{DeferredIterator:eG,DeferredKeyIterator:tG,DeferredValueIterator:rG}=eF(),{DefaultChainedBatch:wF}=iF(),{getCallback:kf,getOptions:pc}=Hw(),a0=aF(),At=Symbol("promise"),Ha=Symbol("landed"),If=Symbol("resources"),XE=Symbol("closeResources"),em=Symbol("operations"),tm=Symbol("undefer"),u0=Symbol("deferOpen"),bF=Symbol("options"),It=Symbol("status"),Tf=Symbol("defaultOptions"),_h=Symbol("transcoder"),c0=Symbol("keyEncoding"),QE=Symbol("valueEncoding"),nG=()=>{},rm=class extends XV{constructor(e,t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");t=pc(t);let{keyEncoding:n,valueEncoding:i,passive:o,...a}=t;this[If]=new Set,this[em]=[],this[u0]=!0,this[bF]=a,this[It]="opening",this.supports=YV(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[_h]=new JV(iG(this)),this[c0]=this[_h].encoding(n||"utf8"),this[QE]=this[_h].encoding(i||"utf8");for(let c of this[_h].encodings())this.supports.encodings[c.commonName]||(this.supports.encodings[c.commonName]=!0);this[Tf]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[c0].commonName,valueEncoding:this[QE].commonName}),key:Object.freeze({keyEncoding:this[c0].commonName})},this.nextTick(()=>{this[u0]&&this.open({passive:!1},nG)})}get status(){return this[It]}keyEncoding(e){return this[_h].encoding(e??this[c0])}valueEncoding(e){return this[_h].encoding(e??this[QE])}open(e,t){t=kf(e,t),t=dc(t,At),e={...this[bF],...pc(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=i=>{this[It]==="closing"||this[It]==="opening"?this.once(Ha,i?()=>n(i):n):this[It]!=="open"?t(new _s("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):t()};return e.passive?this[It]==="opening"?this.once(Ha,n):this.nextTick(n):this[It]==="closed"||this[u0]?(this[u0]=!1,this[It]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[It]="closed",this[XE](()=>{this.emit(Ha),n(i)}),this[tm]();return}this[It]="open",this[tm](),this.emit(Ha),this[It]==="open"&&this.emit("open"),this[It]==="open"&&this.emit("ready"),n()})):this[It]==="open"?this.nextTick(n):this.once(Ha,()=>this.open(e,t)),t[At]}_open(e,t){this.nextTick(t)}close(e){e=dc(e,At);let t=n=>{this[It]==="opening"||this[It]==="closing"?this.once(Ha,n?t(n):t):this[It]!=="closed"?e(new _s("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[It]==="open"){this[It]="closing",this.emit("closing");let n=i=>{this[It]="open",this[tm](),this.emit(Ha),t(i)};this[XE](()=>{this._close(i=>{if(i)return n(i);this[It]="closed",this[tm](),this.emit(Ha),this[It]==="closed"&&this.emit("closed"),t()})})}else this[It]==="closed"?this.nextTick(t):this.once(Ha,()=>this.close(e));return e[At]}[XE](e){if(this[If].size===0)return this.nextTick(e);let t=this[If].size,n=!0,i=()=>{--t===0&&(n?this.nextTick(e):e())};for(let o of this[If])o.close(i);n=!1,this[If].clear()}_close(e){this.nextTick(e)}get(e,t,n){if(n=kf(t,n),n=dc(n,At),t=pc(t,this[Tf].entry),this[It]==="opening")return this.defer(()=>this.get(e,t,n)),n[At];if(xh(this,n))return n[At];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[At];let o=this.keyEncoding(t.keyEncoding),a=this.valueEncoding(t.valueEncoding),c=o.format,l=a.format;return(t.keyEncoding!==c||t.valueEncoding!==l)&&(t=Object.assign({},t,{keyEncoding:c,valueEncoding:l})),this._get(this.prefixKey(o.encode(e),c),t,(h,m)=>{if(h)return(h.code==="LEVEL_NOT_FOUND"||h.notFound||/NotFound/i.test(h))&&(h.code||(h.code="LEVEL_NOT_FOUND"),h.notFound||(h.notFound=!0),h.status||(h.status=404)),n(h);try{m=a.decode(m)}catch(y){return n(new _s("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:y}))}n(null,m)}),n[At]}_get(e,t,n){this.nextTick(n,new Error("NotFound"))}getMany(e,t,n){if(n=kf(t,n),n=dc(n,At),t=pc(t,this[Tf].entry),this[It]==="opening")return this.defer(()=>this.getMany(e,t,n)),n[At];if(xh(this,n))return n[At];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[At];if(e.length===0)return this.nextTick(n,null,[]),n[At];let i=this.keyEncoding(t.keyEncoding),o=this.valueEncoding(t.valueEncoding),a=i.format,c=o.format;(t.keyEncoding!==a||t.valueEncoding!==c)&&(t=Object.assign({},t,{keyEncoding:a,valueEncoding:c}));let l=new Array(e.length);for(let h=0;h<e.length;h++){let m=e[h],y=this._checkKey(m);if(y)return this.nextTick(n,y),n[At];l[h]=this.prefixKey(i.encode(m),a)}return this._getMany(l,t,(h,m)=>{if(h)return n(h);try{for(let y=0;y<m.length;y++)m[y]!==void 0&&(m[y]=o.decode(m[y]))}catch(y){return n(new _s(`Could not decode one or more of ${m.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:y}))}n(null,m)}),n[At]}_getMany(e,t,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,t,n,i){if(i=kf(n,i),i=dc(i,At),n=pc(n,this[Tf].entry),this[It]==="opening")return this.defer(()=>this.put(e,t,n,i)),i[At];if(xh(this,i))return i[At];let o=this._checkKey(e)||this._checkValue(t);if(o)return this.nextTick(i,o),i[At];let a=this.keyEncoding(n.keyEncoding),c=this.valueEncoding(n.valueEncoding),l=a.format,h=c.format;(n.keyEncoding!==l||n.valueEncoding!==h)&&(n=Object.assign({},n,{keyEncoding:l,valueEncoding:h}));let m=this.prefixKey(a.encode(e),l),y=c.encode(t);return this._put(m,y,n,E=>{if(E)return i(E);this.emit("put",e,t),i()}),i[At]}_put(e,t,n,i){this.nextTick(i)}del(e,t,n){if(n=kf(t,n),n=dc(n,At),t=pc(t,this[Tf].key),this[It]==="opening")return this.defer(()=>this.del(e,t,n)),n[At];if(xh(this,n))return n[At];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[At];let o=this.keyEncoding(t.keyEncoding),a=o.format;return t.keyEncoding!==a&&(t=Object.assign({},t,{keyEncoding:a})),this._del(this.prefixKey(o.encode(e),a),t,c=>{if(c)return n(c);this.emit("del",e),n()}),n[At]}_del(e,t,n){this.nextTick(n)}batch(e,t,n){if(!arguments.length){if(this[It]==="opening")return new wF(this);if(this[It]!=="open")throw new _s("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=kf(t,n),n=dc(n,At),t=pc(t,this[Tf].empty),this[It]==="opening")return this.defer(()=>this.batch(e,t,n)),n[At];if(xh(this,n))return n[At];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[At];if(e.length===0)return this.nextTick(n),n[At];let i=new Array(e.length),{keyEncoding:o,valueEncoding:a,...c}=t;for(let l=0;l<e.length;l++){if(typeof e[l]!="object"||e[l]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[At];let h=Object.assign({},e[l]);if(h.type!=="put"&&h.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[At];let m=this._checkKey(h.key);if(m)return this.nextTick(n,m),n[At];let y=h.sublevel!=null?h.sublevel:this,E=y.keyEncoding(h.keyEncoding||o),k=E.format;if(h.key=y.prefixKey(E.encode(h.key),k),h.keyEncoding=k,h.type==="put"){let T=this._checkValue(h.value);if(T)return this.nextTick(n,T),n[At];let O=y.valueEncoding(h.valueEncoding||a);h.value=O.encode(h.value),h.valueEncoding=O.format}y!==this&&(h.sublevel=null),i[l]=h}return this._batch(i,c,l=>{if(l)return n(l);this.emit("batch",e),n()}),n[At]}_batch(e,t,n){this.nextTick(n)}sublevel(e,t){return this._sublevel(e,ZE.defaults(t))}_sublevel(e,t){return new ZE(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=kf(e,t),t=dc(t,At),e=pc(e,this[Tf].empty),this[It]==="opening")return this.defer(()=>this.clear(e,t)),t[At];if(xh(this,t))return t[At];let n=e,i=this.keyEncoding(e.keyEncoding);return e=a0(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(t):this._clear(e,o=>{if(o)return t(o);this.emit("clear",n),t()}),t[At]}_clear(e,t){this.nextTick(t)}iterator(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=a0(e,t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[Cf.keyEncoding]=t,e[Cf.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[It]==="opening")return new eG(this,e);if(this[It]!=="open")throw new _s("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new Cf(this,e)}keys(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=a0(e,t),e[Cf.keyEncoding]=t,e[Cf.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[It]==="opening")return new tG(this,e);if(this[It]!=="open")throw new _s("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new QV(this,e)}values(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=a0(e,t),e[Cf.keyEncoding]=t,e[Cf.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[It]==="opening")return new rG(this,e);if(this[It]!=="open")throw new _s("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new ZV(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[em].push(e)}[tm](){if(this[em].length===0)return;let e=this[em];this[em]=[];for(let t of e)t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[If].add(e)}detachResource(e){this[If].delete(e)}_chainedBatch(){return new wF(this)}_checkKey(e){if(e==null)return new _s("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new _s("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};rm.prototype.nextTick=hF();var{AbstractSublevel:ZE}=gF()({AbstractLevel:rm});e2.AbstractLevel=rm;e2.AbstractSublevel=ZE;var xh=function(r,e){return r[It]!=="open"?(r.nextTick(e,new _s("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},iG=function(r){return Object.keys(r.supports.encodings).filter(e=>!!r.supports.encodings[e])}});var r2=ee(Ff=>{"use strict";Ff.AbstractLevel=t2().AbstractLevel;Ff.AbstractSublevel=t2().AbstractSublevel;Ff.AbstractIterator=lc().AbstractIterator;Ff.AbstractKeyIterator=lc().AbstractKeyIterator;Ff.AbstractValueIterator=lc().AbstractValueIterator;Ff.AbstractChainedBatch=jE().AbstractChainedBatch});var _F=ee((ehe,vF)=>{vF.exports=sG;var oG=HE();function sG(r,e,t){if(typeof e!="number")throw new Error("second argument must be a Number");let n,i,o,a,c,l=!0,h;Array.isArray(r)?(n=[],o=i=r.length):(a=Object.keys(r),n={},o=i=a.length);function m(E){function k(){t&&t(E,n),t=null}l?oG(k):k()}function y(E,k,T){if(n[E]=T,k&&(c=!0),--o===0||k)m(k);else if(!c&&h<i){let O;a?(O=a[h],h+=1,r[O](function(ue,ne){y(O,ue,ne)})):(O=h,h+=1,r[O](function(ue,ne){y(O,ue,ne)}))}}h=e,o?a?a.some(function(E,k){return r[E](function(T,O){y(E,T,O)}),k===e-1}):r.some(function(E,k){return E(function(T,O){y(k,T,O)}),k===e-1}):m(null),l=!1}});var n2=ee((the,xF)=>{"use strict";xF.exports=function(e){let t=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,o=e.lte===void 0;return t!==void 0&&n!==void 0?IDBKeyRange.bound(t,n,i,o):t!==void 0?IDBKeyRange.lowerBound(t,i):n!==void 0?IDBKeyRange.upperBound(n,o):null}});var i2=ee((rhe,EF)=>{"use strict";var aG=new TextEncoder;EF.exports=function(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):aG.encode(r)}});var CF=ee(DF=>{"use strict";var{AbstractIterator:uG}=r2(),AF=n2(),f0=i2(),oa=Symbol("cache"),Wa=Symbol("finished"),qi=Symbol("options"),Va=Symbol("currentOptions"),Bf=Symbol("position"),o2=Symbol("location"),Eh=Symbol("first"),SF={},s2=class extends uG{constructor(e,t,n){super(e,n),this[oa]=[],this[Wa]=this.limit===0,this[qi]=n,this[Va]={...n},this[Bf]=void 0,this[o2]=t,this[Eh]=!0}_nextv(e,t,n){if(this[Eh]=!1,this[Wa])return this.nextTick(n,null,[]);if(this[oa].length>0)return e=Math.min(e,this[oa].length),this.nextTick(n,null,this[oa].splice(0,e));this[Bf]!==void 0&&(this[qi].reverse?(this[Va].lt=this[Bf],this[Va].lte=void 0):(this[Va].gt=this[Bf],this[Va].gte=void 0));let i;try{i=AF(this[Va])}catch{return this[Wa]=!0,this.nextTick(n,null,[])}let o=this.db.db.transaction([this[o2]],"readonly"),a=o.objectStore(this[o2]),c=[];if(this[qi].reverse){let l=!this[qi].values&&a.openKeyCursor?"openKeyCursor":"openCursor";a[l](i,"prev").onsuccess=h=>{let m=h.target.result;if(m){let{key:y,value:E}=m;this[Bf]=y,c.push([this[qi].keys&&y!==void 0?f0(y):void 0,this[qi].values&&E!==void 0?f0(E):void 0]),c.length<e?m.continue():PF(o)}else this[Wa]=!0}}else{let l,h,m=()=>{if(l===void 0||h===void 0)return;let y=Math.max(l.length,h.length);y===0||e===1/0?this[Wa]=!0:this[Bf]=l[y-1],c.length=y;for(let E=0;E<y;E++){let k=l[E],T=h[E];c[E]=[this[qi].keys&&k!==void 0?f0(k):void 0,this[qi].values&&T!==void 0?f0(T):void 0]}PF(o)};this[qi].keys||e<1/0?a.getAllKeys(i,e<1/0?e:void 0).onsuccess=y=>{l=y.target.result,m()}:(l=[],this.nextTick(m)),this[qi].values?a.getAll(i,e<1/0?e:void 0).onsuccess=y=>{h=y.target.result,m()}:(h=[],this.nextTick(m))}o.onabort=()=>{n(o.error||new Error("aborted by user")),n=null},o.oncomplete=()=>{n(null,c),n=null}}_next(e){if(this[oa].length>0){let[t,n]=this[oa].shift();this.nextTick(e,null,t,n)}else if(this[Wa])this.nextTick(e);else{let t=Math.min(100,this.limit-this.count);this[Eh]&&(this[Eh]=!1,t=1),this._nextv(t,SF,(n,i)=>{if(n)return e(n);this[oa]=i,this._next(e)})}}_all(e,t){this[Eh]=!1;let n=this[oa].splice(0,this[oa].length),i=this.limit-this.count-n.length;if(i<=0)return this.nextTick(t,null,n);this._nextv(i,SF,(o,a)=>{if(o)return t(o);n.length>0&&(a=n.concat(a)),t(null,a)})}_seek(e,t){this[Eh]=!0,this[oa]=[],this[Wa]=!1,this[Bf]=void 0,this[Va]={...this[qi]};let n;try{n=AF(this[qi])}catch{this[Wa]=!0;return}n!==null&&!n.includes(e)?this[Wa]=!0:this[qi].reverse?this[Va].lte=e:this[Va].gte=e}};DF.Iterator=s2;function PF(r){typeof r.commit=="function"&&r.commit()}});var IF=ee((ihe,kF)=>{"use strict";kF.exports=function(e,t,n,i,o){if(i.limit===0)return e.nextTick(o);let a=e.db.transaction([t],"readwrite"),c=a.objectStore(t),l=0;a.oncomplete=function(){o()},a.onabort=function(){o(a.error||new Error("aborted by user"))};let h=c.openKeyCursor?"openKeyCursor":"openCursor",m=i.reverse?"prev":"next";c[h](n,m).onsuccess=function(y){let E=y.target.result;E&&(c.delete(E.key).onsuccess=function(){(i.limit<=0||++l<i.limit)&&E.continue()})}}});var NF=ee(OF=>{"use strict";var{AbstractLevel:cG}=r2(),TF=bs(),fG=_F(),{fromCallback:lG}=jp(),{Iterator:hG}=CF(),FF=i2(),dG=IF(),pG=n2(),LF="level-js-",nm=Symbol("idb"),a2=Symbol("namePrefix"),Ga=Symbol("location"),u2=Symbol("version"),Lf=Symbol("store"),im=Symbol("onComplete"),BF=Symbol("promise"),l0=class extends cG{constructor(e,t,n){if(typeof t=="function"||typeof n=="function")throw new TF("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:i,version:o,...a}=t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},a),typeof e!="string")throw new Error("constructor requires a location string argument");this[Ga]=e,this[a2]=i??LF,this[u2]=parseInt(o||1,10),this[nm]=null}get location(){return this[Ga]}get namePrefix(){return this[a2]}get version(){return this[u2]}get db(){return this[nm]}get type(){return"browser-level"}_open(e,t){let n=indexedDB.open(this[a2]+this[Ga],this[u2]);n.onerror=function(){t(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[nm]=n.result,t()},n.onupgradeneeded=i=>{let o=i.target.result;o.objectStoreNames.contains(this[Ga])||o.createObjectStore(this[Ga])}}[Lf](e){return this[nm].transaction([this[Ga]],e).objectStore(this[Ga])}[im](e,t){let n=e.transaction;n.onabort=function(){t(n.error||new Error("aborted by user"))},n.oncomplete=function(){t(null,e.result)}}_get(e,t,n){let i=this[Lf]("readonly"),o;try{o=i.get(e)}catch(a){return this.nextTick(n,a)}this[im](o,function(a,c){if(a)return n(a);if(c===void 0)return n(new TF("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,FF(c))})}_getMany(e,t,n){let i=this[Lf]("readonly"),o=e.map(a=>c=>{let l;try{l=i.get(a)}catch(h){return c(h)}l.onsuccess=()=>{let h=l.result;c(null,h===void 0?h:FF(h))},l.onerror=h=>{h.stopPropagation(),c(l.error)}});fG(o,16,n)}_del(e,t,n){let i=this[Lf]("readwrite"),o;try{o=i.delete(e)}catch(a){return this.nextTick(n,a)}this[im](o,n)}_put(e,t,n,i){let o=this[Lf]("readwrite"),a;try{a=o.put(t,e)}catch(c){return this.nextTick(i,c)}this[im](a,i)}_iterator(e){return new hG(this,this[Ga],e)}_batch(e,t,n){let i=this[Lf]("readwrite"),o=i.transaction,a=0,c;o.onabort=function(){n(c||o.error||new Error("aborted by user"))},o.oncomplete=function(){n()};function l(){let h=e[a++],m=h.key,y;try{y=h.type==="del"?i.delete(m):i.put(h.value,m)}catch(E){c=E,o.abort();return}a<e.length?y.onsuccess=l:typeof o.commit=="function"&&o.commit()}l()}_clear(e,t){let n,i;try{n=pG(e)}catch{return this.nextTick(t)}if(e.limit>=0)return dG(this,this[Ga],n,e,t);try{let o=this[Lf]("readwrite");i=n?o.delete(n):o.clear()}catch(o){return this.nextTick(t,o)}this[im](i,t)}_close(e){this[nm].close(),this.nextTick(e)}};l0.destroy=function(r,e,t){typeof e=="function"&&(t=e,e=LF),t=lG(t,BF);let n=indexedDB.deleteDatabase(e+r);return n.onsuccess=function(){t()},n.onerror=function(i){t(i)},t[BF]};OF.BrowserLevel=l0});var MF=ee(RF=>{RF.Level=NF().BrowserLevel});var rB=ee((tB,E0)=>{(function(r){var e={36:n(Math.pow(36,5)),16:n(Math.pow(16,7)),10:n(Math.pow(10,9)),2:n(Math.pow(2,30))},t={36:n(36),16:n(16),10:n(10),2:n(2)};function n(c,l){if(!(this instanceof n))return new n(c,l);if(this._low=0,this._high=0,this.remainder=null,typeof l>"u")return o.call(this,c);if(typeof c=="string")return a.call(this,c,l);i.call(this,c,l)}function i(c,l){return this._low=c|0,this._high=l|0,this}n.prototype.fromBits=i;function o(c){return this._low=c&65535,this._high=c>>>16,this}n.prototype.fromNumber=o;function a(c,l){var h=parseInt(c,l||10);return this._low=h&65535,this._high=h>>>16,this}n.prototype.fromString=a,n.prototype.toNumber=function(){return this._high*65536+this._low},n.prototype.toString=function(c){return this.toNumber().toString(c||10)},n.prototype.add=function(c){var l=this._low+c._low,h=l>>>16;return h+=this._high+c._high,this._low=l&65535,this._high=h&65535,this},n.prototype.subtract=function(c){return this.add(c.clone().negate())},n.prototype.multiply=function(c){var l=this._high,h=this._low,m=c._high,y=c._low,E,k;return k=h*y,E=k>>>16,E+=l*y,E&=65535,E+=h*m,this._low=k&65535,this._high=E&65535,this},n.prototype.div=function(c){if(c._low==0&&c._high==0)throw Error("division by zero");if(c._high==0&&c._low==1)return this.remainder=new n(0),this;if(c.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(c))return this.remainder=new n(0),this._low=1,this._high=0,this;for(var l=c.clone(),h=-1;!this.lt(l);)l.shiftLeft(1,!0),h++;for(this.remainder=this.clone(),this._low=0,this._high=0;h>=0;h--)l.shiftRight(1),this.remainder.lt(l)||(this.remainder.subtract(l),h>=16?this._high|=1<<h-16:this._low|=1<<h);return this},n.prototype.negate=function(){var c=(~this._low&65535)+1;return this._low=c&65535,this._high=~this._high+(c>>>16)&65535,this},n.prototype.equals=n.prototype.eq=function(c){return this._low==c._low&&this._high==c._high},n.prototype.greaterThan=n.prototype.gt=function(c){return this._high>c._high?!0:this._high<c._high?!1:this._low>c._low},n.prototype.lessThan=n.prototype.lt=function(c){return this._high<c._high?!0:this._high>c._high?!1:this._low<c._low},n.prototype.or=function(c){return this._low|=c._low,this._high|=c._high,this},n.prototype.and=function(c){return this._low&=c._low,this._high&=c._high,this},n.prototype.not=function(){return this._low=~this._low&65535,this._high=~this._high&65535,this},n.prototype.xor=function(c){return this._low^=c._low,this._high^=c._high,this},n.prototype.shiftRight=n.prototype.shiftr=function(c){return c>16?(this._low=this._high>>c-16,this._high=0):c==16?(this._low=this._high,this._high=0):(this._low=this._low>>c|this._high<<16-c&65535,this._high>>=c),this},n.prototype.shiftLeft=n.prototype.shiftl=function(c,l){return c>16?(this._high=this._low<<c-16,this._low=0,l||(this._high&=65535)):c==16?(this._high=this._low,this._low=0):(this._high=this._high<<c|this._low>>16-c,this._low=this._low<<c&65535,l||(this._high&=65535)),this},n.prototype.rotateLeft=n.prototype.rotl=function(c){var l=this._high<<16|this._low;return l=l<<c|l>>>32-c,this._low=l&65535,this._high=l>>>16,this},n.prototype.rotateRight=n.prototype.rotr=function(c){var l=this._high<<16|this._low;return l=l>>>c|l<<32-c,this._low=l&65535,this._high=l>>>16,this},n.prototype.clone=function(){return new n(this._low,this._high)},typeof define<"u"&&define.amd?define([],function(){return n}):typeof E0<"u"&&E0.exports?E0.exports=n:r.UINT32=n})(tB)});var iB=ee((nB,A0)=>{(function(r){var e={16:n(Math.pow(16,5)),10:n(Math.pow(10,5)),2:n(Math.pow(2,5))},t={16:n(16),10:n(10),2:n(2)};function n(c,l,h,m){if(!(this instanceof n))return new n(c,l,h,m);if(this.remainder=null,typeof c=="string")return a.call(this,c,l);if(typeof l>"u")return o.call(this,c);i.apply(this,arguments)}function i(c,l,h,m){return typeof h>"u"?(this._a00=c&65535,this._a16=c>>>16,this._a32=l&65535,this._a48=l>>>16,this):(this._a00=c|0,this._a16=l|0,this._a32=h|0,this._a48=m|0,this)}n.prototype.fromBits=i;function o(c){return this._a00=c&65535,this._a16=c>>>16,this._a32=0,this._a48=0,this}n.prototype.fromNumber=o;function a(c,l){l=l||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var h=e[l]||new n(Math.pow(l,5)),m=0,y=c.length;m<y;m+=5){var E=Math.min(5,y-m),k=parseInt(c.slice(m,m+E),l);this.multiply(E<5?new n(Math.pow(l,E)):h).add(new n(k))}return this}n.prototype.fromString=a,n.prototype.toNumber=function(){return this._a16*65536+this._a00},n.prototype.toString=function(c){c=c||10;var l=t[c]||new n(c);if(!this.gt(l))return this.toNumber().toString(c);for(var h=this.clone(),m=new Array(64),y=63;y>=0&&(h.div(l),m[y]=h.remainder.toNumber().toString(c),!!h.gt(l));y--);return m[y-1]=h.toNumber().toString(c),m.join("")},n.prototype.add=function(c){var l=this._a00+c._a00,h=l>>>16;h+=this._a16+c._a16;var m=h>>>16;m+=this._a32+c._a32;var y=m>>>16;return y+=this._a48+c._a48,this._a00=l&65535,this._a16=h&65535,this._a32=m&65535,this._a48=y&65535,this},n.prototype.subtract=function(c){return this.add(c.clone().negate())},n.prototype.multiply=function(c){var l=this._a00,h=this._a16,m=this._a32,y=this._a48,E=c._a00,k=c._a16,T=c._a32,O=c._a48,ue=l*E,ne=ue>>>16;ne+=l*k;var ve=ne>>>16;ne&=65535,ne+=h*E,ve+=ne>>>16,ve+=l*T;var X=ve>>>16;return ve&=65535,ve+=h*k,X+=ve>>>16,ve&=65535,ve+=m*E,X+=ve>>>16,X+=l*O,X&=65535,X+=h*T,X&=65535,X+=m*k,X&=65535,X+=y*E,this._a00=ue&65535,this._a16=ne&65535,this._a32=ve&65535,this._a48=X&65535,this},n.prototype.div=function(c){if(c._a16==0&&c._a32==0&&c._a48==0){if(c._a00==0)throw Error("division by zero");if(c._a00==1)return this.remainder=new n(0),this}if(c.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(c))return this.remainder=new n(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var l=c.clone(),h=-1;!this.lt(l);)l.shiftLeft(1,!0),h++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;h>=0;h--)l.shiftRight(1),this.remainder.lt(l)||(this.remainder.subtract(l),h>=48?this._a48|=1<<h-48:h>=32?this._a32|=1<<h-32:h>=16?this._a16|=1<<h-16:this._a00|=1<<h);return this},n.prototype.negate=function(){var c=(~this._a00&65535)+1;return this._a00=c&65535,c=(~this._a16&65535)+(c>>>16),this._a16=c&65535,c=(~this._a32&65535)+(c>>>16),this._a32=c&65535,this._a48=~this._a48+(c>>>16)&65535,this},n.prototype.equals=n.prototype.eq=function(c){return this._a48==c._a48&&this._a00==c._a00&&this._a32==c._a32&&this._a16==c._a16},n.prototype.greaterThan=n.prototype.gt=function(c){return this._a48>c._a48?!0:this._a48<c._a48?!1:this._a32>c._a32?!0:this._a32<c._a32?!1:this._a16>c._a16?!0:this._a16<c._a16?!1:this._a00>c._a00},n.prototype.lessThan=n.prototype.lt=function(c){return this._a48<c._a48?!0:this._a48>c._a48?!1:this._a32<c._a32?!0:this._a32>c._a32?!1:this._a16<c._a16?!0:this._a16>c._a16?!1:this._a00<c._a00},n.prototype.or=function(c){return this._a00|=c._a00,this._a16|=c._a16,this._a32|=c._a32,this._a48|=c._a48,this},n.prototype.and=function(c){return this._a00&=c._a00,this._a16&=c._a16,this._a32&=c._a32,this._a48&=c._a48,this},n.prototype.xor=function(c){return this._a00^=c._a00,this._a16^=c._a16,this._a32^=c._a32,this._a48^=c._a48,this},n.prototype.not=function(){return this._a00=~this._a00&65535,this._a16=~this._a16&65535,this._a32=~this._a32&65535,this._a48=~this._a48&65535,this},n.prototype.shiftRight=n.prototype.shiftr=function(c){return c%=64,c>=48?(this._a00=this._a48>>c-48,this._a16=0,this._a32=0,this._a48=0):c>=32?(c-=32,this._a00=(this._a32>>c|this._a48<<16-c)&65535,this._a16=this._a48>>c&65535,this._a32=0,this._a48=0):c>=16?(c-=16,this._a00=(this._a16>>c|this._a32<<16-c)&65535,this._a16=(this._a32>>c|this._a48<<16-c)&65535,this._a32=this._a48>>c&65535,this._a48=0):(this._a00=(this._a00>>c|this._a16<<16-c)&65535,this._a16=(this._a16>>c|this._a32<<16-c)&65535,this._a32=(this._a32>>c|this._a48<<16-c)&65535,this._a48=this._a48>>c&65535),this},n.prototype.shiftLeft=n.prototype.shiftl=function(c,l){return c%=64,c>=48?(this._a48=this._a00<<c-48,this._a32=0,this._a16=0,this._a00=0):c>=32?(c-=32,this._a48=this._a16<<c|this._a00>>16-c,this._a32=this._a00<<c&65535,this._a16=0,this._a00=0):c>=16?(c-=16,this._a48=this._a32<<c|this._a16>>16-c,this._a32=(this._a16<<c|this._a00>>16-c)&65535,this._a16=this._a00<<c&65535,this._a00=0):(this._a48=this._a48<<c|this._a32>>16-c,this._a32=(this._a32<<c|this._a16>>16-c)&65535,this._a16=(this._a16<<c|this._a00>>16-c)&65535,this._a00=this._a00<<c&65535),l||(this._a48&=65535),this},n.prototype.rotateLeft=n.prototype.rotl=function(c){if(c%=64,c==0)return this;if(c>=32){var l=this._a00;if(this._a00=this._a32,this._a32=l,l=this._a48,this._a48=this._a16,this._a16=l,c==32)return this;c-=32}var h=this._a48<<16|this._a32,m=this._a16<<16|this._a00,y=h<<c|m>>>32-c,E=m<<c|h>>>32-c;return this._a00=E&65535,this._a16=E>>>16,this._a32=y&65535,this._a48=y>>>16,this},n.prototype.rotateRight=n.prototype.rotr=function(c){if(c%=64,c==0)return this;if(c>=32){var l=this._a00;if(this._a00=this._a32,this._a32=l,l=this._a48,this._a48=this._a16,this._a16=l,c==32)return this;c-=32}var h=this._a48<<16|this._a32,m=this._a16<<16|this._a00,y=h>>>c|m<<32-c,E=m>>>c|h<<32-c;return this._a00=E&65535,this._a16=E>>>16,this._a32=y&65535,this._a48=y>>>16,this},n.prototype.clone=function(){return new n(this._a00,this._a16,this._a32,this._a48)},typeof define<"u"&&define.amd?define([],function(){return n}):typeof A0<"u"&&A0.exports?A0.exports=n:r.UINT64=n})(nB)});var k2=ee(C2=>{C2.UINT32=rB();C2.UINT64=iB()});var cB=ee((zhe,uB)=>{var Qa=k2().UINT32;Qa.prototype.xxh_update=function(r,e){var t=dm._low,n=dm._high,i,o;o=r*t,i=o>>>16,i+=e*t,i&=65535,i+=r*n;var a=this._low+(o&65535),c=a>>>16;c+=this._high+(i&65535);var l=c<<16|a&65535;l=l<<13|l>>>19,a=l&65535,c=l>>>16,t=hm._low,n=hm._high,o=a*t,i=o>>>16,i+=c*t,i&=65535,i+=a*n,this._low=o&65535,this._high=i&65535};var hm=Qa("2654435761"),dm=Qa("2246822519"),oB=Qa("3266489917"),NG=Qa("668265263"),sB=Qa("374761393");function RG(r){for(var e=[],t=0,n=r.length;t<n;t++){var i=r.charCodeAt(t);i<128?e.push(i):i<2048?e.push(192|i>>6,128|i&63):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|i&63):(t++,i=65536+((i&1023)<<10|r.charCodeAt(t)&1023),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63))}return new Uint8Array(e)}function Uf(){if(arguments.length==2)return new Uf(arguments[1]).update(arguments[0]).digest();if(!(this instanceof Uf))return new Uf(arguments[0]);aB.call(this,arguments[0])}function aB(r){return this.seed=r instanceof Qa?r.clone():Qa(r),this.v1=this.seed.clone().add(hm).add(dm),this.v2=this.seed.clone().add(dm),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(hm),this.total_len=0,this.memsize=0,this.memory=null,this}Uf.prototype.init=aB;Uf.prototype.update=function(r){var e=typeof r=="string",t;e&&(r=RG(r),e=!1,t=!0),typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer&&(t=!0,r=new Uint8Array(r));var n=0,i=r.length,o=n+i;if(i==0)return this;if(this.total_len+=i,this.memsize==0&&(e?this.memory="":t?this.memory=new Uint8Array(16):this.memory=new Buffer(16)),this.memsize+i<16)return e?this.memory+=r:t?this.memory.set(r.subarray(0,i),this.memsize):r.copy(this.memory,this.memsize,0,i),this.memsize+=i,this;if(this.memsize>0){e?this.memory+=r.slice(0,16-this.memsize):t?this.memory.set(r.subarray(0,16-this.memsize),this.memsize):r.copy(this.memory,this.memsize,0,16-this.memsize);var a=0;e?(this.v1.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v2.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v3.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v4.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2))):(this.v1.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v2.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v3.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v4.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2])),n+=16-this.memsize,this.memsize=0,e&&(this.memory="")}if(n<=o-16){var c=o-16;do e?(this.v1.xxh_update(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2)),n+=4,this.v2.xxh_update(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2)),n+=4,this.v3.xxh_update(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2)),n+=4,this.v4.xxh_update(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2))):(this.v1.xxh_update(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2]),n+=4,this.v2.xxh_update(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2]),n+=4,this.v3.xxh_update(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2]),n+=4,this.v4.xxh_update(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2])),n+=4;while(n<=c)}return n<o&&(e?this.memory+=r.slice(n):t?this.memory.set(r.subarray(n,o),this.memsize):r.copy(this.memory,this.memsize,n,o),this.memsize=o-n),this};Uf.prototype.digest=function(){var r=this.memory,e=typeof r=="string",t=0,n=this.memsize,i,o,a=new Qa;for(this.total_len>=16?i=this.v1.rotl(1).add(this.v2.rotl(7).add(this.v3.rotl(12).add(this.v4.rotl(18)))):i=this.seed.clone().add(sB),i.add(a.fromNumber(this.total_len));t<=n-4;)e?a.fromBits(r.charCodeAt(t+1)<<8|r.charCodeAt(t),r.charCodeAt(t+3)<<8|r.charCodeAt(t+2)):a.fromBits(r[t+1]<<8|r[t],r[t+3]<<8|r[t+2]),i.add(a.multiply(oB)).rotl(17).multiply(NG),t+=4;for(;t<n;)a.fromBits(e?r.charCodeAt(t++):r[t++],0),i.add(a.multiply(sB)).rotl(11).multiply(hm);return o=i.clone().shiftRight(15),i.xor(o).multiply(dm),o=i.clone().shiftRight(13),i.xor(o).multiply(oB),o=i.clone().shiftRight(16),i.xor(o),this.init(this.seed),i};uB.exports=Uf});var pB=ee((jhe,dB)=>{var _r=k2().UINT64,Gt=_r("11400714785074694791"),pr=_r("14029467366897019727"),fB=_r("1609587929392839161"),pm=_r("9650029242287828579"),lB=_r("2870177450012600261");function MG(r){for(var e=[],t=0,n=r.length;t<n;t++){var i=r.charCodeAt(t);i<128?e.push(i):i<2048?e.push(192|i>>6,128|i&63):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|i&63):(t++,i=65536+((i&1023)<<10|r.charCodeAt(t)&1023),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63))}return new Uint8Array(e)}function Kf(){if(arguments.length==2)return new Kf(arguments[1]).update(arguments[0]).digest();if(!(this instanceof Kf))return new Kf(arguments[0]);hB.call(this,arguments[0])}function hB(r){return this.seed=r instanceof _r?r.clone():_r(r),this.v1=this.seed.clone().add(Gt).add(pr),this.v2=this.seed.clone().add(pr),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(Gt),this.total_len=0,this.memsize=0,this.memory=null,this}Kf.prototype.init=hB;Kf.prototype.update=function(r){var e=typeof r=="string",t;e&&(r=MG(r),e=!1,t=!0),typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer&&(t=!0,r=new Uint8Array(r));var n=0,i=r.length,o=n+i;if(i==0)return this;if(this.total_len+=i,this.memsize==0&&(e?this.memory="":t?this.memory=new Uint8Array(32):this.memory=new Buffer(32)),this.memsize+i<32)return e?this.memory+=r:t?this.memory.set(r.subarray(0,i),this.memsize):r.copy(this.memory,this.memsize,0,i),this.memsize+=i,this;if(this.memsize>0){e?this.memory+=r.slice(0,32-this.memsize):t?this.memory.set(r.subarray(0,32-this.memsize),this.memsize):r.copy(this.memory,this.memsize,0,32-this.memsize);var a=0;if(e){var c;c=_r(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v1.add(c.multiply(pr)).rotl(31).multiply(Gt),a+=8,c=_r(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v2.add(c.multiply(pr)).rotl(31).multiply(Gt),a+=8,c=_r(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v3.add(c.multiply(pr)).rotl(31).multiply(Gt),a+=8,c=_r(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v4.add(c.multiply(pr)).rotl(31).multiply(Gt)}else{var c;c=_r(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v1.add(c.multiply(pr)).rotl(31).multiply(Gt),a+=8,c=_r(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v2.add(c.multiply(pr)).rotl(31).multiply(Gt),a+=8,c=_r(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v3.add(c.multiply(pr)).rotl(31).multiply(Gt),a+=8,c=_r(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v4.add(c.multiply(pr)).rotl(31).multiply(Gt)}n+=32-this.memsize,this.memsize=0,e&&(this.memory="")}if(n<=o-32){var l=o-32;do{if(e){var c;c=_r(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2),r.charCodeAt(n+5)<<8|r.charCodeAt(n+4),r.charCodeAt(n+7)<<8|r.charCodeAt(n+6)),this.v1.add(c.multiply(pr)).rotl(31).multiply(Gt),n+=8,c=_r(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2),r.charCodeAt(n+5)<<8|r.charCodeAt(n+4),r.charCodeAt(n+7)<<8|r.charCodeAt(n+6)),this.v2.add(c.multiply(pr)).rotl(31).multiply(Gt),n+=8,c=_r(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2),r.charCodeAt(n+5)<<8|r.charCodeAt(n+4),r.charCodeAt(n+7)<<8|r.charCodeAt(n+6)),this.v3.add(c.multiply(pr)).rotl(31).multiply(Gt),n+=8,c=_r(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2),r.charCodeAt(n+5)<<8|r.charCodeAt(n+4),r.charCodeAt(n+7)<<8|r.charCodeAt(n+6)),this.v4.add(c.multiply(pr)).rotl(31).multiply(Gt)}else{var c;c=_r(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2],r[n+5]<<8|r[n+4],r[n+7]<<8|r[n+6]),this.v1.add(c.multiply(pr)).rotl(31).multiply(Gt),n+=8,c=_r(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2],r[n+5]<<8|r[n+4],r[n+7]<<8|r[n+6]),this.v2.add(c.multiply(pr)).rotl(31).multiply(Gt),n+=8,c=_r(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2],r[n+5]<<8|r[n+4],r[n+7]<<8|r[n+6]),this.v3.add(c.multiply(pr)).rotl(31).multiply(Gt),n+=8,c=_r(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2],r[n+5]<<8|r[n+4],r[n+7]<<8|r[n+6]),this.v4.add(c.multiply(pr)).rotl(31).multiply(Gt)}n+=8}while(n<=l)}return n<o&&(e?this.memory+=r.slice(n):t?this.memory.set(r.subarray(n,o),this.memsize):r.copy(this.memory,this.memsize,n,o),this.memsize=o-n),this};Kf.prototype.digest=function(){var r=this.memory,e=typeof r=="string",t=0,n=this.memsize,i,o,a=new _r;for(this.total_len>=32?(i=this.v1.clone().rotl(1),i.add(this.v2.clone().rotl(7)),i.add(this.v3.clone().rotl(12)),i.add(this.v4.clone().rotl(18)),i.xor(this.v1.multiply(pr).rotl(31).multiply(Gt)),i.multiply(Gt).add(pm),i.xor(this.v2.multiply(pr).rotl(31).multiply(Gt)),i.multiply(Gt).add(pm),i.xor(this.v3.multiply(pr).rotl(31).multiply(Gt)),i.multiply(Gt).add(pm),i.xor(this.v4.multiply(pr).rotl(31).multiply(Gt)),i.multiply(Gt).add(pm)):i=this.seed.clone().add(lB),i.add(a.fromNumber(this.total_len));t<=n-8;)e?a.fromBits(r.charCodeAt(t+1)<<8|r.charCodeAt(t),r.charCodeAt(t+3)<<8|r.charCodeAt(t+2),r.charCodeAt(t+5)<<8|r.charCodeAt(t+4),r.charCodeAt(t+7)<<8|r.charCodeAt(t+6)):a.fromBits(r[t+1]<<8|r[t],r[t+3]<<8|r[t+2],r[t+5]<<8|r[t+4],r[t+7]<<8|r[t+6]),a.multiply(pr).rotl(31).multiply(Gt),i.xor(a).rotl(27).multiply(Gt).add(pm),t+=8;for(t+4<=n&&(e?a.fromBits(r.charCodeAt(t+1)<<8|r.charCodeAt(t),r.charCodeAt(t+3)<<8|r.charCodeAt(t+2),0,0):a.fromBits(r[t+1]<<8|r[t],r[t+3]<<8|r[t+2],0,0),i.xor(a.multiply(Gt)).rotl(23).multiply(pr).add(fB),t+=4);t<n;)a.fromBits(e?r.charCodeAt(t++):r[t++],0,0,0),i.xor(a.multiply(lB)).rotl(11).multiply(Gt);return o=i.clone().shiftRight(33),i.xor(o).multiply(pr),o=i.clone().shiftRight(29),i.xor(o).multiply(fB),o=i.clone().shiftRight(32),i.xor(o),this.init(this.seed),i};dB.exports=Kf});var yB=ee((qhe,mB)=>{mB.exports={h32:cB(),h64:pB()}});var Lo=ee(xr=>{"use strict";var UG=xr&&xr.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KG=xr&&xr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xr,"__esModule",{value:!0});var Xn=KG(yB()),$G=vf();function zG(r,e){for(var t=new Array(r),n=typeof e=="function"?e:function(){return e},i=0;i<r;i++)t[i]=n();return t}xr.allocateArray=zG;function I2(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=Za());var n=Xn.default.h64(r,t+1),i=Xn.default.h64(r,t+2);if(e)return{first:n.toNumber(),second:i.toNumber()};var o=n.toString(16);o.length<16&&(o="0".repeat(16-o.length)+o);var a=i.toString(16);return a.length<16&&(a="0".repeat(16-a.length)+a),{first:Number(o),second:Number(a)}}xr.hashTwice=I2;function jG(r,e){e===void 0&&(e=Za());var t=Xn.default.h64(r,e+1),n=Xn.default.h64(r,e+2),i=t.toString(16);i.length<16&&(i="0".repeat(16-i.length)+i);var o=n.toString(16);return o.length<16&&(o="0".repeat(16-o.length)+o),{first:i,second:o}}xr.hashTwiceAsString=jG;function qG(r,e){e===void 0&&(e=Za());var t=Xn.default.h64(r,e+1),n=Xn.default.h64(r,e+2),i=t.toString(16);i.length<16&&(i="0".repeat(16-i.length)+i);var o=n.toString(16);return o.length<16&&(o="0".repeat(16-o.length)+o),{int:{first:t.toNumber(),second:n.toNumber()},string:{first:i,second:o}}}xr.allInOneHashTwice=qG;function T2(r,e,t,n){return Math.abs((e+r*t)%n)}xr.doubleHashing=T2;function HG(r,e,t,n){n===void 0&&(n=Za());function i(o,a,c,l,h){if(h===void 0&&(h=[]),h.length===l)return h;var m=I2(a,!0,n+c%o),y=T2(o,m.first,m.second,c);return h.includes(y)||h.push(y),i(o+1,a,c,l,h)}return i(1,r,e,t)}xr.getDistinctIndices=HG;function WG(r,e,t,n){n===void 0&&(n=Za());for(var i=[],o=1;o<=t;o++){var a=I2(r,!0,n+e%o);i.push(T2(o,a.first,a.second,e))}if(i.length!==t)throw new Error("report this, please, shouldnt be of different size");return i}xr.getIndices=WG;function VG(r,e,t){t===void 0&&(t=Math.random),r=Math.ceil(r),e=Math.floor(e);var n=t();return Math.floor(n*(e-r+1))+r}xr.randomInt=VG;function GG(r,e){for(var t=Math.max(r.length,e.length),n=$G.Buffer.allocUnsafe(t).fill(0),i=0;i<t;++i)i<r.length&&i<e.length?n[t-i-1]=r[r.length-i-1]^e[e.length-i-1]:i<r.length&&i>=e.length?n[t-i-1]^=r[r.length-i-1]:i<e.length&&i>=r.length&&(n[t-i-1]^=e[e.length-i-1]);for(var o=0,a=n.values(),c=a.next();!c.done&&c.value===0;)o++,c=a.next();var l=n.slice(o);return l}xr.xorBuffer=GG;function YG(r){var e,t;if(r===null||!r)return!0;try{for(var n=UG(r),i=n.next();!i.done;i=n.next()){var o=i.value;if(o!==0)return!1}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return!0}xr.isEmptyBuffer=YG;function JG(r,e,t){switch(e===void 0&&(e=Za()),t){case 32:return Xn.default.h32(r,e).toNumber();case 64:return Xn.default.h64(r,e).toNumber();default:return Xn.default.h64(r,e).toNumber()}}xr.hashAsInt=JG;function XG(r,e,t,n){e===void 0&&(e=Za()),t===void 0&&(t=16),n===void 0&&(n=64);var i;switch(n){case 32:i=Xn.default.h32(r,e);break;case 64:i=Xn.default.h64(r,e);break;default:i=Xn.default.h64(r,e);break}var o="";return t===16?(o=i.toString(t),o.length<n/4&&(o="0".repeat(n/4-o.length)+o)):t===2&&(o=F2(i.toString(16)),o.length<n&&(o="0".repeat(n-o.length)+o)),o}xr.hashAsString=XG;function QG(r,e,t,n){e===void 0&&(e=Za()),t===void 0&&(t=16),n===void 0&&(n=64);var i;switch(n){case 32:i=Xn.default.h32(r,e);break;case 64:i=Xn.default.h64(r,e);break;default:i=Xn.default.h64(r,e);break}var o="";return t===16?(o=i.toString(t),o.length<n/4&&(o="0".repeat(n/4-o.length)+o)):t===2&&(o=F2(i.toString(16)),o.length<n&&(o="0".repeat(n-o.length)+o)),{int:i.toNumber(),string:o}}xr.hashIntAndString=QG;function Za(){return 78187493520}xr.getDefaultSeed=Za;function ZG(r){return Math.ceil(Math.pow(2,Math.floor(Math.log(r)/Math.log(2))))}xr.power2=ZG;function F2(r){return parseInt(r,16).toString(2)}xr.hex2bin=F2;function eY(r){return[128,64,32,16,8,4,2,1].map(function(e){return(e&r)>0?1:0})}xr.uint8ToBits=eY;function tY(r){return r.reduce(function(e,t,n){if(t===0)return e;if(t===1)return e+Math.pow(2,7-n);throw new Error("Not binary")},0)}xr.bitsToUint8=tY});var wB=ee((gB,B2)=>{(function(r,e,t){function n(c){var l=this,h=a();l.next=function(){var m=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=m-(l.c=m|0)},l.c=1,l.s0=h(" "),l.s1=h(" "),l.s2=h(" "),l.s0-=h(c),l.s0<0&&(l.s0+=1),l.s1-=h(c),l.s1<0&&(l.s1+=1),l.s2-=h(c),l.s2<0&&(l.s2+=1),h=null}function i(c,l){return l.c=c.c,l.s0=c.s0,l.s1=c.s1,l.s2=c.s2,l}function o(c,l){var h=new n(c),m=l&&l.state,y=h.next;return y.int32=function(){return h.next()*4294967296|0},y.double=function(){return y()+(y()*2097152|0)*11102230246251565e-32},y.quick=y,m&&(typeof m=="object"&&i(m,h),y.state=function(){return i(h,{})}),y}function a(){var c=4022871197,l=function(h){h=String(h);for(var m=0;m<h.length;m++){c+=h.charCodeAt(m);var y=.02519603282416938*c;c=y>>>0,y-=c,y*=c,c=y>>>0,y-=c,c+=y*4294967296}return(c>>>0)*23283064365386963e-26};return l}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.alea=o})(gB,typeof B2=="object"&&B2,typeof define=="function"&&define)});var vB=ee((bB,L2)=>{(function(r,e,t){function n(a){var c=this,l="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var m=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^m^m>>>8},a===(a|0)?c.x=a:l+=a;for(var h=0;h<l.length+64;h++)c.x^=l.charCodeAt(h)|0,c.next()}function i(a,c){return c.x=a.x,c.y=a.y,c.z=a.z,c.w=a.w,c}function o(a,c){var l=new n(a),h=c&&c.state,m=function(){return(l.next()>>>0)/4294967296};return m.double=function(){do var y=l.next()>>>11,E=(l.next()>>>0)/4294967296,k=(y+E)/(1<<21);while(k===0);return k},m.int32=l.next,m.quick=m,h&&(typeof h=="object"&&i(h,l),m.state=function(){return i(l,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xor128=o})(bB,typeof L2=="object"&&L2,typeof define=="function"&&define)});var xB=ee((_B,O2)=>{(function(r,e,t){function n(a){var c=this,l="";c.next=function(){var m=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^(m^m<<1))|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,a===(a|0)?c.x=a:l+=a;for(var h=0;h<l.length+64;h++)c.x^=l.charCodeAt(h)|0,h==l.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(a,c){return c.x=a.x,c.y=a.y,c.z=a.z,c.w=a.w,c.v=a.v,c.d=a.d,c}function o(a,c){var l=new n(a),h=c&&c.state,m=function(){return(l.next()>>>0)/4294967296};return m.double=function(){do var y=l.next()>>>11,E=(l.next()>>>0)/4294967296,k=(y+E)/(1<<21);while(k===0);return k},m.int32=l.next,m.quick=m,h&&(typeof h=="object"&&i(h,l),m.state=function(){return i(l,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xorwow=o})(_B,typeof O2=="object"&&O2,typeof define=="function"&&define)});var AB=ee((EB,N2)=>{(function(r,e,t){function n(a){var c=this;c.next=function(){var h=c.x,m=c.i,y,E,k;return y=h[m],y^=y>>>7,E=y^y<<24,y=h[m+1&7],E^=y^y>>>10,y=h[m+3&7],E^=y^y>>>3,y=h[m+4&7],E^=y^y<<7,y=h[m+7&7],y=y^y<<13,E^=y^y<<9,h[m]=E,c.i=m+1&7,E};function l(h,m){var y,E,k=[];if(m===(m|0))E=k[0]=m;else for(m=""+m,y=0;y<m.length;++y)k[y&7]=k[y&7]<<15^m.charCodeAt(y)+k[y+1&7]<<13;for(;k.length<8;)k.push(0);for(y=0;y<8&&k[y]===0;++y);for(y==8?E=k[7]=-1:E=k[y],h.x=k,h.i=0,y=256;y>0;--y)h.next()}l(c,a)}function i(a,c){return c.x=a.x.slice(),c.i=a.i,c}function o(a,c){a==null&&(a=+new Date);var l=new n(a),h=c&&c.state,m=function(){return(l.next()>>>0)/4294967296};return m.double=function(){do var y=l.next()>>>11,E=(l.next()>>>0)/4294967296,k=(y+E)/(1<<21);while(k===0);return k},m.int32=l.next,m.quick=m,h&&(h.x&&i(h,l),m.state=function(){return i(l,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xorshift7=o})(EB,typeof N2=="object"&&N2,typeof define=="function"&&define)});var PB=ee((SB,R2)=>{(function(r,e,t){function n(a){var c=this;c.next=function(){var h=c.w,m=c.X,y=c.i,E,k;return c.w=h=h+1640531527|0,k=m[y+34&127],E=m[y=y+1&127],k^=k<<13,E^=E<<17,k^=k>>>15,E^=E>>>12,k=m[y]=k^E,c.i=y,k+(h^h>>>16)|0};function l(h,m){var y,E,k,T,O,ue=[],ne=128;for(m===(m|0)?(E=m,m=null):(m=m+"\0",E=0,ne=Math.max(ne,m.length)),k=0,T=-32;T<ne;++T)m&&(E^=m.charCodeAt((T+32)%m.length)),T===0&&(O=E),E^=E<<10,E^=E>>>15,E^=E<<4,E^=E>>>13,T>=0&&(O=O+1640531527|0,y=ue[T&127]^=E+O,k=y==0?k+1:0);for(k>=128&&(ue[(m&&m.length||0)&127]=-1),k=127,T=4*128;T>0;--T)E=ue[k+34&127],y=ue[k=k+1&127],E^=E<<13,y^=y<<17,E^=E>>>15,y^=y>>>12,ue[k]=E^y;h.w=O,h.X=ue,h.i=k}l(c,a)}function i(a,c){return c.i=a.i,c.w=a.w,c.X=a.X.slice(),c}function o(a,c){a==null&&(a=+new Date);var l=new n(a),h=c&&c.state,m=function(){return(l.next()>>>0)/4294967296};return m.double=function(){do var y=l.next()>>>11,E=(l.next()>>>0)/4294967296,k=(y+E)/(1<<21);while(k===0);return k},m.int32=l.next,m.quick=m,h&&(h.X&&i(h,l),m.state=function(){return i(l,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xor4096=o})(SB,typeof R2=="object"&&R2,typeof define=="function"&&define)});var CB=ee((DB,M2)=>{(function(r,e,t){function n(a){var c=this,l="";c.next=function(){var m=c.b,y=c.c,E=c.d,k=c.a;return m=m<<25^m>>>7^y,y=y-E|0,E=E<<24^E>>>8^k,k=k-m|0,c.b=m=m<<20^m>>>12^y,c.c=y=y-E|0,c.d=E<<16^y>>>16^k,c.a=k-m|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,a===Math.floor(a)?(c.a=a/4294967296|0,c.b=a|0):l+=a;for(var h=0;h<l.length+20;h++)c.b^=l.charCodeAt(h)|0,c.next()}function i(a,c){return c.a=a.a,c.b=a.b,c.c=a.c,c.d=a.d,c}function o(a,c){var l=new n(a),h=c&&c.state,m=function(){return(l.next()>>>0)/4294967296};return m.double=function(){do var y=l.next()>>>11,E=(l.next()>>>0)/4294967296,k=(y+E)/(1<<21);while(k===0);return k},m.int32=l.next,m.quick=m,h&&(typeof h=="object"&&i(h,l),m.state=function(){return i(l,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.tychei=o})(DB,typeof M2=="object"&&M2,typeof define=="function"&&define)});var IB=ee((kB,S0)=>{(function(r,e,t){var n=256,i=6,o=52,a="random",c=t.pow(n,i),l=t.pow(2,o),h=l*2,m=n-1,y;function E(X,me,be){var W=[];me=me==!0?{entropy:!0}:me||{};var de=ue(O(me.entropy?[X,ve(e)]:X??ne(),3),W),ge=new k(W),Ue=function(){for(var St=ge.g(i),$t=c,Bt=0;St<l;)St=(St+Bt)*n,$t*=n,Bt=ge.g(1);for(;St>=h;)St/=2,$t/=2,Bt>>>=1;return(St+Bt)/$t};return Ue.int32=function(){return ge.g(4)|0},Ue.quick=function(){return ge.g(4)/4294967296},Ue.double=Ue,ue(ve(ge.S),e),(me.pass||be||function(St,$t,Bt,qt){return qt&&(qt.S&&T(qt,ge),St.state=function(){return T(ge,{})}),Bt?(t[a]=St,$t):St})(Ue,de,"global"in me?me.global:this==t,me.state)}function k(X){var me,be=X.length,W=this,de=0,ge=W.i=W.j=0,Ue=W.S=[];for(be||(X=[be++]);de<n;)Ue[de]=de++;for(de=0;de<n;de++)Ue[de]=Ue[ge=m&ge+X[de%be]+(me=Ue[de])],Ue[ge]=me;(W.g=function(St){for(var $t,Bt=0,qt=W.i,yr=W.j,Ut=W.S;St--;)$t=Ut[qt=m&qt+1],Bt=Bt*n+Ut[m&(Ut[qt]=Ut[yr=m&yr+$t])+(Ut[yr]=$t)];return W.i=qt,W.j=yr,Bt})(n)}function T(X,me){return me.i=X.i,me.j=X.j,me.S=X.S.slice(),me}function O(X,me){var be=[],W=typeof X,de;if(me&&W=="object")for(de in X)try{be.push(O(X[de],me-1))}catch{}return be.length?be:W=="string"?X:X+"\0"}function ue(X,me){for(var be=X+"",W,de=0;de<be.length;)me[m&de]=m&(W^=me[m&de]*19)+be.charCodeAt(de++);return ve(me)}function ne(){try{var X;return y&&(X=y.randomBytes)?X=X(n):(X=new Uint8Array(n),(r.crypto||r.msCrypto).getRandomValues(X)),ve(X)}catch{var me=r.navigator,be=me&&me.plugins;return[+new Date,r,be,r.screen,ve(e)]}}function ve(X){return String.fromCharCode.apply(0,X)}if(ue(t.random(),e),typeof S0=="object"&&S0.exports){S0.exports=E;try{y=i_()}catch{}}else typeof define=="function"&&define.amd?define(function(){return E}):t["seed"+a]=E})(typeof self<"u"?self:kB,[],Math)});var FB=ee((Whe,TB)=>{var rY=wB(),nY=vB(),iY=xB(),oY=AB(),sY=PB(),aY=CB(),$f=IB();$f.alea=rY;$f.xor128=nY;$f.xorwow=iY;$f.xorshift7=oY;$f.xor4096=sY;$f.tychei=aY;TB.exports=$f});var Es=ee(zf=>{"use strict";var uY=zf&&zf.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},cY=zf&&zf.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zf,"__esModule",{value:!0});var fY=uY(Lo()),BB=cY(FB()),lY=function(){function r(){this._seed=fY.getDefaultSeed(),this._rng=BB.default(""+this._seed)}return Object.defineProperty(r.prototype,"seed",{get:function(){return this._seed},set:function(e){this._seed=e,this._rng=BB.default(""+this._seed)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"random",{get:function(){return this._rng},enumerable:!0,configurable:!0}),r.prototype.saveAsJSON=function(){throw new Error("not-implemented")},r.fromJSON=function(e){throw new Error("not-implemented")},r}();zf.default=lY});var OB=ee(()=>{var LB;(function(r){(function(e){var t=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),n=i(r);typeof t.Reflect>"u"?t.Reflect=r:n=i(t.Reflect,n),e(n);function i(o,a){return function(c,l){typeof o[c]!="function"&&Object.defineProperty(o,c,{configurable:!0,writable:!0,value:l}),a&&a(c,l)}}})(function(e){var t=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",i=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",a=typeof Object.create=="function",c={__proto__:[]}instanceof Array,l=!a&&!c,h={create:a?function(){return xn(Object.create(null))}:c?function(){return xn({__proto__:null})}:function(){return xn({})},has:l?function(K,G){return t.call(K,G)}:function(K,G){return G in K},get:l?function(K,G){return t.call(K,G)?K[G]:void 0}:function(K,G){return K[G]}},m=Object.getPrototypeOf(Function),y=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",E=!y&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:ni(),k=!y&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:ii(),T=!y&&typeof WeakMap=="function"?WeakMap:$o(),O=new T;function ue(K,G,fe,_e){if(er(fe)){if(!ro(K))throw new TypeError;if(!tn(G))throw new TypeError;return St(K,G)}else{if(!ro(K))throw new TypeError;if(!Ve(G))throw new TypeError;if(!Ve(_e)&&!er(_e)&&!Ht(_e))throw new TypeError;return Ht(_e)&&(_e=void 0),fe=Kr(fe),$t(K,G,fe,_e)}}e("decorate",ue);function ne(K,G){function fe(_e,$e){if(!Ve(_e))throw new TypeError;if(!er($e)&&!Ko($e))throw new TypeError;Un(K,G,_e,$e)}return fe}e("metadata",ne);function ve(K,G,fe,_e){if(!Ve(fe))throw new TypeError;return er(_e)||(_e=Kr(_e)),Un(K,G,fe,_e)}e("defineMetadata",ve);function X(K,G,fe){if(!Ve(G))throw new TypeError;return er(fe)||(fe=Kr(fe)),qt(K,G,fe)}e("hasMetadata",X);function me(K,G,fe){if(!Ve(G))throw new TypeError;return er(fe)||(fe=Kr(fe)),yr(K,G,fe)}e("hasOwnMetadata",me);function be(K,G,fe){if(!Ve(G))throw new TypeError;return er(fe)||(fe=Kr(fe)),Ut(K,G,fe)}e("getMetadata",be);function W(K,G,fe){if(!Ve(G))throw new TypeError;return er(fe)||(fe=Kr(fe)),Wr(K,G,fe)}e("getOwnMetadata",W);function de(K,G){if(!Ve(K))throw new TypeError;return er(G)||(G=Kr(G)),Ur(K,G)}e("getMetadataKeys",de);function ge(K,G){if(!Ve(K))throw new TypeError;return er(G)||(G=Kr(G)),en(K,G)}e("getOwnMetadataKeys",ge);function Ue(K,G,fe){if(!Ve(G))throw new TypeError;er(fe)||(fe=Kr(fe));var _e=Bt(G,fe,!1);if(er(_e)||!_e.delete(K))return!1;if(_e.size>0)return!0;var $e=O.get(G);return $e.delete(fe),$e.size>0||O.delete(G),!0}e("deleteMetadata",Ue);function St(K,G){for(var fe=K.length-1;fe>=0;--fe){var _e=K[fe],$e=_e(G);if(!er($e)&&!Ht($e)){if(!tn($e))throw new TypeError;G=$e}}return G}function $t(K,G,fe,_e){for(var $e=K.length-1;$e>=0;--$e){var sr=K[$e],tt=sr(G,fe,_e);if(!er(tt)&&!Ht(tt)){if(!Ve(tt))throw new TypeError;_e=tt}}return _e}function Bt(K,G,fe){var _e=O.get(K);if(er(_e)){if(!fe)return;_e=new E,O.set(K,_e)}var $e=_e.get(G);if(er($e)){if(!fe)return;$e=new E,_e.set(G,$e)}return $e}function qt(K,G,fe){var _e=yr(K,G,fe);if(_e)return!0;var $e=lr(G);return Ht($e)?!1:qt(K,$e,fe)}function yr(K,G,fe){var _e=Bt(G,fe,!1);return er(_e)?!1:to(_e.has(K))}function Ut(K,G,fe){var _e=yr(K,G,fe);if(_e)return Wr(K,G,fe);var $e=lr(G);if(!Ht($e))return Ut(K,$e,fe)}function Wr(K,G,fe){var _e=Bt(G,fe,!1);if(!er(_e))return _e.get(K)}function Un(K,G,fe,_e){var $e=Bt(fe,_e,!0);$e.set(K,G)}function Ur(K,G){var fe=en(K,G),_e=lr(K);if(_e===null)return fe;var $e=Ur(_e,G);if($e.length<=0)return fe;if(fe.length<=0)return $e;for(var sr=new k,tt=[],ut=0,He=fe;ut<He.length;ut++){var mt=He[ut],ht=sr.has(mt);ht||(sr.add(mt),tt.push(mt))}for(var Cr=0,zo=$e;Cr<zo.length;Cr++){var mt=zo[Cr],ht=sr.has(mt);ht||(sr.add(mt),tt.push(mt))}return tt}function en(K,G){var fe=[],_e=Bt(K,G,!1);if(er(_e))return fe;for(var $e=_e.keys(),sr=Kn($e),tt=0;;){var ut=au(sr);if(!ut)return fe.length=tt,fe;var He=Fn(ut);try{fe[tt]=He}catch(mt){try{ln(sr)}finally{throw mt}}tt++}}function ua(K){if(K===null)return 1;switch(typeof K){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return K===null?1:6;default:return 6}}function er(K){return K===void 0}function Ht(K){return K===null}function Er(K){return typeof K=="symbol"}function Ve(K){return typeof K=="object"?K!==null:typeof K=="function"}function fn(K,G){switch(ua(K)){case 0:return K;case 1:return K;case 2:return K;case 3:return K;case 4:return K;case 5:return K}var fe=G===3?"string":G===5?"number":"default",_e=su(K,i);if(_e!==void 0){var $e=_e.call(K,fe);if(Ve($e))throw new TypeError;return $e}return eo(K,fe==="default"?"number":fe)}function eo(K,G){if(G==="string"){var fe=K.toString;if(Tn(fe)){var _e=fe.call(K);if(!Ve(_e))return _e}var $e=K.valueOf;if(Tn($e)){var _e=$e.call(K);if(!Ve(_e))return _e}}else{var $e=K.valueOf;if(Tn($e)){var _e=$e.call(K);if(!Ve(_e))return _e}var sr=K.toString;if(Tn(sr)){var _e=sr.call(K);if(!Ve(_e))return _e}}throw new TypeError}function to(K){return!!K}function Cs(K){return""+K}function Kr(K){var G=fn(K,3);return Er(G)?G:Cs(G)}function ro(K){return Array.isArray?Array.isArray(K):K instanceof Object?K instanceof Array:Object.prototype.toString.call(K)==="[object Array]"}function Tn(K){return typeof K=="function"}function tn(K){return typeof K=="function"}function Ko(K){switch(ua(K)){case 3:return!0;case 4:return!0;default:return!1}}function su(K,G){var fe=K[G];if(fe!=null){if(!Tn(fe))throw new TypeError;return fe}}function Kn(K){var G=su(K,o);if(!Tn(G))throw new TypeError;var fe=G.call(K);if(!Ve(fe))throw new TypeError;return fe}function Fn(K){return K.value}function au(K){var G=K.next();return G.done?!1:G}function ln(K){var G=K.return;G&&G.call(K)}function lr(K){var G=Object.getPrototypeOf(K);if(typeof K!="function"||K===m||G!==m)return G;var fe=K.prototype,_e=fe&&Object.getPrototypeOf(fe);if(_e==null||_e===Object.prototype)return G;var $e=_e.constructor;return typeof $e!="function"||$e===K?G:$e}function ni(){var K={},G=[],fe=function(){function tt(ut,He,mt){this._index=0,this._keys=ut,this._values=He,this._selector=mt}return tt.prototype["@@iterator"]=function(){return this},tt.prototype[o]=function(){return this},tt.prototype.next=function(){var ut=this._index;if(ut>=0&&ut<this._keys.length){var He=this._selector(this._keys[ut],this._values[ut]);return ut+1>=this._keys.length?(this._index=-1,this._keys=G,this._values=G):this._index++,{value:He,done:!1}}return{value:void 0,done:!0}},tt.prototype.throw=function(ut){throw this._index>=0&&(this._index=-1,this._keys=G,this._values=G),ut},tt.prototype.return=function(ut){return this._index>=0&&(this._index=-1,this._keys=G,this._values=G),{value:ut,done:!0}},tt}();return function(){function tt(){this._keys=[],this._values=[],this._cacheKey=K,this._cacheIndex=-2}return Object.defineProperty(tt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),tt.prototype.has=function(ut){return this._find(ut,!1)>=0},tt.prototype.get=function(ut){var He=this._find(ut,!1);return He>=0?this._values[He]:void 0},tt.prototype.set=function(ut,He){var mt=this._find(ut,!0);return this._values[mt]=He,this},tt.prototype.delete=function(ut){var He=this._find(ut,!1);if(He>=0){for(var mt=this._keys.length,ht=He+1;ht<mt;ht++)this._keys[ht-1]=this._keys[ht],this._values[ht-1]=this._values[ht];return this._keys.length--,this._values.length--,ut===this._cacheKey&&(this._cacheKey=K,this._cacheIndex=-2),!0}return!1},tt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=K,this._cacheIndex=-2},tt.prototype.keys=function(){return new fe(this._keys,this._values,_e)},tt.prototype.values=function(){return new fe(this._keys,this._values,$e)},tt.prototype.entries=function(){return new fe(this._keys,this._values,sr)},tt.prototype["@@iterator"]=function(){return this.entries()},tt.prototype[o]=function(){return this.entries()},tt.prototype._find=function(ut,He){return this._cacheKey!==ut&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=ut)),this._cacheIndex<0&&He&&(this._cacheIndex=this._keys.length,this._keys.push(ut),this._values.push(void 0)),this._cacheIndex},tt}();function _e(tt,ut){return tt}function $e(tt,ut){return ut}function sr(tt,ut){return[tt,ut]}}function ii(){return function(){function K(){this._map=new E}return Object.defineProperty(K.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),K.prototype.has=function(G){return this._map.has(G)},K.prototype.add=function(G){return this._map.set(G,G),this},K.prototype.delete=function(G){return this._map.delete(G)},K.prototype.clear=function(){this._map.clear()},K.prototype.keys=function(){return this._map.keys()},K.prototype.values=function(){return this._map.values()},K.prototype.entries=function(){return this._map.entries()},K.prototype["@@iterator"]=function(){return this.keys()},K.prototype[o]=function(){return this.keys()},K}()}function $o(){var K=16,G=h.create(),fe=_e();return function(){function He(){this._key=_e()}return He.prototype.has=function(mt){var ht=$e(mt,!1);return ht!==void 0?h.has(ht,this._key):!1},He.prototype.get=function(mt){var ht=$e(mt,!1);return ht!==void 0?h.get(ht,this._key):void 0},He.prototype.set=function(mt,ht){var Cr=$e(mt,!0);return Cr[this._key]=ht,this},He.prototype.delete=function(mt){var ht=$e(mt,!1);return ht!==void 0?delete ht[this._key]:!1},He.prototype.clear=function(){this._key=_e()},He}();function _e(){var He;do He="@@WeakMap@@"+ut();while(h.has(G,He));return G[He]=!0,He}function $e(He,mt){if(!t.call(He,fe)){if(!mt)return;Object.defineProperty(He,fe,{value:h.create()})}return He[fe]}function sr(He,mt){for(var ht=0;ht<mt;++ht)He[ht]=Math.random()*255|0;return He}function tt(He){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(He)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(He)):sr(new Uint8Array(He),He):sr(new Array(He),He)}function ut(){var He=tt(K);He[6]=He[6]&79|64,He[8]=He[8]&191|128;for(var mt="",ht=0;ht<K;++ht){var Cr=He[ht];(ht===4||ht===6||ht===8)&&(mt+="-"),Cr<16&&(mt+="0"),mt+=Cr.toString(16).toLowerCase()}return mt}}function xn(K){return K.__=void 0,delete K.__,K}})})(LB||(LB={}))});var Hi=ee(Oo=>{"use strict";var hY=Oo&&Oo.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},dY=Oo&&Oo.__spread||function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(hY(arguments[e]));return r};Object.defineProperty(Oo,"__esModule",{value:!0});OB();function mm(r){return r==null?r:Array.isArray(r)?r.map(mm):typeof r=="object"?"saveAsJSON"in r?r.saveAsJSON():Object.assign({},r):r}Oo.cloneField=mm;function pY(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(n){var i={type:r};return e.forEach(function(o){i[o]=mm(n[o])}),i}}Oo.cloneObject=pY;function mY(r){return function(e){return e.prototype.saveAsJSON=function(){return r.export(this)},e.fromJSON=function(t){return r.import(t)},e}}Oo.Exportable=mY;var U2=Symbol("bloom-filters:exportable:class-name"),kh=Symbol("bloom-filters:exportable:fields"),Ih=Symbol("bloom-filters:exportable:constructor-parameters");function yY(r,e){return r===void 0&&(r=mm),e===void 0&&(e=function(t){return t}),function(t,n){var i=[];Reflect.hasMetadata(kh,t)&&(i=Reflect.getMetadata(kh,t)),i.push({name:n,exporter:r,importer:e}),Reflect.defineMetadata(kh,i,t)}}Oo.Field=yY;function gY(r){return function(e,t,n){var i=new Map;Reflect.hasMetadata(Ih,e)&&(i=Reflect.getMetadata(Ih,e)),i.set(r,n),Reflect.defineMetadata(Ih,i,e)}}Oo.Parameter=gY;function wY(r,e){return e===void 0&&(e=[]),function(t){if(Reflect.defineMetadata(U2,r,t.prototype),!Reflect.hasMetadata(kh,t.prototype)||e.length===0)throw new SyntaxError("No exported fields declared when @AutoExportable is called");Reflect.hasMetadata(Ih,t)||Reflect.defineMetadata(Ih,new Map,t),t.prototype.saveAsJSON=function(){var n=this,i={type:Reflect.getMetadata(U2,t.prototype)},o=Reflect.getMetadata(kh,t.prototype);return o.forEach(function(a){i[a.name]=a.exporter(n[a.name])}),e.forEach(function(a){i[a]=mm(n[a])}),i},t.fromJSON=function(n){var i=Reflect.getMetadata(U2,t.prototype),o=Reflect.getMetadata(Ih,t),a=Reflect.getMetadata(kh,t.prototype);if(n.type!==i)throw new Error("Cannot create an object "+i+' from a JSON export with type "'+n.type+'"');var c=[],l=[];e.map(function(m){return{name:m,importer:function(y){return y}}}).concat(a).forEach(function(m){if(!(m.name in n))throw new Error('Invalid import: required field "'+m+'" not found in JSON export "'+n+'"');o.has(m.name)?c[o.get(m.name)]=m.importer(n[m.name]):l.push({name:m.name,value:m.importer(n[m.name])})});var h=new(t.bind.apply(t,dY([void 0],c)));return l.forEach(function(m){h[m.name]=m.value}),h}}}Oo.AutoExportable=wY});var D0=ee(P0=>{"use strict";Object.defineProperty(P0,"__esModule",{value:!0});function bY(r,e){return Math.ceil(-(r*Math.log(e)/Math.pow(Math.log(2),2)))}P0.optimalFilterSize=bY;function vY(r,e){return Math.ceil(r/e*Math.log(2))}P0.optimalHashes=vY});var MB=ee(Wi=>{"use strict";var _Y=Wi&&Wi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ym=Wi&&Wi.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},gm=Wi&&Wi.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},NB=Wi&&Wi.__param||function(r,e){return function(t,n){e(t,n,r)}},xY=Wi&&Wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wi,"__esModule",{value:!0});var EY=xY(Es()),jf=Hi(),RB=D0(),wm=Lo(),AY=function(r){_Y(e,r);function e(n,i){var o=r.call(this)||this;if(i<1)throw new Error("A BloomFilter cannot uses less than one hash function, while you tried to use "+i+".");return o._size=n,o._nbHashes=i,o._filter=wm.allocateArray(o._size,0),o._length=0,o}t=e,e.create=function(n,i){var o=RB.optimalFilterSize(n,i),a=RB.optimalHashes(o,n);return new t(o,a)},e.from=function(n,i){var o=Array.from(n),a=t.create(o.length,i);return o.forEach(function(c){return a.add(c)}),a},e.fromBytes=function(n,i){for(var o=[],a=0;a<n.length;a++){var c=wm.uint8ToBits(n[a]);o=o.concat(c)}var l=new t(o.length,i);return l._filter=o,l},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.add=function(n){for(var i=wm.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=0;o<i.length;o++)this._filter[i[o]]=1;this._length++},e.prototype.has=function(n){for(var i=wm.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=0;o<i.length;o++)if(!this._filter[i[o]])return!1;return!0},e.prototype.rate=function(){return Math.pow(1-Math.exp(-this._nbHashes*this._length/this._size),this._nbHashes)},e.prototype.equals=function(n){return this._size!==n._size||this._nbHashes!==n._nbHashes?!1:this._filter.every(function(i,o){return n._filter[o]===i})},e.prototype.toBytes=function(){for(var n=new Uint8Array(Math.ceil(this._size/8)),i=0;i<n.length;i++){var o=this._filter.slice(i*8,i*8+8);n[i]=wm.bitsToUint8(o)}return n};var t;return ym([jf.Field(),gm("design:type",Number)],e.prototype,"_size",void 0),ym([jf.Field(),gm("design:type",Number)],e.prototype,"_nbHashes",void 0),ym([jf.Field(),gm("design:type",Array)],e.prototype,"_filter",void 0),ym([jf.Field(),gm("design:type",Number)],e.prototype,"_length",void 0),e=t=ym([jf.AutoExportable("BloomFilter",["_seed"]),NB(0,jf.Parameter("_size")),NB(1,jf.Parameter("_nbHashes")),gm("design:paramtypes",[Number,Number])],e),e}(EY.default);Wi.default=AY});var $B=ee(Vi=>{"use strict";var SY=Vi&&Vi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bm=Vi&&Vi.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},vm=Vi&&Vi.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},UB=Vi&&Vi.__param||function(r,e){return function(t,n){e(t,n,r)}},PY=Vi&&Vi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vi,"__esModule",{value:!0});var DY=PY(Es()),qf=Hi(),KB=D0(),C0=Lo(),CY=function(r){SY(e,r);function e(n,i){var o=r.call(this)||this;if(i<1)throw new Error("A CountingBloomFilter must used at least one hash function, but you tried to use "+i+" functions. Consider increasing it.");return o._size=n,o._nbHashes=i,o._filter=C0.allocateArray(o._size,function(){return[0,0]}),o._length=0,o}t=e,e.create=function(n,i){var o=KB.optimalFilterSize(n,i);return new t(o,KB.optimalHashes(o,n))},e.from=function(n,i){var o=Array.from(n),a=t.create(o.length,i);return o.forEach(function(c){return a.add(c)}),a},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.add=function(n){for(var i=C0.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=0;o<i.length;o++)this._filter[i[o]][1]+=1,this._filter[i[o]][1]>0&&(this._filter[i[o]][0]=1);this._length++},e.prototype.remove=function(n){for(var i=C0.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=!0,a=0;a<i.length;a++)this._filter[i[a]][1]-=1,this._filter[i[a]][1]<=0&&(this._filter[i[a]][0]=0);return this._length--,o},e.prototype.has=function(n){for(var i=C0.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=0;o<i.length;o++)if(!this._filter[i[o]][0])return!1;return!0},e.prototype.rate=function(){return Math.pow(1-Math.exp(-this._nbHashes*this._length/this._size),this._nbHashes)},e.prototype.equals=function(n){return this._size!==n._size||this._nbHashes!==n._nbHashes||this._length!==n._length?!1:this._filter.every(function(i,o){return n._filter[o][0]===i[0]&&n._filter[o][1]===i[1]})};var t;return bm([qf.Field(),vm("design:type",Number)],e.prototype,"_size",void 0),bm([qf.Field(),vm("design:type",Number)],e.prototype,"_nbHashes",void 0),bm([qf.Field(),vm("design:type",Array)],e.prototype,"_filter",void 0),bm([qf.Field(),vm("design:type",Number)],e.prototype,"_length",void 0),e=t=bm([qf.AutoExportable("CountingBloomFilter",["_seed"]),UB(0,qf.Parameter("_size")),UB(1,qf.Parameter("_nbHashes")),vm("design:paramtypes",[Number,Number])],e),e}(DY.default);Vi.default=CY});var zB=ee(Gi=>{"use strict";var kY=Gi&&Gi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),yc=Gi&&Gi.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},gc=Gi&&Gi.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},k0=Gi&&Gi.__param||function(r,e){return function(t,n){e(t,n,r)}},IY=Gi&&Gi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gi,"__esModule",{value:!0});var TY=IY(Es()),No=Hi(),I0=Lo();function FY(r,e){return Math.ceil(Math.log(r)/Math.log(e))}function BY(r,e,t){return Math.ceil(r*-Math.log(e)/(Math.log(t)*Math.log(1-t)))}function LY(r,e,t){return Math.ceil(r*(Math.log(e)*Math.log(1-e))/-(t*Math.log(e)))}var OY=function(r){kY(e,r);function e(n,i,o,a){var c=r.call(this)||this;return c._size=n,c._nbHashes=i,c._loadFactor=o,c._m=Math.ceil(c._size/c._nbHashes),c._filter=I0.allocateArray(c._nbHashes,function(){return I0.allocateArray(c._m,0)}),c._capacity=a!==void 0?a:LY(c._size,o,i),c._length=0,c}t=e,e.create=function(n,i,o){o===void 0&&(o=.5);var a=BY(n,i,o),c=FY(i,o);return new t(a,c,o,n)},e.from=function(n,i,o){o===void 0&&(o=.5);var a=Array.from(n),c=t.create(a.length,i,o);return a.forEach(function(l){return c.add(l)}),c},Object.defineProperty(e.prototype,"capacity",{get:function(){return this._capacity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadFactor",{get:function(){return this._loadFactor},enumerable:!0,configurable:!0}),e.prototype.add=function(n){for(var i=I0.getIndices(n,this._m,this._nbHashes,this.seed),o=0;o<this._nbHashes;o++)this._filter[o][i[o]]=1;this._length++},e.prototype.has=function(n){for(var i=I0.getIndices(n,this._m,this._nbHashes,this.seed),o=0;o<this._nbHashes;o++)if(!this._filter[o][i[o]])return!1;return!0},e.prototype.rate=function(){var n=this._currentload();return Math.pow(n,this._nbHashes)},e.prototype.equals=function(n){return this._size!==n._size||this._nbHashes!==n._nbHashes||this._length!==n._length||this._loadFactor!==n._loadFactor?!1:this._filter.every(function(i,o){return n._filter[o].every(function(a,c){return i[c]===a})})},e.prototype._currentload=function(){var n=this._filter.map(function(o){return o.reduce(function(a,c){return a+c},0)}),i=n.reduce(function(o,a){return o+a},0);return i/this._size};var t;return yc([No.Field(),gc("design:type",Number)],e.prototype,"_size",void 0),yc([No.Field(),gc("design:type",Number)],e.prototype,"_nbHashes",void 0),yc([No.Field(),gc("design:type",Number)],e.prototype,"_loadFactor",void 0),yc([No.Field(),gc("design:type",Number)],e.prototype,"_m",void 0),yc([No.Field(),gc("design:type",Array)],e.prototype,"_filter",void 0),yc([No.Field(),gc("design:type",Number)],e.prototype,"_capacity",void 0),yc([No.Field(),gc("design:type",Number)],e.prototype,"_length",void 0),e=t=yc([No.AutoExportable("PartitionedBloomFilter",["_seed"]),k0(0,No.Parameter("_size")),k0(1,No.Parameter("_nbHashes")),k0(2,No.Parameter("_loadFactor")),k0(3,No.Parameter("_capacity")),gc("design:paramtypes",[Number,Number,Number,Number])],e),e}(TY.default);Gi.default=OY});var K2=ee(Qn=>{"use strict";var NY=Qn&&Qn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_m=Qn&&Qn.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},xm=Qn&&Qn.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},jB=Qn&&Qn.__param||function(r,e){return function(t,n){e(t,n,r)}},RY=Qn&&Qn.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MY=Qn&&Qn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qn,"__esModule",{value:!0});var UY=MY(Es()),Hf=Hi(),T0=Lo(),KY=function(r){NY(e,r);function e(n,i){var o=r.call(this)||this;return o._columns=n,o._rows=i,o._matrix=T0.allocateArray(o._rows,function(){return T0.allocateArray(o._columns,0)}),o._allSums=0,o}t=e,e.create=function(n,i){i===void 0&&(i=.999);var o=Math.ceil(Math.E/n),a=Math.ceil(Math.log(1/i));return new t(o,a)},e.from=function(n,i,o){var a,c;o===void 0&&(o=.999);var l=t.create(i,o);try{for(var h=RY(n),m=h.next();!m.done;m=h.next()){var y=m.value;l.update(y)}}catch(E){a={error:E}}finally{try{m&&!m.done&&(c=h.return)&&c.call(h)}finally{if(a)throw a.error}}return l},Object.defineProperty(e.prototype,"columns",{get:function(){return this._columns},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sum",{get:function(){return this._allSums},enumerable:!0,configurable:!0}),e.prototype.update=function(n,i){i===void 0&&(i=1),this._allSums+=i;for(var o=T0.getDistinctIndices(n,this._columns,this._rows,this.seed),a=0;a<this._rows;a++)this._matrix[a][o[a]]+=i},e.prototype.count=function(n){for(var i=1/0,o=T0.getDistinctIndices(n,this._columns,this._rows,this.seed),a=0;a<this._rows;a++){var c=this._matrix[a][o[a]];i=Math.min(c,i)}return i},e.prototype.equals=function(n){if(this._columns!==n._columns||this._rows!==n._rows)return!1;for(var i=0;i<this._rows;i++)for(var o=0;o<this._columns;o++)if(this._matrix[i][o]!==n._matrix[i][o])return!1;return!0},e.prototype.merge=function(n){if(this._columns!==n._columns)throw new Error("Cannot merge two sketches with different number of columns");if(this._rows!==n._rows)throw new Error("Cannot merge two sketches with different number of rows");for(var i=0;i<this._rows;i++)for(var o=0;o<this._columns;o++)this._matrix[i][o]+=n._matrix[i][o]},e.prototype.clone=function(){var n=new t(this._columns,this._rows);return n.merge(this),n.seed=this.seed,n};var t;return _m([Hf.Field(),xm("design:type",Number)],e.prototype,"_columns",void 0),_m([Hf.Field(),xm("design:type",Number)],e.prototype,"_rows",void 0),_m([Hf.Field(),xm("design:type",Array)],e.prototype,"_matrix",void 0),_m([Hf.Field(),xm("design:type",Number)],e.prototype,"_allSums",void 0),e=t=_m([Hf.AutoExportable("CountMinSketch",["_seed"]),jB(0,Hf.Parameter("_columns")),jB(1,Hf.Parameter("_rows")),xm("design:paramtypes",[Number,Number])],e),e}(UY.default);Qn.default=KY});var HB=ee(Yi=>{"use strict";var $Y=Yi&&Yi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Em=Yi&&Yi.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Am=Yi&&Yi.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},zY=Yi&&Yi.__param||function(r,e){return function(t,n){e(t,n,r)}},jY=Yi&&Yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yi,"__esModule",{value:!0});var qY=jY(Es()),Th=Hi(),qB=Lo(),$2=Math.pow(2,32);function HY(r){switch(r){case 16:return .673;case 32:return .697;case 64:return .709;default:return .7213/(1+1.079/r)}}var WY=function(r){$Y(e,r);function e(n){var i=r.call(this)||this;return i._nbRegisters=n,i._nbBytesPerHash=Math.round(Math.log2(n)),i._correctionBias=HY(n),i._registers=qB.allocateArray(i._nbRegisters,0),i}t=e,Object.defineProperty(e.prototype,"nbRegisters",{get:function(){return this._nbRegisters},enumerable:!0,configurable:!0}),e.prototype.update=function(n){for(var i=qB.hashAsInt(n,this.seed).toString(2),o=1+parseInt(i.slice(0,this._nbBytesPerHash-1),2),a=i.slice(this._nbBytesPerHash),c=0;a[c]!=="1"&&c<a.length-1;)c++;this._registers[o]=Math.max(this._registers[o],c)},e.prototype.count=function(n){n===void 0&&(n=!1);var i=this._registers.reduce(function(a,c){return a+Math.pow(2,-c)},0),o=this._correctionBias*Math.pow(this._nbRegisters,2)/i;return o>$2/30&&(o=-$2*Math.log(1-o/$2)),n&&(o=Math.round(o)),o},e.prototype.accuracy=function(){return 1.04/Math.sqrt(this._nbRegisters)},e.prototype.merge=function(n){if(this.nbRegisters!==n.nbRegisters)throw new Error("Two HyperLogLog must have the same number of registers to be merged. Tried to merge two HyperLogLog with m = "+this.nbRegisters+" and m = "+n.nbRegisters);for(var i=new t(this.nbRegisters),o=0;o<this.nbRegisters-1;o++)i._registers[o]=Math.max(this._registers[o],n._registers[o]);return i},e.prototype.equals=function(n){if(this.nbRegisters!==n.nbRegisters)return!1;for(var i=0;i<this.nbRegisters-1;i++)if(this._registers[i]!==n._registers[i])return!1;return!0};var t;return Em([Th.Field(),Am("design:type",Number)],e.prototype,"_nbRegisters",void 0),Em([Th.Field(),Am("design:type",Number)],e.prototype,"_nbBytesPerHash",void 0),Em([Th.Field(),Am("design:type",Number)],e.prototype,"_correctionBias",void 0),Em([Th.Field(),Am("design:type",Array)],e.prototype,"_registers",void 0),e=t=Em([Th.AutoExportable("HyperLogLog",["_seed"]),zY(0,Th.Parameter("_nbRegisters")),Am("design:paramtypes",[Number])],e),e}(qY.default);Yi.default=WY});var F0=ee((Fh,Sm)=>{(function(){var r,e="4.17.21",t=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",a="__lodash_hash_undefined__",c=500,l="__lodash_placeholder__",h=1,m=2,y=4,E=1,k=2,T=1,O=2,ue=4,ne=8,ve=16,X=32,me=64,be=128,W=256,de=512,ge=30,Ue="...",St=800,$t=16,Bt=1,qt=2,yr=3,Ut=1/0,Wr=9007199254740991,Un=17976931348623157e292,Ur=0/0,en=4294967295,ua=en-1,er=en>>>1,Ht=[["ary",be],["bind",T],["bindKey",O],["curry",ne],["curryRight",ve],["flip",de],["partial",X],["partialRight",me],["rearg",W]],Er="[object Arguments]",Ve="[object Array]",fn="[object AsyncFunction]",eo="[object Boolean]",to="[object Date]",Cs="[object DOMException]",Kr="[object Error]",ro="[object Function]",Tn="[object GeneratorFunction]",tn="[object Map]",Ko="[object Number]",su="[object Null]",Kn="[object Object]",Fn="[object Promise]",au="[object Proxy]",ln="[object RegExp]",lr="[object Set]",ni="[object String]",ii="[object Symbol]",$o="[object Undefined]",xn="[object WeakMap]",K="[object WeakSet]",G="[object ArrayBuffer]",fe="[object DataView]",_e="[object Float32Array]",$e="[object Float64Array]",sr="[object Int8Array]",tt="[object Int16Array]",ut="[object Int32Array]",He="[object Uint8Array]",mt="[object Uint8ClampedArray]",ht="[object Uint16Array]",Cr="[object Uint32Array]",zo=/\b__p \+= '';/g,ca=/\b(__p \+=) '' \+/g,jo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,fa=/&(?:amp|lt|gt|quot|#39);/g,Ec=/[&<>"']/g,no=RegExp(fa.source),Yh=RegExp(Ec.source),vi=/<%-([\s\S]+?)%>/g,io=/<%([\s\S]+?)%>/g,qo=/<%=([\s\S]+?)%>/g,Ac=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Sc=/^\w*$/,el=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pc=/[\\^$.*+?()[\]{}|]/g,En=RegExp(Pc.source),uu=/^\s+/,g=/\s/,x=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_=/\{\n\/\* \[wrapped with (.+)\] \*/,d=/,? & /,D=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,R=/[()=,{}\[\]\/\s]/,U=/\\(\\)?/g,oe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ye=/\w*$/,Ke=/^[-+]0x[0-9a-f]+$/i,Se=/^0b[01]+$/i,Ct=/^\[object .+?Constructor\]$/,Te=/^0o[0-7]+$/i,rt=/^(?:0|[1-9]\d*)$/,ot=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ct=/($^)/,lt=/['\n\r\u2028\u2029\\]/g,et="\\ud800-\\udfff",ft="\\u0300-\\u036f",nt="\\ufe20-\\ufe2f",Ce="\\u20d0-\\u20ff",qe=ft+nt+Ce,xe="\\u2700-\\u27bf",Be="a-z\\xdf-\\xf6\\xf8-\\xff",Le="\\xac\\xb1\\xd7\\xf7",Ee="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",z="\\u2000-\\u206f",j=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ce="A-Z\\xc0-\\xd6\\xd8-\\xde",re="\\ufe0e\\ufe0f",ie=Le+Ee+z+j,b="['\u2019]",C="["+et+"]",S="["+ie+"]",F="["+qe+"]",B="\\d+",w="["+xe+"]",$="["+Be+"]",H="[^"+et+ie+B+xe+Be+ce+"]",Y="\\ud83c[\\udffb-\\udfff]",V="(?:"+F+"|"+Y+")",te="[^"+et+"]",pe="(?:\\ud83c[\\udde6-\\uddff]){2}",ze="[\\ud800-\\udbff][\\udc00-\\udfff]",Oe="["+ce+"]",Qe="\\u200d",dt="(?:"+$+"|"+H+")",pt="(?:"+Oe+"|"+H+")",Lt="(?:"+b+"(?:d|ll|m|re|s|t|ve))?",hr="(?:"+b+"(?:D|LL|M|RE|S|T|VE))?",Ar=V+"?",$r="["+re+"]?",Jh="(?:"+Qe+"(?:"+[te,pe,ze].join("|")+")"+$r+Ar+")*",_8="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rb="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Lm=$r+Ar+Jh,Om="(?:"+[w,pe,ze].join("|")+")"+Lm,aO="(?:"+[te+F+"?",F,pe,ze,C].join("|")+")",uO=RegExp(b,"g"),cO=RegExp(F,"g"),nb=RegExp(Y+"(?="+Y+")|"+aO+Lm,"g"),fO=RegExp([Oe+"?"+$+"+"+Lt+"(?="+[S,Oe,"$"].join("|")+")",pt+"+"+hr+"(?="+[S,Oe+dt,"$"].join("|")+")",Oe+"?"+dt+"+"+Lt,Oe+"+"+hr,rb,_8,B,Om].join("|"),"g"),lO=RegExp("["+Qe+et+qe+re+"]"),hO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,dO=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],pO=-1,dr={};dr[_e]=dr[$e]=dr[sr]=dr[tt]=dr[ut]=dr[He]=dr[mt]=dr[ht]=dr[Cr]=!0,dr[Er]=dr[Ve]=dr[G]=dr[eo]=dr[fe]=dr[to]=dr[Kr]=dr[ro]=dr[tn]=dr[Ko]=dr[Kn]=dr[ln]=dr[lr]=dr[ni]=dr[xn]=!1;var ar={};ar[Er]=ar[Ve]=ar[G]=ar[fe]=ar[eo]=ar[to]=ar[_e]=ar[$e]=ar[sr]=ar[tt]=ar[ut]=ar[tn]=ar[Ko]=ar[Kn]=ar[ln]=ar[lr]=ar[ni]=ar[ii]=ar[He]=ar[mt]=ar[ht]=ar[Cr]=!0,ar[Kr]=ar[ro]=ar[xn]=!1;var mO={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},yO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},gO={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},wO={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},bO=parseFloat,vO=parseInt,x8=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,_O=typeof self=="object"&&self&&self.Object===Object&&self,hn=x8||_O||Function("return this")(),ib=typeof Fh=="object"&&Fh&&!Fh.nodeType&&Fh,Dc=ib&&typeof Sm=="object"&&Sm&&!Sm.nodeType&&Sm,E8=Dc&&Dc.exports===ib,ob=E8&&x8.process,oo=function(){try{var N=Dc&&Dc.require&&Dc.require("util").types;return N||ob&&ob.binding&&ob.binding("util")}catch{}}(),A8=oo&&oo.isArrayBuffer,S8=oo&&oo.isDate,P8=oo&&oo.isMap,D8=oo&&oo.isRegExp,C8=oo&&oo.isSet,k8=oo&&oo.isTypedArray;function _i(N,Z,q){switch(q.length){case 0:return N.call(Z);case 1:return N.call(Z,q[0]);case 2:return N.call(Z,q[0],q[1]);case 3:return N.call(Z,q[0],q[1],q[2])}return N.apply(Z,q)}function xO(N,Z,q,Ne){for(var gt=-1,zt=N==null?0:N.length;++gt<zt;){var rn=N[gt];Z(Ne,rn,q(rn),N)}return Ne}function so(N,Z){for(var q=-1,Ne=N==null?0:N.length;++q<Ne&&Z(N[q],q,N)!==!1;);return N}function EO(N,Z){for(var q=N==null?0:N.length;q--&&Z(N[q],q,N)!==!1;);return N}function I8(N,Z){for(var q=-1,Ne=N==null?0:N.length;++q<Ne;)if(!Z(N[q],q,N))return!1;return!0}function cu(N,Z){for(var q=-1,Ne=N==null?0:N.length,gt=0,zt=[];++q<Ne;){var rn=N[q];Z(rn,q,N)&&(zt[gt++]=rn)}return zt}function Nm(N,Z){var q=N==null?0:N.length;return!!q&&tl(N,Z,0)>-1}function sb(N,Z,q){for(var Ne=-1,gt=N==null?0:N.length;++Ne<gt;)if(q(Z,N[Ne]))return!0;return!1}function gr(N,Z){for(var q=-1,Ne=N==null?0:N.length,gt=Array(Ne);++q<Ne;)gt[q]=Z(N[q],q,N);return gt}function fu(N,Z){for(var q=-1,Ne=Z.length,gt=N.length;++q<Ne;)N[gt+q]=Z[q];return N}function ab(N,Z,q,Ne){var gt=-1,zt=N==null?0:N.length;for(Ne&&zt&&(q=N[++gt]);++gt<zt;)q=Z(q,N[gt],gt,N);return q}function AO(N,Z,q,Ne){var gt=N==null?0:N.length;for(Ne&&gt&&(q=N[--gt]);gt--;)q=Z(q,N[gt],gt,N);return q}function ub(N,Z){for(var q=-1,Ne=N==null?0:N.length;++q<Ne;)if(Z(N[q],q,N))return!0;return!1}var SO=cb("length");function PO(N){return N.split("")}function DO(N){return N.match(D)||[]}function T8(N,Z,q){var Ne;return q(N,function(gt,zt,rn){if(Z(gt,zt,rn))return Ne=zt,!1}),Ne}function Rm(N,Z,q,Ne){for(var gt=N.length,zt=q+(Ne?1:-1);Ne?zt--:++zt<gt;)if(Z(N[zt],zt,N))return zt;return-1}function tl(N,Z,q){return Z===Z?UO(N,Z,q):Rm(N,F8,q)}function CO(N,Z,q,Ne){for(var gt=q-1,zt=N.length;++gt<zt;)if(Ne(N[gt],Z))return gt;return-1}function F8(N){return N!==N}function B8(N,Z){var q=N==null?0:N.length;return q?lb(N,Z)/q:Ur}function cb(N){return function(Z){return Z==null?r:Z[N]}}function fb(N){return function(Z){return N==null?r:N[Z]}}function L8(N,Z,q,Ne,gt){return gt(N,function(zt,rn,tr){q=Ne?(Ne=!1,zt):Z(q,zt,rn,tr)}),q}function kO(N,Z){var q=N.length;for(N.sort(Z);q--;)N[q]=N[q].value;return N}function lb(N,Z){for(var q,Ne=-1,gt=N.length;++Ne<gt;){var zt=Z(N[Ne]);zt!==r&&(q=q===r?zt:q+zt)}return q}function hb(N,Z){for(var q=-1,Ne=Array(N);++q<N;)Ne[q]=Z(q);return Ne}function IO(N,Z){return gr(Z,function(q){return[q,N[q]]})}function O8(N){return N&&N.slice(0,U8(N)+1).replace(uu,"")}function xi(N){return function(Z){return N(Z)}}function db(N,Z){return gr(Z,function(q){return N[q]})}function Xh(N,Z){return N.has(Z)}function N8(N,Z){for(var q=-1,Ne=N.length;++q<Ne&&tl(Z,N[q],0)>-1;);return q}function R8(N,Z){for(var q=N.length;q--&&tl(Z,N[q],0)>-1;);return q}function TO(N,Z){for(var q=N.length,Ne=0;q--;)N[q]===Z&&++Ne;return Ne}var FO=fb(mO),BO=fb(yO);function LO(N){return"\\"+wO[N]}function OO(N,Z){return N==null?r:N[Z]}function rl(N){return lO.test(N)}function NO(N){return hO.test(N)}function RO(N){for(var Z,q=[];!(Z=N.next()).done;)q.push(Z.value);return q}function pb(N){var Z=-1,q=Array(N.size);return N.forEach(function(Ne,gt){q[++Z]=[gt,Ne]}),q}function M8(N,Z){return function(q){return N(Z(q))}}function lu(N,Z){for(var q=-1,Ne=N.length,gt=0,zt=[];++q<Ne;){var rn=N[q];(rn===Z||rn===l)&&(N[q]=l,zt[gt++]=q)}return zt}function Mm(N){var Z=-1,q=Array(N.size);return N.forEach(function(Ne){q[++Z]=Ne}),q}function MO(N){var Z=-1,q=Array(N.size);return N.forEach(function(Ne){q[++Z]=[Ne,Ne]}),q}function UO(N,Z,q){for(var Ne=q-1,gt=N.length;++Ne<gt;)if(N[Ne]===Z)return Ne;return-1}function KO(N,Z,q){for(var Ne=q+1;Ne--;)if(N[Ne]===Z)return Ne;return Ne}function nl(N){return rl(N)?zO(N):SO(N)}function Ho(N){return rl(N)?jO(N):PO(N)}function U8(N){for(var Z=N.length;Z--&&g.test(N.charAt(Z)););return Z}var $O=fb(gO);function zO(N){for(var Z=nb.lastIndex=0;nb.test(N);)++Z;return Z}function jO(N){return N.match(nb)||[]}function qO(N){return N.match(fO)||[]}var HO=function N(Z){Z=Z==null?hn:hu.defaults(hn.Object(),Z,hu.pick(hn,dO));var q=Z.Array,Ne=Z.Date,gt=Z.Error,zt=Z.Function,rn=Z.Math,tr=Z.Object,mb=Z.RegExp,WO=Z.String,ao=Z.TypeError,Um=q.prototype,VO=zt.prototype,il=tr.prototype,Km=Z["__core-js_shared__"],$m=VO.toString,Yt=il.hasOwnProperty,GO=0,K8=function(){var s=/[^.]+$/.exec(Km&&Km.keys&&Km.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),zm=il.toString,YO=$m.call(tr),JO=hn._,XO=mb("^"+$m.call(Yt).replace(Pc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jm=E8?Z.Buffer:r,du=Z.Symbol,qm=Z.Uint8Array,$8=jm?jm.allocUnsafe:r,Hm=M8(tr.getPrototypeOf,tr),z8=tr.create,j8=il.propertyIsEnumerable,Wm=Um.splice,q8=du?du.isConcatSpreadable:r,Qh=du?du.iterator:r,Cc=du?du.toStringTag:r,Vm=function(){try{var s=Bc(tr,"defineProperty");return s({},"",{}),s}catch{}}(),QO=Z.clearTimeout!==hn.clearTimeout&&Z.clearTimeout,ZO=Ne&&Ne.now!==hn.Date.now&&Ne.now,eN=Z.setTimeout!==hn.setTimeout&&Z.setTimeout,Gm=rn.ceil,Ym=rn.floor,yb=tr.getOwnPropertySymbols,tN=jm?jm.isBuffer:r,H8=Z.isFinite,rN=Um.join,nN=M8(tr.keys,tr),nn=rn.max,Bn=rn.min,iN=Ne.now,oN=Z.parseInt,W8=rn.random,sN=Um.reverse,gb=Bc(Z,"DataView"),Zh=Bc(Z,"Map"),wb=Bc(Z,"Promise"),ol=Bc(Z,"Set"),ed=Bc(Z,"WeakMap"),td=Bc(tr,"create"),Jm=ed&&new ed,sl={},aN=Lc(gb),uN=Lc(Zh),cN=Lc(wb),fN=Lc(ol),lN=Lc(ed),Xm=du?du.prototype:r,rd=Xm?Xm.valueOf:r,V8=Xm?Xm.toString:r;function A(s){if(kr(s)&&!vt(s)&&!(s instanceof Ft)){if(s instanceof uo)return s;if(Yt.call(s,"__wrapped__"))return GA(s)}return new uo(s)}var al=function(){function s(){}return function(u){if(!Sr(u))return{};if(z8)return z8(u);s.prototype=u;var f=new s;return s.prototype=r,f}}();function Qm(){}function uo(s,u){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=r}A.templateSettings={escape:vi,evaluate:io,interpolate:qo,variable:"",imports:{_:A}},A.prototype=Qm.prototype,A.prototype.constructor=A,uo.prototype=al(Qm.prototype),uo.prototype.constructor=uo;function Ft(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=en,this.__views__=[]}function hN(){var s=new Ft(this.__wrapped__);return s.__actions__=oi(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=oi(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=oi(this.__views__),s}function dN(){if(this.__filtered__){var s=new Ft(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function pN(){var s=this.__wrapped__.value(),u=this.__dir__,f=vt(s),p=u<0,v=f?s.length:0,P=P5(0,v,this.__views__),I=P.start,L=P.end,M=L-I,se=p?L:I-1,ae=this.__iteratees__,he=ae.length,Pe=0,Ge=Bn(M,this.__takeCount__);if(!f||!p&&v==M&&Ge==M)return gA(s,this.__actions__);var st=[];e:for(;M--&&Pe<Ge;){se+=u;for(var Et=-1,at=s[se];++Et<he;){var kt=ae[Et],Ot=kt.iteratee,Si=kt.type,jn=Ot(at);if(Si==qt)at=jn;else if(!jn){if(Si==Bt)continue e;break e}}st[Pe++]=at}return st}Ft.prototype=al(Qm.prototype),Ft.prototype.constructor=Ft;function kc(s){var u=-1,f=s==null?0:s.length;for(this.clear();++u<f;){var p=s[u];this.set(p[0],p[1])}}function mN(){this.__data__=td?td(null):{},this.size=0}function yN(s){var u=this.has(s)&&delete this.__data__[s];return this.size-=u?1:0,u}function gN(s){var u=this.__data__;if(td){var f=u[s];return f===a?r:f}return Yt.call(u,s)?u[s]:r}function wN(s){var u=this.__data__;return td?u[s]!==r:Yt.call(u,s)}function bN(s,u){var f=this.__data__;return this.size+=this.has(s)?0:1,f[s]=td&&u===r?a:u,this}kc.prototype.clear=mN,kc.prototype.delete=yN,kc.prototype.get=gN,kc.prototype.has=wN,kc.prototype.set=bN;function la(s){var u=-1,f=s==null?0:s.length;for(this.clear();++u<f;){var p=s[u];this.set(p[0],p[1])}}function vN(){this.__data__=[],this.size=0}function _N(s){var u=this.__data__,f=Zm(u,s);if(f<0)return!1;var p=u.length-1;return f==p?u.pop():Wm.call(u,f,1),--this.size,!0}function xN(s){var u=this.__data__,f=Zm(u,s);return f<0?r:u[f][1]}function EN(s){return Zm(this.__data__,s)>-1}function AN(s,u){var f=this.__data__,p=Zm(f,s);return p<0?(++this.size,f.push([s,u])):f[p][1]=u,this}la.prototype.clear=vN,la.prototype.delete=_N,la.prototype.get=xN,la.prototype.has=EN,la.prototype.set=AN;function ha(s){var u=-1,f=s==null?0:s.length;for(this.clear();++u<f;){var p=s[u];this.set(p[0],p[1])}}function SN(){this.size=0,this.__data__={hash:new kc,map:new(Zh||la),string:new kc}}function PN(s){var u=ly(this,s).delete(s);return this.size-=u?1:0,u}function DN(s){return ly(this,s).get(s)}function CN(s){return ly(this,s).has(s)}function kN(s,u){var f=ly(this,s),p=f.size;return f.set(s,u),this.size+=f.size==p?0:1,this}ha.prototype.clear=SN,ha.prototype.delete=PN,ha.prototype.get=DN,ha.prototype.has=CN,ha.prototype.set=kN;function Ic(s){var u=-1,f=s==null?0:s.length;for(this.__data__=new ha;++u<f;)this.add(s[u])}function IN(s){return this.__data__.set(s,a),this}function TN(s){return this.__data__.has(s)}Ic.prototype.add=Ic.prototype.push=IN,Ic.prototype.has=TN;function Wo(s){var u=this.__data__=new la(s);this.size=u.size}function FN(){this.__data__=new la,this.size=0}function BN(s){var u=this.__data__,f=u.delete(s);return this.size=u.size,f}function LN(s){return this.__data__.get(s)}function ON(s){return this.__data__.has(s)}function NN(s,u){var f=this.__data__;if(f instanceof la){var p=f.__data__;if(!Zh||p.length<t-1)return p.push([s,u]),this.size=++f.size,this;f=this.__data__=new ha(p)}return f.set(s,u),this.size=f.size,this}Wo.prototype.clear=FN,Wo.prototype.delete=BN,Wo.prototype.get=LN,Wo.prototype.has=ON,Wo.prototype.set=NN;function G8(s,u){var f=vt(s),p=!f&&Oc(s),v=!f&&!p&&wu(s),P=!f&&!p&&!v&&ll(s),I=f||p||v||P,L=I?hb(s.length,WO):[],M=L.length;for(var se in s)(u||Yt.call(s,se))&&!(I&&(se=="length"||v&&(se=="offset"||se=="parent")||P&&(se=="buffer"||se=="byteLength"||se=="byteOffset")||ya(se,M)))&&L.push(se);return L}function Y8(s){var u=s.length;return u?s[kb(0,u-1)]:r}function RN(s,u){return hy(oi(s),Tc(u,0,s.length))}function MN(s){return hy(oi(s))}function bb(s,u,f){(f!==r&&!Vo(s[u],f)||f===r&&!(u in s))&&da(s,u,f)}function nd(s,u,f){var p=s[u];(!(Yt.call(s,u)&&Vo(p,f))||f===r&&!(u in s))&&da(s,u,f)}function Zm(s,u){for(var f=s.length;f--;)if(Vo(s[f][0],u))return f;return-1}function UN(s,u,f,p){return pu(s,function(v,P,I){u(p,v,f(v),I)}),p}function J8(s,u){return s&&Is(u,dn(u),s)}function KN(s,u){return s&&Is(u,ai(u),s)}function da(s,u,f){u=="__proto__"&&Vm?Vm(s,u,{configurable:!0,enumerable:!0,value:f,writable:!0}):s[u]=f}function vb(s,u){for(var f=-1,p=u.length,v=q(p),P=s==null;++f<p;)v[f]=P?r:ev(s,u[f]);return v}function Tc(s,u,f){return s===s&&(f!==r&&(s=s<=f?s:f),u!==r&&(s=s>=u?s:u)),s}function co(s,u,f,p,v,P){var I,L=u&h,M=u&m,se=u&y;if(f&&(I=v?f(s,p,v,P):f(s)),I!==r)return I;if(!Sr(s))return s;var ae=vt(s);if(ae){if(I=C5(s),!L)return oi(s,I)}else{var he=Ln(s),Pe=he==ro||he==Tn;if(wu(s))return vA(s,L);if(he==Kn||he==Er||Pe&&!v){if(I=M||Pe?{}:UA(s),!L)return M?g5(s,KN(I,s)):y5(s,J8(I,s))}else{if(!ar[he])return v?s:{};I=k5(s,he,L)}}P||(P=new Wo);var Ge=P.get(s);if(Ge)return Ge;P.set(s,I),pS(s)?s.forEach(function(at){I.add(co(at,u,f,at,s,P))}):hS(s)&&s.forEach(function(at,kt){I.set(kt,co(at,u,f,kt,s,P))});var st=se?M?Kb:Ub:M?ai:dn,Et=ae?r:st(s);return so(Et||s,function(at,kt){Et&&(kt=at,at=s[kt]),nd(I,kt,co(at,u,f,kt,s,P))}),I}function $N(s){var u=dn(s);return function(f){return X8(f,s,u)}}function X8(s,u,f){var p=f.length;if(s==null)return!p;for(s=tr(s);p--;){var v=f[p],P=u[v],I=s[v];if(I===r&&!(v in s)||!P(I))return!1}return!0}function Q8(s,u,f){if(typeof s!="function")throw new ao(i);return fd(function(){s.apply(r,f)},u)}function id(s,u,f,p){var v=-1,P=Nm,I=!0,L=s.length,M=[],se=u.length;if(!L)return M;f&&(u=gr(u,xi(f))),p?(P=sb,I=!1):u.length>=t&&(P=Xh,I=!1,u=new Ic(u));e:for(;++v<L;){var ae=s[v],he=f==null?ae:f(ae);if(ae=p||ae!==0?ae:0,I&&he===he){for(var Pe=se;Pe--;)if(u[Pe]===he)continue e;M.push(ae)}else P(u,he,p)||M.push(ae)}return M}var pu=SA(ks),Z8=SA(xb,!0);function zN(s,u){var f=!0;return pu(s,function(p,v,P){return f=!!u(p,v,P),f}),f}function ey(s,u,f){for(var p=-1,v=s.length;++p<v;){var P=s[p],I=u(P);if(I!=null&&(L===r?I===I&&!Ai(I):f(I,L)))var L=I,M=P}return M}function jN(s,u,f,p){var v=s.length;for(f=xt(f),f<0&&(f=-f>v?0:v+f),p=p===r||p>v?v:xt(p),p<0&&(p+=v),p=f>p?0:yS(p);f<p;)s[f++]=u;return s}function eA(s,u){var f=[];return pu(s,function(p,v,P){u(p,v,P)&&f.push(p)}),f}function An(s,u,f,p,v){var P=-1,I=s.length;for(f||(f=T5),v||(v=[]);++P<I;){var L=s[P];u>0&&f(L)?u>1?An(L,u-1,f,p,v):fu(v,L):p||(v[v.length]=L)}return v}var _b=PA(),tA=PA(!0);function ks(s,u){return s&&_b(s,u,dn)}function xb(s,u){return s&&tA(s,u,dn)}function ty(s,u){return cu(u,function(f){return ga(s[f])})}function Fc(s,u){u=yu(u,s);for(var f=0,p=u.length;s!=null&&f<p;)s=s[Ts(u[f++])];return f&&f==p?s:r}function rA(s,u,f){var p=u(s);return vt(s)?p:fu(p,f(s))}function $n(s){return s==null?s===r?$o:su:Cc&&Cc in tr(s)?S5(s):M5(s)}function Eb(s,u){return s>u}function qN(s,u){return s!=null&&Yt.call(s,u)}function HN(s,u){return s!=null&&u in tr(s)}function WN(s,u,f){return s>=Bn(u,f)&&s<nn(u,f)}function Ab(s,u,f){for(var p=f?sb:Nm,v=s[0].length,P=s.length,I=P,L=q(P),M=1/0,se=[];I--;){var ae=s[I];I&&u&&(ae=gr(ae,xi(u))),M=Bn(ae.length,M),L[I]=!f&&(u||v>=120&&ae.length>=120)?new Ic(I&&ae):r}ae=s[0];var he=-1,Pe=L[0];e:for(;++he<v&&se.length<M;){var Ge=ae[he],st=u?u(Ge):Ge;if(Ge=f||Ge!==0?Ge:0,!(Pe?Xh(Pe,st):p(se,st,f))){for(I=P;--I;){var Et=L[I];if(!(Et?Xh(Et,st):p(s[I],st,f)))continue e}Pe&&Pe.push(st),se.push(Ge)}}return se}function VN(s,u,f,p){return ks(s,function(v,P,I){u(p,f(v),P,I)}),p}function od(s,u,f){u=yu(u,s),s=jA(s,u);var p=s==null?s:s[Ts(lo(u))];return p==null?r:_i(p,s,f)}function nA(s){return kr(s)&&$n(s)==Er}function GN(s){return kr(s)&&$n(s)==G}function YN(s){return kr(s)&&$n(s)==to}function sd(s,u,f,p,v){return s===u?!0:s==null||u==null||!kr(s)&&!kr(u)?s!==s&&u!==u:JN(s,u,f,p,sd,v)}function JN(s,u,f,p,v,P){var I=vt(s),L=vt(u),M=I?Ve:Ln(s),se=L?Ve:Ln(u);M=M==Er?Kn:M,se=se==Er?Kn:se;var ae=M==Kn,he=se==Kn,Pe=M==se;if(Pe&&wu(s)){if(!wu(u))return!1;I=!0,ae=!1}if(Pe&&!ae)return P||(P=new Wo),I||ll(s)?NA(s,u,f,p,v,P):E5(s,u,M,f,p,v,P);if(!(f&E)){var Ge=ae&&Yt.call(s,"__wrapped__"),st=he&&Yt.call(u,"__wrapped__");if(Ge||st){var Et=Ge?s.value():s,at=st?u.value():u;return P||(P=new Wo),v(Et,at,f,p,P)}}return Pe?(P||(P=new Wo),A5(s,u,f,p,v,P)):!1}function XN(s){return kr(s)&&Ln(s)==tn}function Sb(s,u,f,p){var v=f.length,P=v,I=!p;if(s==null)return!P;for(s=tr(s);v--;){var L=f[v];if(I&&L[2]?L[1]!==s[L[0]]:!(L[0]in s))return!1}for(;++v<P;){L=f[v];var M=L[0],se=s[M],ae=L[1];if(I&&L[2]){if(se===r&&!(M in s))return!1}else{var he=new Wo;if(p)var Pe=p(se,ae,M,s,u,he);if(!(Pe===r?sd(ae,se,E|k,p,he):Pe))return!1}}return!0}function iA(s){if(!Sr(s)||B5(s))return!1;var u=ga(s)?XO:Ct;return u.test(Lc(s))}function QN(s){return kr(s)&&$n(s)==ln}function ZN(s){return kr(s)&&Ln(s)==lr}function e5(s){return kr(s)&&wy(s.length)&&!!dr[$n(s)]}function oA(s){return typeof s=="function"?s:s==null?ui:typeof s=="object"?vt(s)?uA(s[0],s[1]):aA(s):DS(s)}function Pb(s){if(!cd(s))return nN(s);var u=[];for(var f in tr(s))Yt.call(s,f)&&f!="constructor"&&u.push(f);return u}function t5(s){if(!Sr(s))return R5(s);var u=cd(s),f=[];for(var p in s)p=="constructor"&&(u||!Yt.call(s,p))||f.push(p);return f}function Db(s,u){return s<u}function sA(s,u){var f=-1,p=si(s)?q(s.length):[];return pu(s,function(v,P,I){p[++f]=u(v,P,I)}),p}function aA(s){var u=zb(s);return u.length==1&&u[0][2]?$A(u[0][0],u[0][1]):function(f){return f===s||Sb(f,s,u)}}function uA(s,u){return qb(s)&&KA(u)?$A(Ts(s),u):function(f){var p=ev(f,s);return p===r&&p===u?tv(f,s):sd(u,p,E|k)}}function ry(s,u,f,p,v){s!==u&&_b(u,function(P,I){if(v||(v=new Wo),Sr(P))r5(s,u,I,f,ry,p,v);else{var L=p?p(Wb(s,I),P,I+"",s,u,v):r;L===r&&(L=P),bb(s,I,L)}},ai)}function r5(s,u,f,p,v,P,I){var L=Wb(s,f),M=Wb(u,f),se=I.get(M);if(se){bb(s,f,se);return}var ae=P?P(L,M,f+"",s,u,I):r,he=ae===r;if(he){var Pe=vt(M),Ge=!Pe&&wu(M),st=!Pe&&!Ge&&ll(M);ae=M,Pe||Ge||st?vt(L)?ae=L:zr(L)?ae=oi(L):Ge?(he=!1,ae=vA(M,!0)):st?(he=!1,ae=_A(M,!0)):ae=[]:ld(M)||Oc(M)?(ae=L,Oc(L)?ae=gS(L):(!Sr(L)||ga(L))&&(ae=UA(M))):he=!1}he&&(I.set(M,ae),v(ae,M,p,P,I),I.delete(M)),bb(s,f,ae)}function cA(s,u){var f=s.length;if(!!f)return u+=u<0?f:0,ya(u,f)?s[u]:r}function fA(s,u,f){u.length?u=gr(u,function(P){return vt(P)?function(I){return Fc(I,P.length===1?P[0]:P)}:P}):u=[ui];var p=-1;u=gr(u,xi(it()));var v=sA(s,function(P,I,L){var M=gr(u,function(se){return se(P)});return{criteria:M,index:++p,value:P}});return kO(v,function(P,I){return m5(P,I,f)})}function n5(s,u){return lA(s,u,function(f,p){return tv(s,p)})}function lA(s,u,f){for(var p=-1,v=u.length,P={};++p<v;){var I=u[p],L=Fc(s,I);f(L,I)&&ad(P,yu(I,s),L)}return P}function i5(s){return function(u){return Fc(u,s)}}function Cb(s,u,f,p){var v=p?CO:tl,P=-1,I=u.length,L=s;for(s===u&&(u=oi(u)),f&&(L=gr(s,xi(f)));++P<I;)for(var M=0,se=u[P],ae=f?f(se):se;(M=v(L,ae,M,p))>-1;)L!==s&&Wm.call(L,M,1),Wm.call(s,M,1);return s}function hA(s,u){for(var f=s?u.length:0,p=f-1;f--;){var v=u[f];if(f==p||v!==P){var P=v;ya(v)?Wm.call(s,v,1):Fb(s,v)}}return s}function kb(s,u){return s+Ym(W8()*(u-s+1))}function o5(s,u,f,p){for(var v=-1,P=nn(Gm((u-s)/(f||1)),0),I=q(P);P--;)I[p?P:++v]=s,s+=f;return I}function Ib(s,u){var f="";if(!s||u<1||u>Wr)return f;do u%2&&(f+=s),u=Ym(u/2),u&&(s+=s);while(u);return f}function Pt(s,u){return Vb(zA(s,u,ui),s+"")}function s5(s){return Y8(hl(s))}function a5(s,u){var f=hl(s);return hy(f,Tc(u,0,f.length))}function ad(s,u,f,p){if(!Sr(s))return s;u=yu(u,s);for(var v=-1,P=u.length,I=P-1,L=s;L!=null&&++v<P;){var M=Ts(u[v]),se=f;if(M==="__proto__"||M==="constructor"||M==="prototype")return s;if(v!=I){var ae=L[M];se=p?p(ae,M,L):r,se===r&&(se=Sr(ae)?ae:ya(u[v+1])?[]:{})}nd(L,M,se),L=L[M]}return s}var dA=Jm?function(s,u){return Jm.set(s,u),s}:ui,u5=Vm?function(s,u){return Vm(s,"toString",{configurable:!0,enumerable:!1,value:nv(u),writable:!0})}:ui;function c5(s){return hy(hl(s))}function fo(s,u,f){var p=-1,v=s.length;u<0&&(u=-u>v?0:v+u),f=f>v?v:f,f<0&&(f+=v),v=u>f?0:f-u>>>0,u>>>=0;for(var P=q(v);++p<v;)P[p]=s[p+u];return P}function f5(s,u){var f;return pu(s,function(p,v,P){return f=u(p,v,P),!f}),!!f}function ny(s,u,f){var p=0,v=s==null?p:s.length;if(typeof u=="number"&&u===u&&v<=er){for(;p<v;){var P=p+v>>>1,I=s[P];I!==null&&!Ai(I)&&(f?I<=u:I<u)?p=P+1:v=P}return v}return Tb(s,u,ui,f)}function Tb(s,u,f,p){var v=0,P=s==null?0:s.length;if(P===0)return 0;u=f(u);for(var I=u!==u,L=u===null,M=Ai(u),se=u===r;v<P;){var ae=Ym((v+P)/2),he=f(s[ae]),Pe=he!==r,Ge=he===null,st=he===he,Et=Ai(he);if(I)var at=p||st;else se?at=st&&(p||Pe):L?at=st&&Pe&&(p||!Ge):M?at=st&&Pe&&!Ge&&(p||!Et):Ge||Et?at=!1:at=p?he<=u:he<u;at?v=ae+1:P=ae}return Bn(P,ua)}function pA(s,u){for(var f=-1,p=s.length,v=0,P=[];++f<p;){var I=s[f],L=u?u(I):I;if(!f||!Vo(L,M)){var M=L;P[v++]=I===0?0:I}}return P}function mA(s){return typeof s=="number"?s:Ai(s)?Ur:+s}function Ei(s){if(typeof s=="string")return s;if(vt(s))return gr(s,Ei)+"";if(Ai(s))return V8?V8.call(s):"";var u=s+"";return u=="0"&&1/s==-Ut?"-0":u}function mu(s,u,f){var p=-1,v=Nm,P=s.length,I=!0,L=[],M=L;if(f)I=!1,v=sb;else if(P>=t){var se=u?null:_5(s);if(se)return Mm(se);I=!1,v=Xh,M=new Ic}else M=u?[]:L;e:for(;++p<P;){var ae=s[p],he=u?u(ae):ae;if(ae=f||ae!==0?ae:0,I&&he===he){for(var Pe=M.length;Pe--;)if(M[Pe]===he)continue e;u&&M.push(he),L.push(ae)}else v(M,he,f)||(M!==L&&M.push(he),L.push(ae))}return L}function Fb(s,u){return u=yu(u,s),s=jA(s,u),s==null||delete s[Ts(lo(u))]}function yA(s,u,f,p){return ad(s,u,f(Fc(s,u)),p)}function iy(s,u,f,p){for(var v=s.length,P=p?v:-1;(p?P--:++P<v)&&u(s[P],P,s););return f?fo(s,p?0:P,p?P+1:v):fo(s,p?P+1:0,p?v:P)}function gA(s,u){var f=s;return f instanceof Ft&&(f=f.value()),ab(u,function(p,v){return v.func.apply(v.thisArg,fu([p],v.args))},f)}function Bb(s,u,f){var p=s.length;if(p<2)return p?mu(s[0]):[];for(var v=-1,P=q(p);++v<p;)for(var I=s[v],L=-1;++L<p;)L!=v&&(P[v]=id(P[v]||I,s[L],u,f));return mu(An(P,1),u,f)}function wA(s,u,f){for(var p=-1,v=s.length,P=u.length,I={};++p<v;){var L=p<P?u[p]:r;f(I,s[p],L)}return I}function Lb(s){return zr(s)?s:[]}function Ob(s){return typeof s=="function"?s:ui}function yu(s,u){return vt(s)?s:qb(s,u)?[s]:VA(Wt(s))}var l5=Pt;function gu(s,u,f){var p=s.length;return f=f===r?p:f,!u&&f>=p?s:fo(s,u,f)}var bA=QO||function(s){return hn.clearTimeout(s)};function vA(s,u){if(u)return s.slice();var f=s.length,p=$8?$8(f):new s.constructor(f);return s.copy(p),p}function Nb(s){var u=new s.constructor(s.byteLength);return new qm(u).set(new qm(s)),u}function h5(s,u){var f=u?Nb(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.byteLength)}function d5(s){var u=new s.constructor(s.source,ye.exec(s));return u.lastIndex=s.lastIndex,u}function p5(s){return rd?tr(rd.call(s)):{}}function _A(s,u){var f=u?Nb(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.length)}function xA(s,u){if(s!==u){var f=s!==r,p=s===null,v=s===s,P=Ai(s),I=u!==r,L=u===null,M=u===u,se=Ai(u);if(!L&&!se&&!P&&s>u||P&&I&&M&&!L&&!se||p&&I&&M||!f&&M||!v)return 1;if(!p&&!P&&!se&&s<u||se&&f&&v&&!p&&!P||L&&f&&v||!I&&v||!M)return-1}return 0}function m5(s,u,f){for(var p=-1,v=s.criteria,P=u.criteria,I=v.length,L=f.length;++p<I;){var M=xA(v[p],P[p]);if(M){if(p>=L)return M;var se=f[p];return M*(se=="desc"?-1:1)}}return s.index-u.index}function EA(s,u,f,p){for(var v=-1,P=s.length,I=f.length,L=-1,M=u.length,se=nn(P-I,0),ae=q(M+se),he=!p;++L<M;)ae[L]=u[L];for(;++v<I;)(he||v<P)&&(ae[f[v]]=s[v]);for(;se--;)ae[L++]=s[v++];return ae}function AA(s,u,f,p){for(var v=-1,P=s.length,I=-1,L=f.length,M=-1,se=u.length,ae=nn(P-L,0),he=q(ae+se),Pe=!p;++v<ae;)he[v]=s[v];for(var Ge=v;++M<se;)he[Ge+M]=u[M];for(;++I<L;)(Pe||v<P)&&(he[Ge+f[I]]=s[v++]);return he}function oi(s,u){var f=-1,p=s.length;for(u||(u=q(p));++f<p;)u[f]=s[f];return u}function Is(s,u,f,p){var v=!f;f||(f={});for(var P=-1,I=u.length;++P<I;){var L=u[P],M=p?p(f[L],s[L],L,f,s):r;M===r&&(M=s[L]),v?da(f,L,M):nd(f,L,M)}return f}function y5(s,u){return Is(s,jb(s),u)}function g5(s,u){return Is(s,RA(s),u)}function oy(s,u){return function(f,p){var v=vt(f)?xO:UN,P=u?u():{};return v(f,s,it(p,2),P)}}function ul(s){return Pt(function(u,f){var p=-1,v=f.length,P=v>1?f[v-1]:r,I=v>2?f[2]:r;for(P=s.length>3&&typeof P=="function"?(v--,P):r,I&&zn(f[0],f[1],I)&&(P=v<3?r:P,v=1),u=tr(u);++p<v;){var L=f[p];L&&s(u,L,p,P)}return u})}function SA(s,u){return function(f,p){if(f==null)return f;if(!si(f))return s(f,p);for(var v=f.length,P=u?v:-1,I=tr(f);(u?P--:++P<v)&&p(I[P],P,I)!==!1;);return f}}function PA(s){return function(u,f,p){for(var v=-1,P=tr(u),I=p(u),L=I.length;L--;){var M=I[s?L:++v];if(f(P[M],M,P)===!1)break}return u}}function w5(s,u,f){var p=u&T,v=ud(s);function P(){var I=this&&this!==hn&&this instanceof P?v:s;return I.apply(p?f:this,arguments)}return P}function DA(s){return function(u){u=Wt(u);var f=rl(u)?Ho(u):r,p=f?f[0]:u.charAt(0),v=f?gu(f,1).join(""):u.slice(1);return p[s]()+v}}function cl(s){return function(u){return ab(SS(AS(u).replace(uO,"")),s,"")}}function ud(s){return function(){var u=arguments;switch(u.length){case 0:return new s;case 1:return new s(u[0]);case 2:return new s(u[0],u[1]);case 3:return new s(u[0],u[1],u[2]);case 4:return new s(u[0],u[1],u[2],u[3]);case 5:return new s(u[0],u[1],u[2],u[3],u[4]);case 6:return new s(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new s(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var f=al(s.prototype),p=s.apply(f,u);return Sr(p)?p:f}}function b5(s,u,f){var p=ud(s);function v(){for(var P=arguments.length,I=q(P),L=P,M=fl(v);L--;)I[L]=arguments[L];var se=P<3&&I[0]!==M&&I[P-1]!==M?[]:lu(I,M);if(P-=se.length,P<f)return FA(s,u,sy,v.placeholder,r,I,se,r,r,f-P);var ae=this&&this!==hn&&this instanceof v?p:s;return _i(ae,this,I)}return v}function CA(s){return function(u,f,p){var v=tr(u);if(!si(u)){var P=it(f,3);u=dn(u),f=function(L){return P(v[L],L,v)}}var I=s(u,f,p);return I>-1?v[P?u[I]:I]:r}}function kA(s){return ma(function(u){var f=u.length,p=f,v=uo.prototype.thru;for(s&&u.reverse();p--;){var P=u[p];if(typeof P!="function")throw new ao(i);if(v&&!I&&fy(P)=="wrapper")var I=new uo([],!0)}for(p=I?p:f;++p<f;){P=u[p];var L=fy(P),M=L=="wrapper"?$b(P):r;M&&Hb(M[0])&&M[1]==(be|ne|X|W)&&!M[4].length&&M[9]==1?I=I[fy(M[0])].apply(I,M[3]):I=P.length==1&&Hb(P)?I[L]():I.thru(P)}return function(){var se=arguments,ae=se[0];if(I&&se.length==1&&vt(ae))return I.plant(ae).value();for(var he=0,Pe=f?u[he].apply(this,se):ae;++he<f;)Pe=u[he].call(this,Pe);return Pe}})}function sy(s,u,f,p,v,P,I,L,M,se){var ae=u&be,he=u&T,Pe=u&O,Ge=u&(ne|ve),st=u&de,Et=Pe?r:ud(s);function at(){for(var kt=arguments.length,Ot=q(kt),Si=kt;Si--;)Ot[Si]=arguments[Si];if(Ge)var jn=fl(at),Pi=TO(Ot,jn);if(p&&(Ot=EA(Ot,p,v,Ge)),P&&(Ot=AA(Ot,P,I,Ge)),kt-=Pi,Ge&&kt<se){var jr=lu(Ot,jn);return FA(s,u,sy,at.placeholder,f,Ot,jr,L,M,se-kt)}var Go=he?f:this,ba=Pe?Go[s]:s;return kt=Ot.length,L?Ot=U5(Ot,L):st&&kt>1&&Ot.reverse(),ae&&M<kt&&(Ot.length=M),this&&this!==hn&&this instanceof at&&(ba=Et||ud(ba)),ba.apply(Go,Ot)}return at}function IA(s,u){return function(f,p){return VN(f,s,u(p),{})}}function ay(s,u){return function(f,p){var v;if(f===r&&p===r)return u;if(f!==r&&(v=f),p!==r){if(v===r)return p;typeof f=="string"||typeof p=="string"?(f=Ei(f),p=Ei(p)):(f=mA(f),p=mA(p)),v=s(f,p)}return v}}function Rb(s){return ma(function(u){return u=gr(u,xi(it())),Pt(function(f){var p=this;return s(u,function(v){return _i(v,p,f)})})})}function uy(s,u){u=u===r?" ":Ei(u);var f=u.length;if(f<2)return f?Ib(u,s):u;var p=Ib(u,Gm(s/nl(u)));return rl(u)?gu(Ho(p),0,s).join(""):p.slice(0,s)}function v5(s,u,f,p){var v=u&T,P=ud(s);function I(){for(var L=-1,M=arguments.length,se=-1,ae=p.length,he=q(ae+M),Pe=this&&this!==hn&&this instanceof I?P:s;++se<ae;)he[se]=p[se];for(;M--;)he[se++]=arguments[++L];return _i(Pe,v?f:this,he)}return I}function TA(s){return function(u,f,p){return p&&typeof p!="number"&&zn(u,f,p)&&(f=p=r),u=wa(u),f===r?(f=u,u=0):f=wa(f),p=p===r?u<f?1:-1:wa(p),o5(u,f,p,s)}}function cy(s){return function(u,f){return typeof u=="string"&&typeof f=="string"||(u=ho(u),f=ho(f)),s(u,f)}}function FA(s,u,f,p,v,P,I,L,M,se){var ae=u&ne,he=ae?I:r,Pe=ae?r:I,Ge=ae?P:r,st=ae?r:P;u|=ae?X:me,u&=~(ae?me:X),u&ue||(u&=~(T|O));var Et=[s,u,v,Ge,he,st,Pe,L,M,se],at=f.apply(r,Et);return Hb(s)&&qA(at,Et),at.placeholder=p,HA(at,s,u)}function Mb(s){var u=rn[s];return function(f,p){if(f=ho(f),p=p==null?0:Bn(xt(p),292),p&&H8(f)){var v=(Wt(f)+"e").split("e"),P=u(v[0]+"e"+(+v[1]+p));return v=(Wt(P)+"e").split("e"),+(v[0]+"e"+(+v[1]-p))}return u(f)}}var _5=ol&&1/Mm(new ol([,-0]))[1]==Ut?function(s){return new ol(s)}:sv;function BA(s){return function(u){var f=Ln(u);return f==tn?pb(u):f==lr?MO(u):IO(u,s(u))}}function pa(s,u,f,p,v,P,I,L){var M=u&O;if(!M&&typeof s!="function")throw new ao(i);var se=p?p.length:0;if(se||(u&=~(X|me),p=v=r),I=I===r?I:nn(xt(I),0),L=L===r?L:xt(L),se-=v?v.length:0,u&me){var ae=p,he=v;p=v=r}var Pe=M?r:$b(s),Ge=[s,u,f,p,v,ae,he,P,I,L];if(Pe&&N5(Ge,Pe),s=Ge[0],u=Ge[1],f=Ge[2],p=Ge[3],v=Ge[4],L=Ge[9]=Ge[9]===r?M?0:s.length:nn(Ge[9]-se,0),!L&&u&(ne|ve)&&(u&=~(ne|ve)),!u||u==T)var st=w5(s,u,f);else u==ne||u==ve?st=b5(s,u,L):(u==X||u==(T|X))&&!v.length?st=v5(s,u,f,p):st=sy.apply(r,Ge);var Et=Pe?dA:qA;return HA(Et(st,Ge),s,u)}function LA(s,u,f,p){return s===r||Vo(s,il[f])&&!Yt.call(p,f)?u:s}function OA(s,u,f,p,v,P){return Sr(s)&&Sr(u)&&(P.set(u,s),ry(s,u,r,OA,P),P.delete(u)),s}function x5(s){return ld(s)?r:s}function NA(s,u,f,p,v,P){var I=f&E,L=s.length,M=u.length;if(L!=M&&!(I&&M>L))return!1;var se=P.get(s),ae=P.get(u);if(se&&ae)return se==u&&ae==s;var he=-1,Pe=!0,Ge=f&k?new Ic:r;for(P.set(s,u),P.set(u,s);++he<L;){var st=s[he],Et=u[he];if(p)var at=I?p(Et,st,he,u,s,P):p(st,Et,he,s,u,P);if(at!==r){if(at)continue;Pe=!1;break}if(Ge){if(!ub(u,function(kt,Ot){if(!Xh(Ge,Ot)&&(st===kt||v(st,kt,f,p,P)))return Ge.push(Ot)})){Pe=!1;break}}else if(!(st===Et||v(st,Et,f,p,P))){Pe=!1;break}}return P.delete(s),P.delete(u),Pe}function E5(s,u,f,p,v,P,I){switch(f){case fe:if(s.byteLength!=u.byteLength||s.byteOffset!=u.byteOffset)return!1;s=s.buffer,u=u.buffer;case G:return!(s.byteLength!=u.byteLength||!P(new qm(s),new qm(u)));case eo:case to:case Ko:return Vo(+s,+u);case Kr:return s.name==u.name&&s.message==u.message;case ln:case ni:return s==u+"";case tn:var L=pb;case lr:var M=p&E;if(L||(L=Mm),s.size!=u.size&&!M)return!1;var se=I.get(s);if(se)return se==u;p|=k,I.set(s,u);var ae=NA(L(s),L(u),p,v,P,I);return I.delete(s),ae;case ii:if(rd)return rd.call(s)==rd.call(u)}return!1}function A5(s,u,f,p,v,P){var I=f&E,L=Ub(s),M=L.length,se=Ub(u),ae=se.length;if(M!=ae&&!I)return!1;for(var he=M;he--;){var Pe=L[he];if(!(I?Pe in u:Yt.call(u,Pe)))return!1}var Ge=P.get(s),st=P.get(u);if(Ge&&st)return Ge==u&&st==s;var Et=!0;P.set(s,u),P.set(u,s);for(var at=I;++he<M;){Pe=L[he];var kt=s[Pe],Ot=u[Pe];if(p)var Si=I?p(Ot,kt,Pe,u,s,P):p(kt,Ot,Pe,s,u,P);if(!(Si===r?kt===Ot||v(kt,Ot,f,p,P):Si)){Et=!1;break}at||(at=Pe=="constructor")}if(Et&&!at){var jn=s.constructor,Pi=u.constructor;jn!=Pi&&"constructor"in s&&"constructor"in u&&!(typeof jn=="function"&&jn instanceof jn&&typeof Pi=="function"&&Pi instanceof Pi)&&(Et=!1)}return P.delete(s),P.delete(u),Et}function ma(s){return Vb(zA(s,r,XA),s+"")}function Ub(s){return rA(s,dn,jb)}function Kb(s){return rA(s,ai,RA)}var $b=Jm?function(s){return Jm.get(s)}:sv;function fy(s){for(var u=s.name+"",f=sl[u],p=Yt.call(sl,u)?f.length:0;p--;){var v=f[p],P=v.func;if(P==null||P==s)return v.name}return u}function fl(s){var u=Yt.call(A,"placeholder")?A:s;return u.placeholder}function it(){var s=A.iteratee||iv;return s=s===iv?oA:s,arguments.length?s(arguments[0],arguments[1]):s}function ly(s,u){var f=s.__data__;return F5(u)?f[typeof u=="string"?"string":"hash"]:f.map}function zb(s){for(var u=dn(s),f=u.length;f--;){var p=u[f],v=s[p];u[f]=[p,v,KA(v)]}return u}function Bc(s,u){var f=OO(s,u);return iA(f)?f:r}function S5(s){var u=Yt.call(s,Cc),f=s[Cc];try{s[Cc]=r;var p=!0}catch{}var v=zm.call(s);return p&&(u?s[Cc]=f:delete s[Cc]),v}var jb=yb?function(s){return s==null?[]:(s=tr(s),cu(yb(s),function(u){return j8.call(s,u)}))}:av,RA=yb?function(s){for(var u=[];s;)fu(u,jb(s)),s=Hm(s);return u}:av,Ln=$n;(gb&&Ln(new gb(new ArrayBuffer(1)))!=fe||Zh&&Ln(new Zh)!=tn||wb&&Ln(wb.resolve())!=Fn||ol&&Ln(new ol)!=lr||ed&&Ln(new ed)!=xn)&&(Ln=function(s){var u=$n(s),f=u==Kn?s.constructor:r,p=f?Lc(f):"";if(p)switch(p){case aN:return fe;case uN:return tn;case cN:return Fn;case fN:return lr;case lN:return xn}return u});function P5(s,u,f){for(var p=-1,v=f.length;++p<v;){var P=f[p],I=P.size;switch(P.type){case"drop":s+=I;break;case"dropRight":u-=I;break;case"take":u=Bn(u,s+I);break;case"takeRight":s=nn(s,u-I);break}}return{start:s,end:u}}function D5(s){var u=s.match(_);return u?u[1].split(d):[]}function MA(s,u,f){u=yu(u,s);for(var p=-1,v=u.length,P=!1;++p<v;){var I=Ts(u[p]);if(!(P=s!=null&&f(s,I)))break;s=s[I]}return P||++p!=v?P:(v=s==null?0:s.length,!!v&&wy(v)&&ya(I,v)&&(vt(s)||Oc(s)))}function C5(s){var u=s.length,f=new s.constructor(u);return u&&typeof s[0]=="string"&&Yt.call(s,"index")&&(f.index=s.index,f.input=s.input),f}function UA(s){return typeof s.constructor=="function"&&!cd(s)?al(Hm(s)):{}}function k5(s,u,f){var p=s.constructor;switch(u){case G:return Nb(s);case eo:case to:return new p(+s);case fe:return h5(s,f);case _e:case $e:case sr:case tt:case ut:case He:case mt:case ht:case Cr:return _A(s,f);case tn:return new p;case Ko:case ni:return new p(s);case ln:return d5(s);case lr:return new p;case ii:return p5(s)}}function I5(s,u){var f=u.length;if(!f)return s;var p=f-1;return u[p]=(f>1?"& ":"")+u[p],u=u.join(f>2?", ":" "),s.replace(x,`{
/* [wrapped with `+u+`] */
`)}function T5(s){return vt(s)||Oc(s)||!!(q8&&s&&s[q8])}function ya(s,u){var f=typeof s;return u=u??Wr,!!u&&(f=="number"||f!="symbol"&&rt.test(s))&&s>-1&&s%1==0&&s<u}function zn(s,u,f){if(!Sr(f))return!1;var p=typeof u;return(p=="number"?si(f)&&ya(u,f.length):p=="string"&&u in f)?Vo(f[u],s):!1}function qb(s,u){if(vt(s))return!1;var f=typeof s;return f=="number"||f=="symbol"||f=="boolean"||s==null||Ai(s)?!0:Sc.test(s)||!Ac.test(s)||u!=null&&s in tr(u)}function F5(s){var u=typeof s;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?s!=="__proto__":s===null}function Hb(s){var u=fy(s),f=A[u];if(typeof f!="function"||!(u in Ft.prototype))return!1;if(s===f)return!0;var p=$b(f);return!!p&&s===p[0]}function B5(s){return!!K8&&K8 in s}var L5=Km?ga:uv;function cd(s){var u=s&&s.constructor,f=typeof u=="function"&&u.prototype||il;return s===f}function KA(s){return s===s&&!Sr(s)}function $A(s,u){return function(f){return f==null?!1:f[s]===u&&(u!==r||s in tr(f))}}function O5(s){var u=yy(s,function(p){return f.size===c&&f.clear(),p}),f=u.cache;return u}function N5(s,u){var f=s[1],p=u[1],v=f|p,P=v<(T|O|be),I=p==be&&f==ne||p==be&&f==W&&s[7].length<=u[8]||p==(be|W)&&u[7].length<=u[8]&&f==ne;if(!(P||I))return s;p&T&&(s[2]=u[2],v|=f&T?0:ue);var L=u[3];if(L){var M=s[3];s[3]=M?EA(M,L,u[4]):L,s[4]=M?lu(s[3],l):u[4]}return L=u[5],L&&(M=s[5],s[5]=M?AA(M,L,u[6]):L,s[6]=M?lu(s[5],l):u[6]),L=u[7],L&&(s[7]=L),p&be&&(s[8]=s[8]==null?u[8]:Bn(s[8],u[8])),s[9]==null&&(s[9]=u[9]),s[0]=u[0],s[1]=v,s}function R5(s){var u=[];if(s!=null)for(var f in tr(s))u.push(f);return u}function M5(s){return zm.call(s)}function zA(s,u,f){return u=nn(u===r?s.length-1:u,0),function(){for(var p=arguments,v=-1,P=nn(p.length-u,0),I=q(P);++v<P;)I[v]=p[u+v];v=-1;for(var L=q(u+1);++v<u;)L[v]=p[v];return L[u]=f(I),_i(s,this,L)}}function jA(s,u){return u.length<2?s:Fc(s,fo(u,0,-1))}function U5(s,u){for(var f=s.length,p=Bn(u.length,f),v=oi(s);p--;){var P=u[p];s[p]=ya(P,f)?v[P]:r}return s}function Wb(s,u){if(!(u==="constructor"&&typeof s[u]=="function")&&u!="__proto__")return s[u]}var qA=WA(dA),fd=eN||function(s,u){return hn.setTimeout(s,u)},Vb=WA(u5);function HA(s,u,f){var p=u+"";return Vb(s,I5(p,K5(D5(p),f)))}function WA(s){var u=0,f=0;return function(){var p=iN(),v=$t-(p-f);if(f=p,v>0){if(++u>=St)return arguments[0]}else u=0;return s.apply(r,arguments)}}function hy(s,u){var f=-1,p=s.length,v=p-1;for(u=u===r?p:u;++f<u;){var P=kb(f,v),I=s[P];s[P]=s[f],s[f]=I}return s.length=u,s}var VA=O5(function(s){var u=[];return s.charCodeAt(0)===46&&u.push(""),s.replace(el,function(f,p,v,P){u.push(v?P.replace(U,"$1"):p||f)}),u});function Ts(s){if(typeof s=="string"||Ai(s))return s;var u=s+"";return u=="0"&&1/s==-Ut?"-0":u}function Lc(s){if(s!=null){try{return $m.call(s)}catch{}try{return s+""}catch{}}return""}function K5(s,u){return so(Ht,function(f){var p="_."+f[0];u&f[1]&&!Nm(s,p)&&s.push(p)}),s.sort()}function GA(s){if(s instanceof Ft)return s.clone();var u=new uo(s.__wrapped__,s.__chain__);return u.__actions__=oi(s.__actions__),u.__index__=s.__index__,u.__values__=s.__values__,u}function $5(s,u,f){(f?zn(s,u,f):u===r)?u=1:u=nn(xt(u),0);var p=s==null?0:s.length;if(!p||u<1)return[];for(var v=0,P=0,I=q(Gm(p/u));v<p;)I[P++]=fo(s,v,v+=u);return I}function z5(s){for(var u=-1,f=s==null?0:s.length,p=0,v=[];++u<f;){var P=s[u];P&&(v[p++]=P)}return v}function j5(){var s=arguments.length;if(!s)return[];for(var u=q(s-1),f=arguments[0],p=s;p--;)u[p-1]=arguments[p];return fu(vt(f)?oi(f):[f],An(u,1))}var q5=Pt(function(s,u){return zr(s)?id(s,An(u,1,zr,!0)):[]}),H5=Pt(function(s,u){var f=lo(u);return zr(f)&&(f=r),zr(s)?id(s,An(u,1,zr,!0),it(f,2)):[]}),W5=Pt(function(s,u){var f=lo(u);return zr(f)&&(f=r),zr(s)?id(s,An(u,1,zr,!0),r,f):[]});function V5(s,u,f){var p=s==null?0:s.length;return p?(u=f||u===r?1:xt(u),fo(s,u<0?0:u,p)):[]}function G5(s,u,f){var p=s==null?0:s.length;return p?(u=f||u===r?1:xt(u),u=p-u,fo(s,0,u<0?0:u)):[]}function Y5(s,u){return s&&s.length?iy(s,it(u,3),!0,!0):[]}function J5(s,u){return s&&s.length?iy(s,it(u,3),!0):[]}function X5(s,u,f,p){var v=s==null?0:s.length;return v?(f&&typeof f!="number"&&zn(s,u,f)&&(f=0,p=v),jN(s,u,f,p)):[]}function YA(s,u,f){var p=s==null?0:s.length;if(!p)return-1;var v=f==null?0:xt(f);return v<0&&(v=nn(p+v,0)),Rm(s,it(u,3),v)}function JA(s,u,f){var p=s==null?0:s.length;if(!p)return-1;var v=p-1;return f!==r&&(v=xt(f),v=f<0?nn(p+v,0):Bn(v,p-1)),Rm(s,it(u,3),v,!0)}function XA(s){var u=s==null?0:s.length;return u?An(s,1):[]}function Q5(s){var u=s==null?0:s.length;return u?An(s,Ut):[]}function Z5(s,u){var f=s==null?0:s.length;return f?(u=u===r?1:xt(u),An(s,u)):[]}function eR(s){for(var u=-1,f=s==null?0:s.length,p={};++u<f;){var v=s[u];p[v[0]]=v[1]}return p}function QA(s){return s&&s.length?s[0]:r}function tR(s,u,f){var p=s==null?0:s.length;if(!p)return-1;var v=f==null?0:xt(f);return v<0&&(v=nn(p+v,0)),tl(s,u,v)}function rR(s){var u=s==null?0:s.length;return u?fo(s,0,-1):[]}var nR=Pt(function(s){var u=gr(s,Lb);return u.length&&u[0]===s[0]?Ab(u):[]}),iR=Pt(function(s){var u=lo(s),f=gr(s,Lb);return u===lo(f)?u=r:f.pop(),f.length&&f[0]===s[0]?Ab(f,it(u,2)):[]}),oR=Pt(function(s){var u=lo(s),f=gr(s,Lb);return u=typeof u=="function"?u:r,u&&f.pop(),f.length&&f[0]===s[0]?Ab(f,r,u):[]});function sR(s,u){return s==null?"":rN.call(s,u)}function lo(s){var u=s==null?0:s.length;return u?s[u-1]:r}function aR(s,u,f){var p=s==null?0:s.length;if(!p)return-1;var v=p;return f!==r&&(v=xt(f),v=v<0?nn(p+v,0):Bn(v,p-1)),u===u?KO(s,u,v):Rm(s,F8,v,!0)}function uR(s,u){return s&&s.length?cA(s,xt(u)):r}var cR=Pt(ZA);function ZA(s,u){return s&&s.length&&u&&u.length?Cb(s,u):s}function fR(s,u,f){return s&&s.length&&u&&u.length?Cb(s,u,it(f,2)):s}function lR(s,u,f){return s&&s.length&&u&&u.length?Cb(s,u,r,f):s}var hR=ma(function(s,u){var f=s==null?0:s.length,p=vb(s,u);return hA(s,gr(u,function(v){return ya(v,f)?+v:v}).sort(xA)),p});function dR(s,u){var f=[];if(!(s&&s.length))return f;var p=-1,v=[],P=s.length;for(u=it(u,3);++p<P;){var I=s[p];u(I,p,s)&&(f.push(I),v.push(p))}return hA(s,v),f}function Gb(s){return s==null?s:sN.call(s)}function pR(s,u,f){var p=s==null?0:s.length;return p?(f&&typeof f!="number"&&zn(s,u,f)?(u=0,f=p):(u=u==null?0:xt(u),f=f===r?p:xt(f)),fo(s,u,f)):[]}function mR(s,u){return ny(s,u)}function yR(s,u,f){return Tb(s,u,it(f,2))}function gR(s,u){var f=s==null?0:s.length;if(f){var p=ny(s,u);if(p<f&&Vo(s[p],u))return p}return-1}function wR(s,u){return ny(s,u,!0)}function bR(s,u,f){return Tb(s,u,it(f,2),!0)}function vR(s,u){var f=s==null?0:s.length;if(f){var p=ny(s,u,!0)-1;if(Vo(s[p],u))return p}return-1}function _R(s){return s&&s.length?pA(s):[]}function xR(s,u){return s&&s.length?pA(s,it(u,2)):[]}function ER(s){var u=s==null?0:s.length;return u?fo(s,1,u):[]}function AR(s,u,f){return s&&s.length?(u=f||u===r?1:xt(u),fo(s,0,u<0?0:u)):[]}function SR(s,u,f){var p=s==null?0:s.length;return p?(u=f||u===r?1:xt(u),u=p-u,fo(s,u<0?0:u,p)):[]}function PR(s,u){return s&&s.length?iy(s,it(u,3),!1,!0):[]}function DR(s,u){return s&&s.length?iy(s,it(u,3)):[]}var CR=Pt(function(s){return mu(An(s,1,zr,!0))}),kR=Pt(function(s){var u=lo(s);return zr(u)&&(u=r),mu(An(s,1,zr,!0),it(u,2))}),IR=Pt(function(s){var u=lo(s);return u=typeof u=="function"?u:r,mu(An(s,1,zr,!0),r,u)});function TR(s){return s&&s.length?mu(s):[]}function FR(s,u){return s&&s.length?mu(s,it(u,2)):[]}function BR(s,u){return u=typeof u=="function"?u:r,s&&s.length?mu(s,r,u):[]}function Yb(s){if(!(s&&s.length))return[];var u=0;return s=cu(s,function(f){if(zr(f))return u=nn(f.length,u),!0}),hb(u,function(f){return gr(s,cb(f))})}function eS(s,u){if(!(s&&s.length))return[];var f=Yb(s);return u==null?f:gr(f,function(p){return _i(u,r,p)})}var LR=Pt(function(s,u){return zr(s)?id(s,u):[]}),OR=Pt(function(s){return Bb(cu(s,zr))}),NR=Pt(function(s){var u=lo(s);return zr(u)&&(u=r),Bb(cu(s,zr),it(u,2))}),RR=Pt(function(s){var u=lo(s);return u=typeof u=="function"?u:r,Bb(cu(s,zr),r,u)}),MR=Pt(Yb);function UR(s,u){return wA(s||[],u||[],nd)}function KR(s,u){return wA(s||[],u||[],ad)}var $R=Pt(function(s){var u=s.length,f=u>1?s[u-1]:r;return f=typeof f=="function"?(s.pop(),f):r,eS(s,f)});function tS(s){var u=A(s);return u.__chain__=!0,u}function zR(s,u){return u(s),s}function dy(s,u){return u(s)}var jR=ma(function(s){var u=s.length,f=u?s[0]:0,p=this.__wrapped__,v=function(P){return vb(P,s)};return u>1||this.__actions__.length||!(p instanceof Ft)||!ya(f)?this.thru(v):(p=p.slice(f,+f+(u?1:0)),p.__actions__.push({func:dy,args:[v],thisArg:r}),new uo(p,this.__chain__).thru(function(P){return u&&!P.length&&P.push(r),P}))});function qR(){return tS(this)}function HR(){return new uo(this.value(),this.__chain__)}function WR(){this.__values__===r&&(this.__values__=mS(this.value()));var s=this.__index__>=this.__values__.length,u=s?r:this.__values__[this.__index__++];return{done:s,value:u}}function VR(){return this}function GR(s){for(var u,f=this;f instanceof Qm;){var p=GA(f);p.__index__=0,p.__values__=r,u?v.__wrapped__=p:u=p;var v=p;f=f.__wrapped__}return v.__wrapped__=s,u}function YR(){var s=this.__wrapped__;if(s instanceof Ft){var u=s;return this.__actions__.length&&(u=new Ft(this)),u=u.reverse(),u.__actions__.push({func:dy,args:[Gb],thisArg:r}),new uo(u,this.__chain__)}return this.thru(Gb)}function JR(){return gA(this.__wrapped__,this.__actions__)}var XR=oy(function(s,u,f){Yt.call(s,f)?++s[f]:da(s,f,1)});function QR(s,u,f){var p=vt(s)?I8:zN;return f&&zn(s,u,f)&&(u=r),p(s,it(u,3))}function ZR(s,u){var f=vt(s)?cu:eA;return f(s,it(u,3))}var eM=CA(YA),tM=CA(JA);function rM(s,u){return An(py(s,u),1)}function nM(s,u){return An(py(s,u),Ut)}function iM(s,u,f){return f=f===r?1:xt(f),An(py(s,u),f)}function rS(s,u){var f=vt(s)?so:pu;return f(s,it(u,3))}function nS(s,u){var f=vt(s)?EO:Z8;return f(s,it(u,3))}var oM=oy(function(s,u,f){Yt.call(s,f)?s[f].push(u):da(s,f,[u])});function sM(s,u,f,p){s=si(s)?s:hl(s),f=f&&!p?xt(f):0;var v=s.length;return f<0&&(f=nn(v+f,0)),by(s)?f<=v&&s.indexOf(u,f)>-1:!!v&&tl(s,u,f)>-1}var aM=Pt(function(s,u,f){var p=-1,v=typeof u=="function",P=si(s)?q(s.length):[];return pu(s,function(I){P[++p]=v?_i(u,I,f):od(I,u,f)}),P}),uM=oy(function(s,u,f){da(s,f,u)});function py(s,u){var f=vt(s)?gr:sA;return f(s,it(u,3))}function cM(s,u,f,p){return s==null?[]:(vt(u)||(u=u==null?[]:[u]),f=p?r:f,vt(f)||(f=f==null?[]:[f]),fA(s,u,f))}var fM=oy(function(s,u,f){s[f?0:1].push(u)},function(){return[[],[]]});function lM(s,u,f){var p=vt(s)?ab:L8,v=arguments.length<3;return p(s,it(u,4),f,v,pu)}function hM(s,u,f){var p=vt(s)?AO:L8,v=arguments.length<3;return p(s,it(u,4),f,v,Z8)}function dM(s,u){var f=vt(s)?cu:eA;return f(s,gy(it(u,3)))}function pM(s){var u=vt(s)?Y8:s5;return u(s)}function mM(s,u,f){(f?zn(s,u,f):u===r)?u=1:u=xt(u);var p=vt(s)?RN:a5;return p(s,u)}function yM(s){var u=vt(s)?MN:c5;return u(s)}function gM(s){if(s==null)return 0;if(si(s))return by(s)?nl(s):s.length;var u=Ln(s);return u==tn||u==lr?s.size:Pb(s).length}function wM(s,u,f){var p=vt(s)?ub:f5;return f&&zn(s,u,f)&&(u=r),p(s,it(u,3))}var bM=Pt(function(s,u){if(s==null)return[];var f=u.length;return f>1&&zn(s,u[0],u[1])?u=[]:f>2&&zn(u[0],u[1],u[2])&&(u=[u[0]]),fA(s,An(u,1),[])}),my=ZO||function(){return hn.Date.now()};function vM(s,u){if(typeof u!="function")throw new ao(i);return s=xt(s),function(){if(--s<1)return u.apply(this,arguments)}}function iS(s,u,f){return u=f?r:u,u=s&&u==null?s.length:u,pa(s,be,r,r,r,r,u)}function oS(s,u){var f;if(typeof u!="function")throw new ao(i);return s=xt(s),function(){return--s>0&&(f=u.apply(this,arguments)),s<=1&&(u=r),f}}var Jb=Pt(function(s,u,f){var p=T;if(f.length){var v=lu(f,fl(Jb));p|=X}return pa(s,p,u,f,v)}),sS=Pt(function(s,u,f){var p=T|O;if(f.length){var v=lu(f,fl(sS));p|=X}return pa(u,p,s,f,v)});function aS(s,u,f){u=f?r:u;var p=pa(s,ne,r,r,r,r,r,u);return p.placeholder=aS.placeholder,p}function uS(s,u,f){u=f?r:u;var p=pa(s,ve,r,r,r,r,r,u);return p.placeholder=uS.placeholder,p}function cS(s,u,f){var p,v,P,I,L,M,se=0,ae=!1,he=!1,Pe=!0;if(typeof s!="function")throw new ao(i);u=ho(u)||0,Sr(f)&&(ae=!!f.leading,he="maxWait"in f,P=he?nn(ho(f.maxWait)||0,u):P,Pe="trailing"in f?!!f.trailing:Pe);function Ge(jr){var Go=p,ba=v;return p=v=r,se=jr,I=s.apply(ba,Go),I}function st(jr){return se=jr,L=fd(kt,u),ae?Ge(jr):I}function Et(jr){var Go=jr-M,ba=jr-se,CS=u-Go;return he?Bn(CS,P-ba):CS}function at(jr){var Go=jr-M,ba=jr-se;return M===r||Go>=u||Go<0||he&&ba>=P}function kt(){var jr=my();if(at(jr))return Ot(jr);L=fd(kt,Et(jr))}function Ot(jr){return L=r,Pe&&p?Ge(jr):(p=v=r,I)}function Si(){L!==r&&bA(L),se=0,p=M=v=L=r}function jn(){return L===r?I:Ot(my())}function Pi(){var jr=my(),Go=at(jr);if(p=arguments,v=this,M=jr,Go){if(L===r)return st(M);if(he)return bA(L),L=fd(kt,u),Ge(M)}return L===r&&(L=fd(kt,u)),I}return Pi.cancel=Si,Pi.flush=jn,Pi}var _M=Pt(function(s,u){return Q8(s,1,u)}),xM=Pt(function(s,u,f){return Q8(s,ho(u)||0,f)});function EM(s){return pa(s,de)}function yy(s,u){if(typeof s!="function"||u!=null&&typeof u!="function")throw new ao(i);var f=function(){var p=arguments,v=u?u.apply(this,p):p[0],P=f.cache;if(P.has(v))return P.get(v);var I=s.apply(this,p);return f.cache=P.set(v,I)||P,I};return f.cache=new(yy.Cache||ha),f}yy.Cache=ha;function gy(s){if(typeof s!="function")throw new ao(i);return function(){var u=arguments;switch(u.length){case 0:return!s.call(this);case 1:return!s.call(this,u[0]);case 2:return!s.call(this,u[0],u[1]);case 3:return!s.call(this,u[0],u[1],u[2])}return!s.apply(this,u)}}function AM(s){return oS(2,s)}var SM=l5(function(s,u){u=u.length==1&&vt(u[0])?gr(u[0],xi(it())):gr(An(u,1),xi(it()));var f=u.length;return Pt(function(p){for(var v=-1,P=Bn(p.length,f);++v<P;)p[v]=u[v].call(this,p[v]);return _i(s,this,p)})}),Xb=Pt(function(s,u){var f=lu(u,fl(Xb));return pa(s,X,r,u,f)}),fS=Pt(function(s,u){var f=lu(u,fl(fS));return pa(s,me,r,u,f)}),PM=ma(function(s,u){return pa(s,W,r,r,r,u)});function DM(s,u){if(typeof s!="function")throw new ao(i);return u=u===r?u:xt(u),Pt(s,u)}function CM(s,u){if(typeof s!="function")throw new ao(i);return u=u==null?0:nn(xt(u),0),Pt(function(f){var p=f[u],v=gu(f,0,u);return p&&fu(v,p),_i(s,this,v)})}function kM(s,u,f){var p=!0,v=!0;if(typeof s!="function")throw new ao(i);return Sr(f)&&(p="leading"in f?!!f.leading:p,v="trailing"in f?!!f.trailing:v),cS(s,u,{leading:p,maxWait:u,trailing:v})}function IM(s){return iS(s,1)}function TM(s,u){return Xb(Ob(u),s)}function FM(){if(!arguments.length)return[];var s=arguments[0];return vt(s)?s:[s]}function BM(s){return co(s,y)}function LM(s,u){return u=typeof u=="function"?u:r,co(s,y,u)}function OM(s){return co(s,h|y)}function NM(s,u){return u=typeof u=="function"?u:r,co(s,h|y,u)}function RM(s,u){return u==null||X8(s,u,dn(u))}function Vo(s,u){return s===u||s!==s&&u!==u}var MM=cy(Eb),UM=cy(function(s,u){return s>=u}),Oc=nA(function(){return arguments}())?nA:function(s){return kr(s)&&Yt.call(s,"callee")&&!j8.call(s,"callee")},vt=q.isArray,KM=A8?xi(A8):GN;function si(s){return s!=null&&wy(s.length)&&!ga(s)}function zr(s){return kr(s)&&si(s)}function $M(s){return s===!0||s===!1||kr(s)&&$n(s)==eo}var wu=tN||uv,zM=S8?xi(S8):YN;function jM(s){return kr(s)&&s.nodeType===1&&!ld(s)}function qM(s){if(s==null)return!0;if(si(s)&&(vt(s)||typeof s=="string"||typeof s.splice=="function"||wu(s)||ll(s)||Oc(s)))return!s.length;var u=Ln(s);if(u==tn||u==lr)return!s.size;if(cd(s))return!Pb(s).length;for(var f in s)if(Yt.call(s,f))return!1;return!0}function HM(s,u){return sd(s,u)}function WM(s,u,f){f=typeof f=="function"?f:r;var p=f?f(s,u):r;return p===r?sd(s,u,r,f):!!p}function Qb(s){if(!kr(s))return!1;var u=$n(s);return u==Kr||u==Cs||typeof s.message=="string"&&typeof s.name=="string"&&!ld(s)}function VM(s){return typeof s=="number"&&H8(s)}function ga(s){if(!Sr(s))return!1;var u=$n(s);return u==ro||u==Tn||u==fn||u==au}function lS(s){return typeof s=="number"&&s==xt(s)}function wy(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=Wr}function Sr(s){var u=typeof s;return s!=null&&(u=="object"||u=="function")}function kr(s){return s!=null&&typeof s=="object"}var hS=P8?xi(P8):XN;function GM(s,u){return s===u||Sb(s,u,zb(u))}function YM(s,u,f){return f=typeof f=="function"?f:r,Sb(s,u,zb(u),f)}function JM(s){return dS(s)&&s!=+s}function XM(s){if(L5(s))throw new gt(n);return iA(s)}function QM(s){return s===null}function ZM(s){return s==null}function dS(s){return typeof s=="number"||kr(s)&&$n(s)==Ko}function ld(s){if(!kr(s)||$n(s)!=Kn)return!1;var u=Hm(s);if(u===null)return!0;var f=Yt.call(u,"constructor")&&u.constructor;return typeof f=="function"&&f instanceof f&&$m.call(f)==YO}var Zb=D8?xi(D8):QN;function eU(s){return lS(s)&&s>=-Wr&&s<=Wr}var pS=C8?xi(C8):ZN;function by(s){return typeof s=="string"||!vt(s)&&kr(s)&&$n(s)==ni}function Ai(s){return typeof s=="symbol"||kr(s)&&$n(s)==ii}var ll=k8?xi(k8):e5;function tU(s){return s===r}function rU(s){return kr(s)&&Ln(s)==xn}function nU(s){return kr(s)&&$n(s)==K}var iU=cy(Db),oU=cy(function(s,u){return s<=u});function mS(s){if(!s)return[];if(si(s))return by(s)?Ho(s):oi(s);if(Qh&&s[Qh])return RO(s[Qh]());var u=Ln(s),f=u==tn?pb:u==lr?Mm:hl;return f(s)}function wa(s){if(!s)return s===0?s:0;if(s=ho(s),s===Ut||s===-Ut){var u=s<0?-1:1;return u*Un}return s===s?s:0}function xt(s){var u=wa(s),f=u%1;return u===u?f?u-f:u:0}function yS(s){return s?Tc(xt(s),0,en):0}function ho(s){if(typeof s=="number")return s;if(Ai(s))return Ur;if(Sr(s)){var u=typeof s.valueOf=="function"?s.valueOf():s;s=Sr(u)?u+"":u}if(typeof s!="string")return s===0?s:+s;s=O8(s);var f=Se.test(s);return f||Te.test(s)?vO(s.slice(2),f?2:8):Ke.test(s)?Ur:+s}function gS(s){return Is(s,ai(s))}function sU(s){return s?Tc(xt(s),-Wr,Wr):s===0?s:0}function Wt(s){return s==null?"":Ei(s)}var aU=ul(function(s,u){if(cd(u)||si(u)){Is(u,dn(u),s);return}for(var f in u)Yt.call(u,f)&&nd(s,f,u[f])}),wS=ul(function(s,u){Is(u,ai(u),s)}),vy=ul(function(s,u,f,p){Is(u,ai(u),s,p)}),uU=ul(function(s,u,f,p){Is(u,dn(u),s,p)}),cU=ma(vb);function fU(s,u){var f=al(s);return u==null?f:J8(f,u)}var lU=Pt(function(s,u){s=tr(s);var f=-1,p=u.length,v=p>2?u[2]:r;for(v&&zn(u[0],u[1],v)&&(p=1);++f<p;)for(var P=u[f],I=ai(P),L=-1,M=I.length;++L<M;){var se=I[L],ae=s[se];(ae===r||Vo(ae,il[se])&&!Yt.call(s,se))&&(s[se]=P[se])}return s}),hU=Pt(function(s){return s.push(r,OA),_i(bS,r,s)});function dU(s,u){return T8(s,it(u,3),ks)}function pU(s,u){return T8(s,it(u,3),xb)}function mU(s,u){return s==null?s:_b(s,it(u,3),ai)}function yU(s,u){return s==null?s:tA(s,it(u,3),ai)}function gU(s,u){return s&&ks(s,it(u,3))}function wU(s,u){return s&&xb(s,it(u,3))}function bU(s){return s==null?[]:ty(s,dn(s))}function vU(s){return s==null?[]:ty(s,ai(s))}function ev(s,u,f){var p=s==null?r:Fc(s,u);return p===r?f:p}function _U(s,u){return s!=null&&MA(s,u,qN)}function tv(s,u){return s!=null&&MA(s,u,HN)}var xU=IA(function(s,u,f){u!=null&&typeof u.toString!="function"&&(u=zm.call(u)),s[u]=f},nv(ui)),EU=IA(function(s,u,f){u!=null&&typeof u.toString!="function"&&(u=zm.call(u)),Yt.call(s,u)?s[u].push(f):s[u]=[f]},it),AU=Pt(od);function dn(s){return si(s)?G8(s):Pb(s)}function ai(s){return si(s)?G8(s,!0):t5(s)}function SU(s,u){var f={};return u=it(u,3),ks(s,function(p,v,P){da(f,u(p,v,P),p)}),f}function PU(s,u){var f={};return u=it(u,3),ks(s,function(p,v,P){da(f,v,u(p,v,P))}),f}var DU=ul(function(s,u,f){ry(s,u,f)}),bS=ul(function(s,u,f,p){ry(s,u,f,p)}),CU=ma(function(s,u){var f={};if(s==null)return f;var p=!1;u=gr(u,function(P){return P=yu(P,s),p||(p=P.length>1),P}),Is(s,Kb(s),f),p&&(f=co(f,h|m|y,x5));for(var v=u.length;v--;)Fb(f,u[v]);return f});function kU(s,u){return vS(s,gy(it(u)))}var IU=ma(function(s,u){return s==null?{}:n5(s,u)});function vS(s,u){if(s==null)return{};var f=gr(Kb(s),function(p){return[p]});return u=it(u),lA(s,f,function(p,v){return u(p,v[0])})}function TU(s,u,f){u=yu(u,s);var p=-1,v=u.length;for(v||(v=1,s=r);++p<v;){var P=s==null?r:s[Ts(u[p])];P===r&&(p=v,P=f),s=ga(P)?P.call(s):P}return s}function FU(s,u,f){return s==null?s:ad(s,u,f)}function BU(s,u,f,p){return p=typeof p=="function"?p:r,s==null?s:ad(s,u,f,p)}var _S=BA(dn),xS=BA(ai);function LU(s,u,f){var p=vt(s),v=p||wu(s)||ll(s);if(u=it(u,4),f==null){var P=s&&s.constructor;v?f=p?new P:[]:Sr(s)?f=ga(P)?al(Hm(s)):{}:f={}}return(v?so:ks)(s,function(I,L,M){return u(f,I,L,M)}),f}function OU(s,u){return s==null?!0:Fb(s,u)}function NU(s,u,f){return s==null?s:yA(s,u,Ob(f))}function RU(s,u,f,p){return p=typeof p=="function"?p:r,s==null?s:yA(s,u,Ob(f),p)}function hl(s){return s==null?[]:db(s,dn(s))}function MU(s){return s==null?[]:db(s,ai(s))}function UU(s,u,f){return f===r&&(f=u,u=r),f!==r&&(f=ho(f),f=f===f?f:0),u!==r&&(u=ho(u),u=u===u?u:0),Tc(ho(s),u,f)}function KU(s,u,f){return u=wa(u),f===r?(f=u,u=0):f=wa(f),s=ho(s),WN(s,u,f)}function $U(s,u,f){if(f&&typeof f!="boolean"&&zn(s,u,f)&&(u=f=r),f===r&&(typeof u=="boolean"?(f=u,u=r):typeof s=="boolean"&&(f=s,s=r)),s===r&&u===r?(s=0,u=1):(s=wa(s),u===r?(u=s,s=0):u=wa(u)),s>u){var p=s;s=u,u=p}if(f||s%1||u%1){var v=W8();return Bn(s+v*(u-s+bO("1e-"+((v+"").length-1))),u)}return kb(s,u)}var zU=cl(function(s,u,f){return u=u.toLowerCase(),s+(f?ES(u):u)});function ES(s){return rv(Wt(s).toLowerCase())}function AS(s){return s=Wt(s),s&&s.replace(ot,FO).replace(cO,"")}function jU(s,u,f){s=Wt(s),u=Ei(u);var p=s.length;f=f===r?p:Tc(xt(f),0,p);var v=f;return f-=u.length,f>=0&&s.slice(f,v)==u}function qU(s){return s=Wt(s),s&&Yh.test(s)?s.replace(Ec,BO):s}function HU(s){return s=Wt(s),s&&En.test(s)?s.replace(Pc,"\\$&"):s}var WU=cl(function(s,u,f){return s+(f?"-":"")+u.toLowerCase()}),VU=cl(function(s,u,f){return s+(f?" ":"")+u.toLowerCase()}),GU=DA("toLowerCase");function YU(s,u,f){s=Wt(s),u=xt(u);var p=u?nl(s):0;if(!u||p>=u)return s;var v=(u-p)/2;return uy(Ym(v),f)+s+uy(Gm(v),f)}function JU(s,u,f){s=Wt(s),u=xt(u);var p=u?nl(s):0;return u&&p<u?s+uy(u-p,f):s}function XU(s,u,f){s=Wt(s),u=xt(u);var p=u?nl(s):0;return u&&p<u?uy(u-p,f)+s:s}function QU(s,u,f){return f||u==null?u=0:u&&(u=+u),oN(Wt(s).replace(uu,""),u||0)}function ZU(s,u,f){return(f?zn(s,u,f):u===r)?u=1:u=xt(u),Ib(Wt(s),u)}function e7(){var s=arguments,u=Wt(s[0]);return s.length<3?u:u.replace(s[1],s[2])}var t7=cl(function(s,u,f){return s+(f?"_":"")+u.toLowerCase()});function r7(s,u,f){return f&&typeof f!="number"&&zn(s,u,f)&&(u=f=r),f=f===r?en:f>>>0,f?(s=Wt(s),s&&(typeof u=="string"||u!=null&&!Zb(u))&&(u=Ei(u),!u&&rl(s))?gu(Ho(s),0,f):s.split(u,f)):[]}var n7=cl(function(s,u,f){return s+(f?" ":"")+rv(u)});function i7(s,u,f){return s=Wt(s),f=f==null?0:Tc(xt(f),0,s.length),u=Ei(u),s.slice(f,f+u.length)==u}function o7(s,u,f){var p=A.templateSettings;f&&zn(s,u,f)&&(u=r),s=Wt(s),u=vy({},u,p,LA);var v=vy({},u.imports,p.imports,LA),P=dn(v),I=db(v,P),L,M,se=0,ae=u.interpolate||ct,he="__p += '",Pe=mb((u.escape||ct).source+"|"+ae.source+"|"+(ae===qo?oe:ct).source+"|"+(u.evaluate||ct).source+"|$","g"),Ge="//# sourceURL="+(Yt.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++pO+"]")+`
`;s.replace(Pe,function(at,kt,Ot,Si,jn,Pi){return Ot||(Ot=Si),he+=s.slice(se,Pi).replace(lt,LO),kt&&(L=!0,he+=`' +
__e(`+kt+`) +
'`),jn&&(M=!0,he+=`';
`+jn+`;
__p += '`),Ot&&(he+=`' +
((__t = (`+Ot+`)) == null ? '' : __t) +
'`),se=Pi+at.length,at}),he+=`';
`;var st=Yt.call(u,"variable")&&u.variable;if(!st)he=`with (obj) {
`+he+`
}
`;else if(R.test(st))throw new gt(o);he=(M?he.replace(zo,""):he).replace(ca,"$1").replace(jo,"$1;"),he="function("+(st||"obj")+`) {
`+(st?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(L?", __e = _.escape":"")+(M?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+he+`return __p
}`;var Et=PS(function(){return zt(P,Ge+"return "+he).apply(r,I)});if(Et.source=he,Qb(Et))throw Et;return Et}function s7(s){return Wt(s).toLowerCase()}function a7(s){return Wt(s).toUpperCase()}function u7(s,u,f){if(s=Wt(s),s&&(f||u===r))return O8(s);if(!s||!(u=Ei(u)))return s;var p=Ho(s),v=Ho(u),P=N8(p,v),I=R8(p,v)+1;return gu(p,P,I).join("")}function c7(s,u,f){if(s=Wt(s),s&&(f||u===r))return s.slice(0,U8(s)+1);if(!s||!(u=Ei(u)))return s;var p=Ho(s),v=R8(p,Ho(u))+1;return gu(p,0,v).join("")}function f7(s,u,f){if(s=Wt(s),s&&(f||u===r))return s.replace(uu,"");if(!s||!(u=Ei(u)))return s;var p=Ho(s),v=N8(p,Ho(u));return gu(p,v).join("")}function l7(s,u){var f=ge,p=Ue;if(Sr(u)){var v="separator"in u?u.separator:v;f="length"in u?xt(u.length):f,p="omission"in u?Ei(u.omission):p}s=Wt(s);var P=s.length;if(rl(s)){var I=Ho(s);P=I.length}if(f>=P)return s;var L=f-nl(p);if(L<1)return p;var M=I?gu(I,0,L).join(""):s.slice(0,L);if(v===r)return M+p;if(I&&(L+=M.length-L),Zb(v)){if(s.slice(L).search(v)){var se,ae=M;for(v.global||(v=mb(v.source,Wt(ye.exec(v))+"g")),v.lastIndex=0;se=v.exec(ae);)var he=se.index;M=M.slice(0,he===r?L:he)}}else if(s.indexOf(Ei(v),L)!=L){var Pe=M.lastIndexOf(v);Pe>-1&&(M=M.slice(0,Pe))}return M+p}function h7(s){return s=Wt(s),s&&no.test(s)?s.replace(fa,$O):s}var d7=cl(function(s,u,f){return s+(f?" ":"")+u.toUpperCase()}),rv=DA("toUpperCase");function SS(s,u,f){return s=Wt(s),u=f?r:u,u===r?NO(s)?qO(s):DO(s):s.match(u)||[]}var PS=Pt(function(s,u){try{return _i(s,r,u)}catch(f){return Qb(f)?f:new gt(f)}}),p7=ma(function(s,u){return so(u,function(f){f=Ts(f),da(s,f,Jb(s[f],s))}),s});function m7(s){var u=s==null?0:s.length,f=it();return s=u?gr(s,function(p){if(typeof p[1]!="function")throw new ao(i);return[f(p[0]),p[1]]}):[],Pt(function(p){for(var v=-1;++v<u;){var P=s[v];if(_i(P[0],this,p))return _i(P[1],this,p)}})}function y7(s){return $N(co(s,h))}function nv(s){return function(){return s}}function g7(s,u){return s==null||s!==s?u:s}var w7=kA(),b7=kA(!0);function ui(s){return s}function iv(s){return oA(typeof s=="function"?s:co(s,h))}function v7(s){return aA(co(s,h))}function _7(s,u){return uA(s,co(u,h))}var x7=Pt(function(s,u){return function(f){return od(f,s,u)}}),E7=Pt(function(s,u){return function(f){return od(s,f,u)}});function ov(s,u,f){var p=dn(u),v=ty(u,p);f==null&&!(Sr(u)&&(v.length||!p.length))&&(f=u,u=s,s=this,v=ty(u,dn(u)));var P=!(Sr(f)&&"chain"in f)||!!f.chain,I=ga(s);return so(v,function(L){var M=u[L];s[L]=M,I&&(s.prototype[L]=function(){var se=this.__chain__;if(P||se){var ae=s(this.__wrapped__),he=ae.__actions__=oi(this.__actions__);return he.push({func:M,args:arguments,thisArg:s}),ae.__chain__=se,ae}return M.apply(s,fu([this.value()],arguments))})}),s}function A7(){return hn._===this&&(hn._=JO),this}function sv(){}function S7(s){return s=xt(s),Pt(function(u){return cA(u,s)})}var P7=Rb(gr),D7=Rb(I8),C7=Rb(ub);function DS(s){return qb(s)?cb(Ts(s)):i5(s)}function k7(s){return function(u){return s==null?r:Fc(s,u)}}var I7=TA(),T7=TA(!0);function av(){return[]}function uv(){return!1}function F7(){return{}}function B7(){return""}function L7(){return!0}function O7(s,u){if(s=xt(s),s<1||s>Wr)return[];var f=en,p=Bn(s,en);u=it(u),s-=en;for(var v=hb(p,u);++f<s;)u(f);return v}function N7(s){return vt(s)?gr(s,Ts):Ai(s)?[s]:oi(VA(Wt(s)))}function R7(s){var u=++GO;return Wt(s)+u}var M7=ay(function(s,u){return s+u},0),U7=Mb("ceil"),K7=ay(function(s,u){return s/u},1),$7=Mb("floor");function z7(s){return s&&s.length?ey(s,ui,Eb):r}function j7(s,u){return s&&s.length?ey(s,it(u,2),Eb):r}function q7(s){return B8(s,ui)}function H7(s,u){return B8(s,it(u,2))}function W7(s){return s&&s.length?ey(s,ui,Db):r}function V7(s,u){return s&&s.length?ey(s,it(u,2),Db):r}var G7=ay(function(s,u){return s*u},1),Y7=Mb("round"),J7=ay(function(s,u){return s-u},0);function X7(s){return s&&s.length?lb(s,ui):0}function Q7(s,u){return s&&s.length?lb(s,it(u,2)):0}return A.after=vM,A.ary=iS,A.assign=aU,A.assignIn=wS,A.assignInWith=vy,A.assignWith=uU,A.at=cU,A.before=oS,A.bind=Jb,A.bindAll=p7,A.bindKey=sS,A.castArray=FM,A.chain=tS,A.chunk=$5,A.compact=z5,A.concat=j5,A.cond=m7,A.conforms=y7,A.constant=nv,A.countBy=XR,A.create=fU,A.curry=aS,A.curryRight=uS,A.debounce=cS,A.defaults=lU,A.defaultsDeep=hU,A.defer=_M,A.delay=xM,A.difference=q5,A.differenceBy=H5,A.differenceWith=W5,A.drop=V5,A.dropRight=G5,A.dropRightWhile=Y5,A.dropWhile=J5,A.fill=X5,A.filter=ZR,A.flatMap=rM,A.flatMapDeep=nM,A.flatMapDepth=iM,A.flatten=XA,A.flattenDeep=Q5,A.flattenDepth=Z5,A.flip=EM,A.flow=w7,A.flowRight=b7,A.fromPairs=eR,A.functions=bU,A.functionsIn=vU,A.groupBy=oM,A.initial=rR,A.intersection=nR,A.intersectionBy=iR,A.intersectionWith=oR,A.invert=xU,A.invertBy=EU,A.invokeMap=aM,A.iteratee=iv,A.keyBy=uM,A.keys=dn,A.keysIn=ai,A.map=py,A.mapKeys=SU,A.mapValues=PU,A.matches=v7,A.matchesProperty=_7,A.memoize=yy,A.merge=DU,A.mergeWith=bS,A.method=x7,A.methodOf=E7,A.mixin=ov,A.negate=gy,A.nthArg=S7,A.omit=CU,A.omitBy=kU,A.once=AM,A.orderBy=cM,A.over=P7,A.overArgs=SM,A.overEvery=D7,A.overSome=C7,A.partial=Xb,A.partialRight=fS,A.partition=fM,A.pick=IU,A.pickBy=vS,A.property=DS,A.propertyOf=k7,A.pull=cR,A.pullAll=ZA,A.pullAllBy=fR,A.pullAllWith=lR,A.pullAt=hR,A.range=I7,A.rangeRight=T7,A.rearg=PM,A.reject=dM,A.remove=dR,A.rest=DM,A.reverse=Gb,A.sampleSize=mM,A.set=FU,A.setWith=BU,A.shuffle=yM,A.slice=pR,A.sortBy=bM,A.sortedUniq=_R,A.sortedUniqBy=xR,A.split=r7,A.spread=CM,A.tail=ER,A.take=AR,A.takeRight=SR,A.takeRightWhile=PR,A.takeWhile=DR,A.tap=zR,A.throttle=kM,A.thru=dy,A.toArray=mS,A.toPairs=_S,A.toPairsIn=xS,A.toPath=N7,A.toPlainObject=gS,A.transform=LU,A.unary=IM,A.union=CR,A.unionBy=kR,A.unionWith=IR,A.uniq=TR,A.uniqBy=FR,A.uniqWith=BR,A.unset=OU,A.unzip=Yb,A.unzipWith=eS,A.update=NU,A.updateWith=RU,A.values=hl,A.valuesIn=MU,A.without=LR,A.words=SS,A.wrap=TM,A.xor=OR,A.xorBy=NR,A.xorWith=RR,A.zip=MR,A.zipObject=UR,A.zipObjectDeep=KR,A.zipWith=$R,A.entries=_S,A.entriesIn=xS,A.extend=wS,A.extendWith=vy,ov(A,A),A.add=M7,A.attempt=PS,A.camelCase=zU,A.capitalize=ES,A.ceil=U7,A.clamp=UU,A.clone=BM,A.cloneDeep=OM,A.cloneDeepWith=NM,A.cloneWith=LM,A.conformsTo=RM,A.deburr=AS,A.defaultTo=g7,A.divide=K7,A.endsWith=jU,A.eq=Vo,A.escape=qU,A.escapeRegExp=HU,A.every=QR,A.find=eM,A.findIndex=YA,A.findKey=dU,A.findLast=tM,A.findLastIndex=JA,A.findLastKey=pU,A.floor=$7,A.forEach=rS,A.forEachRight=nS,A.forIn=mU,A.forInRight=yU,A.forOwn=gU,A.forOwnRight=wU,A.get=ev,A.gt=MM,A.gte=UM,A.has=_U,A.hasIn=tv,A.head=QA,A.identity=ui,A.includes=sM,A.indexOf=tR,A.inRange=KU,A.invoke=AU,A.isArguments=Oc,A.isArray=vt,A.isArrayBuffer=KM,A.isArrayLike=si,A.isArrayLikeObject=zr,A.isBoolean=$M,A.isBuffer=wu,A.isDate=zM,A.isElement=jM,A.isEmpty=qM,A.isEqual=HM,A.isEqualWith=WM,A.isError=Qb,A.isFinite=VM,A.isFunction=ga,A.isInteger=lS,A.isLength=wy,A.isMap=hS,A.isMatch=GM,A.isMatchWith=YM,A.isNaN=JM,A.isNative=XM,A.isNil=ZM,A.isNull=QM,A.isNumber=dS,A.isObject=Sr,A.isObjectLike=kr,A.isPlainObject=ld,A.isRegExp=Zb,A.isSafeInteger=eU,A.isSet=pS,A.isString=by,A.isSymbol=Ai,A.isTypedArray=ll,A.isUndefined=tU,A.isWeakMap=rU,A.isWeakSet=nU,A.join=sR,A.kebabCase=WU,A.last=lo,A.lastIndexOf=aR,A.lowerCase=VU,A.lowerFirst=GU,A.lt=iU,A.lte=oU,A.max=z7,A.maxBy=j7,A.mean=q7,A.meanBy=H7,A.min=W7,A.minBy=V7,A.stubArray=av,A.stubFalse=uv,A.stubObject=F7,A.stubString=B7,A.stubTrue=L7,A.multiply=G7,A.nth=uR,A.noConflict=A7,A.noop=sv,A.now=my,A.pad=YU,A.padEnd=JU,A.padStart=XU,A.parseInt=QU,A.random=$U,A.reduce=lM,A.reduceRight=hM,A.repeat=ZU,A.replace=e7,A.result=TU,A.round=Y7,A.runInContext=N,A.sample=pM,A.size=gM,A.snakeCase=t7,A.some=wM,A.sortedIndex=mR,A.sortedIndexBy=yR,A.sortedIndexOf=gR,A.sortedLastIndex=wR,A.sortedLastIndexBy=bR,A.sortedLastIndexOf=vR,A.startCase=n7,A.startsWith=i7,A.subtract=J7,A.sum=X7,A.sumBy=Q7,A.template=o7,A.times=O7,A.toFinite=wa,A.toInteger=xt,A.toLength=yS,A.toLower=s7,A.toNumber=ho,A.toSafeInteger=sU,A.toString=Wt,A.toUpper=a7,A.trim=u7,A.trimEnd=c7,A.trimStart=f7,A.truncate=l7,A.unescape=h7,A.uniqueId=R7,A.upperCase=d7,A.upperFirst=rv,A.each=rS,A.eachRight=nS,A.first=QA,ov(A,function(){var s={};return ks(A,function(u,f){Yt.call(A.prototype,f)||(s[f]=u)}),s}(),{chain:!1}),A.VERSION=e,so(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){A[s].placeholder=A}),so(["drop","take"],function(s,u){Ft.prototype[s]=function(f){f=f===r?1:nn(xt(f),0);var p=this.__filtered__&&!u?new Ft(this):this.clone();return p.__filtered__?p.__takeCount__=Bn(f,p.__takeCount__):p.__views__.push({size:Bn(f,en),type:s+(p.__dir__<0?"Right":"")}),p},Ft.prototype[s+"Right"]=function(f){return this.reverse()[s](f).reverse()}}),so(["filter","map","takeWhile"],function(s,u){var f=u+1,p=f==Bt||f==yr;Ft.prototype[s]=function(v){var P=this.clone();return P.__iteratees__.push({iteratee:it(v,3),type:f}),P.__filtered__=P.__filtered__||p,P}}),so(["head","last"],function(s,u){var f="take"+(u?"Right":"");Ft.prototype[s]=function(){return this[f](1).value()[0]}}),so(["initial","tail"],function(s,u){var f="drop"+(u?"":"Right");Ft.prototype[s]=function(){return this.__filtered__?new Ft(this):this[f](1)}}),Ft.prototype.compact=function(){return this.filter(ui)},Ft.prototype.find=function(s){return this.filter(s).head()},Ft.prototype.findLast=function(s){return this.reverse().find(s)},Ft.prototype.invokeMap=Pt(function(s,u){return typeof s=="function"?new Ft(this):this.map(function(f){return od(f,s,u)})}),Ft.prototype.reject=function(s){return this.filter(gy(it(s)))},Ft.prototype.slice=function(s,u){s=xt(s);var f=this;return f.__filtered__&&(s>0||u<0)?new Ft(f):(s<0?f=f.takeRight(-s):s&&(f=f.drop(s)),u!==r&&(u=xt(u),f=u<0?f.dropRight(-u):f.take(u-s)),f)},Ft.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Ft.prototype.toArray=function(){return this.take(en)},ks(Ft.prototype,function(s,u){var f=/^(?:filter|find|map|reject)|While$/.test(u),p=/^(?:head|last)$/.test(u),v=A[p?"take"+(u=="last"?"Right":""):u],P=p||/^find/.test(u);!v||(A.prototype[u]=function(){var I=this.__wrapped__,L=p?[1]:arguments,M=I instanceof Ft,se=L[0],ae=M||vt(I),he=function(kt){var Ot=v.apply(A,fu([kt],L));return p&&Pe?Ot[0]:Ot};ae&&f&&typeof se=="function"&&se.length!=1&&(M=ae=!1);var Pe=this.__chain__,Ge=!!this.__actions__.length,st=P&&!Pe,Et=M&&!Ge;if(!P&&ae){I=Et?I:new Ft(this);var at=s.apply(I,L);return at.__actions__.push({func:dy,args:[he],thisArg:r}),new uo(at,Pe)}return st&&Et?s.apply(this,L):(at=this.thru(he),st?p?at.value()[0]:at.value():at)})}),so(["pop","push","shift","sort","splice","unshift"],function(s){var u=Um[s],f=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",p=/^(?:pop|shift)$/.test(s);A.prototype[s]=function(){var v=arguments;if(p&&!this.__chain__){var P=this.value();return u.apply(vt(P)?P:[],v)}return this[f](function(I){return u.apply(vt(I)?I:[],v)})}}),ks(Ft.prototype,function(s,u){var f=A[u];if(f){var p=f.name+"";Yt.call(sl,p)||(sl[p]=[]),sl[p].push({name:u,func:f})}}),sl[sy(r,O).name]=[{name:"wrapper",func:r}],Ft.prototype.clone=hN,Ft.prototype.reverse=dN,Ft.prototype.value=pN,A.prototype.at=jR,A.prototype.chain=qR,A.prototype.commit=HR,A.prototype.next=WR,A.prototype.plant=GR,A.prototype.reverse=YR,A.prototype.toJSON=A.prototype.valueOf=A.prototype.value=JR,A.prototype.first=A.prototype.head,Qh&&(A.prototype[Qh]=VR),A},hu=HO();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(hn._=hu,define(function(){return hu})):Dc?((Dc.exports=hu)._=hu,ib._=hu):hn._=hu}).call(Fh)});var VB=ee(Zn=>{"use strict";var VY=Zn&&Zn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bh=Zn&&Zn.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Lh=Zn&&Zn.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},z2=Zn&&Zn.__param||function(r,e){return function(t,n){e(t,n,r)}},GY=Zn&&Zn.__generator||function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(h){return function(m){return l([h,m])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(r,t)}catch(m){h=[6,m],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},WB=Zn&&Zn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zn,"__esModule",{value:!0});var YY=WB(Es()),j2=WB(K2()),eu=Hi(),JY=F0(),q2=function(){function r(){this._content=[]}return Object.defineProperty(r.prototype,"length",{get:function(){return this._content.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"content",{get:function(){return this._content},set:function(e){this._content=e},enumerable:!0,configurable:!0}),r.prototype.get=function(e){return this._content[e]},r.prototype.add=function(e){var t=JY.sortedIndexBy(this._content,e,function(n){return n.frequency});this._content.splice(t,0,e)},r.prototype.remove=function(e){this._content.splice(e,1)},r.prototype.popMin=function(){return this._content.shift()},r.prototype.indexOf=function(e){return this._content.findIndex(function(t){return t.value===e})},r.prototype.clear=function(){this._content=[]},r}(),XY=function(r){VY(e,r);function e(t,n,i){var o=r.call(this)||this;return o._k=t,o._errorRate=n,o._accuracy=i,o._sketch=j2.default.create(n,i),o._heap=new q2,o}return e.prototype.add=function(t){this._sketch.update(t);var n=this._sketch.count(t);if(this._heap.length<this._k||n>=this._heap.get(0).frequency){var i=this._heap.indexOf(t);i>-1&&this._heap.remove(i),this._heap.add({value:t,frequency:n}),this._heap.length>this._k&&this._heap.popMin()}},e.prototype.clear=function(){this._sketch=j2.default.create(this._errorRate,this._accuracy),this._heap.clear()},e.prototype.values=function(){for(var t=[],n=this._heap.length-1;n>=0;n--){var i=this._heap.get(n);t.push({value:i.value,frequency:i.frequency,rank:this._heap.length-n})}return t},e.prototype.iterator=function(){var t=this._heap;return function(){var n,i;return GY(this,function(o){switch(o.label){case 0:n=t.length-1,o.label=1;case 1:return n>=0?(i=t.get(n),[4,{value:i.value,frequency:i.frequency,rank:t.length-n}]):[3,4];case 2:o.sent(),o.label=3;case 3:return n--,[3,1];case 4:return[2]}})}()},Bh([eu.Field(),Lh("design:type",Number)],e.prototype,"_k",void 0),Bh([eu.Field(),Lh("design:type",Number)],e.prototype,"_errorRate",void 0),Bh([eu.Field(),Lh("design:type",Number)],e.prototype,"_accuracy",void 0),Bh([eu.Field(),Lh("design:type",j2.default)],e.prototype,"_sketch",void 0),Bh([eu.Field(function(t){return t.content},function(t){var n=new q2;return n.content=t,n}),Lh("design:type",q2)],e.prototype,"_heap",void 0),e=Bh([eu.AutoExportable("TopK",["_seed"]),z2(0,eu.Parameter("_k")),z2(1,eu.Parameter("_errorRate")),z2(2,eu.Parameter("_accuracy")),Lh("design:paramtypes",[Number,Number,Number])],e),e}(YY.default);Zn.default=XY});var H2=ee(kn=>{"use strict";var JB=kn&&kn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),B0=kn&&kn.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},L0=kn&&kn.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},GB=kn&&kn.__param||function(r,e){return function(t,n){e(t,n,r)}},QY=kn&&kn.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},ZY=kn&&kn.__spread||function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(QY(arguments[e]));return r},eJ=kn&&kn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(kn,"__esModule",{value:!0});var tJ=eJ(Es()),Oh=Hi(),rJ=Lo(),nJ=F0(),iJ=function(r){JB(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Error);function YB(r,e){return(e.a*r+e.b)%e.c}var oJ=function(r){JB(e,r);function e(t,n){var i=r.call(this)||this;return i._nbHashes=t,i._hashFunctions=n,i._signature=rJ.allocateArray(i._nbHashes,1/0),i}return Object.defineProperty(e.prototype,"nbHashes",{get:function(){return this._nbHashes},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this._signature[0]===1/0},e.prototype.add=function(t){for(var n=0;n<this._nbHashes;n++)this._signature[n]=Math.min(this._signature[n],YB(t,this._hashFunctions[n]))},e.prototype.bulkLoad=function(t){for(var n=this,i=function(c){var l=t.map(function(h){return YB(h,n._hashFunctions[c])});o._signature[c]=Math.min.apply(Math,ZY([o._signature[c]],l))},o=this,a=0;a<this._nbHashes;a++)i(a)},e.prototype.compareWith=function(t){if(this.isEmpty()||t.isEmpty())throw new iJ("Cannot compute a Jaccard similairty with a MinHash that contains no values");return nJ.intersection(this._signature,t._signature).length/this._nbHashes},B0([Oh.Field(),L0("design:type",Number)],e.prototype,"_nbHashes",void 0),B0([Oh.Field(),L0("design:type",Array)],e.prototype,"_hashFunctions",void 0),B0([Oh.Field(),L0("design:type",Array)],e.prototype,"_signature",void 0),e=B0([Oh.AutoExportable("MinHash",["_seed"]),GB(0,Oh.Parameter("_nbHashes")),GB(1,Oh.Parameter("_hashFunctions")),L0("design:paramtypes",[Number,Array])],e),e}(tJ.default);kn.MinHash=oJ});var QB=ee(W2=>{"use strict";Object.defineProperty(W2,"__esModule",{value:!0});var sJ=H2(),XB=F0();function aJ(r){if(r!==2&&r%2===0)return!1;for(var e=2;e<Math.sqrt(r);e++)if(r%e===0)return!1;return!0}function uJ(r){for(var e=0;;){if(aJ(r+e))return r+e;e++}}var cJ=function(){function r(e,t){this._nbHashes=e,this._maxValue=t,this._hashFunctions=[];for(var n=uJ(this._maxValue),i=0;i<this._nbHashes;i++){var o=XB.random(0,this._maxValue,!1),a=XB.random(0,this._maxValue,!1);this._hashFunctions.push({a:o,b:a,c:n})}}return r.prototype.create=function(){return new sJ.MinHash(this._nbHashes,this._hashFunctions)},r}();W2.default=cJ});var eL=ee((sde,ZB)=>{function fJ(r,e){return r===e||r!==r&&e!==e}ZB.exports=fJ});var oL=ee((ade,iL)=>{var tL=1/0,lJ=17976931348623157e292,rL=0/0,hJ="[object Symbol]",dJ=/^\s+|\s+$/g,pJ=/^[-+]0x[0-9a-f]+$/i,mJ=/^0b[01]+$/i,yJ=/^0o[0-7]+$/i,gJ=parseInt;function wJ(r,e,t,n){for(var i=r.length,o=t+(n?1:-1);n?o--:++o<i;)if(e(r[o],o,r))return o;return-1}function bJ(r,e,t){if(e!==e)return wJ(r,vJ,t);for(var n=t-1,i=r.length;++n<i;)if(r[n]===e)return n;return-1}function vJ(r){return r!==r}var _J=Object.prototype,xJ=_J.toString,EJ=Math.max;function AJ(r,e,t){var n=r?r.length:0;if(!n)return-1;var i=t==null?0:CJ(t);return i<0&&(i=EJ(n+i,0)),bJ(r,e,i)}function nL(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function SJ(r){return!!r&&typeof r=="object"}function PJ(r){return typeof r=="symbol"||SJ(r)&&xJ.call(r)==hJ}function DJ(r){if(!r)return r===0?r:0;if(r=kJ(r),r===tL||r===-tL){var e=r<0?-1:1;return e*lJ}return r===r?r:0}function CJ(r){var e=DJ(r),t=e%1;return e===e?t?e-t:e:0}function kJ(r){if(typeof r=="number")return r;if(PJ(r))return rL;if(nL(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=nL(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(dJ,"");var t=mJ.test(r);return t||yJ.test(r)?gJ(r.slice(2),t?2:8):pJ.test(r)?rL:+r}iL.exports=AJ});var uL=ee(As=>{"use strict";var IJ=As&&As.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},TJ=As&&As.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},aL=As&&As.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},FJ=As&&As.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e};Object.defineProperty(As,"__esModule",{value:!0});var BJ=aL(eL()),V2=aL(oL()),sL=FJ(Lo()),LJ=Hi(),OJ=Hi(),NJ=function(){function r(t){this._elements=sL.allocateArray(t,null),this._size=t,this._length=0}e=r,Object.defineProperty(r.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),r.prototype.isFree=function(){return this._length<this._size},r.prototype.nextEmptySlot=function(){return V2.default(this._elements,null)},r.prototype.at=function(t){return this._elements[t]},r.prototype.add=function(t){return t===null||!this.isFree()?!1:(this.set(this.nextEmptySlot(),t),this._length++,!0)},r.prototype.remove=function(t){var n=V2.default(this._elements,t);return n<=-1?!1:(this.unset(n),!0)},r.prototype.has=function(t){return V2.default(this._elements,t)>-1},r.prototype.set=function(t,n){this._elements[t]=n},r.prototype.unset=function(t){this._elements[t]=null,this._length--},r.prototype.swapRandom=function(t,n){n===void 0&&(n=Math.random);var i=sL.randomInt(0,this._length-1,n),o=this._elements[i];return this._elements[i]=t,o},r.prototype.swap=function(t,n){var i=this._elements[t];return this._elements[t]=n,i},r.prototype.equals=function(t){return this._size!==t.size||this._length!==t.length?!1:this._elements.every(function(n,i){return BJ.default(t.at(i),n)})};var e;return r=e=IJ([LJ.Exportable({export:OJ.cloneObject("Bucket","_size","_elements"),import:function(t){if(t.type!=="Bucket"||"_size"in t,!("_elements"in t))throw new Error("Cannot create a Bucket from a JSON export which does not represent a bucket");var n=new e(t._size);return t._elements.forEach(function(i,o){i!==null&&(n._elements[o]=i,n._length++)}),n}}),TJ("design:paramtypes",[Number])],r),r}();As.default=NJ});var hL=ee(Ss=>{"use strict";var RJ=Ss&&Ss.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),MJ=Ss&&Ss.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},UJ=Ss&&Ss.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},lL=Ss&&Ss.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ss,"__esModule",{value:!0});var KJ=lL(Es()),cL=lL(uL()),fL=Hi(),Pm=Lo();function $J(r,e){var t=Math.ceil(Math.log2(1/e)+Math.log2(2*r));return Math.ceil(t/4)}var zJ=function(r){RJ(e,r);function e(n,i,o,a){a===void 0&&(a=500);var c=r.call(this)||this;return c._filter=Pm.allocateArray(n,function(){return new cL.default(o)}),c._size=n,c._bucketSize=o,c._fingerprintLength=i,c._length=0,c._maxKicks=a,c}t=e,e.create=function(n,i,o,a){o===void 0&&(o=4),a===void 0&&(a=500);var c=$J(o,i),l=Math.ceil(n/o/.955);return new t(l,c,o,a)},e.from=function(n,i,o,a){o===void 0&&(o=4),a===void 0&&(a=500);var c=Array.from(n),l=t.create(c.length,i,o,a);return c.forEach(function(h){return l.add(h)}),l},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullSize",{get:function(){return this.size*this.bucketSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fingerprintLength",{get:function(){return this._fingerprintLength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucketSize",{get:function(){return this._bucketSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxKicks",{get:function(){return this._maxKicks},enumerable:!0,configurable:!0}),e.prototype.add=function(n,i,o){i===void 0&&(i=!1),o===void 0&&(o=!1);var a=this._locations(n);if(this._filter[a.firstIndex].isFree())this._filter[a.firstIndex].add(a.fingerprint);else if(this._filter[a.secondIndex].isFree())this._filter[a.secondIndex].add(a.fingerprint);else{for(var c=this.random()<.5?a.firstIndex:a.secondIndex,l=a.fingerprint,h=[],m=0;m<this._maxKicks;m++){var y=Pm.randomInt(0,this._filter[c].length-1,this.random),E=this._filter[c].at(y);h.push([c,y,E]),this._filter[c].set(y,l),l=E;var k=Pm.hashAsInt(l,this.seed,64);if(c=Math.abs(c^Math.abs(k))%this._filter.length,this._filter[c].isFree())return this._filter[c].add(l),this._length++,!0}if(!o)for(var T=h.length-1;T>=0;T--){var O=h[T];this._filter[O[0]].set(O[1],O[2])}if(i)throw new Error('The Cuckoo Filter is full, cannot insert element "'+n+'"');return!1}return this._length++,!0},e.prototype.remove=function(n){var i=this._locations(n);return this._filter[i.firstIndex].has(i.fingerprint)?(this._filter[i.firstIndex].remove(i.fingerprint),this._length--,!0):this._filter[i.secondIndex].has(i.fingerprint)?(this._filter[i.secondIndex].remove(i.fingerprint),this._length--,!0):!1},e.prototype.has=function(n){var i=this._locations(n);return this._filter[i.firstIndex].has(i.fingerprint)||this._filter[i.secondIndex].has(i.fingerprint)},e.prototype.rate=function(){var n=this._computeHashTableLoad(),i=this._fingerprintLength/n.load;return Math.pow(2,Math.log2(2*this._bucketSize)-n.load*i)},e.prototype._computeHashTableLoad=function(){var n=this._filter.length*this._bucketSize,i=this._filter.reduce(function(o,a){return o+a.length},0);return{used:i,free:n-i,size:n,load:i/n}},e.prototype._locations=function(n){var i=Pm.hashIntAndString(n,this.seed,16,64),o=i.int;if(this._fingerprintLength>i.string.length)throw new Error("The fingerprint length ("+this._fingerprintLength+") is higher than the hash length ("+i.string.length+"). Please reduce the fingerprint length or report if it is an unexpected behavior.");var a=i.string.substring(0,this._fingerprintLength),c=Math.abs(o),l=Math.abs(Pm.hashAsInt(a,this.seed,64)),h=Math.abs(c^l),m={fingerprint:a,firstIndex:c%this._size,secondIndex:h%this._size};return m},e.prototype.equals=function(n){for(var i=0,o=!0;o&&i<this._filter.length;){var a=this._filter[i];n._filter[i].equals(a)||(o=!1),i++}return o};var t;return e=t=MJ([fL.Exportable({export:fL.cloneObject("CuckooFilter","_size","_fingerprintLength","_length","_maxKicks","_filter","_seed"),import:function(n){if(n.type!=="CuckooFilter"||!("_size"in n)||!("_fingerprintLength"in n)||!("_length"in n)||!("_maxKicks"in n)||!("_filter"in n)||!("_seed"in n))throw new Error("Cannot create a CuckooFilter from a JSON export which does not represent a cuckoo filter");var i=new t(n._size,n._fingerprintLength,n._bucketSize,n._maxKicks);return i._length=n._length,i._filter=n._filter.map(function(o){var a=new cL.default(o._size);return o._elements.forEach(function(c,l){c!==null&&(a._elements[l]=c,a._length++)}),a}),i.seed=n.seed,i}}),UJ("design:paramtypes",[Number,Number,Number,Number])],e),e}(KJ.default);Ss.default=zJ});var Y2=ee(Ji=>{"use strict";var jJ=Ji&&Ji.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),O0=Ji&&Ji.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},N0=Ji&&Ji.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},G2=Ji&&Ji.__param||function(r,e){return function(t,n){e(t,n,r)}},qJ=Ji&&Ji.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ji,"__esModule",{value:!0});var Wf=vf(),Dm=Lo(),Vf=Hi(),HJ=qJ(Es()),WJ=Symbol.for("nodejs.util.inspect.custom"),VJ=function(r){jJ(e,r);function e(n,i,o){var a=r.call(this)||this;return a._idSum=n,a._hashSum=i,a._count=o,a}t=e,e.empty=function(){return new t(Wf.Buffer.allocUnsafe(0).fill(0),Wf.Buffer.allocUnsafe(0).fill(0),0)},e.prototype[WJ]=function(){return"Cell:<"+JSON.stringify(this._idSum.toJSON().data)+", "+JSON.stringify(this._hashSum.toJSON().data)+", "+this._count+">"},Object.defineProperty(e.prototype,"idSum",{get:function(){return this._idSum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hashSum",{get:function(){return this._hashSum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.add=function(n,i){this._idSum=Dm.xorBuffer(this._idSum,n),this._hashSum=Dm.xorBuffer(this._hashSum,i),this._count++},e.prototype.xorm=function(n){return new t(Dm.xorBuffer(this._idSum,n.idSum),Dm.xorBuffer(this._hashSum,n.hashSum),this._count-n.count)},e.prototype.isEmpty=function(){return this._idSum.equals(Wf.Buffer.from(""))&&this._hashSum.equals(Wf.Buffer.from(""))&&this._count===0},e.prototype.equals=function(n){return this._count===n.count&&this._idSum.equals(n.idSum)&&this._hashSum.equals(n.hashSum)},e.prototype.isPure=function(){if(this.isEmpty()||this._count!==1&&this._count!==-1)return!1;var n=Dm.hashTwiceAsString(JSON.stringify(this._idSum.toJSON()),this.seed);return this._hashSum.equals(Wf.Buffer.from(n.first))};var t;return O0([Vf.Field(function(n){return n.toString()},Wf.Buffer.from),N0("design:type",Object)],e.prototype,"_idSum",void 0),O0([Vf.Field(function(n){return n.toString()},Wf.Buffer.from),N0("design:type",Object)],e.prototype,"_hashSum",void 0),O0([Vf.Field(),N0("design:type",Number)],e.prototype,"_count",void 0),e=t=O0([Vf.AutoExportable("Cell",["_seed"]),G2(0,Vf.Parameter("_idSum")),G2(1,Vf.Parameter("_hashSum")),G2(2,Vf.Parameter("_count")),N0("design:paramtypes",[Object,Object,Number])],e),e}(HJ.default);Ji.default=VJ});var gL=ee(ei=>{"use strict";var GJ=ei&&ei.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),R0=ei&&ei.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},M0=ei&&ei.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},dL=ei&&ei.__param||function(r,e){return function(t,n){e(t,n,r)}},pL=ei&&ei.__generator||function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(h){return function(m){return l([h,m])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(r,t)}catch(m){h=[6,m],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},yL=ei&&ei.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ei,"__esModule",{value:!0});var Gf=vf(),YJ=yL(Es()),U0=yL(Y2()),Nh=Hi(),tu=Lo(),mL=D0(),JJ=function(r){GJ(e,r);function e(n,i){i===void 0&&(i=3);var o=r.call(this)||this;if(Gf.Buffer===void 0)throw new Error('No native Buffer implementation bound in your JavaScript env. If you are in a Web browser, consider importing the polyfill "feross/buffer" (https://github.com/feross/buffer).');if(i<=0)throw new Error("The hashCount must be a non-zero, positive integer");return o._size=n,o._hashCount=i,o._elements=tu.allocateArray(o._size,function(){return U0.default.empty()}),o}t=e,e.create=function(n,i){var o=mL.optimalFilterSize(n,i),a=mL.optimalHashes(o,n);return new t(o,a)},e.from=function(n,i){var o=Array.from(n),a=t.create(o.length,i);return o.forEach(function(c){return a.add(c)}),a},Object.defineProperty(e.prototype,"hashCount",{get:function(){return this._hashCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._elements.reduce(function(n,i){return n+i.count},0)/this._hashCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),e.prototype.add=function(n){for(var i=tu.allInOneHashTwice(JSON.stringify(n.toJSON()),this.seed),o=tu.getDistinctIndices(i.string.first,this._size,this._hashCount,this.seed),a=0;a<this._hashCount;++a)this._elements[o[a]].add(n,Gf.Buffer.from(i.string.first))},e.prototype.remove=function(n){for(var i=tu.allInOneHashTwice(JSON.stringify(n.toJSON()),this.seed),o=tu.getDistinctIndices(i.string.first,this.size,this._hashCount,this.seed),a=0;a<this._hashCount;++a)this._elements[o[a]]=this._elements[o[a]].xorm(new U0.default(Gf.Buffer.from(n),Gf.Buffer.from(i.string.first),1));return!0},e.prototype.has=function(n){for(var i=tu.allInOneHashTwice(JSON.stringify(n.toJSON()),this.seed),o=tu.getDistinctIndices(i.string.first,this.size,this._hashCount,this.seed),a=0;a<this._hashCount;++a){if(this._elements[o[a]].count===0)return!1;if(this._elements[o[a]].count===1)return!!this._elements[o[a]].idSum.equals(n)}return!0},e.prototype.listEntries=function(){var n=this,i=[];return function(){var o,a,c;return pL(this,function(l){switch(l.label){case 0:o=function(h){var m;return pL(this,function(y){switch(y.label){case 0:return m=n._elements[h],m.count>0&&i.findIndex(function(E){return E.equals(m.idSum)})===-1?n.has(m.idSum)?(i.push(m.idSum),[4,m.idSum]):[3,2]:[3,3];case 1:return y.sent(),[3,3];case 2:return[2,{value:!1}];case 3:return[2]}})},a=0,l.label=1;case 1:return a<n._elements.length-1?[5,o(a)]:[3,4];case 2:if(c=l.sent(),typeof c=="object")return[2,c.value];l.label=3;case 3:return a++,[3,1];case 4:return[2,!0]}})}()},e.prototype.substract=function(n){if(this.size!==n.size)throw new Error("The two Invertible Bloom Filters must be of the same size");var i=new t(n._size,n._hashCount);i.seed=this.seed;for(var o=0;o<this.size;++o)i._elements[o]=this._elements[o].xorm(n._elements[o]);return i},e.prototype.equals=function(n){if(n._size!==this._size||n._hashCount!==this._hashCount||n.seed!==this.seed)return!1;for(var i=0;i<n._elements.length;++i)if(!n._elements[i].equals(this._elements[i]))return!1;return!0},e.prototype.decode=function(n,i){n===void 0&&(n=[]),i===void 0&&(i=[]);for(var o=[],a=null,c=0;c<this._elements.length;++c)a=this._elements[c],a.isPure()&&o.push(c);for(;o.length!==0;){a=this._elements[o.pop()];var l=a.idSum,h=a.count;if(a.isPure()){if(h===1)n.push(l);else if(h===-1)i.push(l);else throw new Error("Please report, not possible");for(var m=tu.allInOneHashTwice(JSON.stringify(l.toJSON()),this.seed),y=tu.getDistinctIndices(m.string.first,this._size,this._hashCount,this.seed),c=0;c<y.length;++c)this._elements[y[c]]=this._elements[y[c]].xorm(new U0.default(l,Gf.Buffer.from(m.string.first),h)),this._elements[y[c]].isPure()&&o.push(y[c])}}return this._elements.findIndex(function(E){return!E.isEmpty()})>-1?{success:!1,reason:{cell:a,iblt:this},additional:n,missing:i}:{success:!0,additional:n,missing:i}};var t;return R0([Nh.Field(),M0("design:type",Number)],e.prototype,"_size",void 0),R0([Nh.Field(),M0("design:type",Number)],e.prototype,"_hashCount",void 0),R0([Nh.Field(void 0,function(n){return n.map(function(i){var o=new U0.default(Gf.Buffer.from(i._idSum),Gf.Buffer.from(i._hashSum),i._count);return o.seed=i._seed,o})}),M0("design:type",Array)],e.prototype,"_elements",void 0),e=t=R0([Nh.AutoExportable("InvertibleBloomFilter",["_seed"]),dL(0,Nh.Parameter("_size")),dL(1,Nh.Parameter("_hashCount")),M0("design:paramtypes",[Number,Number])],e),e}(YJ.default);ei.default=JJ});var wL=ee(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});var XJ=MB();Xi.BloomFilter=XJ.default;var QJ=$B();Xi.CountingBloomFilter=QJ.default;var ZJ=zB();Xi.PartitionedBloomFilter=ZJ.default;var eX=K2();Xi.CountMinSketch=eX.default;var tX=HB();Xi.HyperLogLog=tX.default;var rX=VB();Xi.TopK=rX.default;var nX=H2();Xi.MinHash=nX.MinHash;var iX=QB();Xi.MinHashFactory=iX.default;var oX=hL();Xi.CuckooFilter=oX.default;var sX=gL();Xi.InvertibleBloomFilter=sX.default;var aX=Y2();Xi.Cell=aX.default});var tZ={};Re(tZ,{AppScenario:()=>y8,InitialisationError:()=>fg,Scenario:()=>s8,VERSION:()=>Oy,WASM_WNFS_VERSION:()=>Ny,account:()=>g8,app:()=>QQ,apps:()=>w8,authenticatedUsername:()=>BQ,bootstrapFileSystem:()=>Q0,bootstrapRootFileSystem:()=>GX,checkFileSystemVersion:()=>VL,crypto:()=>an,dataRoot:()=>Xc,did:()=>Vn,dns:()=>bu,errors:()=>o8,fs:()=>eZ,initialise:()=>ZQ,initialize:()=>ZQ,ipfs:()=>Ja,isSupported:()=>v8,keystore:()=>Ld,leave:()=>LQ,loadFileSystem:()=>Zf,loadRootFileSystem:()=>VX,lobby:()=>f8,machinery:()=>ts,path:()=>yn,permissionedApp:()=>ZQ,readKey:()=>YL,redirectToLobby:()=>OQ,setup:()=>u8,ucan:()=>qs});var b8=Ie(hd(),1);var dd=Ie(hd(),1);var TS=typeof self<"u"&&typeof self.location=="object",Sn=r=>{if(!TS)throw new Error(`Must be in browser to use method. Provide a node-compatible implementation for ${r}`)};var iK=r=>(Sn("storage.getItem"),dd.default.getItem(r)),oK=(r,e)=>(Sn("storage.setItem"),dd.default.setItem(r,e)),sK=r=>(Sn("storage.removeItem"),dd.default.removeItem(r)),aK=()=>(Sn("storage.clear"),dd.default.clear()),FS={getItem:iK,setItem:oK,removeItem:sK,clear:aK};var dl=FS;function BS(r){dl={...dl,...r}}var wr=r=>dl.getItem(r),on=(r,e)=>dl.setItem(r,e),pl=r=>dl.removeItem(r);var xy=(r,e,t)=>({major:r,minor:e,patch:t}),ml=r=>{let e=r.split(".").map(t=>parseInt(t));return e.length!==3||e.some(t=>typeof t!="number")?null:{major:e[0],minor:e[1],patch:e[2]}},va=r=>{let{major:e,minor:t,patch:n}=r;return`${e}.${t}.${n}`},LS=(r,e)=>r.major===e.major&&r.minor===e.minor&&r.patch===e.patch,OS=(r,e)=>r.major!=e.major?r.major<e.major:r.minor!=e.minor?r.minor<e.minor:r.patch<e.patch,cK=(r,e)=>OS(e,r),NS=r=>OS(r,Hn)?"too-low":cK(r,Rc)?"too-high":!0,RS=xy(0,0,0),uZ=xy(1,0,0),Hn=xy(2,0,0),Rc=xy(3,0,0),fv=[Hn,Rc];var ke={debug:!1,endpoints:{api:"https://runfission.com",apiVersion:"v2",apiUrl:null,lobby:"https://auth.fission.codes",user:"fission.name"},getApiEndpoint:()=>ke.endpoints.apiUrl?ke.endpoints.apiUrl:`${ke.endpoints.api}/${ke.endpoints.apiVersion}/api`,userMessages:{versionMismatch:{newer:async()=>MS(`Sorry, we can't sync your filesystem with this app. This app only understands older versions of filesystems.

Please try to hard refresh this site or let this app's developer know.

Feel free to contact Fission support: support@fission.codes`),older:async()=>MS(`Sorry, we can't sync your filesystem with this app. Your filesystem version is out-dated and it needs to be migrated.

Run a migration (https://guide.fission.codes/accounts/account-signup/account-migration) or talk to Fission support: support@fission.codes`)}},shouldPin:!1,fsVersion:va(Hn),wnfsWasmLookup:r=>fetch(`https://unpkg.com/wnfs@${r}/wasm_wnfs_bg.wasm`)};function MS(r){globalThis.alert!=null&&globalThis.alert(r)}var fK="webnative.wnfs_cid_log";function lv(){return fK+"-"+ke.endpoints.lobby}async function hv(){return await wr(lv())||[]}async function US(r){let e=await hv();return[e.indexOf(r),e.length]}async function Jo(){return(await hv())[0]}async function pd(r){let e=await hv(),t=[r,...e].slice(0,1e3);await on(lv(),t)}async function Ey(){await pl(lv())}var ts={};Re(ts,{UCANS_STORAGE_KEY:()=>xl,USERNAME_STORAGE_KEY:()=>Os,VERSION:()=>Oy,WASM_WNFS_VERSION:()=>Ny,api:()=>Di,arrContains:()=>A$,arrbufs:()=>gd,assertBrowser:()=>Sn,asyncWaterfall:()=>S$,authenticatedUserDomain:()=>Pd,authenticatedUsername:()=>mn,base64:()=>yo,blob:()=>vl,decodeCID:()=>De,encodeCID:()=>_$,hasProp:()=>Rt,isBlob:()=>Hv,isBool:()=>Ly,isBrowser:()=>TS,isDefined:()=>Fy,isJust:()=>By,isNum:()=>es,isObject:()=>Xe,isString:()=>rr,isValue:()=>qv,mapObj:()=>Wv,mapObjAsync:()=>E$,notNull:()=>_l,removeKeyFromObj:()=>Sd,updateOrRemoveKeyFromObj:()=>x$});var Di={};Re(Di,{did:()=>mK});var bu={};Re(bu,{lookupDnsLink:()=>Mc,lookupTxtRecord:()=>yd});async function KS(r){return Promise.any([lK(r),hK(r)])}async function lK(r){return $S(`https://dns.google/resolve?name=${r}&type=txt`)}function hK(r){return $S(`https://cloudflare-dns.com/dns-query?name=${r}&type=txt`)}function $S(r){return fetch(r,{headers:{accept:"application/dns-json"}}).then(e=>e.json()).then(e=>{if(e.Answer){let t=e.Answer.map(n=>(n.data||"").replace(/^"+|"+$/g,""));return t[0][3]===";"?t.sort((n,i)=>n.slice(0,4).localeCompare(i.slice(0,4))).map(n=>n.slice(4)).join(""):t.join("")}else return null})}async function dK(r){let e=await KS(r.startsWith("_dnslink.")?r:`_dnslink.${r}`);return e&&!e.includes("/ipns/")?e.replace(/^dnslink=/,"").replace(/^\/ipfs\//,""):null}var zS={dns:{lookupDnsLink:dK,lookupTxtRecord:KS}};var md=zS.dns;function jS(r){md={...md,...r}}var yd=async r=>md.lookupTxtRecord(r),Mc=async r=>md.lookupDnsLink(r);var Uc={did:null,host:null,lastFetched:0};async function mK(){let r;try{r=new URL(ke.getApiEndpoint()).host}catch{throw new Error("Unable to parse API Endpoint")}let e=Date.now();if((Uc.host!==r||Uc.lastFetched+1e3*60*60*3<=e)&&(Uc.did=await yd("_did."+r),Uc.host=r,Uc.lastFetched=e),!Uc.did)throw new Error("Couldn't get the Fission API DID");return Uc.did}var gd={};Re(gd,{equal:()=>yK});var yK=(r,e)=>{let t=new Uint8Array(r),n=new Uint8Array(e);if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==n[i])return!1;return!0};var yo={};Re(yo,{decode:()=>bP,encode:()=>vP,makeUrlSafe:()=>_P,makeUrlUnsafe:()=>xP,urlDecode:()=>v$,urlEncode:()=>zv});function dv(r,e){for(let t=0;t<r.byteLength;t++){if(r[t]<e[t])return-1;if(r[t]>e[t])return 1}return r.byteLength>e.byteLength?1:r.byteLength<e.byteLength?-1:0}Kc();wd();mo();Dn();function bP(r){return Ze(wt(r,"base64pad"))}function vP(r){return Ze(wt(r),"base64pad")}function v$(r){return bP(xP(r))}function zv(r){return _P(vP(r))}function _P(r){return r.replace(/\//g,"_").replace(/\+/g,"-").replace(/=+$/,"")}function xP(r){return r.replace(/_/g,"/").replace(/-/g,"+")}var vl={};Re(vl,{toUint8Array:()=>jv});var jv=async r=>new Promise((e,t)=>{let n=()=>t(new Error("Failed to read file")),i=new FileReader;i.addEventListener("load",o=>{let a=o?.target?.result||null;if(a==null){n();return}if(typeof a=="string"){e(wt(a));return}e(new Uint8Array(a))}),i.addEventListener("error",()=>i.abort()),i.addEventListener("abort",n),i.readAsArrayBuffer(r)});ur();function De(r){let e=we.asCID(r);if(e)return e;if(typeof r=="string")return we.parse(r);if(typeof r=="object"&&"version"in r&&"code"in r&&"multihash"in r)return we.create(r.version,r.code,r.multihash);throw new Error(`Could not decode CID: ${r}`)}function _$(r){return r.toString()}function Rt(r,e){return typeof r=="object"&&r!=null&&e in r}var Fy=r=>r!==void 0,_l=r=>r!==null,By=_l,qv=r=>Fy(r)&&_l(r),Ly=r=>typeof r=="boolean",es=r=>typeof r=="number",rr=r=>typeof r=="string",Xe=r=>r!==null&&typeof r=="object",Hv=r=>typeof Blob>"u"?!1:r instanceof Blob||Xe(r)&&r?.constructor?.name==="Blob";var Sd=(r,e)=>{let{[e]:t,...n}=r;return n},x$=(r,e,t)=>t===null?Sd(r,e):{...r,[e]:t},Wv=(r,e)=>{let t={};return Object.entries(r).forEach(([n,i])=>{t[n]=e(i,n)}),t},E$=async(r,e)=>{let t={};return await Promise.all(Object.entries(r).map(async([n,i])=>{t[n]=await e(i,n)})),t},A$=(r,e)=>r.indexOf(e)>-1,S$=async(r,e)=>{let t=r;for(let n=0;n<e.length;n++)t=await e[n](t);return t};var Oy="0.34.1",Ny="^0.1.7-alpha5";var xl="webnative.auth_ucans",Os="webnative.auth_username";async function mn(){return wr(Os).then(r=>r||null)}async function Pd({withFiles:r}={}){let e=await mn();return e?e+"."+(r?"files.":"")+ke.endpoints.user:null}var Xc={};Re(Xc,{lookup:()=>Hs,lookupOnFisson:()=>_6,update:()=>I_});function Vr(...r){ke.debug&&console.log(...r)}function EP(...r){ke.debug&&console.warn(...r)}var Vn={};Re(Vn,{KeyType:()=>Od,didToPublicKey:()=>Yc,exchange:()=>Ca,ownRoot:()=>x_,publicKeyToDid:()=>Dl,root:()=>Ti,ucan:()=>jt,verifySignedData:()=>__,write:()=>jt});var Vv={};function Ea(){return Vv}function AP(r){Vv=r}async function SP(){Vv={},await pl(xl)}var an={};Re(an,{aes:()=>sn,ed25519:()=>m_,hash:()=>bo,keystore:()=>Yr,rsa:()=>Gc,sha256Str:()=>Zy});var P$=globalThis||window||self,yt=P$.crypto;var Id={};Re(Id,{arrBufToBase64:()=>Ry,arrBufToStr:()=>BP,base64ToArrBuf:()=>Au,default:()=>je,joinBufs:()=>Uy,normalizeBase64ToBuf:()=>Su,normalizeToBuf:()=>kd,normalizeUnicodeToBuf:()=>rs,normalizeUtf16ToBuf:()=>e_,normalizeUtf8ToBuf:()=>Zv,publicExponent:()=>LP,randomBuf:()=>OP,strToArrBuf:()=>My,structuralClone:()=>NP});var Gv={};Re(Gv,{CharSize:()=>Ns,CryptoSystem:()=>Wn,EccCurve:()=>Dd,HashAlg:()=>qc,KeyUse:()=>Nt,RsaSize:()=>Cd,SymmAlg:()=>Tr,SymmKeyLength:()=>Aa});var Wn;(function(r){r.ECC="ecc",r.RSA="rsa"})(Wn||(Wn={}));var Dd;(function(r){r.P_256="P-256",r.P_384="P-384",r.P_521="P-521"})(Dd||(Dd={}));var Cd;(function(r){r[r.B1024=1024]="B1024",r[r.B2048=2048]="B2048",r[r.B4096=4096]="B4096"})(Cd||(Cd={}));var Tr;(function(r){r.AES_CTR="AES-CTR",r.AES_CBC="AES-CBC",r.AES_GCM="AES-GCM"})(Tr||(Tr={}));var Aa;(function(r){r[r.B128=128]="B128",r[r.B192=192]="B192",r[r.B256=256]="B256"})(Aa||(Aa={}));var qc;(function(r){r.SHA_1="SHA-1",r.SHA_256="SHA-256",r.SHA_384="SHA-384",r.SHA_512="SHA-512"})(qc||(qc={}));var Ns;(function(r){r[r.B8=8]="B8",r[r.B16=16]="B16"})(Ns||(Ns={}));var Nt;(function(r){r.Exchange="exchange",r.Write="write"})(Nt||(Nt={}));var Yv=new Error("Key does not exist. Make sure you properly instantiated the keystore."),DP=new Error("Retrieved a symmetric key when an asymmetric keypair was expected. Please use a different key name."),CP=new Error("Retrieved an asymmetric keypair when an symmetric key was expected. Please use a different key name."),Jv=new Error("ECC is not enabled for this browser. Please use RSA instead."),kP=new Error("Cryptosystem not supported. Please use ECC or RSA"),IP=new Error("Invalid key use. Please use 'exchange' or 'write"),D$=new Error("Max must be less than 256 and greater than 0");function Al(r){if(!r||r===null)throw Yv;if(r.privateKey===void 0)throw DP;return r}function Xv(r){if(!r||r===null)throw Yv;if(r.privateKey!==void 0||r.algorithm===void 0)throw CP;return r}function Qv(r){TP(r,[Wn.ECC,Wn.RSA],kP)}function Hc(r){TP(r,[Nt.Exchange,Nt.Write],IP)}function TP(r,e,t){if(!e.some(i=>i===r))throw t}var FP={KeyDoesNotExist:Yv,NotKeyPair:DP,NotKey:CP,ECCNotEnabled:Jv,UnsupportedCrypto:kP,InvalidKeyUse:IP,checkIsKeyPair:Al,checkIsKey:Xv,checkValidCryptoSystem:Qv,checkValidKeyUse:Hc,InvalidMaxValue:D$};function BP(r,e){let t=e===8?new Uint8Array(r):new Uint16Array(r);return Array.from(t).map(n=>String.fromCharCode(n)).join("")}function Ry(r){return Ze(new Uint8Array(r),"base64pad")}function My(r,e){let t=e===8?new Uint8Array(r.length):new Uint16Array(r.length);for(let n=0,i=r.length;n<i;n++)t[n]=r.charCodeAt(n);return t.buffer}function Au(r){return wt(r,"base64pad").buffer}function LP(){return new Uint8Array([1,0,1])}function OP(r,{max:e}={max:255}){if(e<1||e>255)throw FP.InvalidMaxValue;let t=new Uint8Array(r);if(e==255)return yt.getRandomValues(t),t.buffer;let n=0,i=e+1,o=Math.floor(256/i)*i,a=new Uint8Array(1);for(;n<t.length;)yt.getRandomValues(a),a[0]<o&&(t[n]=a[0]%i,n++);return t.buffer}function Uy(r,e){let t=new Uint8Array(r),n=new Uint8Array(e),i=new Uint8Array(t.length+n.length);return i.set(t),i.set(n,t.length),i.buffer}var Zv=r=>kd(r,e=>My(e,Ns.B8)),e_=r=>kd(r,e=>My(e,Ns.B16)),Su=r=>kd(r,Au),rs=(r,e)=>{switch(e){case 8:return Zv(r);default:return e_(r)}},kd=(r,e)=>{if(typeof r=="string")return e(r);if(typeof r=="object"&&r.byteLength!==void 0)return new Uint8Array(r).buffer;throw new Error("Improper value. Must be a string, ArrayBuffer, Uint8Array")};async function NP(r){return new Promise(e=>{let{port1:t,port2:n}=new MessageChannel;n.onmessage=i=>e(i.data),t.postMessage(r)})}var je={arrBufToStr:BP,arrBufToBase64:Ry,strToArrBuf:My,base64ToArrBuf:Au,publicExponent:LP,randomBuf:OP,joinBufs:Uy,normalizeUtf8ToBuf:Zv,normalizeUtf16ToBuf:e_,normalizeBase64ToBuf:Su,normalizeToBuf:kd,structuralClone:NP};var t_={};Re(t_,{DEFAULT_CHAR_SIZE:()=>wo,DEFAULT_CRYPTOSYSTEM:()=>Ky,DEFAULT_CTR_LEN:()=>Fd,DEFAULT_ECC_CURVE:()=>Sa,DEFAULT_EXCHANGE_KEY_NAME:()=>jy,DEFAULT_HASH_ALG:()=>Rs,DEFAULT_RSA_SIZE:()=>$y,DEFAULT_STORE_NAME:()=>zy,DEFAULT_SYMM_ALG:()=>go,DEFAULT_SYMM_LEN:()=>ku,DEFAULT_WRITE_KEY_NAME:()=>qy,ECC_EXCHANGE_ALG:()=>Wc,ECC_WRITE_ALG:()=>Pu,RSA_EXCHANGE_ALG:()=>Du,RSA_WRITE_ALG:()=>Cu,SALT_LENGTH:()=>Td,default:()=>C$});var Wc="ECDH",Pu="ECDSA",Du="RSA-OAEP",Cu="RSASSA-PKCS1-v1_5",Td=128,Ky="ecc",Sa=Dd.P_256,$y=Cd.B2048,go=Tr.AES_CTR,ku=Aa.B256,Fd=64,Rs=qc.SHA_256,wo=Ns.B16,zy="keystore",jy="exchange-key",qy="write-key",C$={ECC_EXCHANGE_ALG:Wc,ECC_WRITE_ALG:Pu,RSA_EXCHANGE_ALG:Du,RSA_WRITE_ALG:Cu,SALT_LENGTH:Td,DEFAULT_CRYPTOSYSTEM:Ky,DEFAULT_ECC_CURVE:Sa,DEFAULT_RSA_SIZE:$y,DEFAULT_SYMM_ALG:go,DEFAULT_CTR_LEN:Fd,DEFAULT_HASH_ALG:Rs,DEFAULT_CHAR_SIZE:wo,DEFAULT_STORE_NAME:zy,DEFAULT_EXCHANGE_KEY_NAME:jy,DEFAULT_WRITE_KEY_NAME:qy};async function r_(r){return yt.subtle.generateKey({name:r?.alg||go,length:r?.length||ku},!0,["encrypt","decrypt"])}async function Hy(r,e){let t=je.base64ToArrBuf(r);return yt.subtle.importKey("raw",t,{name:e?.alg||go,length:e?.length||ku},!0,["encrypt","decrypt"])}var Bd={makeKey:r_,importKey:Hy};async function Wy(r,e,t){let n=je.normalizeUtf16ToBuf(r),i=typeof e=="string"?await Bd.importKey(e,t):e,o=t?.alg||go,a=t?.iv||je.randomBuf(16),c=await yt.subtle.encrypt({name:o,iv:o===Tr.AES_CTR?void 0:a,counter:o===Tr.AES_CTR?new Uint8Array(a):void 0,length:o===Tr.AES_CTR?Fd:void 0},i,n);return je.joinBufs(a,c)}async function Vy(r,e,t){let n=je.normalizeBase64ToBuf(r),i=typeof e=="string"?await Bd.importKey(e,t):e,o=t?.alg||go,a=n.slice(0,16),c=n.slice(16);return await yt.subtle.decrypt({name:o,iv:o===Tr.AES_CTR?void 0:a,counter:o===Tr.AES_CTR?new Uint8Array(a):void 0,length:o===Tr.AES_CTR?Fd:void 0},i,c)}async function k$(r,e,t){let n=await Wy(r,e,t);return je.arrBufToBase64(n)}async function I$(r,e,t){let n=await Vy(r,e,t);return je.arrBufToStr(n,16)}async function n_(r){let e=await yt.subtle.exportKey("raw",r);return je.arrBufToBase64(e)}var RP={encryptBytes:Wy,decryptBytes:Vy,encrypt:k$,decrypt:I$,exportKey:n_};var ci={...Bd,...RP};var h6=Ie(MP(),1);var l_={};Re(l_,{RSAKeyStore:()=>Sl,decrypt:()=>qP,default:()=>Us,encrypt:()=>jP,getPublicKey:()=>HP,importPublicKey:()=>KP,makeKeypair:()=>UP,sign:()=>$P,verify:()=>zP});async function UP(r,e,t){Hc(t);let n=t===Nt.Exchange?Du:Cu,i=t===Nt.Exchange?["encrypt","decrypt"]:["sign","verify"];return yt.subtle.generateKey({name:n,modulusLength:r,publicExponent:je.publicExponent(),hash:{name:e}},!1,i)}function T$(r){return r.replace(`-----BEGIN PUBLIC KEY-----
`,"").replace(`
-----END PUBLIC KEY-----`,"")}async function KP(r,e,t){Hc(t);let n=t===Nt.Exchange?Du:Cu,i=t===Nt.Exchange?["encrypt"]:["verify"],o=je.base64ToArrBuf(T$(r));return yt.subtle.importKey("spki",o,{name:n,hash:{name:e}},!0,i)}var Iu={makeKeypair:UP,importPublicKey:KP};async function $P(r,e,t=wo){return yt.subtle.sign({name:Cu,saltLength:Td},e,rs(r,t))}async function zP(r,e,t,n=wo,i=Rs){return yt.subtle.verify({name:Cu,saltLength:Td},typeof t=="string"?await Iu.importPublicKey(t,i,Nt.Write):t,Su(e),rs(r,n))}async function jP(r,e,t=wo,n=Rs){return yt.subtle.encrypt({name:Du},typeof e=="string"?await Iu.importPublicKey(e,n,Nt.Exchange):e,rs(r,t))}async function qP(r,e){let t=Su(r);return yt.subtle.decrypt({name:Du},e,t)}async function HP(r){let e=await yt.subtle.exportKey("spki",r.publicKey);return je.arrBufToBase64(e)}var Pa={sign:$P,verify:zP,encrypt:jP,decrypt:qP,getPublicKey:HP};var c_={};Re(c_,{clear:()=>XP,createIfDoesNotExist:()=>VP,createStore:()=>WP,default:()=>Gr,dropStore:()=>u_,exists:()=>a_,get:()=>s_,getKey:()=>YP,getKeypair:()=>GP,put:()=>o_,rm:()=>JP});var Ms=Ie(hd(),1);function WP(r){return Ms.default.createInstance({name:r})}async function VP(r,e,t=Ms.default){if(await a_(r,t))return;let n=await e();await o_(r,n,t)}async function o_(r,e,t=Ms.default){return t.setItem(r,e)}async function GP(r,e=Ms.default){return s_(r,Al,e)}async function YP(r,e=Ms.default){return s_(r,Xv,e)}async function s_(r,e,t=Ms.default){let n=await t.getItem(r);return n===null?null:e(n)}async function a_(r,e=Ms.default){return await e.getItem(r)!==null}async function JP(r,e=Ms.default){return e.removeItem(r)}async function u_(r){return r.dropInstance()}async function XP(r){return r?u_(r):Ms.default.clear()}var Gr={createStore:WP,createIfDoesNotExist:VP,put:o_,getKeypair:GP,getKey:YP,exists:a_,rm:JP,dropStore:u_,clear:XP};var f_={};Re(f_,{default:()=>nr,defaultConfig:()=>Yy,eccEnabled:()=>t6,merge:()=>r6,normalize:()=>e6,symmKeyOpts:()=>n6});async function QP(r,e){Hc(e);let t=e===Nt.Exchange?Wc:Pu,n=e===Nt.Exchange?["deriveKey","deriveBits"]:["sign","verify"];return yt.subtle.generateKey({name:t,namedCurve:r},!1,n)}async function ZP(r,e,t){Hc(t);let n=t===Nt.Exchange?Wc:Pu,i=t===Nt.Exchange?[]:["verify"],o=je.base64ToArrBuf(r);return yt.subtle.importKey("raw",o,{name:n,namedCurve:e},!0,i)}var ns={makeKeypair:QP,importPublicKey:ZP};var Yy={type:Ky,curve:Sa,rsaSize:$y,symmAlg:go,symmLen:ku,hashAlg:Rs,charSize:wo,storeName:zy,exchangeKeyName:jy,writeKeyName:qy};function e6(r,e=!0){let t;return r?t={...Yy,...r}:t=Yy,r?.type||(t.type=e?Wn.ECC:Wn.RSA),t}async function t6(){let r=await ns.makeKeypair(Sa,Nt.Exchange);try{await je.structuralClone(r)}catch{return!1}return!0}function r6(r,e={}){return{...r,...e}}function n6(r){return{alg:r.symmAlg,length:r.symmLen}}var nr={defaultConfig:Yy,normalize:e6,eccEnabled:t6,merge:r6,symmKeyOpts:n6};var Vc=class{constructor(e,t){this.cfg=e,this.store=t}async writeKey(){let e=await Gr.getKeypair(this.cfg.writeKeyName,this.store);return Al(e)}async exchangeKey(){let e=await Gr.getKeypair(this.cfg.exchangeKeyName,this.store);return Al(e)}async getSymmKey(e,t){let n=nr.merge(this.cfg,t),i=await Gr.getKey(e,this.store);if(i!==null)return i;let o=await ci.makeKey(nr.symmKeyOpts(n));return await Gr.put(e,o,this.store),o}async keyExists(e){return await Gr.getKey(e,this.store)!==null}async deleteKey(e){return Gr.rm(e,this.store)}async destroy(){return Gr.dropStore(this.store)}async importSymmKey(e,t,n){let i=nr.merge(this.cfg,n),o=await ci.importKey(e,nr.symmKeyOpts(i));await Gr.put(t,o,this.store)}async exportSymmKey(e,t){let n=await this.getSymmKey(e,t);return ci.exportKey(n)}async encryptWithSymmKey(e,t,n){let i=nr.merge(this.cfg,n),o=await this.getSymmKey(t,n),a=await ci.encryptBytes(je.strToArrBuf(e,i.charSize),o,nr.symmKeyOpts(i));return je.arrBufToBase64(a)}async decryptWithSymmKey(e,t,n){let i=nr.merge(this.cfg,n),o=await this.getSymmKey(t,n),a=await ci.decryptBytes(je.base64ToArrBuf(e),o,nr.symmKeyOpts(i));return je.arrBufToStr(a,i.charSize)}};var Sl=class extends Vc{static async init(e){let t=nr.normalize({...e||{},type:Wn.RSA}),{rsaSize:n,hashAlg:i,storeName:o,exchangeKeyName:a,writeKeyName:c}=t,l=Gr.createStore(o);return await Gr.createIfDoesNotExist(a,()=>Iu.makeKeypair(n,i,Nt.Exchange),l),await Gr.createIfDoesNotExist(c,()=>Iu.makeKeypair(n,i,Nt.Write),l),new Sl(t,l)}async sign(e,t){let n=nr.merge(this.cfg,t),i=await this.writeKey();return je.arrBufToBase64(await Pa.sign(e,i.privateKey,n.charSize))}async verify(e,t,n,i){let o=nr.merge(this.cfg,i);return Pa.verify(e,t,n,o.charSize,o.hashAlg)}async encrypt(e,t,n){let i=nr.merge(this.cfg,n);return je.arrBufToBase64(await Pa.encrypt(e,t,i.charSize,i.hashAlg))}async decrypt(e,t,n){let i=await this.exchangeKey(),o=nr.merge(this.cfg,n);return je.arrBufToStr(await Pa.decrypt(e,i.privateKey),o.charSize)}async publicExchangeKey(){let e=await this.exchangeKey();return Pa.getPublicKey(e)}async publicWriteKey(){let e=await this.writeKey();return Pa.getPublicKey(e)}},Jy=Sl;var Us={...Iu,...Pa,...Jy};var Ld={};Re(Ld,{clear:()=>p_,create:()=>B$,get:()=>Ii,set:()=>L$});async function i6(r,e,t=wo,n=Rs){return yt.subtle.sign({name:Pu,hash:{name:n}},e,rs(r,t))}async function o6(r,e,t,n=wo,i=Sa,o=Rs){return yt.subtle.verify({name:Pu,hash:{name:o}},typeof t=="string"?await ns.importPublicKey(t,i,Nt.Write):t,Su(e),rs(r,n))}async function s6(r,e,t,n=wo,i=Sa,o){let a=typeof t=="string"?await ns.importPublicKey(t,i,Nt.Exchange):t,c=await Xy(e,a,o);return ci.encryptBytes(rs(r,n),c,o)}async function a6(r,e,t,n=Sa,i){let o=typeof t=="string"?await ns.importPublicKey(t,n,Nt.Exchange):t,a=await Xy(e,o,i);return ci.decryptBytes(Su(r),a,i)}async function u6(r){let e=await yt.subtle.exportKey("raw",r.publicKey);return je.arrBufToBase64(e)}async function Xy(r,e,t){return yt.subtle.deriveKey({name:Wc,public:e},r,{name:t?.alg||go,length:t?.length||ku},!1,["encrypt","decrypt"])}var Da={sign:i6,verify:o6,encrypt:s6,decrypt:a6,getPublicKey:u6,getSharedKey:Xy};var Pl=class extends Vc{static async init(e){let t=nr.normalize({...e||{},type:Wn.ECC}),{curve:n,storeName:i,exchangeKeyName:o,writeKeyName:a}=t,c=Gr.createStore(i);return await Gr.createIfDoesNotExist(o,()=>ns.makeKeypair(n,Nt.Exchange),c),await Gr.createIfDoesNotExist(a,()=>ns.makeKeypair(n,Nt.Write),c),new Pl(t,c)}async sign(e,t){let n=nr.merge(this.cfg,t),i=await this.writeKey();return je.arrBufToBase64(await Da.sign(e,i.privateKey,n.charSize,n.hashAlg))}async verify(e,t,n,i){let o=nr.merge(this.cfg,i);return Da.verify(e,t,n,o.charSize,o.curve,o.hashAlg)}async encrypt(e,t,n){let i=nr.merge(this.cfg,n),o=await this.exchangeKey();return je.arrBufToBase64(await Da.encrypt(e,o.privateKey,t,i.charSize,i.curve))}async decrypt(e,t,n){let i=nr.merge(this.cfg,n),o=await this.exchangeKey();return je.arrBufToStr(await Da.decrypt(e,o.privateKey,t,i.curve),i.charSize)}async publicExchangeKey(){let e=await this.exchangeKey();return Da.getPublicKey(e)}async publicWriteKey(){let e=await this.writeKey();return Da.getPublicKey(e)}},Qy=Pl;async function c6(r){let e=await nr.eccEnabled();if(!e&&r?.type==="ecc")throw Jv;let t=nr.normalize(r,e);return Qv(t.type),t.type==="ecc"?Qy.init(t):Jy.init(t)}async function f6(){return Gr.clear()}var h_={};Re(h_,{ECCKeyStore:()=>Pl,decrypt:()=>a6,default:()=>F$,encrypt:()=>s6,getPublicKey:()=>u6,getSharedKey:()=>Xy,importPublicKey:()=>ZP,makeKeypair:()=>QP,sign:()=>i6,verify:()=>o6});var F$={...ns,...Da,...Qy};var d_={init:c6,clear:f6,...Gv,...t_,...f_,...Id,ecc:h_,rsa:l_,idb:c_};var l6={type:Wn.RSA},Tu=null,p_=async()=>{Tu=await Ii(),await Tu.destroy(),Tu=null},B$=async()=>await d_.init(l6),L$=async r=>{Tu=r},Ii=async()=>Tu||(Tu=await d_.init(l6),Tu);var O$=(r,e,t)=>{Sn("rsa.verify");let n=je.arrBufToBase64(t.buffer);return Us.verify(r,e,n)},N$=async(r,e,t)=>h6.default.sign.detached.verify(r,e,t),R$=async()=>(Sn("keystore.publicExchangeKey"),(await Ii()).publicExchangeKey()),M$=async()=>(Sn("keystore.publicWriteKey"),(await Ii()).publicWriteKey()),U$=async r=>(Sn("keystore.decrypt"),(await Ii()).decrypt(r)),K$=async(r,e)=>(Sn("keystore.sign"),(await Ii()).sign(r,{charSize:e})),$$=async(r,e)=>(Sn("keystore.importSymmKey"),(await Ii()).importSymmKey(r,e)),z$=async r=>(Sn("keystore.exportSymmKey"),(await Ii()).exportSymmKey(r)),j$=async r=>(Sn("keystore.keyExists"),(await Ii()).keyExists(r)),q$=async()=>(Sn("keystore.getAlg"),(await Ii()).cfg.type),H$=async()=>(Sn("keystore.clear"),p_()),d6={rsa:{verify:O$},ed25519:{verify:N$},keystore:{publicExchangeKey:R$,publicWriteKey:M$,decrypt:U$,sign:K$,importSymmKey:$$,exportSymmKey:z$,keyExists:j$,getAlg:q$,clear:H$}};var fi=d6;function p6(r){fi={...fi,...r}}var Zy=async r=>{let e=await yt.subtle.digest("sha-256",wt(r));return Ze(new Uint8Array(e),"hex")},bo={sha256:async r=>new Uint8Array(await yt.subtle.digest("sha-256",r)),sha256Str:Zy},sn={encrypt:async(r,e,t)=>{let n=await Hy(e,{length:Aa.B256,alg:t}),i=await Wy(r,n,{alg:t});return new Uint8Array(i)},decrypt:async(r,e,t)=>{let n=await Hy(e,{length:Aa.B256,alg:t}),i=await Vy(r,n,{alg:t});return new Uint8Array(i)},genKeyStr:async r=>{let e=await r_({length:Aa.B256,alg:r});return n_(e)},decryptGCM:async(r,e,t)=>{let n=wt(t,"base64pad"),i=await yt.subtle.importKey("raw",wt(e,"base64pad"),"AES-GCM",!1,["encrypt","decrypt"]),o=await yt.subtle.decrypt({name:"AES-GCM",iv:n},i,wt(r,"base64pad"));return Ze(new Uint8Array(o))}},Gc={decrypt:(r,e)=>yt.subtle.decrypt({name:"RSA-OAEP"},e,r),encrypt:async(r,e)=>yt.subtle.encrypt({name:"RSA-OAEP"},await yt.subtle.importKey("spki",wt(e,"base64pad").buffer,{name:"RSA-OAEP",hash:"SHA-256"},!1,["encrypt"]),r),genKey:()=>yt.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["encrypt","decrypt"]),verify:(r,e,t)=>fi.rsa.verify(r,e,t)},m_={verify:(r,e,t)=>fi.ed25519.verify(r,e,t)},Yr={publicExchangeKey:()=>fi.keystore.publicExchangeKey(),publicWriteKey:()=>fi.keystore.publicWriteKey(),decrypt:r=>fi.keystore.decrypt(r),sign:(r,e)=>fi.keystore.sign(r,e),importSymmKey:(r,e)=>fi.keystore.importSymmKey(r,e),exportSymmKey:r=>fi.keystore.exportSymmKey(r),keyExists:r=>fi.keystore.keyExists(r),getAlg:()=>fi.keystore.getAlg(),clear:()=>fi.keystore.clear()};var Od=(n=>(n.RSA="rsa",n.Edwards="ed25519",n.BLS="bls12-381",n))(Od||{});var g_=new Uint8Array([237,1]),w_=new Uint8Array([234,1]),b_=new Uint8Array([0,245,2]),eg="did:key:z";function m6(r){switch(r){case"ed25519":return g_;case"rsa":return b_;case"bls12-381":return w_;default:return null}}var y6=r=>{if(y_(r,b_))return{keyBuffer:r.slice(b_.byteLength),type:"rsa"};if(y_(r,g_))return{keyBuffer:r.slice(g_.byteLength),type:"ed25519"};if(y_(r,w_))return{keyBuffer:r.slice(w_.byteLength),type:"bls12-381"};throw new Error("Unsupported key algorithm. Try using RSA.")},y_=(r,e)=>gd.equal(e,r.slice(0,e.byteLength)),v_=r=>{switch(r){case"rsa":return"rsa";case"ed25519":return"ed25519";case"bls12-381":return"bls12-381"}throw new Error(`Key Type ${r} not supported`)};function Dl(r,e){let t=Au(r),n=m6(e);if(n===null)throw new Error(`Key type '${e}' not supported`);let i=Uy(n,t);return eg+Ze(new Uint8Array(i),"base58btc")}function Yc(r){if(!r.startsWith(eg))throw new Error("Please use a base58-encoded DID formatted `did:key:z...`");let e=r.substr(eg.length),t=wt(e,"base58btc"),{keyBuffer:n,type:i}=y6(t);return{publicKey:Ry(n),type:i}}async function Ca(){let r=await Yr.publicExchangeKey(),e=await Yr.getAlg();return Dl(r,v_(e))}async function jt(){let r=await Yr.publicWriteKey(),e=await Yr.getAlg();return Dl(r,v_(e))}async function __({charSize:r=16,data:e,did:t,signature:n}){try{let{type:i,publicKey:o}=Yc(t),a=new Uint8Array(Au(n)),c=new Uint8Array(rs(e,r)),l=new Uint8Array(Au(o));switch(i){case"ed25519":return await m_.verify(c,a,l);case"rsa":return await Gc.verify(c,a,l);default:return!1}}catch{return!1}}async function Fr({addSignature:r=!0,audience:e,facts:t=[],issuer:n,lifetimeInSeconds:i=30,expiration:o,potency:a="APPEND",proof:c,resource:l}){let h=Math.floor(Date.now()/1e3),m=c&&cr(c),y=await Yr.getAlg(),E={alg:G$(y)||"UnknownAlgorithm",typ:"JWT",uav:"1.0.0"},k=o||h+i,T=h-60;if(m){let ne=m.payload;k=Math.min(ne.exp,k),T=Math.max(ne.nbf,T)}let O={aud:e,exp:k,fct:t,iss:n||await jt(),nbf:T,prf:c||null,ptc:a,rsc:l||(m?m.payload.rsc:"*")},ue=r?await g6(E,O):null;return{header:E,payload:O,signature:ue}}function cr(r){let e=r.split("."),t=JSON.parse(yo.urlDecode(e[0])),n=JSON.parse(yo.urlDecode(e[1]));return{header:t,payload:n,signature:e[2]||null}}function Br(r){let e=tg(r.header),t=rg(r.payload);return e+"."+t+"."+r.signature}function tg(r){return yo.urlEncode(JSON.stringify(r))}function rg(r){return yo.urlEncode(JSON.stringify({...r}))}function is(r){return r.payload.exp<=Math.floor(Date.now()/1e3)}async function Ks(r){let e=tg(r.header),t=rg(r.payload),n=await __({charSize:8,data:`${e}.${t}`,did:r.payload.iss,signature:yo.makeUrlUnsafe(r.signature||"")});if(!n)return n;if(!r.payload.prf)return!0;let i=cr(r.payload.prf),o=i.payload.aud===r.payload.iss;return o&&await Ks(i)}function $s(r,e=0){let t=Y$(r,e);return t.prf?$s(t.prf,e+1):t.iss}async function g6(r,e){let t=tg(r),n=rg(e);return yo.makeUrlSafe(await Yr.sign(`${t}.${n}`,8))}function G$(r){switch(r){case"ed25519":return"EdDSA";case"rsa":return"RS256";default:return null}}function Y$(r,e){try{return JSON.parse(yo.urlDecode(r.split(".")[1]))}catch{throw new Error(`Invalid UCAN (${e} level${e===1?"":"s"} deep): \`${r}\``)}}async function Ti(r){let e=ke.endpoints.user;try{let t=await yd(`_did.${r}.${e}`);if(t!==null)return t}catch{}throw new Error("Could not locate user DID in DNS.")}async function x_(){let r=Ea(),e=Object.values(r)[0];if(e!==void 0)return $s(e);let t=await mn();if(!rr(t))throw new Error("No logged in user");return Ti(t)}var qs={};Re(qs,{build:()=>Fr,decode:()=>cr,dictionary:()=>_o,encode:()=>Br,encodeHeader:()=>tg,encodePayload:()=>rg,isExpired:()=>is,isValid:()=>Ks,rootIssuer:()=>$s,sign:()=>g6});var _o={};Re(_o,{WNFS_PREFIX:()=>C_,compile:()=>k_,filesystemPrefix:()=>sg,lookup:()=>ka,lookupAppUcan:()=>J$,lookupFilesystemUcan:()=>X$,resourceLabel:()=>og});var yn={};Re(yn,{Branch:()=>vo,Kind:()=>w6,combine:()=>Bu,directory:()=>cn,file:()=>E_,fromPosix:()=>Rd,isBranch:()=>js,isDirectory:()=>un,isFile:()=>zs,isRootDirectory:()=>b6,isSameBranch:()=>ng,isSameKind:()=>A_,kind:()=>ig,log:()=>os,map:()=>S_,parent:()=>P_,removeBranch:()=>Jc,root:()=>Fu,terminus:()=>D_,toPosix:()=>Lr,unwrap:()=>ir});var vo=(c=>(c.Public="public",c.Pretty="p",c.Private="private",c.PrivateLog="privateLog",c.Shared="shared",c.SharedCounter="sharedCounter",c.Version="version",c))(vo||{}),w6=(t=>(t.Directory="directory",t.File="file",t))(w6||{});function cn(...r){if(r.some(e=>e.includes("/")))throw new Error("Forward slashes `/` are not allowed");return{directory:r}}function E_(...r){if(r.some(e=>e.includes("/")))throw new Error("Forward slashes `/` are not allowed");return{file:r}}function Fu(){return{directory:[]}}function Rd(r){let e=r.replace(/^\/+/,"").split("/");return r.endsWith("/")?{directory:e.slice(0,-1)}:r===""?Fu():{file:e}}function Lr(r,{absolute:e}={absolute:!1}){let t=e?"/":"",n=ir(r).join("/");return un(r)?t+n+(n.length?"/":""):t+n}function Bu(r,e){return S_(t=>ir(r).concat(t),e)}function js(r,e){return ir(e)[0]===r}function un(r){return!!r.directory}function zs(r){return!!r.file}function b6(r){return r.directory.length===0}function ng(r,e){return ir(r)[0]===ir(e)[0]}function A_(r,e){return un(r)&&un(e)?!0:!!(zs(r)&&zs(e))}function ig(r){return un(r)?"directory":"file"}function S_(r,e){return un(e)?{directory:r(e.directory)}:zs(e)?{file:r(e.file)}:e}function P_(r){return un(r)&&b6(r)?null:cn(...ir(r).slice(0,-1))}function Jc(r){return S_(e=>un(r)||e.length>1?e.slice(1):e,r)}function D_(r){let e=ir(r);return e.length<1?null:e[e.length-1]}function ir(r){return un(r)?r.directory:zs(r)?r.file:[]}function os(r){return`[ ${r.join(", ")} ]`}var C_="wnfs";function k_(r){return r.reduce((e,t)=>{let n=cr(t);if(is(n))return e;let i=og(n.payload.rsc);return{...e,[i]:t}},{})}function og(r){if(typeof r!="object")return r;let e=Array.from(Object.entries(r))[0];return e[0]+":"+(e[0]===C_?e[1].replace(/^\/+/,""):e[1])}function sg(r){return C_+":"}function ka(r){return Ea()[r]}async function J$(r){let e=Ea();return e["*"]||e["app:*"]||e[`app:${r}`]}async function X$(r){let e=ka("*");if(e)return e;let t=r==="*",n=t?!1:un(r),i=t?["*"]:ir(r),o=await mn(),a=o?sg(o):"";return i.reduce((c,l,h)=>{if(c)return c;let m=h===0,y=i.slice(0,i.length-h),E=Lr(m&&!n?E_(...y):cn(...y));return ka(`${a}${E}`)||null},null)}var v6="Qmc5m94Gu7z62RC8waSKkZUrCCBJPyHbkpmGzEePxy2oXJ";async function Hs(r){let e=await _6(r);if(!e||e.toString()===v6)return null;if(e!==null)return e;try{let t=await Mc(r+".files."+ke.endpoints.user);return!t||t===v6?null:De(t)}catch(t){throw console.error(t),new Error("Could not locate user root in dns")}}async function _6(r){let e=ke.getApiEndpoint();try{let n=await(await fetch(`${e}/user/data/${r}`,{cache:"reload"})).json();return De(n)}catch(t){return Vr("Could not locate user root on Fission server: ",Rt(t,"toString")?t.toString():t),null}}async function I_(r,e){let t=ke.getApiEndpoint(),n=r.toString();return Vr("\u{1F30A} Updating your DNSLink:",n),await x6(`${t}/user/data/${n}`,{headers:async()=>({authorization:`Bearer ${Br(await Fr({audience:await Di.did(),issuer:await jt(),potency:"APPEND",proof:e,resource:cr(e).payload.rsc}))}`}),retries:100,retryDelay:5e3,retryOn:[502,503,504]},{method:"PUT"}).then(i=>(i.status<300?Vr("\u{1FAB4} DNSLink updated:",n):Vr("\u{1F525} Failed to update DNSLink for:",n),{success:i.status<300})).catch(i=>(Vr("\u{1F525} Failed to update DNSLink for:",n),console.error(i),{success:!1}))}async function x6(r,e,t,n=0){let i=await e.headers(),o=await fetch(r,{...t,headers:{...t.headers,...i}});if(e.retryOn.includes(o.status)){if(n<e.retries)return await new Promise((a,c)=>setTimeout(()=>x6(r,e,t,n+1).then(a,c),e.retryDelay));throw new Error("Too many retries for fetch")}return o}function Md(r){return cn("private","Apps",r.creator,r.name)}function ag(r){let e=[];return r.app&&e.push(Md(r.app)),r.fs?.private&&(e=e.concat(r.fs?.private.map(t=>Bu(cn("private"),t)))),r.fs?.public&&(e=e.concat(r.fs?.public.map(t=>Bu(cn("public"),t)))),e}async function Lu(r){let t=(await wr(xl)||[]).concat(r);AP(k_(t));let n=Q$();await on(xl,n)}function ug({app:r,fs:e,raw:t},n){let i=sg(n),o=ka("*");if(o&&!is(cr(o)))return!0;if(r){let a=i+Lr(Md(r)),c=ka(a);if(!c||is(cr(c)))return!1}return!(e?.private&&!e.private.every(c=>{let l=`${i}private/`+Lr(c),h=ka(l);return h&&!is(cr(h))})||e?.public&&!e.public.every(c=>{let l=`${i}public/`+Lr(c),h=ka(l);return h&&!is(cr(h))})||t&&!t.every(c=>{let l=og(c.rsc),h=ka(l);return h&&!is(cr(h))}))}function Q$(){return Object.values(Ea())}var fg=(t=>(t.InsecureContext="INSECURE_CONTEXT",t.UnsupportedBrowser="UNSUPPORTED_BROWSER",t))(fg||{});async function lg({path:r}){return`wnfs__bareNameFilter__${await bo.sha256Str(E6(r))}`}async function Ou({path:r}){return`wnfs__readKey__${await bo.sha256Str(E6(r))}`}function E6(r){return"/"+ir(r).join("/")}var A6=r=>r.kind==="permissionedAppState";async function hg(r){return ag(r).reduce((e,t)=>e.then(async n=>{if(n===!1||js("public",t))return n;let i=await Ou({path:t});return await Yr.keyExists(i)}),Promise.resolve(!0))}var Vs={};Re(Vs,{code:()=>Wd,decode:()=>Fa,encode:()=>Mu,name:()=>Hd});var Z$=["string","number","bigint","symbol"],e9=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function S6(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";let e=typeof r;if(Z$.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(r))return"Array";if(t9(r))return"Buffer";let t=r9(r);return t||"Object"}function t9(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function r9(r){let e=Object.prototype.toString.call(r).slice(8,-1);if(e9.includes(e))return e}var Q=class{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};Q.uint=new Q(0,"uint",!0);Q.negint=new Q(1,"negint",!0);Q.bytes=new Q(2,"bytes",!0);Q.string=new Q(3,"string",!0);Q.array=new Q(4,"array",!1);Q.map=new Q(5,"map",!1);Q.tag=new Q(6,"tag",!1);Q.float=new Q(7,"float",!0);Q.false=new Q(7,"false",!0);Q.true=new Q(7,"true",!0);Q.null=new Q(7,"null",!0);Q.undefined=new Q(7,"undefined",!0);Q.break=new Q(7,"break",!0);var Fe=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var Cl=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",n9=new TextDecoder,i9=new TextEncoder;function dg(r){return Cl&&globalThis.Buffer.isBuffer(r)}function B_(r){return r instanceof Uint8Array?dg(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}var k6=Cl?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):D6(r,e,t):(r,e,t)=>t-e>64?n9.decode(r.subarray(e,t)):D6(r,e,t),I6=Cl?r=>r.length>64?globalThis.Buffer.from(r):P6(r):r=>r.length>64?i9.encode(r):P6(r),Ws=r=>Uint8Array.from(r),kl=Cl?(r,e,t)=>dg(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),T6=Cl?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),B_(globalThis.Buffer.concat(r,e))):(r,e)=>{let t=new Uint8Array(e),n=0;for(let i of r)n+i.length>t.length&&(i=i.subarray(0,t.length-n)),t.set(i,n),n+=i.length;return t},F6=Cl?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function B6(r,e){if(dg(r)&&dg(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function P6(r,e=1/0){let t,n=r.length,i=null,o=[];for(let a=0;a<n;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function D6(r,e,t){let n=[];for(;e<t;){let i=r[e],o=null,a=i>239?4:i>223?3:i>191?2:1;if(e+a<=t){let c,l,h,m;switch(a){case 1:i<128&&(o=i);break;case 2:c=r[e+1],(c&192)===128&&(m=(i&31)<<6|c&63,m>127&&(o=m));break;case 3:c=r[e+1],l=r[e+2],(c&192)===128&&(l&192)===128&&(m=(i&15)<<12|(c&63)<<6|l&63,m>2047&&(m<55296||m>57343)&&(o=m));break;case 4:c=r[e+1],l=r[e+2],h=r[e+3],(c&192)===128&&(l&192)===128&&(h&192)===128&&(m=(i&15)<<18|(c&63)<<12|(l&63)<<6|h&63,m>65535&&m<1114112&&(o=m))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),e+=a}return o9(n)}var C6=4096;function o9(r){let e=r.length;if(e<=C6)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=C6));return t}var s9=256,Ud=class{constructor(e=s9){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=t.length-(this.maxCursor-this.cursor)-1;t.set(e,i)}else{if(t){let i=t.length-(this.maxCursor-this.cursor)-1;i<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=F6(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=kl(n,0,this.cursor)}else t=T6(this.chunks,this.cursor);return e&&this.reset(),t}};var bt="CBOR decode error:",L_="CBOR encode error:",Kd=[];Kd[23]=1;Kd[24]=2;Kd[25]=3;Kd[26]=5;Kd[27]=9;function Ia(r,e,t){if(r.length-e<t)throw new Error(`${bt} not enough data for type`)}var gn=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Fi(r,e,t){Ia(r,e,1);let n=r[e];if(t.strict===!0&&n<gn[0])throw new Error(`${bt} integer encoded in more bytes than necessary (strict decode)`);return n}function Bi(r,e,t){Ia(r,e,2);let n=r[e]<<8|r[e+1];if(t.strict===!0&&n<gn[1])throw new Error(`${bt} integer encoded in more bytes than necessary (strict decode)`);return n}function Li(r,e,t){Ia(r,e,4);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&n<gn[2])throw new Error(`${bt} integer encoded in more bytes than necessary (strict decode)`);return n}function Oi(r,e,t){Ia(r,e,8);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],i=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(t.strict===!0&&o<gn[3])throw new Error(`${bt} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(t.allowBigInt===!0)return o;throw new Error(`${bt} integers outside of the safe integer range are not supported`)}function L6(r,e,t,n){return new Fe(Q.uint,Fi(r,e+1,n),2)}function O6(r,e,t,n){return new Fe(Q.uint,Bi(r,e+1,n),3)}function N6(r,e,t,n){return new Fe(Q.uint,Li(r,e+1,n),5)}function R6(r,e,t,n){return new Fe(Q.uint,Oi(r,e+1,n),9)}function xo(r,e){return Cn(r,0,e.value)}function Cn(r,e,t){if(t<gn[0]){let n=Number(t);r.push([e|n])}else if(t<gn[1]){let n=Number(t);r.push([e|24,n])}else if(t<gn[2]){let n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<gn[3]){let n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(t);if(n<gn[4]){let i=[e|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),a=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=a&255,a=a>>8,i[3]=a&255,a=a>>8,i[2]=a&255,a=a>>8,i[1]=a&255,r.push(i)}else throw new Error(`${bt} encountered BigInt larger than allowable range`)}}xo.encodedSize=function(e){return Cn.encodedSize(e.value)};Cn.encodedSize=function(e){return e<gn[0]?1:e<gn[1]?2:e<gn[2]?3:e<gn[3]?5:9};xo.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};function M6(r,e,t,n){return new Fe(Q.negint,-1-Fi(r,e+1,n),2)}function U6(r,e,t,n){return new Fe(Q.negint,-1-Bi(r,e+1,n),3)}function K6(r,e,t,n){return new Fe(Q.negint,-1-Li(r,e+1,n),5)}var O_=BigInt(-1),$6=BigInt(1);function z6(r,e,t,n){let i=Oi(r,e+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new Fe(Q.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${bt} integers outside of the safe integer range are not supported`);return new Fe(Q.negint,O_-BigInt(i),9)}function pg(r,e){let t=e.value,n=typeof t=="bigint"?t*O_-$6:t*-1-1;Cn(r,e.type.majorEncoded,n)}pg.encodedSize=function(e){let t=e.value,n=typeof t=="bigint"?t*O_-$6:t*-1-1;return n<gn[0]?1:n<gn[1]?2:n<gn[2]?3:n<gn[3]?5:9};pg.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};function $d(r,e,t,n){Ia(r,e,t+n);let i=kl(r,e+t,e+t+n);return new Fe(Q.bytes,i,t+n)}function j6(r,e,t,n){return $d(r,e,1,t)}function q6(r,e,t,n){return $d(r,e,2,Fi(r,e+1,n))}function H6(r,e,t,n){return $d(r,e,3,Bi(r,e+1,n))}function W6(r,e,t,n){return $d(r,e,5,Li(r,e+1,n))}function V6(r,e,t,n){let i=Oi(r,e+1,n);if(typeof i=="bigint")throw new Error(`${bt} 64-bit integer bytes lengths not supported`);return $d(r,e,9,i)}function mg(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===Q.string?I6(r.value):r.value),r.encodedBytes}function Il(r,e){let t=mg(e);Cn(r,e.type.majorEncoded,t.length),r.push(t)}Il.encodedSize=function(e){let t=mg(e);return Cn.encodedSize(t.length)+t.length};Il.compareTokens=function(e,t){return u9(mg(e),mg(t))};function u9(r,e){return r.length<e.length?-1:r.length>e.length?1:B6(r,e)}function zd(r,e,t,n,i){let o=t+n;Ia(r,e,o);let a=new Fe(Q.string,k6(r,e+t,e+o),o);return i.retainStringBytes===!0&&(a.byteValue=kl(r,e+t,e+o)),a}function G6(r,e,t,n){return zd(r,e,1,t,n)}function Y6(r,e,t,n){return zd(r,e,2,Fi(r,e+1,n),n)}function J6(r,e,t,n){return zd(r,e,3,Bi(r,e+1,n),n)}function X6(r,e,t,n){return zd(r,e,5,Li(r,e+1,n),n)}function Q6(r,e,t,n){let i=Oi(r,e+1,n);if(typeof i=="bigint")throw new Error(`${bt} 64-bit integer string lengths not supported`);return zd(r,e,9,i,n)}var Z6=Il;function Tl(r,e,t,n){return new Fe(Q.array,n,t)}function e3(r,e,t,n){return Tl(r,e,1,t)}function t3(r,e,t,n){return Tl(r,e,2,Fi(r,e+1,n))}function r3(r,e,t,n){return Tl(r,e,3,Bi(r,e+1,n))}function n3(r,e,t,n){return Tl(r,e,5,Li(r,e+1,n))}function i3(r,e,t,n){let i=Oi(r,e+1,n);if(typeof i=="bigint")throw new Error(`${bt} 64-bit integer array lengths not supported`);return Tl(r,e,9,i)}function o3(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${bt} indefinite length items not allowed`);return Tl(r,e,1,1/0)}function yg(r,e){Cn(r,Q.array.majorEncoded,e.value)}yg.compareTokens=xo.compareTokens;yg.encodedSize=function(e){return Cn.encodedSize(e.value)};function Fl(r,e,t,n){return new Fe(Q.map,n,t)}function s3(r,e,t,n){return Fl(r,e,1,t)}function a3(r,e,t,n){return Fl(r,e,2,Fi(r,e+1,n))}function u3(r,e,t,n){return Fl(r,e,3,Bi(r,e+1,n))}function c3(r,e,t,n){return Fl(r,e,5,Li(r,e+1,n))}function f3(r,e,t,n){let i=Oi(r,e+1,n);if(typeof i=="bigint")throw new Error(`${bt} 64-bit integer map lengths not supported`);return Fl(r,e,9,i)}function l3(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${bt} indefinite length items not allowed`);return Fl(r,e,1,1/0)}function gg(r,e){Cn(r,Q.map.majorEncoded,e.value)}gg.compareTokens=xo.compareTokens;gg.encodedSize=function(e){return Cn.encodedSize(e.value)};function h3(r,e,t,n){return new Fe(Q.tag,t,1)}function d3(r,e,t,n){return new Fe(Q.tag,Fi(r,e+1,n),2)}function p3(r,e,t,n){return new Fe(Q.tag,Bi(r,e+1,n),3)}function m3(r,e,t,n){return new Fe(Q.tag,Li(r,e+1,n),5)}function y3(r,e,t,n){return new Fe(Q.tag,Oi(r,e+1,n),9)}function wg(r,e){Cn(r,Q.tag.majorEncoded,e.value)}wg.compareTokens=xo.compareTokens;wg.encodedSize=function(e){return Cn.encodedSize(e.value)};var p9=20,m9=21,y9=22,g9=23;function g3(r,e,t,n){if(n.allowUndefined===!1)throw new Error(`${bt} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new Fe(Q.null,null,1):new Fe(Q.undefined,void 0,1)}function w3(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${bt} indefinite length items not allowed`);return new Fe(Q.break,void 0,1)}function N_(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${bt} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${bt} Infinity values are not supported`)}return new Fe(Q.float,r,e)}function b3(r,e,t,n){return N_(R_(r,e+1),3,n)}function v3(r,e,t,n){return N_(M_(r,e+1),5,n)}function _3(r,e,t,n){return N_(S3(r,e+1),9,n)}function bg(r,e,t){let n=e.value;if(n===!1)r.push([Q.float.majorEncoded|p9]);else if(n===!0)r.push([Q.float.majorEncoded|m9]);else if(n===null)r.push([Q.float.majorEncoded|y9]);else if(n===void 0)r.push([Q.float.majorEncoded|g9]);else{let i,o=!1;(!t||t.float64!==!0)&&(E3(n),i=R_(ss,1),n===i||Number.isNaN(n)?(ss[0]=249,r.push(ss.slice(0,3)),o=!0):(A3(n),i=M_(ss,1),n===i&&(ss[0]=250,r.push(ss.slice(0,5)),o=!0))),o||(w9(n),i=S3(ss,1),ss[0]=251,r.push(ss.slice(0,9)))}}bg.encodedSize=function(e,t){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){E3(n);let i=R_(ss,1);if(n===i||Number.isNaN(n))return 3;if(A3(n),i=M_(ss,1),n===i)return 5}return 9};var x3=new ArrayBuffer(9),Eo=new DataView(x3,1),ss=new Uint8Array(x3,0);function E3(r){if(r===1/0)Eo.setUint16(0,31744,!1);else if(r===-1/0)Eo.setUint16(0,64512,!1);else if(Number.isNaN(r))Eo.setUint16(0,32256,!1);else{Eo.setFloat32(0,r);let e=Eo.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)Eo.setUint16(0,31744,!1);else if(t===0)Eo.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{let i=t-127;i<-24?Eo.setUint16(0,0):i<-14?Eo.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):Eo.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function R_(r,e){if(r.length-e<2)throw new Error(`${bt} not enough data for float16`);let t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;let n=t>>10&31,i=t&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,t&32768?-o:o}function A3(r){Eo.setFloat32(0,r,!1)}function M_(r,e){if(r.length-e<4)throw new Error(`${bt} not enough data for float32`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function w9(r){Eo.setFloat64(0,r,!1)}function S3(r,e){if(r.length-e<8)throw new Error(`${bt} not enough data for float64`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}bg.compareTokens=xo.compareTokens;function Kt(r,e,t){throw new Error(`${bt} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function vg(r){return()=>{throw new Error(`${bt} ${r}`)}}var Ae=[];for(let r=0;r<=23;r++)Ae[r]=Kt;Ae[24]=L6;Ae[25]=O6;Ae[26]=N6;Ae[27]=R6;Ae[28]=Kt;Ae[29]=Kt;Ae[30]=Kt;Ae[31]=Kt;for(let r=32;r<=55;r++)Ae[r]=Kt;Ae[56]=M6;Ae[57]=U6;Ae[58]=K6;Ae[59]=z6;Ae[60]=Kt;Ae[61]=Kt;Ae[62]=Kt;Ae[63]=Kt;for(let r=64;r<=87;r++)Ae[r]=j6;Ae[88]=q6;Ae[89]=H6;Ae[90]=W6;Ae[91]=V6;Ae[92]=Kt;Ae[93]=Kt;Ae[94]=Kt;Ae[95]=vg("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)Ae[r]=G6;Ae[120]=Y6;Ae[121]=J6;Ae[122]=X6;Ae[123]=Q6;Ae[124]=Kt;Ae[125]=Kt;Ae[126]=Kt;Ae[127]=vg("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)Ae[r]=e3;Ae[152]=t3;Ae[153]=r3;Ae[154]=n3;Ae[155]=i3;Ae[156]=Kt;Ae[157]=Kt;Ae[158]=Kt;Ae[159]=o3;for(let r=160;r<=183;r++)Ae[r]=s3;Ae[184]=a3;Ae[185]=u3;Ae[186]=c3;Ae[187]=f3;Ae[188]=Kt;Ae[189]=Kt;Ae[190]=Kt;Ae[191]=l3;for(let r=192;r<=215;r++)Ae[r]=h3;Ae[216]=d3;Ae[217]=p3;Ae[218]=m3;Ae[219]=y3;Ae[220]=Kt;Ae[221]=Kt;Ae[222]=Kt;Ae[223]=Kt;for(let r=224;r<=243;r++)Ae[r]=vg("simple values are not supported");Ae[244]=Kt;Ae[245]=Kt;Ae[246]=Kt;Ae[247]=g3;Ae[248]=vg("simple values are not supported");Ae[249]=b3;Ae[250]=v3;Ae[251]=_3;Ae[252]=Kt;Ae[253]=Kt;Ae[254]=Kt;Ae[255]=w3;var as=[];for(let r=0;r<24;r++)as[r]=new Fe(Q.uint,r,1);for(let r=-1;r>=-24;r--)as[31-r]=new Fe(Q.negint,r,1);as[64]=new Fe(Q.bytes,new Uint8Array(0),1);as[96]=new Fe(Q.string,"",1);as[128]=new Fe(Q.array,0,1);as[160]=new Fe(Q.map,0,1);as[244]=new Fe(Q.false,!1,1);as[245]=new Fe(Q.true,!0,1);as[246]=new Fe(Q.null,null,1);function P3(r){switch(r.type){case Q.false:return Ws([244]);case Q.true:return Ws([245]);case Q.null:return Ws([246]);case Q.bytes:return r.value.length?void 0:Ws([64]);case Q.string:return r.value===""?Ws([96]):void 0;case Q.array:return r.value===0?Ws([128]):void 0;case Q.map:return r.value===0?Ws([160]):void 0;case Q.uint:return r.value<24?Ws([Number(r.value)]):void 0;case Q.negint:if(r.value>=-24)return Ws([31-Number(r.value)])}}var v9={float64:!1,mapSorter:E9,quickEncodeToken:P3};function _9(){let r=[];return r[Q.uint.major]=xo,r[Q.negint.major]=pg,r[Q.bytes.major]=Il,r[Q.string.major]=Z6,r[Q.array.major]=yg,r[Q.map.major]=gg,r[Q.tag.major]=wg,r[Q.float.major]=bg,r}var D3=_9(),U_=new Ud,Bl=class{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${L_} object contains circular references`);return new Bl(t,e)}},Nu={null:new Fe(Q.null,null),undefined:new Fe(Q.undefined,void 0),true:new Fe(Q.true,!0),false:new Fe(Q.false,!1),emptyArray:new Fe(Q.array,0),emptyMap:new Fe(Q.map,0)},Ru={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new Fe(Q.float,r):r>=0?new Fe(Q.uint,r):new Fe(Q.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new Fe(Q.uint,r):new Fe(Q.negint,r)},Uint8Array(r,e,t,n){return new Fe(Q.bytes,r)},string(r,e,t,n){return new Fe(Q.string,r)},boolean(r,e,t,n){return r?Nu.true:Nu.false},null(r,e,t,n){return Nu.null},undefined(r,e,t,n){return Nu.undefined},ArrayBuffer(r,e,t,n){return new Fe(Q.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new Fe(Q.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[Nu.emptyArray,new Fe(Q.break)]:Nu.emptyArray;n=Bl.createCheck(n,r);let i=[],o=0;for(let a of r)i[o++]=_g(a,t,n);return t.addBreakTokens?[new Fe(Q.array,r.length),i,new Fe(Q.break)]:[new Fe(Q.array,r.length),i]},Object(r,e,t,n){let i=e!=="Object",o=i?r.keys():Object.keys(r),a=i?r.size:o.length;if(!a)return t.addBreakTokens===!0?[Nu.emptyMap,new Fe(Q.break)]:Nu.emptyMap;n=Bl.createCheck(n,r);let c=[],l=0;for(let h of o)c[l++]=[_g(h,t,n),_g(i?r.get(h):r[h],t,n)];return x9(c,t),t.addBreakTokens?[new Fe(Q.map,a),c,new Fe(Q.break)]:[new Fe(Q.map,a),c]}};Ru.Map=Ru.Object;Ru.Buffer=Ru.Uint8Array;for(let r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Ru[`${r}Array`]=Ru.DataView;function _g(r,e={},t){let n=S6(r),i=e&&e.typeEncoders&&e.typeEncoders[n]||Ru[n];if(typeof i=="function"){let a=i(r,n,e,t);if(a!=null)return a}let o=Ru[n];if(!o)throw new Error(`${L_} unsupported type: ${n}`);return o(r,n,e,t)}function x9(r,e){e.mapSorter&&r.sort(e.mapSorter)}function E9(r,e){let t=Array.isArray(r[0])?r[0][0]:r[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(t.type!==n.type)return t.type.compare(n.type);let i=t.type.major,o=D3[i].compareTokens(t,n);return o===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o}function C3(r,e,t,n){if(Array.isArray(e))for(let i of e)C3(r,i,t,n);else t[e.type.major](r,e,n)}function A9(r,e,t){let n=_g(r,t);if(!Array.isArray(n)&&t.quickEncodeToken){let i=t.quickEncodeToken(n);if(i)return i;let o=e[n.type.major];if(o.encodedSize){let a=o.encodedSize(n,t),c=new Ud(a);if(o(c,n,t),c.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return B_(c.chunks[0])}}return U_.reset(),C3(U_,n,e,t),U_.toBytes(!0)}function Ta(r,e){return e=Object.assign({},v9,e),A9(r,D3,e)}var S9={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},K_=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=as[e];if(t===void 0){let n=Ae[e];if(!n)throw new Error(`${bt} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;t=n(this.data,this.pos,i,this.options)}return this.pos+=t.encodedLength,t}},jd=Symbol.for("DONE"),xg=Symbol.for("BREAK");function P9(r,e,t){let n=[];for(let i=0;i<r.value;i++){let o=qd(e,t);if(o===xg){if(r.value===1/0)break;throw new Error(`${bt} got unexpected break to lengthed array`)}if(o===jd)throw new Error(`${bt} found array but not enough entries (got ${i}, expected ${r.value})`);n[i]=o}return n}function D9(r,e,t){let n=t.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let a=0;a<r.value;a++){let c=qd(e,t);if(c===xg){if(r.value===1/0)break;throw new Error(`${bt} got unexpected break to lengthed map`)}if(c===jd)throw new Error(`${bt} found map but not enough entries (got ${a} [no key], expected ${r.value})`);if(n!==!0&&typeof c!="string")throw new Error(`${bt} non-string keys not supported (got ${typeof c})`);let l=qd(e,t);if(l===jd)throw new Error(`${bt} found map but not enough entries (got ${a} [no value], expected ${r.value})`);n?o.set(c,l):i[c]=l}return n?o:i}function qd(r,e){if(r.done())return jd;let t=r.next();if(t.type===Q.break)return xg;if(t.type.terminal)return t.value;if(t.type===Q.array)return P9(t,r,e);if(t.type===Q.map)return D9(t,r,e);if(t.type===Q.tag){if(e.tags&&typeof e.tags[t.value]=="function"){let n=qd(r,e);return e.tags[t.value](n)}throw new Error(`${bt} tag not supported (${t.value})`)}throw new Error("unsupported")}function Ao(r,e){if(!(r instanceof Uint8Array))throw new Error(`${bt} data to decode must be a Uint8Array`);e=Object.assign({},S9,e);let t=e.tokenizer||new K_(r,e),n=qd(t,e);if(n===jd)throw new Error(`${bt} did not find any content to decode`);if(n===xg)throw new Error(`${bt} got unexpected break`);if(!t.done())throw new Error(`${bt} too many terminals, data makes no sense`);return n}ur();var k3=42;function C9(r){if(r.asCID!==r)return null;let e=we.asCID(r);if(!e)return null;let t=new Uint8Array(e.bytes.byteLength+1);return t.set(e.bytes,1),[new Fe(Q.tag,k3),new Fe(Q.bytes,t)]}function k9(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function I9(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var T9={float64:!0,typeEncoders:{Object:C9,undefined:k9,number:I9}};function F9(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return we.decode(r.subarray(1))}var I3={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};I3.tags[k3]=F9;var Hd="dag-cbor",Wd=113,Mu=r=>Ta(r,T9),Fa=r=>Ao(r,I3);function T3(r,e,t,n){var i,o=!1,a=0;function c(){i&&clearTimeout(i)}function l(){c(),o=!0}typeof e!="boolean"&&(n=t,t=e,e=void 0);function h(){for(var m=arguments.length,y=new Array(m),E=0;E<m;E++)y[E]=arguments[E];var k=this,T=Date.now()-a;if(o)return;function O(){a=Date.now(),t.apply(k,y)}function ue(){i=void 0}n&&!i&&O(),c(),n===void 0&&T>r?O():e!==!0&&(i=setTimeout(n?ue:O,n===void 0?r-T:r))}return h.cancel=l,h}ur();var Or=r=>Xe(r)&&r.content!==void 0,Eg=r=>Xe(r)&&r.ls!==void 0,z_=r=>Xe(r)&&rr(r.name)&&es(r.size)&&Ly(r.isFile),Jr=r=>Xe(r)&&rr(r.name)&&rr(r.ipns),F3=r=>{if(Xe(r)){let e=Object.values(r);return e.length>0&&e.every(Jr)}return!1},B3=r=>Array.isArray(r)&&r.every(Jr),B9=r=>z_(r)&&Ba(r.cid),L3=r=>Xe(r)&&Object.values(r).every(e=>B9(e)||Jr(e)),L9=r=>Xe(r)&&es(r.mtime)&&es(r.ctime)&&es(r.mode)&&rr(r._type),Zc=r=>Xe(r)&&L9(r.unixMeta)&&Ly(r.isFile)&&O9(r.version),Ag=r=>Xe(r)&&Object.values(r).every(Sg),Sg=r=>Xe(r)&&Ba(r.cid)&&Ba(r.userland)&&Ba(r.metadata)&&Ag(r.subSkeleton)||Jr(r),j_=r=>Xe(r)&&Ag(r.skeleton)&&Zc(r.metadata)&&r.metadata.isFile===!1,O3=r=>j_(r)&&Ba(r.userland),q_=r=>Xe(r)&&Zc(r.metadata)&&r.metadata.isFile===!0,N3=r=>q_(r)&&Ba(r.userland),Ba=r=>!!we.asCID(r)||rr(r)||r&&"code"in r&&"version"in r&&"multihash"in r,O9=r=>{if(!Xe(r))return!1;let{major:e,minor:t,patch:n}=r;return es(e)&&es(t)&&es(n)};var Tt={};Re(Tt,{getEncryptedFile:()=>kG,getFile:()=>CG,getFileSystemLinks:()=>IG,getSimpleLinks:()=>Ch,putEncryptedFile:()=>A2,putFile:()=>fm,putLinks:()=>Mf});var Gs={};Re(Gs,{code:()=>Gd,createLink:()=>us,createNode:()=>Oa,decode:()=>V9,encode:()=>W9,name:()=>Y_,prepare:()=>V_,validate:()=>G_});ur();var N9=new TextDecoder;function H_(r,e){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=r.length)throw new Error("protobuf: unexpected end of data");let i=r[e++];if(t+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[t,e]}function Pg(r,e){let t;[t,e]=H_(r,e);let n=e+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(e,n),n]}function R3(r,e){let t;return[t,e]=H_(r,e),[t&7,t>>3,e]}function R9(r){let e={},t=r.length,n=0;for(;n<t;){let i,o;if([i,o,n]=R3(r,n),o===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=Pg(r,n)}else if(o===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let a;[a,n]=Pg(r,n),e.Name=N9.decode(a)}else if(o===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=H_(r,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function M3(r){let e=r.length,t=0,n,i=!1,o;for(;t<e;){let c,l;if([c,l,t]=R3(r,t),c!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${c}`);if(l===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,t]=Pg(r,t),n&&(i=!0)}else if(l===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let h;[h,t]=Pg(r,t),n.push(R9(h))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${l}`)}if(t>e)throw new Error("protobuf: (PBNode) unexpected end of data");let a={};return o&&(a.Data=o),a.Links=n||[],a}var K3=new TextEncoder,U3=2**32,M9=2**31;function U9(r,e){let t=e.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");t=Vd(e,t,r.Tsize)-1,e[t]=24}if(typeof r.Name=="string"){let n=K3.encode(r.Name);t-=n.length,e.set(n,t),t=Vd(e,t,n.length)-1,e[t]=18}return r.Hash&&(t-=r.Hash.length,e.set(r.Hash,t),t=Vd(e,t,r.Hash.length)-1,e[t]=10),e.length-t}function $3(r){let e=$9(r),t=new Uint8Array(e),n=e;if(r.Data&&(n-=r.Data.length,t.set(r.Data,n),n=Vd(t,n,r.Data.length)-1,t[n]=10),r.Links)for(let i=r.Links.length-1;i>=0;i--){let o=U9(r.Links[i],t.subarray(0,n));n-=o,n=Vd(t,n,o)-1,t[n]=18}return t}function K9(r){let e=0;if(r.Hash){let t=r.Hash.length;e+=1+t+Ll(t)}if(typeof r.Name=="string"){let t=K3.encode(r.Name).length;e+=1+t+Ll(t)}return typeof r.Tsize=="number"&&(e+=1+Ll(r.Tsize)),e}function $9(r){let e=0;if(r.Data){let t=r.Data.length;e+=1+t+Ll(t)}if(r.Links)for(let t of r.Links){let n=K9(t);e+=1+n+Ll(n)}return e}function Vd(r,e,t){e-=Ll(t);let n=e;for(;t>=M9;)r[e++]=t&127|128,t/=128;for(;t>=128;)r[e++]=t&127|128,t>>>=7;return r[e]=t,n}function Ll(r){return r%2===0&&r++,Math.floor((z9(r)+6)/7)}function z9(r){let e=0;return r>=U3&&(r=Math.floor(r/U3),e=32),r>=1<<16&&(r>>>=16,e+=16),r>=1<<8&&(r>>>=8,e+=8),e+j9[r]}var j9=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];ur();var q9=["Data","Links"],H9=["Hash","Name","Tsize"],W_=new TextEncoder;function j3(r,e){if(r===e)return 0;let t=r.Name?W_.encode(r.Name):[],n=e.Name?W_.encode(e.Name):[],i=t.length,o=n.length;for(let a=0,c=Math.min(i,o);a<c;++a)if(t[a]!==n[a]){i=t[a],o=n[a];break}return i<o?-1:o<i?1:0}function z3(r,e){return!Object.keys(r).some(t=>!e.includes(t))}function q3(r){if(typeof r.asCID=="object"){let t=we.asCID(r);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if(typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");let e={};if(r.Hash){let t=we.asCID(r.Hash);try{t||(typeof r.Hash=="string"?t=we.parse(r.Hash):r.Hash instanceof Uint8Array&&(t=we.decode(r.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}t&&(e.Hash=t)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof r.Name=="string"&&(e.Name=r.Name),typeof r.Tsize=="number"&&(e.Tsize=r.Tsize),e}function V_(r){if((r instanceof Uint8Array||typeof r=="string")&&(r={Data:r}),typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");let e={};if(r.Data!==void 0)if(typeof r.Data=="string")e.Data=W_.encode(r.Data);else if(r.Data instanceof Uint8Array)e.Data=r.Data;else throw new TypeError("Invalid DAG-PB form");if(r.Links!==void 0)if(Array.isArray(r.Links))e.Links=r.Links.map(q3),e.Links.sort(j3);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function G_(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");if(!z3(r,q9))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<r.Links.length;e++){let t=r.Links[e];if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!z3(t,H9))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!t.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash.asCID!==t.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0&&(typeof t.Tsize!="number"||t.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&j3(t,r.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function Oa(r,e=[]){return V_({Data:r,Links:e})}function us(r,e,t){return q3({Hash:t,Name:r,Tsize:e})}var Y_="dag-pb",Gd=112;function W9(r){G_(r);let e={};return r.Links&&(e.Links=r.Links.map(t=>{let n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),r.Data&&(e.Data=r.Data),$3(e)}function V9(r){let e=M3(r),t={};return e.Data&&(t.Data=e.Data),e.Links&&(t.Links=e.Links.map(n=>{let i={};try{i.Hash=we.decode(n.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(i.Name=n.Name),n.Tsize!==void 0&&(i.Tsize=n.Tsize),i})),t}var Ja={};Re(Ja,{DAG_NODE_DATA:()=>am,DEFAULT_CDN_URL:()=>WF,add:()=>Ya,cat:()=>um,catBuf:()=>sa,catRaw:()=>JF,dagGet:()=>Rf,dagPut:()=>g0,dagPutLinks:()=>cm,encoded:()=>Bo,get:()=>gi,ls:()=>_2,node:()=>m0,nodeWithPkg:()=>VF,pkgFromCDN:()=>GF,set:()=>xG,size:()=>mc});var m0={};Re(m0,{OPTIONS:()=>qF,createAndConnect:()=>w2,fetchFissionPeers:()=>m2,listPeers:()=>d0,monitorBitswap:()=>_G,monitorPeers:()=>bG,ping:()=>b2,stopMonitoringBitswap:()=>HF,stopMonitoringPeers:()=>vG,tryConnecting:()=>y2});var h0=Ie(hd(),1);var H3="RSA";var W3="[a-fA-F\\d:]",Uu=r=>r&&r.includeBoundaries?`(?:(?<=\\s|^)(?=${W3})|(?<=${W3})(?=\\s|$))`:"",cs="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",Xr="[a-fA-F\\d]{1,4}",Dg=`
(?:
(?:${Xr}:){7}(?:${Xr}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${Xr}:){6}(?:${cs}|:${Xr}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${Xr}:){5}(?::${cs}|(?::${Xr}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${Xr}:){4}(?:(?::${Xr}){0,1}:${cs}|(?::${Xr}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${Xr}:){3}(?:(?::${Xr}){0,2}:${cs}|(?::${Xr}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${Xr}:){2}(?:(?::${Xr}){0,3}:${cs}|(?::${Xr}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${Xr}:){1}(?:(?::${Xr}){0,4}:${cs}|(?::${Xr}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${Xr}){0,5}:${cs}|(?::${Xr}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),Y9=new RegExp(`(?:^${cs}$)|(?:^${Dg}$)`),J9=new RegExp(`^${cs}$`),X9=new RegExp(`^${Dg}$`),J_=r=>r&&r.exact?Y9:new RegExp(`(?:${Uu(r)}${cs}${Uu(r)})|(?:${Uu(r)}${Dg}${Uu(r)})`,"g");J_.v4=r=>r&&r.exact?J9:new RegExp(`${Uu(r)}${cs}${Uu(r)}`,"g");J_.v6=r=>r&&r.exact?X9:new RegExp(`${Uu(r)}${Dg}${Uu(r)}`,"g");var Cg=J_;function kg(r){return Cg({exact:!0}).test(r)}function V3(r){return Cg.v6({exact:!0}).test(r)}function G3(r){return Cg.v4({exact:!0}).test(r)}Dn();var Y3=G3,Q9=V3,X_=function(r){let e=0,t;if(Y3(r))t=new Uint8Array(e+4),r.split(/\./g).forEach(n=>{t[e++]=parseInt(n,10)&255});else if(Q9(r)){let n=r.split(":",8),i;for(i=0;i<n.length;i++){let o=Y3(n[i]),a;o&&(a=X_(n[i]),n[i]=Ze(a.slice(0,2),"base16")),a!=null&&++i<8&&n.splice(i,0,Ze(a.slice(2,4),"base16"))}if(n[0]==="")for(;n.length<8;)n.unshift("0");else if(n[n.length-1]==="")for(;n.length<8;)n.push("0");else if(n.length<8){for(i=0;i<n.length&&n[i]!=="";i++);let o=[i,1];for(i=9-n.length;i>0;i--)o.push("0");n.splice.apply(n,o)}for(t=new Uint8Array(e+16),i=0;i<n.length;i++){let o=parseInt(n[i],16);t[e++]=o>>8&255,t[e++]=o&255}}if(t==null)throw Error("Invalid ip address: "+r);return t},J3=function(r,e,t){e=~~e,t=t??r.length-e;let n=[],i="",o=new DataView(r.buffer);if(t===4){for(let a=0;a<t;a++)n.push(r[e+a]);i=n.join(".")}else if(t===16){for(let a=0;a<t;a+=2)n.push(o.getUint16(e+a).toString(16));i=n.join(":"),i=i.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),i=i.replace(/:{3,4}/,"::")}return i};var Yd={},Q_={},ez=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];ez.forEach(r=>{let e=tz(...r);Q_[e.code]=e,Yd[e.name]=e});function tz(r,e,t,n,i){return{code:r,size:e,name:t,resolvable:Boolean(n),path:Boolean(i)}}function fr(r){if(typeof r=="number"){if(Q_[r]!=null)return Q_[r];throw new Error(`no protocol with code: ${r}`)}else if(typeof r=="string"){if(Yd[r]!=null)return Yd[r];throw new Error(`no protocol with name: ${r}`)}throw new Error(`invalid protocol id type: ${typeof r}`)}ur();Qo();xu();Zo();var ef=Ie(Ku(),1);Dn();mo();Kc();function uD(r,e){switch(fr(r).code){case 4:case 41:return mz(e);case 6:case 273:case 33:case 132:return fD(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return gz(e);case 421:return bz(e);case 444:return aD(e);case 445:return aD(e);default:return Ze(e,"base16")}}function cD(r,e){switch(fr(r).code){case 4:return sD(e);case 41:return sD(e);case 6:case 273:case 33:case 132:return t1(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return yz(e);case 421:return wz(e);case 444:return vz(e);case 445:return _z(e);default:return wt(e,"base16")}}function sD(r){if(!kg(r))throw new Error("invalid ip address");return X_(r)}function mz(r){let e=J3(r,0,r.length);if(e==null||!kg(e))throw new Error("invalid ip address");return e}function t1(r){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function fD(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function yz(r){let e=wt(r),t=Uint8Array.from(ef.default.encode(e.length));return pn([t,e],t.length+e.length)}function gz(r){let e=ef.default.decode(r);if(r=r.slice(ef.default.decode.bytes),r.length!==e)throw new Error("inconsistent lengths");return Ze(r)}function wz(r){let e;r[0]==="Q"||r[0]==="1"?e=Ci(Pn.decode(`z${r}`)).bytes:e=we.parse(r).multihash.bytes;let t=Uint8Array.from(ef.default.encode(e.length));return pn([t,e],t.length+e.length)}function bz(r){let e=ef.default.decode(r),t=r.slice(ef.default.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return Ze(t,"base58btc")}function vz(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);let t=Vt.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=t1(n);return pn([t,i],t.length+i.length)}function _z(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);let t=Vt.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=t1(n);return pn([t,i],t.length+i.length)}function aD(r){let e=r.slice(0,r.length-2),t=r.slice(r.length-2),n=Ze(e,"base32"),i=fD(t);return`${n}:${i}`}var Ol=Ie(Ku(),1);Kc();Dn();function xz(r){let e=[],t=r.split("/").slice(1);if(t.length===1&&t[0]==="")return[];for(let n=0;n<t.length;n++){let i=t[n],o=fr(i);if(o.size===0){e.push([i]);continue}if(n++,n>=t.length)throw hD("invalid address: "+r);if(o.path===!0){e.push([i,o1(t.slice(n).join("/"))]);break}e.push([i,t[n]])}return e}function Ez(r){let e=[];return r.map(t=>{let n=Fg(t);return e.push(n.name),t.length>1&&t[1]!=null&&e.push(t[1]),null}),o1(e.join("/"))}function Az(r){return r.map(e=>{Array.isArray(e)||(e=[e]);let t=Fg(e);return e.length>1?[t.code,cD(t.code,e[1])]:[t.code]})}function r1(r){return r.map(e=>{let t=Fg(e);return e[1]!=null?[t.code,uD(t.code,e[1])]:[t.code]})}function n1(r){return Tg(pn(r.map(e=>{let t=Fg(e),n=Uint8Array.from(Ol.default.encode(t.code));return e.length>1&&e[1]!=null&&(n=pn([n,e[1]])),n})))}function i1(r,e){return r.size>0?r.size/8:r.size===0?0:Ol.default.decode(e)+Ol.default.decode.bytes}function Jd(r){let e=[],t=0;for(;t<r.length;){let n=Ol.default.decode(r,t),i=Ol.default.decode.bytes,o=fr(n),a=i1(o,r.slice(t+i));if(a===0){e.push([n]),t+=i;continue}let c=r.slice(t+i,t+i+a);if(t+=a+i,t>r.length)throw hD("Invalid address Uint8Array: "+Ze(r,"base16"));e.push([n,c])}return e}function Ig(r){let e=Jd(r),t=r1(e);return Ez(t)}function Sz(r){r=o1(r);let e=xz(r),t=Az(e);return n1(t)}function lD(r){return Sz(r)}function Tg(r){let e=Pz(r);if(e!=null)throw e;return Uint8Array.from(r)}function Pz(r){try{Jd(r)}catch(e){return e}}function o1(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function hD(r){return new Error("Error parsing address: "+r)}function Fg(r){return fr(r[0])}var s1=Ie(Ku(),1);ur();xu();var gD=Ie(So(),1);Dn();wd();var kz=Symbol.for("nodejs.util.inspect.custom"),Iz=[fr("ip4").code,fr("ip6").code],Bg=[fr("dns").code,fr("dns4").code,fr("dns6").code,fr("dnsaddr").code],mD=[fr("p2p").code,fr("ipfs").code],Tz=[fr("tcp").code,fr("udp").code],wD=new Map,yD=Symbol.for("@multiformats/js-multiaddr/multiaddr"),Ni=class{constructor(e){if(e==null&&(e=""),Object.defineProperty(this,yD,{value:!0}),e instanceof Uint8Array)this.bytes=Tg(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=lD(e)}else if(Ni.isMultiaddr(e))this.bytes=Tg(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return Ig(this.bytes)}toJSON(){return this.toString()}toOptions(){let e=this.protoCodes(),t=this.toString().split("/").slice(1),n,i;if(t.length>2)Bg.includes(e[0])&&mD.includes(e[1])?(n=fr("tcp").name,i=443):(n=fr(t[2]).name,i=parseInt(t[3]));else if(Bg.includes(e[0]))n=fr("tcp").name,i=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e[0]===41||e[0]===55?6:4,host:t[1],transport:n,port:i}}protos(){return this.protoCodes().map(e=>Object.assign({},fr(e)))}protoCodes(){let e=[],t=this.bytes,n=0;for(;n<t.length;){let i=s1.default.decode(t,n),o=s1.default.decode.bytes,a=fr(i);n+=i1(a,t.slice(n+o))+o,e.push(i)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return Jd(this.bytes)}stringTuples(){let e=Jd(this.bytes);return r1(e)}encapsulate(e){return e=new Ni(e),new Ni(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),n=this.toString(),i=n.lastIndexOf(t);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new Ni(n.slice(0,i))}decapsulateCode(e){let t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new Ni(n1(t.slice(0,n)));return this}getPeerId(){try{let t=this.stringTuples().filter(n=>n[0]===Yd.ipfs.code).pop();if(t?.[1]!=null){let n=t[1];return n[0]==="Q"||n[0]==="1"?Ze(Pn.decode(`z${n}`),"base58btc"):Ze(we.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>fr(t[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return $c(this.bytes,e.bytes)}async resolve(e){let t=this.protos().find(o=>o.resolvable);if(t==null)return[this];let n=wD.get(t.name);if(n==null)throw(0,gD.default)(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map(o=>new Ni(o))}nodeAddress(){let e=this.protoCodes(),t=this.protoNames(),n=this.toString().split("/").slice(1),i=fr(n[2]).code,o=parseInt(n[3]);if(Bg.includes(e[0])&&mD.includes(e[1])&&(i=fr("tcp").code,o=443),n.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');if(!Iz.includes(e[0])&&!Bg.includes(e[0]))throw new Error(`no protocol with name: "'${t[0]}'". Must have a valid family name: "{ip4, ip6, dns, dns4, dns6, dnsaddr}".`);if(!Tz.includes(i))throw new Error(`no protocol with name: "'${t[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:e[0]===41||e[0]===55?6:4,address:n[1],port:o}}isThinWaistAddress(e){let t=(e??this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}static fromNodeAddress(e,t){if(e==null)throw new Error("requires node address object");if(t==null)throw new Error("requires transport protocol");let n;switch(e.family){case 4:n="ip4";break;case 6:n="ip6";break;default:throw Error("Invalid addr family, should be 4 or 6.")}return new Ni("/"+[n,e.address,t,e.port].join("/"))}static isName(e){return Ni.isMultiaddr(e)?e.protos().some(t=>t.resolvable):!1}static isMultiaddr(e){return Boolean(e?.[yD])}[kz](){return"<Multiaddr "+Ze(this.bytes,"base16")+" - "+Ig(this.bytes)+">"}inspect(){return"<Multiaddr "+Ze(this.bytes,"base16")+" - "+Ig(this.bytes)+">"}};Ni.resolvers=wD;function bD(r){return new Ni(r)}var Fz=xD,vD=128,Bz=127,Lz=~Bz,Oz=Math.pow(2,31);function xD(r,e,t){e=e||[],t=t||0;for(var n=t;r>=Oz;)e[t++]=r&255|vD,r/=128;for(;r&Lz;)e[t++]=r&255|vD,r>>>=7;return e[t]=r|0,xD.bytes=t-n+1,e}var Nz=a1,Rz=128,_D=127;function a1(r,n){var t=0,n=n||0,i=0,o=n,a,c=r.length;do{if(o>=c)throw a1.bytes=0,new RangeError("Could not decode varint");a=r[o++],t+=i<28?(a&_D)<<i:(a&_D)*Math.pow(2,i),i+=7}while(a>=Rz);return a1.bytes=o-n,t}var Mz=Math.pow(2,7),Uz=Math.pow(2,14),Kz=Math.pow(2,21),$z=Math.pow(2,28),zz=Math.pow(2,35),jz=Math.pow(2,42),qz=Math.pow(2,49),Hz=Math.pow(2,56),Wz=Math.pow(2,63),Vz=function(r){return r<Mz?1:r<Uz?2:r<Kz?3:r<$z?4:r<zz?5:r<jz?6:r<qz?7:r<Hz?8:r<Wz?9:10},Gz={encode:Fz,decode:Nz,encodingLength:Vz},Yz=Gz,Xd=Yz;var Qd=r=>[Xd.decode(r),Xd.decode.bytes],Nl=(r,e,t=0)=>(Xd.encode(r,e,t),e),Rl=r=>Xd.encodingLength(r);var Rie=new Uint8Array(0);var ED=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},Na=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};var AD=r=>new TextEncoder().encode(r),SD=r=>new TextDecoder().decode(r);var $u=(r,e)=>{let t=e.byteLength,n=Rl(r),i=n+Rl(t),o=new Uint8Array(i+t);return Nl(r,o,0),Nl(t,o,n),o.set(e,i),new Ml(r,t,e,o)},Zd=r=>{let e=Na(r),[t,n]=Qd(e),[i,o]=Qd(e.subarray(n)),a=e.subarray(n+o);if(a.byteLength!==i)throw new Error("Incorrect length");return new Ml(t,i,a,e)},DD=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&ED(r.bytes,e.bytes),Ml=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}};var h1={};Re(h1,{base58btc:()=>Ri,base58flickr:()=>tj});function Jz(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),a=o.charCodeAt(0);if(t[a]!==255)throw new TypeError(o+" is ambiguous");t[a]=i}var c=r.length,l=r.charAt(0),h=Math.log(c)/Math.log(256),m=Math.log(256)/Math.log(c);function y(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length===0)return"";for(var O=0,ue=0,ne=0,ve=T.length;ne!==ve&&T[ne]===0;)ne++,O++;for(var X=(ve-ne)*m+1>>>0,me=new Uint8Array(X);ne!==ve;){for(var be=T[ne],W=0,de=X-1;(be!==0||W<ue)&&de!==-1;de--,W++)be+=256*me[de]>>>0,me[de]=be%c>>>0,be=be/c>>>0;if(be!==0)throw new Error("Non-zero carry");ue=W,ne++}for(var ge=X-ue;ge!==X&&me[ge]===0;)ge++;for(var Ue=l.repeat(O);ge<X;++ge)Ue+=r.charAt(me[ge]);return Ue}function E(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return new Uint8Array;var O=0;if(T[O]!==" "){for(var ue=0,ne=0;T[O]===l;)ue++,O++;for(var ve=(T.length-O)*h+1>>>0,X=new Uint8Array(ve);T[O];){var me=t[T.charCodeAt(O)];if(me===255)return;for(var be=0,W=ve-1;(me!==0||be<ne)&&W!==-1;W--,be++)me+=c*X[W]>>>0,X[W]=me%256>>>0,me=me/256>>>0;if(me!==0)throw new Error("Non-zero carry");ne=be,O++}if(T[O]!==" "){for(var de=ve-ne;de!==ve&&X[de]===0;)de++;for(var ge=new Uint8Array(ue+(ve-de)),Ue=ue;de!==ve;)ge[Ue++]=X[de++];return ge}}}function k(T){var O=E(T);if(O)return O;throw new Error(`Non-${e} character`)}return{encode:y,decodeUnsafe:E,decode:k}}var Xz=Jz,Qz=Xz,CD=Qz;var u1=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},c1=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return kD(this,e)}},f1=class{constructor(e){this.decoders=e}or(e){return kD(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},kD=(r,e)=>new f1({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),l1=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new u1(e,t,n),this.decoder=new c1(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Kl=({name:r,prefix:e,encode:t,decode:n})=>new l1(r,e,t,n),zu=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=CD(t,e);return Kl({prefix:r,name:e,encode:n,decode:o=>Na(i(o))})},Zz=(r,e,t,n)=>{let i={};for(let m=0;m<e.length;++m)i[e[m]]=m;let o=r.length;for(;r[o-1]==="=";)--o;let a=new Uint8Array(o*t/8|0),c=0,l=0,h=0;for(let m=0;m<o;++m){let y=i[r[m]];if(y===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<t|y,c+=t,c>=8&&(c-=8,a[h++]=255&l>>c)}if(c>=t||255&l<<8-c)throw new SyntaxError("Unexpected end of data");return a},ej=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",a=0,c=0;for(let l=0;l<r.length;++l)for(c=c<<8|r[l],a+=8;a>t;)a-=t,o+=e[i&c>>a];if(a&&(o+=e[i&c<<t-a]),n)for(;o.length*t&7;)o+="=";return o},Nr=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Kl({prefix:e,name:r,encode(i){return ej(i,n,t)},decode(i){return Zz(i,n,t,r)}});var Ri=zu({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),tj=zu({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var d1={};Re(d1,{base32:()=>$l,base32hex:()=>oj,base32hexpad:()=>aj,base32hexpadupper:()=>uj,base32hexupper:()=>sj,base32pad:()=>nj,base32padupper:()=>ij,base32upper:()=>rj,base32z:()=>cj});var $l=Nr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),rj=Nr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),nj=Nr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ij=Nr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),oj=Nr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),sj=Nr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),aj=Nr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),uj=Nr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),cj=Nr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Rr=class{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Ng,byteLength:Ng,code:Og,version:Og,multihash:Og,bytes:Og,_baseCache:Ng,asCID:Ng})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==ep)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==dj)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Rr.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=$u(e,t);return Rr.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&DD(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:i}=this;switch(n){case 0:return lj(t,i,e||Ri.encoder);default:return hj(t,i,e||$l.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return mj(/^0\.0/,yj),!!(e&&(e[TD]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Rr)return e;if(e!=null&&e.asCID===e){let{version:t,code:n,multihash:i,bytes:o}=e;return new Rr(t,n,i,o||ID(t,n,i.bytes))}else if(e!=null&&e[TD]===!0){let{version:t,multihash:n,code:i}=e,o=Zd(n);return Rr.create(t,i,o)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==ep)throw new Error(`Version 0 CID must use dag-pb (code: ${ep}) block encoding`);return new Rr(e,t,n,n.bytes)}case 1:{let i=ID(e,t,n.bytes);return new Rr(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Rr.create(0,ep,e)}static createV1(e,t){return Rr.create(1,e,t)}static decode(e){let[t,n]=Rr.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=Rr.inspectBytes(e),n=t.size-t.multihashSize,i=Na(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),a=new Ml(t.multihashCode,t.digestSize,o,i);return[t.version===0?Rr.createV0(a):Rr.createV1(t.codec,a),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[y,E]=Qd(e.subarray(t));return t+=E,y},i=n(),o=ep;if(i===18?(i=0,t=0):i===1&&(o=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let a=t,c=n(),l=n(),h=t+l,m=h-a;return{version:i,codec:o,multihashCode:c,digestSize:l,multihashSize:m,size:h}}static parse(e,t){let[n,i]=fj(e,t),o=Rr.decode(i);return o._baseCache.set(n,e),o}},fj=(r,e)=>{switch(r[0]){case"Q":{let t=e||Ri;return[Ri.prefix,t.decode(`${Ri.prefix}${r}`)]}case Ri.prefix:{let t=e||Ri;return[Ri.prefix,t.decode(r)]}case $l.prefix:{let t=e||$l;return[$l.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},lj=(r,e,t)=>{let{prefix:n}=t;if(n!==Ri.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i},hj=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i},ep=112,dj=18,ID=(r,e,t)=>{let n=Rl(r),i=n+Rl(e),o=new Uint8Array(i+t.byteLength);return Nl(r,o,0),Nl(e,o,n),o.set(t,i),o},TD=Symbol.for("@ipld/js-cid/CID"),Og={writable:!1,configurable:!1,enumerable:!0},Ng={writable:!1,enumerable:!1,configurable:!1},pj="0.0.0-dev",mj=(r,e)=>{if(r.test(pj))console.warn(e);else throw new Error(e)},yj=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;var p1={};Re(p1,{identity:()=>gj});var gj=Kl({prefix:"\0",name:"identity",encode:r=>SD(r),decode:r=>AD(r)});var m1={};Re(m1,{base2:()=>wj});var wj=Nr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var y1={};Re(y1,{base8:()=>bj});var bj=Nr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var g1={};Re(g1,{base10:()=>vj});var vj=zu({prefix:"9",name:"base10",alphabet:"0123456789"});var w1={};Re(w1,{base16:()=>_j,base16upper:()=>xj});var _j=Nr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),xj=Nr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var b1={};Re(b1,{base36:()=>Ej,base36upper:()=>Aj});var Ej=zu({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Aj=zu({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var v1={};Re(v1,{base64:()=>Sj,base64pad:()=>Pj,base64url:()=>Dj,base64urlpad:()=>Cj});var Sj=Nr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Pj=Nr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Dj=Nr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Cj=Nr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var _1={};Re(_1,{base256emoji:()=>Bj});var FD=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),kj=FD.reduce((r,e,t)=>(r[t]=e,r),[]),Ij=FD.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function Tj(r){return r.reduce((e,t)=>(e+=kj[t],e),"")}function Fj(r){let e=[];for(let t of r){let n=Ij[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var Bj=Kl({prefix:"\u{1F680}",name:"base256emoji",encode:Tj,decode:Fj});var A1={};Re(A1,{sha256:()=>Rg,sha512:()=>Lj});var E1=({name:r,code:e,encode:t})=>new x1(r,e,t),x1=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?$u(this.code,t):t.then(n=>$u(this.code,n))}else throw Error("Unknown type, must be binary type")}};var LD=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),Rg=E1({name:"sha2-256",code:18,encode:LD("SHA-256")}),Lj=E1({name:"sha2-512",code:19,encode:LD("SHA-512")});var S1={};Re(S1,{identity:()=>Mg});var OD=0,Oj="identity",ND=Na,Nj=r=>$u(OD,ND(r)),Mg={code:OD,name:Oj,encode:ND,digest:Nj};var aoe=new TextEncoder,uoe=new TextDecoder;var P1={...p1,...m1,...y1,...g1,...w1,...d1,...b1,...h1,...v1,..._1},hoe={...A1,...S1};wd();var Uj=Ie(So(),1);var RD=Symbol.for("@libp2p/peer-id");var MD=Object.values(P1).map(r=>r.decoder).reduce((r,e)=>r.or(e),P1.identity.decoder),UD=114,KD=36,$D=37,tp=class{constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[RD](){return!0}toString(){return this.string==null&&(this.string=Ri.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return Rr.createV1(UD,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return $c(this.multihash.bytes,e);if(typeof e=="string")return D1(e).equals(this);if(e?.multihash?.bytes!=null)return $c(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}},rp=class extends tp{constructor(e){super({...e,type:"RSA"}),this.type="RSA",this.publicKey=e.publicKey}},np=class extends tp{constructor(e){super({...e,type:"Ed25519"}),this.type="Ed25519",this.publicKey=e.multihash.digest}},ip=class extends tp{constructor(e){super({...e,type:"secp256k1"}),this.type="secp256k1",this.publicKey=e.multihash.digest}};function D1(r,e){if(e=e??MD,r.charAt(0)==="1"||r.charAt(0)==="Q"){let t=Zd(Ri.decode(`z${r}`));return r.startsWith("12D")?new np({multihash:t}):r.startsWith("16U")?new ip({multihash:t}):new rp({multihash:t})}return Kj(MD.decode(r))}function Kj(r){try{let e=Zd(r);if(e.code===Mg.code){if(e.digest.length===KD)return new np({multihash:e});if(e.digest.length===$D)return new ip({multihash:e})}if(e.code===Rg.code)return new rp({multihash:e})}catch{return $j(Rr.decode(r))}throw new Error("Supplied PeerID CID is invalid")}function $j(r){if(r==null||r.multihash==null||r.version==null||r.version===1&&r.code!==UD)throw new Error("Supplied PeerID CID is invalid");let e=r.multihash;if(e.code===Rg.code)return new rp({multihash:r.multihash});if(e.code===Mg.code){if(e.digest.length===KD)return new np({multihash:r.multihash});if(e.digest.length===$D)return new ip({multihash:r.multihash})}throw new Error("Supplied PeerID CID is invalid")}jc();var op=zj;function zj(r,e,t){if(!r)return t;var n,i;if(Array.isArray(e)&&(n=e.slice(0)),typeof e=="string"&&(n=e.split(".")),typeof e=="symbol"&&(n=[e]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");for(;n.length;)if(i=n.shift(),!r||(r=r[i],r===void 0))return t;return r}var RT=Ie(fs(),1),mf=Ie(So(),1);ur();var $g=(r=21)=>{let e="",t=crypto.getRandomValues(new Uint8Array(r));for(;r--;){let n=t[r]&63;n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n<63?e+="_":e+="-"}return e};Dn();mo();var Ra="/",WD=new TextEncoder().encode(Ra),zg=WD[0],Ye=class{constructor(e,t){if(typeof e=="string")this._buf=wt(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==zg)throw new Error("Invalid key")}toString(e="utf8"){return Ze(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Ye(e.join(Ra))}static random(){return new Ye($g().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Ye(e):typeof e.uint8Array=="function"?new Ye(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=WD),this._buf[0]!==zg){let e=new Uint8Array(this._buf.byteLength+1);e.fill(zg,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===zg;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),n=e.list();for(let i=0;i<t.length;i++){if(n.length<i+1)return!1;let o=t[i],a=n[i];if(o<a)return!0;if(o>a)return!1}return t.length<n.length}reverse(){return Ye.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(Ra).slice(1)}type(){return tq(this.baseNamespace())}name(){return rq(this.baseNamespace())}instance(e){return new Ye(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(Ra)||(e+=Ra),e+=this.type(),new Ye(e)}parent(){let e=this.list();return e.length===1?new Ye(Ra):new Ye(e.slice(0,-1).join(Ra))}child(e){return this.toString()===Ra?e:e.toString()===Ra?this:new Ye(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Ye.withNamespaces([...this.namespaces(),...nq(e.map(t=>t.namespaces()))])}};function tq(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function rq(r){let e=r.split(":");return e[e.length-1]}function nq(r){return[].concat(...r)}var YD=Ie(fs(),1),JD=Ie(C1(),1);Qo();jc();Zo();var oq=(0,YD.default)("ipfs:repo:migrator:migration-8");function XD(r){return r.child?XD(r.child):r}function sq(r){try{let e=Vt.decode(`b${r.toString().toLowerCase().slice(1)}`),t=we.decode(e).multihash.bytes,n=Vt.encode(t).slice(1).toUpperCase();return new Ye(`/${n}`,!1)}catch{return r}}function aq(r){try{let e=Vt.decode(`b${r.toString().toLowerCase().slice(1)}`),t=Ci(e),n=Vt.encode(we.createV1(Bs,t).bytes).slice(1);return new Ye(`/${n.toUpperCase()}`,!1)}catch{return r}}async function GD(r,e,t){let n=r.blocks;await n.open();let i=XD(n),o=await(0,JD.default)(i.queryKeys({filters:[a=>t(a).toString()!==a.toString()]}));try{let a=0;for await(let c of i.query({})){let l=t(c.key);l.toString()!==c.key.toString()&&(a+=1,oq(`Migrating Block from ${c.key} to ${l}`,await i.has(c.key)),await i.delete(c.key),await i.put(l,c.value),e(a/o*100,`Migrated Block from ${c.key} to ${l}`))}}finally{await n.close()}}var QD={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(r,e=()=>{})=>GD(r,e,sq),revert:(r,e=()=>{})=>GD(r,e,aq)};ur();ur();var uq=new TextDecoder;function k1(r,e){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=r.length)throw new Error("protobuf: unexpected end of data");let i=r[e++];if(t+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[t,e]}function jg(r,e){let t;[t,e]=k1(r,e);let n=e+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(e,n),n]}function ZD(r,e){let t;return[t,e]=k1(r,e),[t&7,t>>3,e]}function cq(r){let e={},t=r.length,n=0;for(;n<t;){let i,o;if([i,o,n]=ZD(r,n),o===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=jg(r,n)}else if(o===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let a;[a,n]=jg(r,n),e.Name=uq.decode(a)}else if(o===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=k1(r,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function eC(r){let e=r.length,t=0,n,i=!1,o;for(;t<e;){let c,l;if([c,l,t]=ZD(r,t),c!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${c}`);if(l===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,t]=jg(r,t),n&&(i=!0)}else if(l===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let h;[h,t]=jg(r,t),n.push(cq(h))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${l}`)}if(t>e)throw new Error("protobuf: (PBNode) unexpected end of data");let a={};return o&&(a.Data=o),a.Links=n||[],a}var rC=new TextEncoder,tC=2**32,fq=2**31;function lq(r,e){let t=e.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");t=sp(e,t,r.Tsize)-1,e[t]=24}if(typeof r.Name=="string"){let n=rC.encode(r.Name);t-=n.length,e.set(n,t),t=sp(e,t,n.length)-1,e[t]=18}return r.Hash&&(t-=r.Hash.length,e.set(r.Hash,t),t=sp(e,t,r.Hash.length)-1,e[t]=10),e.length-t}function nC(r){let e=dq(r),t=new Uint8Array(e),n=e;if(r.Data&&(n-=r.Data.length,t.set(r.Data,n),n=sp(t,n,r.Data.length)-1,t[n]=10),r.Links)for(let i=r.Links.length-1;i>=0;i--){let o=lq(r.Links[i],t.subarray(0,n));n-=o,n=sp(t,n,o)-1,t[n]=18}return t}function hq(r){let e=0;if(r.Hash){let t=r.Hash.length;e+=1+t+Hl(t)}if(typeof r.Name=="string"){let t=rC.encode(r.Name).length;e+=1+t+Hl(t)}return typeof r.Tsize=="number"&&(e+=1+Hl(r.Tsize)),e}function dq(r){let e=0;if(r.Data){let t=r.Data.length;e+=1+t+Hl(t)}if(r.Links)for(let t of r.Links){let n=hq(t);e+=1+n+Hl(n)}return e}function sp(r,e,t){e-=Hl(t);let n=e;for(;t>=fq;)r[e++]=t&127|128,t/=128;for(;t>=128;)r[e++]=t&127|128,t>>>=7;return r[e]=t,n}function Hl(r){return r%2===0&&r++,Math.floor((pq(r)+6)/7)}function pq(r){let e=0;return r>=tC&&(r=Math.floor(r/tC),e=32),r>=1<<16&&(r>>>=16,e+=16),r>=1<<8&&(r>>>=8,e+=8),e+mq[r]}var mq=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];ur();var yq=["Data","Links"],gq=["Hash","Name","Tsize"],iC=new TextEncoder;function wq(r,e){if(r===e)return 0;let t=r.Name?iC.encode(r.Name):[],n=e.Name?iC.encode(e.Name):[],i=t.length,o=n.length;for(let a=0,c=Math.min(i,o);a<c;++a)if(t[a]!==n[a]){i=t[a],o=n[a];break}return i<o?-1:o<i?1:0}function oC(r,e){return!Object.keys(r).some(t=>!e.includes(t))}function sC(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");if(!oC(r,yq))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<r.Links.length;e++){let t=r.Links[e];if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!oC(t,gq))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!t.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash.asCID!==t.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0&&(typeof t.Tsize!="number"||t.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&wq(t,r.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}var qg=112;function ap(r){sC(r);let e={};return r.Links&&(e.Links=r.Links.map(t=>{let n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),r.Data&&(e.Data=r.Data),nC(e)}function up(r){let e=eC(r),t={};return e.Data&&(t.Data=e.Data),e.Links&&(t.Links=e.Links.map(n=>{let i={};try{i.Hash=we.decode(n.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(i.Name=n.Name),n.Tsize!==void 0&&(i.Tsize=n.Tsize),i})),t}ur();var of=Ie(Wu(),1),ik=of.default.Reader,Cq=of.default.Writer,dse=of.default.util,Yg=of.default.roots.default||(of.default.roots.default={}),ok=Yg.ipfs=(()=>{let r={};return r.pin=function(){let e={};return e.Set=function(){function t(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}return t.prototype.version=0,t.prototype.fanout=0,t.prototype.seed=0,t.encode=function(i,o){return o||(o=Cq.create()),i.version!=null&&Object.hasOwnProperty.call(i,"version")&&o.uint32(8).uint32(i.version),i.fanout!=null&&Object.hasOwnProperty.call(i,"fanout")&&o.uint32(16).uint32(i.fanout),i.seed!=null&&Object.hasOwnProperty.call(i,"seed")&&o.uint32(29).fixed32(i.seed),o},t.decode=function(i,o){i instanceof ik||(i=ik.create(i));for(var a=o===void 0?i.len:i.pos+o,c=new Yg.ipfs.pin.Set;i.pos<a;){var l=i.uint32();switch(l>>>3){case 1:c.version=i.uint32();break;case 2:c.fanout=i.uint32();break;case 3:c.seed=i.fixed32();break;default:i.skipType(l&7);break}}return c},t.fromObject=function(i){if(i instanceof Yg.ipfs.pin.Set)return i;var o=new Yg.ipfs.pin.Set;return i.version!=null&&(o.version=i.version>>>0),i.fanout!=null&&(o.fanout=i.fanout>>>0),i.seed!=null&&(o.seed=i.seed>>>0),o},t.toObject=function(i,o){o||(o={});var a={};return o.defaults&&(a.version=0,a.fanout=0,a.seed=0),i.version!=null&&i.hasOwnProperty("version")&&(a.version=i.version),i.fanout!=null&&i.hasOwnProperty("fanout")&&(a.fanout=i.fanout),i.seed!=null&&i.hasOwnProperty("seed")&&(a.seed=i.seed),a},t.prototype.toJSON=function(){return this.constructor.toObject(this,of.default.util.toJSONOptions)},t}(),e}(),r})();var ck=Ie(ak(),1),Qg=Ie(Ku(),1);Qo();ur();var hp=new Ye("/local/pins"),Xg=256,uk=8192,q1=we.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),sf={direct:"direct",recursive:"recursive"};function H1(r){return new Ye(`/${Vt.encode(r.multihash.bytes).toUpperCase().substring(1)}`)}Kc();Dn();mo();Cy();var W1=ok.pin.Set;function kq(r){let e=r.Data;if(!e)throw new Error("No data present");let t=Qg.default.decode(e),n=Qg.default.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+t>e.length)throw new Error("Impossibly large set header length");let i=e.slice(n,t+n),o=W1.toObject(W1.decode(i),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(o.version!==1)throw new Error(`Unsupported Set version: ${o.version}`);if(o.fanout>r.Links.length)throw new Error("Impossibly large fanout");return{header:o,data:e.slice(t+n)}}function Iq(r,e){let t=new Uint8Array(4);new DataView(t.buffer).setUint32(0,r,!0);let i=wt(e.toString()),o=pn([t,i],t.byteLength+i.byteLength);return(0,ck.default)(Ze(o))}async function*fk(r,e){let t=kq(e),n=0;for(let i of e.Links){if(n<t.header.fanout){let o=i.Hash;if(!q1.equals(o)){let a=await r.get(o),c=up(a);yield*fk(r,c)}}else yield i.Hash;n++}}async function*dp(r,e,t){let n=e.Links.find(a=>a.Name===t);if(!n)throw new Error("No link found with name "+t);let i=await r.get(n.Hash),o=up(i);yield*fk(r,o)}function Tq(r,e){return t(e,0);async function t(n,i){let o=W1.encode({version:1,fanout:Xg,seed:i}).finish(),a=Qg.default.encode(o.length),c=pn([a,o]),l=[];for(let m=0;m<Xg;m++)l.push({Name:"",Tsize:1,Hash:q1});if(n.length<=uk){let m=n.map(k=>({link:{Name:"",Tsize:1,Hash:k.key},data:k.data||new Uint8Array})).sort((k,T)=>dv(k.link.Hash.bytes,T.link.Hash.bytes)),y=l.concat(m.map(k=>k.link));return{Data:pn([c,...m.map(k=>k.data)]),Links:y}}else{let m=n.reduce((E,k)=>{let T=Iq(i,k.key)%Xg;return E[T]=T in E?E[T].concat([k]):[k],E},[]),y=0;for(let E of m){let k=await t(E,i+1);await h(k,y),y++}return{Data:c,Links:l}}async function h(m,y){let E=ap(m),k=await bl.digest(E),T=we.createV0(k);await r.put(T,E);let O=m.Links.reduce((ue,ne)=>ue+(ne.Tsize||0),0)+E.length;l[y]={Name:"",Tsize:O,Hash:T}}}}async function V1(r,e,t){let n=await Tq(r,t.map(l=>({key:l}))),i=ap(n),o=await bl.digest(i),a=we.createV0(o);await r.put(a,i);let c=n.Links.reduce((l,h)=>l+h.Tsize,0)+i.length;return{Name:e,Tsize:c,Hash:a}}var Zg=Ie(C1(),1);Cy();Zo();Qo();async function Bq(r,e,t,n){if(!await e.has(hp))return;let i=await e.get(hp),o=we.decode(i),a=await r.get(o),c=up(a),l=0,h=await(0,Zg.default)(dp(r,c,sf.recursive))+await(0,Zg.default)(dp(r,c,sf.direct));for await(let m of dp(r,c,sf.recursive)){l++;let y={depth:1/0};m.version!==0&&(y.version=m.version),m.code!==qg&&(y.codec=m.code),await t.put(H1(m),Ta(y)),n(l/h*100,`Migrated recursive pin ${m}`)}for await(let m of dp(r,c,sf.direct)){l++;let y={depth:0};m.version!==0&&(y.version=m.version),m.code!==qg&&(y.codec=m.code),await t.put(H1(m),Ta(y)),n(l/h*100,`Migrated direct pin ${m}`)}await r.delete(o),await e.delete(hp)}async function Lq(r,e,t,n){let i=[],o=[],a=0,c=await(0,Zg.default)(t.queryKeys({}));for await(let{key:E,value:k}of t.query({})){a++;let T=Ao(k),O=we.create(T.version||0,T.codec||qg,Ci(Vt.decode("b"+E.toString().toLowerCase().split("/").pop())));T.depth===0?(n(a/c*100,`Reverted direct pin ${O}`),o.push(O)):(n(a/c*100,`Reverted recursive pin ${O}`),i.push(O))}n(100,"Updating pin root");let l={Links:[await V1(r,sf.direct,o),await V1(r,sf.recursive,i)]},h=ap(l),m=await bl.digest(h),y=we.createV0(m);await r.put(y,h),await e.put(hp,y.bytes)}async function lk(r,e,t){let n=r.blocks,i=r.datastore,o=r.pins;await n.open(),await i.open(),await o.open();try{await t(n,i,o,e)}finally{await o.close(),await i.close(),await n.close()}}var hk={version:9,description:"Migrates pins to datastore",migrate:(r,e=()=>{})=>lk(r,e,Bq),revert:(r,e=()=>{})=>lk(r,e,Lq)};var Do={};Re(Do,{abortedError:()=>Oq,dbDeleteFailedError:()=>Y1,dbOpenFailedError:()=>G1,dbWriteFailedError:()=>J1,notFoundError:()=>Xs});var Vl=Ie(So(),1);function G1(r){return r=r||new Error("Cannot open database"),(0,Vl.default)(r,"ERR_DB_OPEN_FAILED")}function Y1(r){return r=r||new Error("Delete failed"),(0,Vl.default)(r,"ERR_DB_DELETE_FAILED")}function J1(r){return r=r||new Error("Write failed"),(0,Vl.default)(r,"ERR_DB_WRITE_FAILED")}function Xs(r){return r=r||new Error("Not Found"),(0,Vl.default)(r,"ERR_NOT_FOUND")}function Oq(r){return r=r||new Error("Aborted"),(0,Vl.default)(r,"ERR_ABORTED")}var dk=new Ye("/config"),pp=new Ye("/version");function mp(r){let e=r;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}async function Nq(r,e,t){let n=await e(r);if(n)return n;let i=mp(t);return i?new Promise((o,a)=>{let c=i.store("readonly").get(r.toString());c.transaction.onabort=()=>{a(c.transaction.error)},c.transaction.oncomplete=()=>{o(Boolean(c.result))}}):!1}async function Rq(r,e,t,n){if(await t(r))return e(r);let i=mp(n);if(!i)throw Xs();return new Promise((o,a)=>{let c=i.store("readonly").get(r.toString());c.transaction.onabort=()=>{a(c.transaction.error)},c.transaction.oncomplete=()=>{if(c.result)return o(c.result);a(Xs())}})}function ew(r){let e=r.get.bind(r),t=r.has.bind(r);return r.get=n=>Rq(n,e,t,r),r.has=n=>Nq(n,t,r),r}function X1(r){return{...r,root:ew(r.root),datastore:ew(r.datastore),pins:ew(r.pins),keys:ew(r.keys)}}mo();Dn();async function Mq(r,e,t=()=>{}){let n=mp(e);if(!n){t(`${r} did not need an upgrade`);return}t(`Upgrading ${r}`),await gk(n,(o,a)=>[{type:"del",key:o},{type:"put",key:wt(o),value:a}])}async function Uq(r,e,t=()=>{}){let n=mp(e);if(!n){t(`${r} did not need a downgrade`);return}t(`Downgrading ${r}`),await gk(n,(o,a)=>[{type:"del",key:o},{type:"put",key:Ze(o),value:a}])}function mk(r){return r.child?mk(r.child):r}async function pk(r,e,t){let n=Object.entries(r).map(([a,c])=>({key:a,backend:mk(c)})).filter(({key:a,backend:c})=>c.constructor.name==="LevelDatastore").map(({key:a,backend:c})=>({name:a,store:c}));e(0,`Migrating ${n.length} dbs`);let i=0,o=a=>{e(Math.round(i/n.length*100),a)};for(let{name:a,store:c}of n){await c.open();try{await t(a,c,o)}finally{i++,await c.close()}}e(100,`Migrated ${n.length} dbs`)}var yk={version:10,description:"Migrates datastore-level keys to binary",migrate:(r,e=()=>{})=>pk(r,e,Mq),revert:(r,e=()=>{})=>pk(r,e,Uq)};function gk(r,e){function t(n,i){let o=r.store("readwrite"),a=o.transaction,c=0,l;a.onabort=()=>i(l||a.error||new Error("aborted by user")),a.oncomplete=()=>i();function h(){let m=n[c++],y=m.key,E;try{E=m.type==="del"?o.delete(y):o.put(m.value,y)}catch(k){l=k,a.abort();return}c<n.length&&(E.onsuccess=h)}h()}return new Promise((n,i)=>{let o=r.iterator(),a=l=>l;o._deserializeKey=o._deserializeValue=a,c();function c(){let l=(h,m,y)=>{if(h||m===void 0){let E=k=>{if(k){i(k);return}n()};o.end(E);return}t(e(m,y),c)};o.next(l)}})}var Vu=new Ye("/local/filesroot");async function Kq(r,e=()=>{}){if(e(100,"Migrating MFS root to repo datastore"),await r.root.open(),await r.datastore.open(),await r.root.has(Vu)){let t=await r.root.get(Vu);await r.datastore.put(Vu,t),await r.root.delete(Vu)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo datastore")}async function $q(r,e=()=>{}){if(e(100,"Migrating MFS root to repo root datastore"),await r.root.open(),await r.datastore.open(),await r.datastore.has(Vu)){let t=await r.datastore.get(Vu);await r.root.put(Vu,t),await r.datastore.delete(Vu)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo root datastore")}var wk={version:11,description:"Store mfs root in the datastore",migrate:Kq,revert:$q};var px=Ie(Wu(),1);var af=Ie(Wu(),1),bk=af.default.Reader,zq=af.default.Writer,jq=af.default.util,tw=af.default.roots.default||(af.default.roots.default={}),Q1=tw.Protocols=(()=>{function r(e){if(this.protocols=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.protocols=jq.emptyArray,r.encode=function(t,n){if(n||(n=zq.create()),t.protocols!=null&&t.protocols.length)for(var i=0;i<t.protocols.length;++i)n.uint32(10).string(t.protocols[i]);return n},r.decode=function(t,n){t instanceof bk||(t=bk.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new tw.Protocols;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.protocols&&o.protocols.length||(o.protocols=[]),o.protocols.push(t.string());break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof tw.Protocols)return t;var n=new tw.Protocols;if(t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Protocols.protocols: array expected");n.protocols=[];for(var i=0;i<t.protocols.length;++i)n.protocols[i]=String(t.protocols[i])}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.protocols=[]),t.protocols&&t.protocols.length){i.protocols=[];for(var o=0;o<t.protocols.length;++o)i.protocols[o]=t.protocols[o]}return i},r.prototype.toJSON=function(){return this.constructor.toObject(this,af.default.util.toJSONOptions)},r})();var Ma=Ie(Wu(),1),Gl=Ma.default.Reader,Z1=Ma.default.Writer,br=Ma.default.util,bn=Ma.default.roots.default||(Ma.default.roots.default={}),ex=bn.Addresses=(()=>{function r(e){if(this.addrs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.addrs=br.emptyArray,r.prototype.certifiedRecord=null,r.encode=function(t,n){if(n||(n=Z1.create()),t.addrs!=null&&t.addrs.length)for(var i=0;i<t.addrs.length;++i)bn.Addresses.Address.encode(t.addrs[i],n.uint32(10).fork()).ldelim();return t.certifiedRecord!=null&&Object.hasOwnProperty.call(t,"certifiedRecord")&&bn.Addresses.CertifiedRecord.encode(t.certifiedRecord,n.uint32(18).fork()).ldelim(),n},r.decode=function(t,n){t instanceof Gl||(t=Gl.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new bn.Addresses;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.addrs&&o.addrs.length||(o.addrs=[]),o.addrs.push(bn.Addresses.Address.decode(t,t.uint32()));break;case 2:o.certifiedRecord=bn.Addresses.CertifiedRecord.decode(t,t.uint32());break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof bn.Addresses)return t;var n=new bn.Addresses;if(t.addrs){if(!Array.isArray(t.addrs))throw TypeError(".Addresses.addrs: array expected");n.addrs=[];for(var i=0;i<t.addrs.length;++i){if(typeof t.addrs[i]!="object")throw TypeError(".Addresses.addrs: object expected");n.addrs[i]=bn.Addresses.Address.fromObject(t.addrs[i])}}if(t.certifiedRecord!=null){if(typeof t.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");n.certifiedRecord=bn.Addresses.CertifiedRecord.fromObject(t.certifiedRecord)}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.addrs=[]),n.defaults&&(i.certifiedRecord=null),t.addrs&&t.addrs.length){i.addrs=[];for(var o=0;o<t.addrs.length;++o)i.addrs[o]=bn.Addresses.Address.toObject(t.addrs[o],n)}return t.certifiedRecord!=null&&t.hasOwnProperty("certifiedRecord")&&(i.certifiedRecord=bn.Addresses.CertifiedRecord.toObject(t.certifiedRecord,n)),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Ma.default.util.toJSONOptions)},r.Address=function(){function e(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}e.prototype.multiaddr=br.newBuffer([]),e.prototype.isCertified=null;let t;return Object.defineProperty(e.prototype,"_isCertified",{get:br.oneOfGetter(t=["isCertified"]),set:br.oneOfSetter(t)}),e.encode=function(i,o){return o||(o=Z1.create()),i.multiaddr!=null&&Object.hasOwnProperty.call(i,"multiaddr")&&o.uint32(10).bytes(i.multiaddr),i.isCertified!=null&&Object.hasOwnProperty.call(i,"isCertified")&&o.uint32(16).bool(i.isCertified),o},e.decode=function(i,o){i instanceof Gl||(i=Gl.create(i));for(var a=o===void 0?i.len:i.pos+o,c=new bn.Addresses.Address;i.pos<a;){var l=i.uint32();switch(l>>>3){case 1:c.multiaddr=i.bytes();break;case 2:c.isCertified=i.bool();break;default:i.skipType(l&7);break}}return c},e.fromObject=function(i){if(i instanceof bn.Addresses.Address)return i;var o=new bn.Addresses.Address;return i.multiaddr!=null&&(typeof i.multiaddr=="string"?br.base64.decode(i.multiaddr,o.multiaddr=br.newBuffer(br.base64.length(i.multiaddr)),0):i.multiaddr.length&&(o.multiaddr=i.multiaddr)),i.isCertified!=null&&(o.isCertified=Boolean(i.isCertified)),o},e.toObject=function(i,o){o||(o={});var a={};return o.defaults&&(o.bytes===String?a.multiaddr="":(a.multiaddr=[],o.bytes!==Array&&(a.multiaddr=br.newBuffer(a.multiaddr)))),i.multiaddr!=null&&i.hasOwnProperty("multiaddr")&&(a.multiaddr=o.bytes===String?br.base64.encode(i.multiaddr,0,i.multiaddr.length):o.bytes===Array?Array.prototype.slice.call(i.multiaddr):i.multiaddr),i.isCertified!=null&&i.hasOwnProperty("isCertified")&&(a.isCertified=i.isCertified,o.oneofs&&(a._isCertified="isCertified")),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ma.default.util.toJSONOptions)},e}(),r.CertifiedRecord=function(){function e(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}return e.prototype.seq=br.Long?br.Long.fromBits(0,0,!0):0,e.prototype.raw=br.newBuffer([]),e.encode=function(n,i){return i||(i=Z1.create()),n.seq!=null&&Object.hasOwnProperty.call(n,"seq")&&i.uint32(8).uint64(n.seq),n.raw!=null&&Object.hasOwnProperty.call(n,"raw")&&i.uint32(18).bytes(n.raw),i},e.decode=function(n,i){n instanceof Gl||(n=Gl.create(n));for(var o=i===void 0?n.len:n.pos+i,a=new bn.Addresses.CertifiedRecord;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.seq=n.uint64();break;case 2:a.raw=n.bytes();break;default:n.skipType(c&7);break}}return a},e.fromObject=function(n){if(n instanceof bn.Addresses.CertifiedRecord)return n;var i=new bn.Addresses.CertifiedRecord;return n.seq!=null&&(br.Long?(i.seq=br.Long.fromValue(n.seq)).unsigned=!0:typeof n.seq=="string"?i.seq=parseInt(n.seq,10):typeof n.seq=="number"?i.seq=n.seq:typeof n.seq=="object"&&(i.seq=new br.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0))),n.raw!=null&&(typeof n.raw=="string"?br.base64.decode(n.raw,i.raw=br.newBuffer(br.base64.length(n.raw)),0):n.raw.length&&(i.raw=n.raw)),i},e.toObject=function(n,i){i||(i={});var o={};if(i.defaults){if(br.Long){var a=new br.Long(0,0,!0);o.seq=i.longs===String?a.toString():i.longs===Number?a.toNumber():a}else o.seq=i.longs===String?"0":0;i.bytes===String?o.raw="":(o.raw=[],i.bytes!==Array&&(o.raw=br.newBuffer(o.raw)))}return n.seq!=null&&n.hasOwnProperty("seq")&&(typeof n.seq=="number"?o.seq=i.longs===String?String(n.seq):n.seq:o.seq=i.longs===String?br.Long.prototype.toString.call(n.seq):i.longs===Number?new br.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0):n.seq),n.raw!=null&&n.hasOwnProperty("raw")&&(o.raw=i.bytes===String?br.base64.encode(n.raw,0,n.raw.length):i.bytes===Array?Array.prototype.slice.call(n.raw):n.raw),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ma.default.util.toJSONOptions)},e}(),r})();var Ua=Ie(Wu(),1),Yl=Ua.default.Reader,tx=Ua.default.Writer,Jt=Ua.default.util,Qr=Ua.default.roots.default||(Ua.default.roots.default={}),rx=Qr.Peer=(()=>{function r(t){if(this.addresses=[],this.protocols=[],this.metadata=[],t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}r.prototype.addresses=Jt.emptyArray,r.prototype.protocols=Jt.emptyArray,r.prototype.metadata=Jt.emptyArray,r.prototype.pubKey=null,r.prototype.peerRecordEnvelope=null;let e;return Object.defineProperty(r.prototype,"_pubKey",{get:Jt.oneOfGetter(e=["pubKey"]),set:Jt.oneOfSetter(e)}),Object.defineProperty(r.prototype,"_peerRecordEnvelope",{get:Jt.oneOfGetter(e=["peerRecordEnvelope"]),set:Jt.oneOfSetter(e)}),r.encode=function(n,i){if(i||(i=tx.create()),n.addresses!=null&&n.addresses.length)for(var o=0;o<n.addresses.length;++o)Qr.Address.encode(n.addresses[o],i.uint32(10).fork()).ldelim();if(n.protocols!=null&&n.protocols.length)for(var o=0;o<n.protocols.length;++o)i.uint32(18).string(n.protocols[o]);if(n.metadata!=null&&n.metadata.length)for(var o=0;o<n.metadata.length;++o)Qr.Metadata.encode(n.metadata[o],i.uint32(26).fork()).ldelim();return n.pubKey!=null&&Object.hasOwnProperty.call(n,"pubKey")&&i.uint32(34).bytes(n.pubKey),n.peerRecordEnvelope!=null&&Object.hasOwnProperty.call(n,"peerRecordEnvelope")&&i.uint32(42).bytes(n.peerRecordEnvelope),i},r.decode=function(n,i){n instanceof Yl||(n=Yl.create(n));for(var o=i===void 0?n.len:n.pos+i,a=new Qr.Peer;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.addresses&&a.addresses.length||(a.addresses=[]),a.addresses.push(Qr.Address.decode(n,n.uint32()));break;case 2:a.protocols&&a.protocols.length||(a.protocols=[]),a.protocols.push(n.string());break;case 3:a.metadata&&a.metadata.length||(a.metadata=[]),a.metadata.push(Qr.Metadata.decode(n,n.uint32()));break;case 4:a.pubKey=n.bytes();break;case 5:a.peerRecordEnvelope=n.bytes();break;default:n.skipType(c&7);break}}return a},r.fromObject=function(n){if(n instanceof Qr.Peer)return n;var i=new Qr.Peer;if(n.addresses){if(!Array.isArray(n.addresses))throw TypeError(".Peer.addresses: array expected");i.addresses=[];for(var o=0;o<n.addresses.length;++o){if(typeof n.addresses[o]!="object")throw TypeError(".Peer.addresses: object expected");i.addresses[o]=Qr.Address.fromObject(n.addresses[o])}}if(n.protocols){if(!Array.isArray(n.protocols))throw TypeError(".Peer.protocols: array expected");i.protocols=[];for(var o=0;o<n.protocols.length;++o)i.protocols[o]=String(n.protocols[o])}if(n.metadata){if(!Array.isArray(n.metadata))throw TypeError(".Peer.metadata: array expected");i.metadata=[];for(var o=0;o<n.metadata.length;++o){if(typeof n.metadata[o]!="object")throw TypeError(".Peer.metadata: object expected");i.metadata[o]=Qr.Metadata.fromObject(n.metadata[o])}}return n.pubKey!=null&&(typeof n.pubKey=="string"?Jt.base64.decode(n.pubKey,i.pubKey=Jt.newBuffer(Jt.base64.length(n.pubKey)),0):n.pubKey.length&&(i.pubKey=n.pubKey)),n.peerRecordEnvelope!=null&&(typeof n.peerRecordEnvelope=="string"?Jt.base64.decode(n.peerRecordEnvelope,i.peerRecordEnvelope=Jt.newBuffer(Jt.base64.length(n.peerRecordEnvelope)),0):n.peerRecordEnvelope.length&&(i.peerRecordEnvelope=n.peerRecordEnvelope)),i},r.toObject=function(n,i){i||(i={});var o={};if((i.arrays||i.defaults)&&(o.addresses=[],o.protocols=[],o.metadata=[]),n.addresses&&n.addresses.length){o.addresses=[];for(var a=0;a<n.addresses.length;++a)o.addresses[a]=Qr.Address.toObject(n.addresses[a],i)}if(n.protocols&&n.protocols.length){o.protocols=[];for(var a=0;a<n.protocols.length;++a)o.protocols[a]=n.protocols[a]}if(n.metadata&&n.metadata.length){o.metadata=[];for(var a=0;a<n.metadata.length;++a)o.metadata[a]=Qr.Metadata.toObject(n.metadata[a],i)}return n.pubKey!=null&&n.hasOwnProperty("pubKey")&&(o.pubKey=i.bytes===String?Jt.base64.encode(n.pubKey,0,n.pubKey.length):i.bytes===Array?Array.prototype.slice.call(n.pubKey):n.pubKey,i.oneofs&&(o._pubKey="pubKey")),n.peerRecordEnvelope!=null&&n.hasOwnProperty("peerRecordEnvelope")&&(o.peerRecordEnvelope=i.bytes===String?Jt.base64.encode(n.peerRecordEnvelope,0,n.peerRecordEnvelope.length):i.bytes===Array?Array.prototype.slice.call(n.peerRecordEnvelope):n.peerRecordEnvelope,i.oneofs&&(o._peerRecordEnvelope="peerRecordEnvelope")),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,Ua.default.util.toJSONOptions)},r})(),jse=Qr.Address=(()=>{function r(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}r.prototype.multiaddr=Jt.newBuffer([]),r.prototype.isCertified=null;let e;return Object.defineProperty(r.prototype,"_isCertified",{get:Jt.oneOfGetter(e=["isCertified"]),set:Jt.oneOfSetter(e)}),r.encode=function(n,i){return i||(i=tx.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&i.uint32(10).bytes(n.multiaddr),n.isCertified!=null&&Object.hasOwnProperty.call(n,"isCertified")&&i.uint32(16).bool(n.isCertified),i},r.decode=function(n,i){n instanceof Yl||(n=Yl.create(n));for(var o=i===void 0?n.len:n.pos+i,a=new Qr.Address;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.multiaddr=n.bytes();break;case 2:a.isCertified=n.bool();break;default:n.skipType(c&7);break}}return a},r.fromObject=function(n){if(n instanceof Qr.Address)return n;var i=new Qr.Address;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?Jt.base64.decode(n.multiaddr,i.multiaddr=Jt.newBuffer(Jt.base64.length(n.multiaddr)),0):n.multiaddr.length&&(i.multiaddr=n.multiaddr)),n.isCertified!=null&&(i.isCertified=Boolean(n.isCertified)),i},r.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(i.bytes===String?o.multiaddr="":(o.multiaddr=[],i.bytes!==Array&&(o.multiaddr=Jt.newBuffer(o.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(o.multiaddr=i.bytes===String?Jt.base64.encode(n.multiaddr,0,n.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),n.isCertified!=null&&n.hasOwnProperty("isCertified")&&(o.isCertified=n.isCertified,i.oneofs&&(o._isCertified="isCertified")),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,Ua.default.util.toJSONOptions)},r})(),qse=Qr.Metadata=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.key="",r.prototype.value=Jt.newBuffer([]),r.encode=function(t,n){return n||(n=tx.create()),t.key!=null&&Object.hasOwnProperty.call(t,"key")&&n.uint32(10).string(t.key),t.value!=null&&Object.hasOwnProperty.call(t,"value")&&n.uint32(18).bytes(t.value),n},r.decode=function(t,n){t instanceof Yl||(t=Yl.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new Qr.Metadata;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.key=t.string();break;case 2:o.value=t.bytes();break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof Qr.Metadata)return t;var n=new Qr.Metadata;return t.key!=null&&(n.key=String(t.key)),t.value!=null&&(typeof t.value=="string"?Jt.base64.decode(t.value,n.value=Jt.newBuffer(Jt.base64.length(t.value)),0):t.value.length&&(n.value=t.value)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(i.key="",n.bytes===String?i.value="":(i.value=[],n.bytes!==Array&&(i.value=Jt.newBuffer(i.value)))),t.key!=null&&t.hasOwnProperty("key")&&(i.key=t.key),t.value!=null&&t.hasOwnProperty("value")&&(i.value=n.bytes===String?Jt.base64.encode(t.value,0,t.value.length):n.bytes===Array?Array.prototype.slice.call(t.value):t.value),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Ua.default.util.toJSONOptions)},r})();var uf=Ie(Wu(),1),vk=uf.default.Reader,qq=uf.default.Writer,vr=uf.default.util,rw=uf.default.roots.default||(uf.default.roots.default={}),_k=rw.Envelope=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.publicKey=vr.newBuffer([]),r.prototype.payloadType=vr.newBuffer([]),r.prototype.payload=vr.newBuffer([]),r.prototype.signature=vr.newBuffer([]),r.encode=function(t,n){return n||(n=qq.create()),t.publicKey!=null&&Object.hasOwnProperty.call(t,"publicKey")&&n.uint32(10).bytes(t.publicKey),t.payloadType!=null&&Object.hasOwnProperty.call(t,"payloadType")&&n.uint32(18).bytes(t.payloadType),t.payload!=null&&Object.hasOwnProperty.call(t,"payload")&&n.uint32(26).bytes(t.payload),t.signature!=null&&Object.hasOwnProperty.call(t,"signature")&&n.uint32(42).bytes(t.signature),n},r.decode=function(t,n){t instanceof vk||(t=vk.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new rw.Envelope;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.publicKey=t.bytes();break;case 2:o.payloadType=t.bytes();break;case 3:o.payload=t.bytes();break;case 5:o.signature=t.bytes();break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof rw.Envelope)return t;var n=new rw.Envelope;return t.publicKey!=null&&(typeof t.publicKey=="string"?vr.base64.decode(t.publicKey,n.publicKey=vr.newBuffer(vr.base64.length(t.publicKey)),0):t.publicKey.length&&(n.publicKey=t.publicKey)),t.payloadType!=null&&(typeof t.payloadType=="string"?vr.base64.decode(t.payloadType,n.payloadType=vr.newBuffer(vr.base64.length(t.payloadType)),0):t.payloadType.length&&(n.payloadType=t.payloadType)),t.payload!=null&&(typeof t.payload=="string"?vr.base64.decode(t.payload,n.payload=vr.newBuffer(vr.base64.length(t.payload)),0):t.payload.length&&(n.payload=t.payload)),t.signature!=null&&(typeof t.signature=="string"?vr.base64.decode(t.signature,n.signature=vr.newBuffer(vr.base64.length(t.signature)),0):t.signature.length&&(n.signature=t.signature)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.publicKey="":(i.publicKey=[],n.bytes!==Array&&(i.publicKey=vr.newBuffer(i.publicKey))),n.bytes===String?i.payloadType="":(i.payloadType=[],n.bytes!==Array&&(i.payloadType=vr.newBuffer(i.payloadType))),n.bytes===String?i.payload="":(i.payload=[],n.bytes!==Array&&(i.payload=vr.newBuffer(i.payload))),n.bytes===String?i.signature="":(i.signature=[],n.bytes!==Array&&(i.signature=vr.newBuffer(i.signature)))),t.publicKey!=null&&t.hasOwnProperty("publicKey")&&(i.publicKey=n.bytes===String?vr.base64.encode(t.publicKey,0,t.publicKey.length):n.bytes===Array?Array.prototype.slice.call(t.publicKey):t.publicKey),t.payloadType!=null&&t.hasOwnProperty("payloadType")&&(i.payloadType=n.bytes===String?vr.base64.encode(t.payloadType,0,t.payloadType.length):n.bytes===Array?Array.prototype.slice.call(t.payloadType):t.payloadType),t.payload!=null&&t.hasOwnProperty("payload")&&(i.payload=n.bytes===String?vr.base64.encode(t.payload,0,t.payload.length):n.bytes===Array?Array.prototype.slice.call(t.payload):t.payload),t.signature!=null&&t.hasOwnProperty("signature")&&(i.signature=n.bytes===String?vr.base64.encode(t.signature,0,t.signature.length):n.bytes===Array?Array.prototype.slice.call(t.signature):t.signature),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,uf.default.util.toJSONOptions)},r})();var Gu=Ie(Wu(),1),nw=Gu.default.Reader,xk=Gu.default.Writer,Mr=Gu.default.util,ds=Gu.default.roots.default||(Gu.default.roots.default={}),Ek=ds.PeerRecord=(()=>{function r(e){if(this.addresses=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.peerId=Mr.newBuffer([]),r.prototype.seq=Mr.Long?Mr.Long.fromBits(0,0,!0):0,r.prototype.addresses=Mr.emptyArray,r.encode=function(t,n){if(n||(n=xk.create()),t.peerId!=null&&Object.hasOwnProperty.call(t,"peerId")&&n.uint32(10).bytes(t.peerId),t.seq!=null&&Object.hasOwnProperty.call(t,"seq")&&n.uint32(16).uint64(t.seq),t.addresses!=null&&t.addresses.length)for(var i=0;i<t.addresses.length;++i)ds.PeerRecord.AddressInfo.encode(t.addresses[i],n.uint32(26).fork()).ldelim();return n},r.decode=function(t,n){t instanceof nw||(t=nw.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new ds.PeerRecord;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.peerId=t.bytes();break;case 2:o.seq=t.uint64();break;case 3:o.addresses&&o.addresses.length||(o.addresses=[]),o.addresses.push(ds.PeerRecord.AddressInfo.decode(t,t.uint32()));break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof ds.PeerRecord)return t;var n=new ds.PeerRecord;if(t.peerId!=null&&(typeof t.peerId=="string"?Mr.base64.decode(t.peerId,n.peerId=Mr.newBuffer(Mr.base64.length(t.peerId)),0):t.peerId.length&&(n.peerId=t.peerId)),t.seq!=null&&(Mr.Long?(n.seq=Mr.Long.fromValue(t.seq)).unsigned=!0:typeof t.seq=="string"?n.seq=parseInt(t.seq,10):typeof t.seq=="number"?n.seq=t.seq:typeof t.seq=="object"&&(n.seq=new Mr.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0))),t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".PeerRecord.addresses: array expected");n.addresses=[];for(var i=0;i<t.addresses.length;++i){if(typeof t.addresses[i]!="object")throw TypeError(".PeerRecord.addresses: object expected");n.addresses[i]=ds.PeerRecord.AddressInfo.fromObject(t.addresses[i])}}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.addresses=[]),n.defaults)if(n.bytes===String?i.peerId="":(i.peerId=[],n.bytes!==Array&&(i.peerId=Mr.newBuffer(i.peerId))),Mr.Long){var o=new Mr.Long(0,0,!0);i.seq=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.seq=n.longs===String?"0":0;if(t.peerId!=null&&t.hasOwnProperty("peerId")&&(i.peerId=n.bytes===String?Mr.base64.encode(t.peerId,0,t.peerId.length):n.bytes===Array?Array.prototype.slice.call(t.peerId):t.peerId),t.seq!=null&&t.hasOwnProperty("seq")&&(typeof t.seq=="number"?i.seq=n.longs===String?String(t.seq):t.seq:i.seq=n.longs===String?Mr.Long.prototype.toString.call(t.seq):n.longs===Number?new Mr.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0):t.seq),t.addresses&&t.addresses.length){i.addresses=[];for(var a=0;a<t.addresses.length;++a)i.addresses[a]=ds.PeerRecord.AddressInfo.toObject(t.addresses[a],n)}return i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Gu.default.util.toJSONOptions)},r.AddressInfo=function(){function e(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}return e.prototype.multiaddr=Mr.newBuffer([]),e.encode=function(n,i){return i||(i=xk.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&i.uint32(10).bytes(n.multiaddr),i},e.decode=function(n,i){n instanceof nw||(n=nw.create(n));for(var o=i===void 0?n.len:n.pos+i,a=new ds.PeerRecord.AddressInfo;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.multiaddr=n.bytes();break;default:n.skipType(c&7);break}}return a},e.fromObject=function(n){if(n instanceof ds.PeerRecord.AddressInfo)return n;var i=new ds.PeerRecord.AddressInfo;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?Mr.base64.decode(n.multiaddr,i.multiaddr=Mr.newBuffer(Mr.base64.length(n.multiaddr)),0):n.multiaddr.length&&(i.multiaddr=n.multiaddr)),i},e.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(i.bytes===String?o.multiaddr="":(o.multiaddr=[],i.bytes!==Array&&(o.multiaddr=Mr.newBuffer(o.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(o.multiaddr=i.bytes===String?Mr.base64.encode(n.multiaddr,0,n.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Gu.default.util.toJSONOptions)},e}(),r})();var dx=Ie(oI(),1);px.default.util.Long=void 0;px.default.configure();async function yH(r,e=()=>{}){e(0,"Storing each peerstore key under a single datastore key"),await r.datastore.open();let t={},n=[];for await(let{key:i,value:o}of r.datastore.query({prefix:"/peers"})){n.push(i);let a=i.toString(),[c,l,h,m,y]=a.split("/");if(l==="peers"&&!!["protos","addrs","metadata","keys"].includes(h)&&!!m)if(t[m]=t[m]||{addresses:[],protocols:[],metadata:[]},h==="protos"){let E=Q1.decode(o);t[m].protocols=E.protocols.sort()}else if(h==="addrs"){let E=ex.decode(o);t[m].addresses=E.addrs.sort((k,T)=>new dx.Multiaddr(k.multiaddr).toString().localeCompare(new dx.Multiaddr(T.multiaddr).toString())),E.certifiedRecord&&E.certifiedRecord.raw&&(t[m].peerRecordEnvelope=E.certifiedRecord.raw)}else h==="metadata"?t[m].metadata.push({key:y,value:o}):h==="keys"&&(t[m].pubKey=o)}e(33,"Read peer data from store");for(let i of n)await r.datastore.delete(i);e(66,"Removed existing peer data from store");for(let i of Object.keys(t)){let o=t[i];o.metadata=o.metadata.sort((c,l)=>c.key.localeCompare(l.key));let a=rx.encode(o).finish();await r.datastore.put(new Ye(`/peers/${i}`),a)}await r.datastore.close(),e(100,"Stored each peerstore key under a single datastore key")}async function gH(r,e=()=>{}){e(0,"Storing each peerstore key under a multiple datastore keys"),await r.datastore.open();let t={},n=[];for await(let{key:i,value:o}of r.datastore.query({prefix:"/peers"})){n.push(i);let a=i.toString(),[c,l,h]=a.split("/");t[h]=rx.decode(o)}e(33,"Read peer data from store");for(let i of n)await r.datastore.delete(i);e(66,"Removed existing peer data from store");for(let[i,o]of Object.entries(t)){if(o.protocols&&o.protocols.length>0&&await r.datastore.put(new Ye(`/peers/protos/${i}`),Q1.encode({protocols:o.protocols}).finish()),o.addresses&&o.addresses.length>0){let a=o.peerRecordEnvelope,c;if(a){let l=_k.decode(a),h=Ek.decode(l.payload);c={raw:a,seq:h.seq}}await r.datastore.put(new Ye(`/peers/addrs/${i}`),ex.encode({addrs:o.addresses,certifiedRecord:c}).finish())}if(o.metadata&&o.metadata.length>0)for(let{key:a,value:c}of o.metadata)await r.datastore.put(new Ye(`/peers/metadata/${i}/${a}`),c);o.pubKey&&await r.datastore.put(new Ye(`/peers/keys/${i}`),o.pubKey)}await r.datastore.close(),e(100,"Stored each peerstore key under multiple datastore keys")}var sI={version:12,description:"Store each peerstore peer under a single datastore key",migrate:yH,revert:gH};var cf={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0},lw=[Object.assign({version:1},cf),Object.assign({version:2},cf),Object.assign({version:3},cf),Object.assign({version:4},cf),Object.assign({version:5},cf),Object.assign({version:6},cf),Object.assign({version:7},cf),QD,hk,yk,wk,sI];var aI=Ie(fs(),1);var mx={};Re(mx,{InvalidValueError:()=>th,MissingRepoOptionsError:()=>Qs,NonReversibleMigrationError:()=>Zl,NotInitializedRepoError:()=>Ju,RequiredParameterError:()=>eh});var Zl=class extends Error{constructor(e){super(e),this.name="NonReversibleMigrationError",this.code=Zl.code,this.message=e}};Zl.code="ERR_NON_REVERSIBLE_MIGRATION";var Ju=class extends Error{constructor(e){super(e),this.name="NotInitializedRepoError",this.code=Ju.code,this.message=e}};Ju.code="ERR_NOT_INITIALIZED_REPO";var eh=class extends Error{constructor(e){super(e),this.name="RequiredParameterError",this.code=eh.code,this.message=e}};eh.code="ERR_REQUIRED_PARAMETER";var th=class extends Error{constructor(e){super(e),this.name="InvalidValueError",this.code=th.code,this.message=e}};th.code="ERR_INVALID_VALUE";var Qs=class extends Error{constructor(e){super(e),this.name="MissingRepoOptionsError",this.code=Qs.code,this.message=e}};Qs.code="ERR_MISSING_REPO_OPTIONS";var yx=(0,aI.default)("ipfs:repo:migrator:repo:init");async function uI(r){if(!r)throw new Qs("Please pass repo options when trying to open a repo");let e=r.root;try{await e.open();let t=await e.has(pp),n=await e.has(dk);return!t||!n?(yx(`Version entry present: ${t}`),yx(`Config entry present: ${n}`),!1):!0}catch(t){return yx("While checking if repo is initialized error was thrown: "+t.message),!1}finally{if(e!==void 0)try{await e.close()}catch{}}}mo();Dn();async function gx(r){if(!await uI(r))throw new Ju("Repo is not initialized!");let e=r.root;await e.open();try{return parseInt(Ze(await e.get(pp)))}finally{await e.close()}}async function bp(r,e){if(!e)throw new Qs("Please pass repo options when trying to open a repo");let t=e.root;await t.open(),await t.put(pp,wt(String(r))),await t.close()}var cI=Ie(fs(),1),ys=(0,cI.default)("ipfs:repo:migrator");function bH(r){return r=r||lw,!Array.isArray(r)||r.length===0?0:r[r.length-1].version}async function fI(r,e,t,n,{ignoreLock:i=!1,onProgress:o,isDryRun:a=!1,migrations:c}){if(c=c||lw,!r)throw new ko.RequiredParameterError("Path argument is required!");if(!t)throw new ko.RequiredParameterError("repoOptions argument is required!");if(!n)throw new ko.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(n)||n<=0)throw new ko.InvalidValueError("Version has to be positive integer!");e=X1(e);let l=await gx(e);if(l===n){ys("Nothing to migrate.");return}if(l>n)throw new ko.InvalidValueError(`Current repo's version (${l}) is higher then toVersion (${n}), you probably wanted to revert it?`);hI(c,l,n);let h;!a&&!i&&(h=await t.repoLock.lock(r));try{for(let m of c){if(n!==void 0&&m.version>n)break;if(!(m.version<=l)){ys(`Migrating version ${m.version}`);try{if(!a){let y=()=>{};o&&(y=(E,k)=>o(m.version,E.toFixed(2),k)),await m.migrate(e,y)}}catch(y){let E=m.version-1;throw ys(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${E}`),await bp(E,e),new Error(`During migration to version ${m.version} exception was raised: ${y.stack||y.message||y}`)}ys(`Migrating to version ${m.version} finished`)}}a||await bp(n||bH(c),e),ys("Repo successfully migrated",n!==void 0?`to version ${n}!`:"to latest version!")}finally{!a&&!i&&h&&await h.close()}}async function lI(r,e,t,n,{ignoreLock:i=!1,onProgress:o,isDryRun:a=!1,migrations:c}){if(c=c||lw,!r)throw new ko.RequiredParameterError("Path argument is required!");if(!t)throw new ko.RequiredParameterError("repoOptions argument is required!");if(!n)throw new ko.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(n)||n<=0)throw new ko.InvalidValueError("Version has to be positive integer!");e=X1(e);let l=await gx(e);if(l===n){ys("Nothing to revert.");return}if(l<n)throw new ko.InvalidValueError(`Current repo's version (${l}) is lower then toVersion (${n}), you probably wanted to migrate it?`);hI(c,n,l,!0);let h;!a&&!i&&(h=await t.repoLock.lock(r)),ys(`Reverting from version ${l} to ${n}`);try{let m=c.slice().reverse();for(let y of m){if(y.version<=n)break;if(!(y.version>l)){ys(`Reverting migration version ${y.version}`);try{if(!a){let E=()=>{};o&&(E=(k,T)=>o(y.version,k.toFixed(2),T)),await y.revert(e,E)}}catch(E){let k=y.version;throw ys(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${k}`),await bp(k,e),E.message=`During reversion to version ${y.version} exception was raised: ${E.message}`,E}ys(`Reverting to version ${y.version} finished`)}}a||await bp(n,e),ys(`All migrations successfully reverted to version ${n}!`)}finally{!a&&!i&&h&&await h.close()}}function hI(r,e,t,n=!1){let i=0;for(let o of r){if(o.version>t)break;if(o.version>e){if(n&&!o.revert)throw new ko.NonReversibleMigrationError(`It is not possible to revert to version ${e} because migration version ${o.version} is not reversible. Cancelling reversion.`);i++}}if(i!==t-e)throw new ko.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${e} to ${t}`)}var ko=mx;var MT=Ie(mI(),1);var AI=Ie(EI(),1),SI=AI.default;var kI=Ie(fs(),1);Dn();mo();var ff=class extends Error{constructor(e){super(e),this.name="LockExistsError",this.code=ff.code}};ff.code="ERR_LOCK_EXISTS";var Ui=class extends Error{constructor(e){super(e),this.name="NotFoundError",this.code=Ui.code}};Ui.code="ERR_NOT_FOUND";var lf=class extends Error{constructor(e){super(e),this.name="InvalidRepoVersionError",this.code=lf.code}};lf.code="ERR_INVALID_REPO_VERSION";var vp="ERR_REPO_NOT_INITIALIZED",PI="ERR_REPO_ALREADY_OPEN",DI="ERR_REPO_ALREADY_CLOSED";async function mw(r,e,t){let n=await e(r);if(n)return n;let i=CI(t);return i?new Promise((o,a)=>{let c=i.store("readonly").get(r.toString());c.transaction.onabort=()=>{a(c.transaction.error)},c.transaction.oncomplete=()=>{o(Boolean(c.result))}}):!1}async function yw(r,e,t,n){if(await t(r))return e(r);let i=CI(n);if(!i)throw new Ui;return new Promise((o,a)=>{let c=i.store("readonly").get(r.toString());c.transaction.onabort=()=>{a(c.transaction.error)},c.transaction.oncomplete=()=>{if(c.result)return o(c.result);a(new Ui)}})}function CI(r){let e=r;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}var FH=(0,kI.default)("ipfs:repo:version"),bx=new Ye("version");function II(r){return{async exists(){return mw(bx,r.has.bind(r),r)},async get(){let e=await yw(bx,r.get.bind(r),r.has.bind(r),r);return parseInt(Ze(e),10)},set(e){return r.put(bx,wt(String(e)))},async check(e){let t=await this.get();return FH("comparing version: %s and %s",t,e),t===e||(t===6&&e===7||e===6&&t===7)}}}var $I=Ie(FI(),1);var xp=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},_x=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},BI=r=>globalThis.DOMException===void 0?new _x(r):new DOMException(r),LI=r=>{let e=r.reason===void 0?BI("This operation was aborted."):r.reason;return e instanceof Error?e:BI(e)};function Ep(r,e,t,n){let i,o=new Promise((a,c)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){a(r);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:l}=n;l.aborted&&c(LI(l)),l.addEventListener("abort",()=>{c(LI(l))})}i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof t=="function"){try{a(t())}catch(m){c(m)}return}let l=typeof t=="string"?t:`Promise timed out after ${e} milliseconds`,h=t instanceof Error?t:new xp(l);typeof r.cancel=="function"&&r.cancel(),c(h)},e),(async()=>{try{a(await r)}catch(l){c(l)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return o.clear=()=>{clearTimeout(i),i=void 0},o}function xx(r,e,t){let n=0,i=r.length;for(;i>0;){let o=Math.trunc(i/2),a=n+o;t(r[a],e)<=0?(n=++a,i-=o+1):i=o}return n}var hf=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Ka,Ap=class{constructor(){Ka.set(this,[])}enqueue(e,t){t={priority:0,...t};let n={priority:t.priority,run:e};if(this.size&&hf(this,Ka,"f")[this.size-1].priority>=t.priority){hf(this,Ka,"f").push(n);return}let i=xx(hf(this,Ka,"f"),n,(o,a)=>a.priority-o.priority);hf(this,Ka,"f").splice(i,0,n)}dequeue(){let e=hf(this,Ka,"f").shift();return e?.run}filter(e){return hf(this,Ka,"f").filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return hf(this,Ka,"f").length}};Ka=new WeakMap;var Pr=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},We=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Hr,Pp,Dp,Zu,Ew,Cp,ww,gs,Sp,Ki,bw,$i,kp,Qu,vw,OI,NI,KI,RI,MI,UI,_w,Ex,Ax,Aw,xw,OH=new xp,Sx=class extends Error{},Zs=class extends $I.default{constructor(e){var t,n,i,o;if(super(),Hr.add(this),Pp.set(this,void 0),Dp.set(this,void 0),Zu.set(this,0),Ew.set(this,void 0),Cp.set(this,void 0),ww.set(this,0),gs.set(this,void 0),Sp.set(this,void 0),Ki.set(this,void 0),bw.set(this,void 0),$i.set(this,0),kp.set(this,void 0),Qu.set(this,void 0),vw.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Ap,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(o=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""}\` (${typeof e.interval})`);Pr(this,Pp,e.carryoverConcurrencyCount,"f"),Pr(this,Dp,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),Pr(this,Ew,e.intervalCap,"f"),Pr(this,Cp,e.interval,"f"),Pr(this,Ki,new e.queueClass,"f"),Pr(this,bw,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,Pr(this,vw,e.throwOnTimeout===!0,"f"),Pr(this,Qu,e.autoStart===!1,"f")}get concurrency(){return We(this,kp,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);Pr(this,kp,e,"f"),We(this,Hr,"m",Aw).call(this)}async add(e,t={}){return new Promise((n,i)=>{let o=async()=>{var a,c,l;Pr(this,$i,(c=We(this,$i,"f"),c++,c),"f"),Pr(this,Zu,(l=We(this,Zu,"f"),l++,l),"f");try{if(!((a=t.signal)===null||a===void 0)&&a.aborted){i(new Sx("The task was aborted."));return}let m=await(this.timeout===void 0&&t.timeout===void 0?e({signal:t.signal}):Ep(Promise.resolve(e({signal:t.signal})),t.timeout===void 0?this.timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?We(this,vw,"f"):t.throwOnTimeout)&&i(OH)}));n(m),this.emit("completed",m)}catch(h){i(h),this.emit("error",h)}We(this,Hr,"m",KI).call(this)};We(this,Ki,"f").enqueue(o,t),We(this,Hr,"m",_w).call(this),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async n=>this.add(n,t)))}start(){return We(this,Qu,"f")?(Pr(this,Qu,!1,"f"),We(this,Hr,"m",Aw).call(this),this):this}pause(){Pr(this,Qu,!0,"f")}clear(){Pr(this,Ki,new(We(this,bw,"f")),"f")}async onEmpty(){We(this,Ki,"f").size!==0&&await We(this,Hr,"m",xw).call(this,"empty")}async onSizeLessThan(e){We(this,Ki,"f").size<e||await We(this,Hr,"m",xw).call(this,"next",()=>We(this,Ki,"f").size<e)}async onIdle(){We(this,$i,"f")===0&&We(this,Ki,"f").size===0||await We(this,Hr,"m",xw).call(this,"idle")}get size(){return We(this,Ki,"f").size}sizeBy(e){return We(this,Ki,"f").filter(e).length}get pending(){return We(this,$i,"f")}get isPaused(){return We(this,Qu,"f")}};Pp=new WeakMap,Dp=new WeakMap,Zu=new WeakMap,Ew=new WeakMap,Cp=new WeakMap,ww=new WeakMap,gs=new WeakMap,Sp=new WeakMap,Ki=new WeakMap,bw=new WeakMap,$i=new WeakMap,kp=new WeakMap,Qu=new WeakMap,vw=new WeakMap,Hr=new WeakSet,OI=function(){return We(this,Dp,"f")||We(this,Zu,"f")<We(this,Ew,"f")},NI=function(){return We(this,$i,"f")<We(this,kp,"f")},KI=function(){var e;Pr(this,$i,(e=We(this,$i,"f"),e--,e),"f"),We(this,Hr,"m",_w).call(this),this.emit("next")},RI=function(){this.emit("empty"),We(this,$i,"f")===0&&this.emit("idle")},MI=function(){We(this,Hr,"m",Ax).call(this),We(this,Hr,"m",Ex).call(this),Pr(this,Sp,void 0,"f")},UI=function(){let e=Date.now();if(We(this,gs,"f")===void 0){let t=We(this,ww,"f")-e;if(t<0)Pr(this,Zu,We(this,Pp,"f")?We(this,$i,"f"):0,"f");else return We(this,Sp,"f")===void 0&&Pr(this,Sp,setTimeout(()=>{We(this,Hr,"m",MI).call(this)},t),"f"),!0}return!1},_w=function(){if(We(this,Ki,"f").size===0)return We(this,gs,"f")&&clearInterval(We(this,gs,"f")),Pr(this,gs,void 0,"f"),We(this,Hr,"m",RI).call(this),!1;if(!We(this,Qu,"f")){let e=!We(this,Hr,"a",UI);if(We(this,Hr,"a",OI)&&We(this,Hr,"a",NI)){let t=We(this,Ki,"f").dequeue();return t?(this.emit("active"),t(),e&&We(this,Hr,"m",Ex).call(this),!0):!1}}return!1},Ex=function(){We(this,Dp,"f")||We(this,gs,"f")!==void 0||(Pr(this,gs,setInterval(()=>{We(this,Hr,"m",Ax).call(this)},We(this,Cp,"f")),"f"),Pr(this,ww,Date.now()+We(this,Cp,"f"),"f"))},Ax=function(){We(this,Zu,"f")===0&&We(this,$i,"f")===0&&We(this,gs,"f")&&(clearInterval(We(this,gs,"f")),Pr(this,gs,void 0,"f")),Pr(this,Zu,We(this,Pp,"f")?We(this,$i,"f"):0,"f"),We(this,Hr,"m",Aw).call(this)},Aw=function(){for(;We(this,Hr,"m",_w).call(this););},xw=async function(e,t){return new Promise(n=>{let i=()=>{t&&!t()||(this.off(e,i),n())};this.on(e,i)})};var jI=NH;function NH(r,e,t){var n,i;if(Array.isArray(e)&&(n=e.slice(0)),typeof e=="string"&&(n=e.split(".")),typeof e=="symbol"&&(n=[e]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");if(i=n.pop(),!i)return!1;zI(i);for(var o;o=n.shift();)if(zI(o),typeof r[o]>"u"&&(r[o]={}),r=r[o],!r||typeof r!="object")return!1;return r[i]=t,!0}function zI(r){if(r=="__proto__"||r=="constructor"||r=="prototype")throw new Error("setting of prototype values not supported")}var Sw=Ie(So(),1);Dn();mo();var RH=Zs.default?Zs.default:Zs,Px=new Ye("config");function qI(r){let e=new RH({concurrency:1}),t={async getAll(o={}){let a=await yw(Px,r.get.bind(r),r.has.bind(r),r);return JSON.parse(Ze(a))},async get(o,a={}){if(o==null)throw new Ui(`Key ${o} does not exist in config`);let c=await this.getAll(a),l=op(c,o);if(l===void 0)throw new Ui(`Key ${o} does not exist in config`);return l},set(o,a,c={}){if(typeof o!="string"&&!(o instanceof String))throw(0,Sw.default)(new Error("Invalid key type: "+typeof o),"ERR_INVALID_KEY");if(a===void 0||a instanceof Uint8Array)throw(0,Sw.default)(new Error("Invalid value type: "+typeof a),"ERR_INVALID_VALUE");return e.add(()=>n({key:o,value:a},c.signal))},replace(o,a={}){if(!o||o instanceof Uint8Array)throw(0,Sw.default)(new Error("Invalid value type: "+typeof o),"ERR_INVALID_VALUE");return e.add(()=>n({key:void 0,value:o},a.signal))},async exists(){return mw(Px,r.has.bind(r),r)}};return t;async function n(o,a){if(a&&a.aborted)return;let c=o.key,l=o.value;if(c){let h=await t.getAll();return typeof h=="object"&&h!==null&&jI(h,c,l),i(h)}return i(l)}function i(o){let a=wt(JSON.stringify(o,null,2));return r.put(Px,a)}}function Ip(r){if(typeof r!="object"||r===null)return!1;let e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function Dx(r,e={}){if(!Ip(r)&&!Array.isArray(r))throw new TypeError("Expected a plain object or array");let{deep:t,compare:n}=e,i=[],o=[],a=l=>{let h=i.indexOf(l);if(h!==-1)return o[h];let m=[];return i.push(l),o.push(m),m.push(...l.map(y=>Array.isArray(y)?a(y):Ip(y)?c(y):y)),m},c=l=>{let h=i.indexOf(l);if(h!==-1)return o[h];let m={},y=Object.keys(l).sort(n);i.push(l),o.push(m);for(let E of y){let k=l[E],T;t&&Array.isArray(k)?T=a(k):T=t&&Ip(k)?c(k):k,Object.defineProperty(m,E,{...Object.getOwnPropertyDescriptor(l,E),value:T})}return m};return Array.isArray(r)?t?a(r):r.slice():c(r)}Dn();mo();var Cx=new Ye("datastore_spec");function HI(r){return{exists(){return r.has(Cx)},async get(){let e=await r.get(Cx);return JSON.parse(Ze(e))},async set(e){return r.put(Cx,wt(JSON.stringify(Dx(e,{deep:!0}))))}}}mo();var kx=new Ye("api");function WI(r){return{async get(){let e=await r.get(kx);return e&&e.toString()},set(e){return r.put(kx,wt(e.toString()))},delete(){return r.delete(kx)}}}var YI=Ie(df(),1);var Pw=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},ih=class{constructor(e={}){this.hwm=e.splitLimit??16,this.head=new Pw(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let t=this.head;this.head=t.next=new Pw(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function ec(r={}){return UH(t=>{let n=t.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},r)}function UH(r,e){e=e??{};let t=e.onEnd,n=new ih,i,o,a,c=async()=>n.isEmpty()?a?{done:!0}:await new Promise((O,ue)=>{o=ne=>{o=null,n.push(ne);try{O(r(n))}catch(ve){ue(ve)}return i}}):r(n),l=O=>o!=null?o(O):(n.push(O),i),h=O=>(n=new ih,o!=null?o({error:O}):(n.push({error:O}),i)),m=O=>{if(a)return i;if(e?.objectMode!==!0&&O?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return l({done:!1,value:O})},y=O=>a?i:(a=!0,O!=null?h(O):l({done:!0})),E=()=>(n=new ih,y(),{done:!0}),k=O=>(y(O),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:c,return:E,throw:k,push:m,end:y,get readableLength(){return n.size}},t==null)return i;let T=i;return i={[Symbol.asyncIterator](){return this},next(){return T.next()},throw(O){return T.throw(O),t!=null&&(t(O),t=void 0),{done:!0}},return(){return T.return(),t!=null&&(t(),t=void 0),{done:!0}},push:m,end(O){return T.end(O),t!=null&&(t(O),t=void 0),i},get readableLength(){return T.readableLength}},i}var JI=Ie(oh(),1);ur();var XI=Ie(So(),1);Nv();function QI(r){return{open(){return r.open()},close(){return r.close()},query(e,t){return r.query(e,t)},queryKeys(e,t){return r.queryKeys(e,t)},async get(e,t){let n=tc(e);return n.isIdentity?Promise.resolve(n.digest):r.get(e,t)},async*getMany(e,t){for await(let n of e)yield this.get(n,t)},async put(e,t,n){let{isIdentity:i}=tc(e);i||await r.put(e,t,n)},async*putMany(e,t){let n=ec({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{await(0,JI.default)(r.putMany(async function*(){for await(let{key:o,value:a}of e)tc(o).isIdentity||(yield{key:o,value:a}),n.push({key:o,value:a})}())),n.end()}catch(o){n.end(o)}}),yield*n},has(e,t){let{isIdentity:n}=tc(e);return n?Promise.resolve(!0):r.has(e,t)},delete(e,t){let{isIdentity:n}=tc(e);return n?Promise.resolve():r.delete(e,t)},deleteMany(e,t){return r.deleteMany((0,YI.default)(e,n=>!tc(n).isIdentity),t)},batch(){let e=r.batch();return{put(t,n){let{isIdentity:i}=tc(t);i||e.put(t,n)},delete(t){let{isIdentity:n}=tc(t);n||e.delete(t)},commit:t=>e.commit(t)}}}}function tc(r){let e=we.asCID(r);if(e==null)throw(0,XI.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return e.multihash.code!==Lv.code?{isIdentity:!1}:{isIdentity:!0,digest:e.multihash.digest}}var ZI=Ie(fs(),1),eT=(0,ZI.default)("ipfs:repo:lock:memory"),tT="repo.lock",Tp={};async function $H(r){let e=r+"/"+tT;if(eT("locking %s",e),Tp[e]===!0)throw new ff(`Lock already being held for file: ${e}`);return Tp[e]=!0,{async close(){Tp[e]&&delete Tp[e]}}}async function zH(r){let e=r+"/"+tT;return eT(`checking lock: ${e}`),Boolean(Tp[e])}var rT={lock:$H,locked:zH};var nT={autoMigrate:!0,onMigrationProgress:()=>{},repoOwner:!0,repoLock:rT};var Ix={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}};ur();var uT=Ie(So(),1),cT=Ie(fs(),1),Ox=Ie(oT(),1);Ed();var Dw=({enumerable:r=!0,configurable:e=!1}={})=>({enumerable:r,configurable:e,writable:!1}),Tx=function*(r,e){if(r!=null&&!(r instanceof Uint8Array))for(let[t,n]of Object.entries(r)){let i=[...e,t];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(let[o,a]of n.entries()){let c=[...i,o],l=we.asCID(a);l?yield[c.join("/"),l]:typeof a=="object"&&(yield*Tx(a,c))}else{let o=we.asCID(n);o?yield[i.join("/"),o]:yield*Tx(n,i)}}},Fx=function*(r,e){if(r!=null)for(let[t,n]of Object.entries(r)){let i=[...e,t];if(yield i.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!we.asCID(n))if(Array.isArray(n))for(let[o,a]of n.entries()){let c=[...i,o];yield c.join("/"),typeof a=="object"&&!we.asCID(a)&&(yield*Fx(a,c))}else yield*Fx(n,i)}},qH=(r,e)=>{let t=r;for(let[n,i]of e.entries()){if(t=t[i],t==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(a=>`[${JSON.stringify(a)}]`).join("")}`);let o=we.asCID(t);if(o)return{value:o,remaining:e.slice(n+1).join("/")}}return{value:t}},Bx=class{constructor({cid:e,bytes:t,value:n}){if(!e||!t||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=t,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:Dw(),bytes:Dw(),value:Dw(),asBlock:Dw()})}links(){return Tx(this.value,[])}tree(){return Fx(this.value,[])}get(e="/"){return qH(this.value,e.split("/").filter(Boolean))}};var Cw=({bytes:r,cid:e,value:t,codec:n})=>{let i=t!==void 0?t:n&&n.decode(r);if(i===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new Bx({cid:e,bytes:r,value:i})};ur();var Cue=new TextDecoder;var Iue=new TextEncoder,Tue=2**32,Fue=2**31;ur();var Oue=new TextEncoder;var Fp=112;Ed();jc();var sT=Ie(So(),1);Qo();Zo();function Bp(r){let e=we.asCID(r);if(e==null)throw(0,sT.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");let t=Vt.encode(e.multihash.bytes);return new Ye("/"+t.slice(1).toUpperCase(),!1)}function Lx(r){return Ci(Vt.decode(`b${r.toString().toLowerCase().substring(1)}`))}var aT=Ie(fs(),1);var WH=(0,aT.default)("ipfs:repo:utils:walk-dag");async function*sh(r,e,t,n){try{let i=await e.get(r,n),o=await t(r.code),a=Cw({bytes:i,cid:r,codec:o});for(let[,c]of a.links())yield c,yield*sh(c,e,t,n)}catch(i){throw WH("Could not walk DAG for CID",r.toString(),i),i}}var di={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};function VH(r){let e=`Invalid type '${r}', must be one of {direct, indirect, recursive, all}`;return(0,uT.default)(new Error(e),"ERR_INVALID_PIN_TYPE")}var kw=class{constructor({pinstore:e,blockstore:t,loadCodec:n}){this.pinstore=e,this.blockstore=t,this.loadCodec=n,this.log=(0,cT.default)("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}async pinDirectly(e,t={}){await this.blockstore.get(e,t);let n={depth:0};return e.version!==0&&(n.version=e.version),e.code!==Fp&&(n.codec=e.code),t.metadata&&(n.metadata=t.metadata),this.pinstore.put(Bp(e),Ta(n))}unpin(e,t){return this.pinstore.delete(Bp(e),t)}async pinRecursively(e,t={}){await this.fetchCompleteDag(e,t);let n={depth:1/0};e.version!==0&&(n.version=e.version),e.code!==Fp&&(n.codec=e.code),t.metadata&&(n.metadata=t.metadata),await this.pinstore.put(Bp(e),Ta(n))}async*directKeys(e){for await(let t of this.pinstore.query({filters:[n=>Ao(n.value).depth===0]})){let n=Ao(t.value),i=n.version||0,o=n.codec!=null?n.codec:Fp,a=Lx(t.key);yield{cid:we.create(i,o,a),metadata:n.metadata}}}async*recursiveKeys(e){for await(let t of this.pinstore.query({filters:[n=>Ao(n.value).depth===1/0]})){let n=Ao(t.value),i=n.version||0,o=n.codec!=null?n.codec:Fp,a=Lx(t.key);yield{cid:we.create(i,o,a),metadata:n.metadata}}}async*indirectKeys(e){for await(let{cid:t}of this.recursiveKeys())for await(let n of sh(t,this.blockstore,this.loadCodec,e)){let i=[di.recursive];(await this.isPinnedWithType(n,i)).pinned||(yield n)}}async isPinnedWithType(e,t,n){Array.isArray(t)||(t=[t]);let i=t.includes(di.all),o=t.includes(di.direct),a=t.includes(di.recursive),c=t.includes(di.indirect);if(a||o||i){let m=await(0,Ox.default)(this.pinstore.query({prefix:Bp(e).toString(),filters:[y=>{if(i)return!0;let E=Ao(y.value);return t.includes(E.depth===0?di.direct:di.recursive)}],limit:1}));if(m){let y=Ao(m.value);return{cid:e,pinned:!0,reason:y.depth===0?di.direct:di.recursive,metadata:y.metadata}}}let l=this;async function*h(m,y){for await(let{cid:E}of y)for await(let k of sh(E,l.blockstore,l.loadCodec))if(k.equals(m)){yield E;return}}if(i||c){let m=await(0,Ox.default)(h(e,this.recursiveKeys()));if(m)return{cid:e,pinned:!0,reason:di.indirect,parent:m}}return{cid:e,pinned:!1}}async fetchCompleteDag(e,t){let n=new Set,i=async(o,a)=>{if(n.has(o.toString()))return;n.add(o.toString());let c=await this.blockstore.get(o,a),l=await this.loadCodec(o.code),h=Cw({bytes:c,cid:o,codec:l});await Promise.all([...h.links()].map(([,m])=>i(m,a)))};await i(e,t)}static checkPinType(e){if(typeof e!="string"||!Object.keys(di).includes(e))throw VH(e);return!0}};var hT=Ie(Lp(),1),dT=Ie(So(),1);function pT(r,e){return{open(){return e.open()},close(){return e.close()},query(t,n){return e.query(t,n)},queryKeys(t,n){return e.queryKeys(t,n)},async get(t,n){return e.get(t,n)},async*getMany(t,n){yield*e.getMany(t,n)},async put(t,n,i){await e.put(t,n,i)},async*putMany(t,n){yield*e.putMany(t,n)},has(t,n){return e.has(t,n)},async delete(t,n){return await lT(t,r),e.delete(t,n)},deleteMany(t,n){return e.deleteMany((0,hT.default)(t,async i=>(await lT(i,r),i)),n)},batch(){return e.batch()}}}async function lT(r,e){let{pinned:t,reason:n}=await e.isPinnedWithType(r,di.all);if(t)throw(0,dT.default)(new Error(`pinned: ${n}`),"ERR_BLOCK_PINNED")}var Nx="lock:worker:request-read",Rx="lock:worker:release-read",Mx="lock:master:grant-read",Ux="lock:worker:request-write",Kx="lock:worker:release-write",$x="lock:master:grant-write";var rc={},ah=r=>{r.addEventListener("message",e=>{ah.dispatchEvent("message",r,e)}),r.port!=null&&r.port.addEventListener("message",e=>{ah.dispatchEvent("message",r,e)})};ah.addEventListener=(r,e)=>{rc[r]==null&&(rc[r]=[]),rc[r].push(e)};ah.removeEventListener=(r,e)=>{rc[r]!=null&&(rc[r]=rc[r].filter(t=>t===e))};ah.dispatchEvent=function(r,e,t){rc[r]!=null&&rc[r].forEach(n=>n(e,t))};var zx=ah;var mT=(r,e,t,n,i)=>(o,a)=>{if(a.data.type!==t)return;let c={type:a.data.type,name:a.data.name,identifier:a.data.identifier};r.dispatchEvent(new MessageEvent(e,{data:{name:c.name,handler:async()=>(o.postMessage({type:i,name:c.name,identifier:c.identifier}),await new Promise(l=>{let h=m=>{if(m==null||m.data==null)return;let y={type:m.data.type,name:m.data.name,identifier:m.data.identifier};y.type===n&&y.identifier===c.identifier&&(o.removeEventListener("message",h),l())};o.addEventListener("message",h)}))}}))},yT=(r,e,t,n)=>async()=>{let i=$g();return globalThis.postMessage({type:e,identifier:i,name:r}),await new Promise(o=>{let a=c=>{if(c==null||c.data==null)return;let l={type:c.data.type,identifier:c.data.identifier};l.type===t&&l.identifier===i&&(globalThis.removeEventListener("message",a),o(()=>{globalThis.postMessage({type:n,identifier:i,name:r})}))};globalThis.addEventListener("message",a)})},YH={singleProcess:!1},gT=r=>{if(r=Object.assign({},YH,r),Boolean(globalThis.document)||r.singleProcess){let t=new EventTarget;return zx.addEventListener("message",mT(t,"requestReadLock",Nx,Rx,Mx)),zx.addEventListener("message",mT(t,"requestWriteLock",Ux,Kx,$x)),t}return{isWorker:!0,readLock:t=>yT(t,Nx,Mx,Rx),writeLock:t=>yT(t,Ux,$x,Kx)}};var pf={},nc;async function jx(r,e){let t,n=new Promise(i=>{t=i});return r.add(async()=>await Ep((async()=>await new Promise(i=>{t(()=>{i()})}))(),e.timeout)),await n}var JH=(r,e)=>{if(nc.isWorker===!0)return{readLock:nc.readLock(r,e),writeLock:nc.writeLock(r,e)};let t=new Zs({concurrency:1}),n;return{async readLock(){if(n!=null)return await jx(n,e);n=new Zs({concurrency:e.concurrency,autoStart:!1});let i=n,o=jx(n,e);return t.add(async()=>(i.start(),await i.onIdle().then(()=>{n===i&&(n=null)}))),await o},async writeLock(){return n=null,await jx(t,e)}}},XH={name:"lock",concurrency:1/0,timeout:846e5,global:globalThis,singleProcess:!1};function qx(r){let e=Object.assign({},XH,r);return nc==null&&(nc=gT(e),nc.isWorker!==!0&&(nc.addEventListener("requestReadLock",t=>{pf[t.data.name]!=null&&pf[t.data.name].readLock().then(async n=>await t.data.handler().finally(()=>n()))}),nc.addEventListener("requestWriteLock",async t=>{pf[t.data.name]!=null&&pf[t.data.name].writeLock().then(async n=>await t.data.handler().finally(()=>n()))}))),pf[e.name]==null&&(pf[e.name]=JH(e.name,e)),pf[e.name]}ur();var FT=Ie(fs(),1);var BT=Ie(_T(),1);var IT=Ie(Iw(),1),nW=(...r)=>{let e;for(;r.length>0;)e=r.shift()(e);return e},TT=r=>r!=null&&(typeof r[Symbol.asyncIterator]=="function"||typeof r[Symbol.iterator]=="function"||typeof r.next=="function"),Wx=r=>r!=null&&typeof r.sink=="function"&&TT(r.source),iW=r=>e=>{let t=r.sink(e);if(t.then!=null){let n=ec({objectMode:!0});return t.then(()=>{n.end()},o=>{n.end(o)}),(0,IT.default)(n,async function*(){yield*r.source,n.end()}())}return r.source};function Vx(r,...e){if(Wx(r)){let n=r;r=()=>n.source}else if(TT(r)){let n=r;r=()=>n}let t=[r,...e];if(t.length>1&&Wx(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let n=1;n<t.length-1;n++)Wx(t[n])&&(t[n]=iW(t[n]));return nW(...t)}var Gx=Ie(Iw(),1),Tw=Ie(Lp(),1),LT=Ie(df(),1);Qo();var Op=(0,FT.default)("ipfs:repo:gc"),oW=Xs().code,sW=256,aW=new Ye("/local/filesroot");function OT({gcLock:r,pins:e,blockstore:t,root:n,loadCodec:i}){async function*o(){let a=Date.now();Op("Creating set of marked blocks");let c=await r.writeLock();try{let l=await uW({pins:e,blockstore:t,root:n,loadCodec:i}),h=t.queryKeys({});yield*cW({blockstore:t},l,h),Op(`Complete (${Date.now()-a}ms)`)}finally{c()}}return o}async function uW({pins:r,blockstore:e,loadCodec:t,root:n}){let i=async function*(){let c;try{c=await n.get(aW)}catch(h){if(h.code===oW){Op("No blocks in MFS");return}throw h}let l=we.decode(c);yield l,yield*sh(l,e,t)}(),o=(0,Gx.default)((0,Tw.default)(r.recursiveKeys(),({cid:c})=>c),r.indirectKeys(),(0,Tw.default)(r.directKeys(),({cid:c})=>c),i),a=new Set;for await(let c of(0,Gx.default)(o,i))a.add(Vt.encode(c.multihash.bytes));return a}async function*cW({blockstore:r},e,t){let n=0,i=0;yield*Vx((0,BT.default)((0,Tw.default)(t,async a=>async function(){n++;try{let l=Vt.encode(a.multihash.bytes);if(e.has(l))return null;try{await r.delete(a),i++}catch(h){return{err:new Error(`Could not delete block with CID ${a}: ${h.message}`)}}return{cid:a}}catch(l){let h=`Could delete block with CID ${a}`;return Op(h,l),{err:new Error(h+`: ${l.message}`)}}}),sW),a=>(0,LT.default)(a,Boolean)),Op(`Marked set has ${e.size} unique blocks. Blockstore has ${n} blocks. Deleted ${i} blocks.`)}var pi=(0,RT.default)("ipfs:repo"),fW=Number.MAX_SAFE_INTEGER,lW="repoAutoMigrate",Jx=class{constructor(e,t,n,i){if(typeof e!="string")throw new Error("missing repo path");if(typeof t!="function")throw new Error("missing codec loader");this.options=SI(nT,i),this.closed=!0,this.path=e,this.root=n.root,this.datastore=n.datastore,this.keys=n.keys;let o=n.blocks,a=n.pins;this.pins=new kw({pinstore:a,blockstore:o,loadCodec:t});let c=pT(this.pins,o);this.blocks=QI(c),this.version=II(this.root),this.config=qI(this.root),this.spec=HI(this.root),this.apiAddr=WI(this.root),this.gcLock=qx({name:e,singleProcess:this.options.repoOwner!==!1}),this.gc=OT({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:t})}async init(e){pi("initializing at: %s",this.path),await this._openRoot(),await this.config.replace(hW(e)),await this.spec.set(dW(e)),await this.version.set(12)}async isInitialized(){if(!this.closed)return!0;try{return await this._openRoot(),await this._checkInitialized(),await this.root.close(),!0}catch{return!1}}async open(){if(!this.closed)throw(0,mf.default)(new Error("repo is already open"),PI);pi("opening at: %s",this.path);try{if(await this._openRoot(),await this._checkInitialized(),this._lockfile=await this._openLock(),pi("acquired repo.lock"),!await this.version.check(12))if(await this._isAutoMigrationEnabled())await this._migrate(12,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys});else throw new lf("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");pi("creating datastore"),await this.datastore.open(),pi("creating blocks"),await this.blocks.open(),pi("creating keystore"),await this.keys.open(),pi("creating pins"),await this.pins.pinstore.open(),this.closed=!1,pi("all opened")}catch(e){if(this._lockfile)try{await this._closeLock(),this._lockfile=null}catch(t){pi("error removing lock",t)}throw e}}async _openRoot(){try{await this.root.open()}catch(e){if(e.message!=="Already open")throw e}}async _openLock(){let e=await this.options.repoLock.lock(this.path);if(typeof e.close!="function")throw(0,mf.default)(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return e}_closeLock(){return this._lockfile&&this._lockfile.close()}async _checkInitialized(){pi("init check");let e;try{[e]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()])}catch(t){throw t.code==="ERR_NOT_FOUND"?(0,mf.default)(new Error("repo is not initialized yet"),vp,{path:this.path}):t}if(!e)throw(0,mf.default)(new Error("repo is not initialized yet"),vp,{path:this.path})}async close(){if(this.closed)throw(0,mf.default)(new Error("repo is already closed"),DI);pi("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(e){if(e.code!==vp&&!e.message.startsWith("ENOENT"))throw e}await Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map(e=>e&&e.close())),pi("unlocking"),this.closed=!0,await this._closeLock()}exists(){return this.version.exists()}async stat(){if(this.datastore&&this.keys){let[e,t,n,i,o]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),NT(this.datastore),NT(this.keys)]),a=t.size+i+o;return{repoPath:this.path,storageMax:e,version:n,numObjects:t.count,repoSize:a}}throw(0,mf.default)(new Error("repo is not initialized yet"),vp,{path:this.path})}async _isAutoMigrationEnabled(){if(this.options.autoMigrate!==void 0)return this.options.autoMigrate;let e;try{e=await this.config.get(lW)}catch(t){if(t.code===Ui.code)e=!0;else throw t}return e}async _migrate(e,t){return await this.version.get()>e?(pi(`reverting to version ${e}`),lI(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress})):(pi(`migrating to version ${e}`),fI(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}))}async _storageMaxStat(){try{let e=await this.config.get("Datastore.StorageMax");return BigInt((0,MT.default)(e))}catch{return BigInt(fW)}}async _blockStat(){let e=BigInt(0),t=BigInt(0);if(this.blocks)for await(let{key:n,value:i}of this.blocks.query({}))e+=BigInt(1),t+=BigInt(i.byteLength),t+=BigInt(n.bytes.byteLength);return{count:e,size:t}}};async function NT(r){let e=BigInt(0);for await(let t of r.query({}))e+=BigInt(t.value.byteLength),e+=BigInt(t.key.uint8Array().byteLength);return e}function UT(r,e,t,n){return new Jx(r,e,t,n)}function hW(r){return r.Datastore=Object.assign({},Ix,op(r,"datastore")),r}function dW(r){let e={...Ix.Spec,...op(r,"Datastore.Spec")};return{type:e.type,mounts:e.mounts.map(t=>({mountpoint:t.mountpoint,type:t.child.type,path:t.child.path,shardFunc:t.child.shardFunc}))}}var Zx=Ie(oh(),1);ur();jc();Zo();Qo();xu();var qT=Ie(So(),1);var Xx=Ie(oh(),1),yf=Ie(df(),1),Qx=Ie(Np(),1),jT=Ie(Fw(),1),zT=(r,e)=>async function*(){yield*(await(0,jT.default)(r)).sort(e)}(),Bw=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(let{key:n,value:i}of e)await this.put(n,i,t),yield{key:n,value:i}}async*getMany(e,t={}){for await(let n of e)yield this.get(n,t)}async*deleteMany(e,t={}){for await(let n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(n,i){e.push({key:n,value:i})},delete(n){t.push(n)},commit:async n=>{await(0,Xx.default)(this.putMany(e,n)),e=[],await(0,Xx.default)(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(e.prefix!=null&&(n=(0,yf.default)(n,i=>i.key.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,yf.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>zT(i,o),n)),e.offset!=null){let i=0;n=(0,yf.default)(n,()=>i++>=(e.offset||0))}return e.limit!=null&&(n=(0,Qx.default)(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(e.prefix!=null&&(n=(0,yf.default)(n,i=>i.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,yf.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>zT(i,o),n)),e.offset!=null){let i=0;n=(0,yf.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,Qx.default)(n,e.limit)),n}};function uh(r){let e=we.asCID(r);if(!e)throw(0,qT.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return new Ye("/"+Vt.encode(e.multihash.bytes).slice(1).toUpperCase(),!1)}function ic(r){return we.createV1(Bs,Ci(Vt.decode("b"+r.toString().slice(1).toLowerCase())))}function eE(r){let e=r.substring(0,1);if(e==="/")return eE(r.substring(1));let t;e.toLowerCase()==="b"?t=o=>Vt.decode(o.toLowerCase()).subarray(2):e.toLowerCase()==="c"?t=o=>Sv.decode(o.toLowerCase()).subarray(2):e==="z"?t=o=>Pn.decode(o).subarray(2):e==="Q"?t=o=>Pn.decode("z"+o):t=o=>Vt.decode("b"+o.toLowerCase()).subarray(2);let n;for(let o=1;o<r.length;o++)try{n=t(r.substring(0,o))}catch(a){if(a.message!=="Unexpected end of data")throw a}let i="/C";return n&&(i=`/${Vt.encode(n).slice(1,-1).toUpperCase()||"C"}`),i}function yW(r){return{...r,prefix:r.prefix?eE(r.prefix):void 0,filters:r.filters?r.filters.map(e=>t=>e({key:ic(t.key),value:t.value})):void 0,orders:r.orders?r.orders.map(e=>(t,n)=>e({key:ic(t.key),value:t.value},{key:ic(n.key),value:n.value})):void 0}}function gW(r){return{...r,prefix:r.prefix?eE(r.prefix):void 0,filters:r.filters?r.filters.map(e=>t=>e(ic(t))):void 0,orders:r.orders?r.orders.map(e=>(t,n)=>e(ic(t),ic(n))):void 0}}var Lw=class extends Bw{constructor(e){super(),this.child=e}open(){return this.child.open()}close(){return this.child.close()}async*query(e,t){for await(let{key:n,value:i}of this.child.query(yW(e),t))yield{key:ic(n),value:i}}async*queryKeys(e,t){for await(let n of this.child.queryKeys(gW(e),t))yield ic(n)}async get(e,t){return this.child.get(uh(e),t)}async*getMany(e,t){for await(let n of e)yield this.get(n,t)}async put(e,t,n){await this.child.put(uh(e),t,n)}async*putMany(e,t){let n=ec({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{let o=this.child;await(0,Zx.default)(this.child.putMany(async function*(){for await(let a of e){let c=uh(a.key);await o.has(c,t)||(yield{key:c,value:a.value}),n.push(a)}}())),n.end()}catch(o){n.end(o)}}),yield*n}has(e,t){return this.child.has(uh(e),t)}delete(e,t){return this.child.delete(uh(e),t)}deleteMany(e,t){let n=ec({objectMode:!0});return(0,Zx.default)(this.child.deleteMany(async function*(){for await(let i of e)yield uh(i),n.push(i);n.end()}(),t)).catch(i=>{n.end(i)}),n}};var HT=Ie(Fw(),1),Ow=(r,e)=>async function*(){yield*(await(0,HT.default)(r)).sort(e)}();var tE=Ie(oh(),1),gf=Ie(df(),1),rE=Ie(Np(),1),ws=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(let{key:n,value:i}of e)await this.put(n,i,t),yield{key:n,value:i}}async*getMany(e,t={}){for await(let n of e)yield this.get(n,t)}async*deleteMany(e,t={}){for await(let n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(n,i){e.push({key:n,value:i})},delete(n){t.push(n)},commit:async n=>{await(0,tE.default)(this.putMany(e,n)),e=[],await(0,tE.default)(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(e.prefix!=null&&(n=(0,gf.default)(n,i=>i.key.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,gf.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>Ow(i,o),n)),e.offset!=null){let i=0;n=(0,gf.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,rE.default)(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(e.prefix!=null&&(n=(0,gf.default)(n,i=>i.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,gf.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>Ow(i,o),n)),e.offset!=null){let i=0;n=(0,gf.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,rE.default)(n,e.limit)),n}};var Rp=class extends ws{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,t){this.data[e.toString()]=t}async get(e){if(!await this.has(e))throw Xs();return this.data[e.toString()]}async has(e){return this.data[e.toString()]!==void 0}async delete(e){delete this.data[e.toString()]}async*_all(){yield*Object.entries(this.data).map(([e,t])=>({key:new Ye(e),value:t}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>new Ye(e))}};var WT="SHARDING",VT="_README";var vW=Ie(Lp(),1);var Sfe=new Ye(WT),Pfe=new Ye(VT);var _W=Ie(df(),1),xW=Ie(Np(),1),EW=Ie(Iw(),1);var ea=Ie(fs(),1);function AW(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),a=o.charCodeAt(0);if(t[a]!==255)throw new TypeError(o+" is ambiguous");t[a]=i}var c=r.length,l=r.charAt(0),h=Math.log(c)/Math.log(256),m=Math.log(256)/Math.log(c);function y(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length===0)return"";for(var O=0,ue=0,ne=0,ve=T.length;ne!==ve&&T[ne]===0;)ne++,O++;for(var X=(ve-ne)*m+1>>>0,me=new Uint8Array(X);ne!==ve;){for(var be=T[ne],W=0,de=X-1;(be!==0||W<ue)&&de!==-1;de--,W++)be+=256*me[de]>>>0,me[de]=be%c>>>0,be=be/c>>>0;if(be!==0)throw new Error("Non-zero carry");ue=W,ne++}for(var ge=X-ue;ge!==X&&me[ge]===0;)ge++;for(var Ue=l.repeat(O);ge<X;++ge)Ue+=r.charAt(me[ge]);return Ue}function E(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return new Uint8Array;var O=0;if(T[O]!==" "){for(var ue=0,ne=0;T[O]===l;)ue++,O++;for(var ve=(T.length-O)*h+1>>>0,X=new Uint8Array(ve);T[O];){var me=t[T.charCodeAt(O)];if(me===255)return;for(var be=0,W=ve-1;(me!==0||be<ne)&&W!==-1;W--,be++)me+=c*X[W]>>>0,X[W]=me%256>>>0,me=me/256>>>0;if(me!==0)throw new Error("Non-zero carry");ne=be,O++}if(T[O]!==" "){for(var de=ve-ne;de!==ve&&X[de]===0;)de++;for(var ge=new Uint8Array(ue+(ve-de)),Ue=ue;de!==ve;)ge[Ue++]=X[de++];return ge}}}function k(T){var O=E(T);if(O)return O;throw new Error(`Non-${e} character`)}return{encode:y,decodeUnsafe:E,decode:k}}var SW=AW,PW=SW,YT=PW;var Ffe=new Uint8Array(0);var JT=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};var nE=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},iE=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return XT(this,e)}},oE=class{constructor(e){this.decoders=e}or(e){return XT(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},XT=(r,e)=>new oE({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),sE=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new nE(e,t,n),this.decoder=new iE(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},QT=({name:r,prefix:e,encode:t,decode:n})=>new sE(r,e,t,n),aE=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=YT(t,e);return QT({prefix:r,name:e,encode:n,decode:o=>JT(i(o))})},DW=(r,e,t,n)=>{let i={};for(let m=0;m<e.length;++m)i[e[m]]=m;let o=r.length;for(;r[o-1]==="=";)--o;let a=new Uint8Array(o*t/8|0),c=0,l=0,h=0;for(let m=0;m<o;++m){let y=i[r[m]];if(y===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<t|y,c+=t,c>=8&&(c-=8,a[h++]=255&l>>c)}if(c>=t||255&l<<8-c)throw new SyntaxError("Unexpected end of data");return a},CW=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",a=0,c=0;for(let l=0;l<r.length;++l)for(c=c<<8|r[l],a+=8;a>t;)a-=t,o+=e[i&c>>a];if(a&&(o+=e[i&c<<t-a]),n)for(;o.length*t&7;)o+="=";return o},Yn=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>QT({prefix:e,name:r,encode(i){return CW(i,n,t)},decode(i){return DW(i,n,t,r)}});var ZT=aE({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Mfe=aE({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var e4=Yn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),$fe=Yn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),zfe=Yn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),jfe=Yn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),qfe=Yn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Hfe=Yn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Wfe=Yn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Vfe=Yn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Gfe=Yn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var t4=Yn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Xfe=Yn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Qfe=Yn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Zfe=Yn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});ea.default.formatters.b=r=>r==null?"undefined":ZT.baseEncode(r);ea.default.formatters.t=r=>r==null?"undefined":e4.baseEncode(r);ea.default.formatters.m=r=>r==null?"undefined":t4.baseEncode(r);ea.default.formatters.p=r=>r==null?"undefined":r.toString();ea.default.formatters.c=r=>r==null?"undefined":r.toString();ea.default.formatters.k=r=>r==null?"undefined":r.toString();function r4(r){return Object.assign((0,ea.default)(r),{error:(0,ea.default)(`${r}:error`),trace:(0,ea.default)(`${r}:trace`)})}var kW=Ie(oh(),1),ule=r4("datastore:core:tiered");var om=Ie(df(),1),UF=Ie(Lp(),1),c2=Ie(Np(),1),f2=Ie(i4(),1),KF=Ie(MF(),1),Of=class extends ws{constructor(e,t={}){super(),this.db=typeof e=="string"?new KF.Level(e,{...t,keyEncoding:"utf8",valueEncoding:"view"}):e,this.opts={createIfMissing:!0,compression:!1,...t}}async open(){try{await this.db.open(this.opts)}catch(e){throw Do.dbOpenFailedError(e)}}async put(e,t){try{await this.db.put(e.toString(),t)}catch(n){throw Do.dbWriteFailedError(n)}}async get(e){let t;try{t=await this.db.get(e.toString())}catch(n){throw n.notFound?Do.notFoundError(n):Do.dbWriteFailedError(n)}return t}async has(e){try{await this.db.get(e.toString())}catch(t){if(t.notFound)return!1;throw t}return!0}async delete(e){try{await this.db.del(e.toString())}catch(t){throw Do.dbDeleteFailedError(t)}}close(){return this.db&&this.db.close()}batch(){let e=[];return{put:(t,n)=>{e.push({type:"put",key:t.toString(),value:n})},delete:t=>{e.push({type:"del",key:t.toString()})},commit:()=>this.db.batch(e)}}query(e){let t=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(t=e.filters.reduce((o,a)=>(0,om.default)(o,a),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((o,a)=>(0,f2.default)(o,a),t));let{offset:n,limit:i}=e;if(n){let o=0;t=(0,om.default)(t,()=>o++>=n)}return i&&(t=(0,c2.default)(t,i)),t}queryKeys(e){let t=(0,UF.default)(this._query({values:!1,prefix:e.prefix}),({key:o})=>o);Array.isArray(e.filters)&&(t=e.filters.reduce((o,a)=>(0,om.default)(o,a),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((o,a)=>(0,f2.default)(o,a),t));let{offset:n,limit:i}=e;if(n){let o=0;t=(0,om.default)(t,()=>o++>=n)}return i&&(t=(0,c2.default)(t,i)),t}_query(e){let t={keys:!0,keyEncoding:"buffer",values:e.values};if(e.prefix!=null){let i=e.prefix.toString();t.gte=i,t.lt=i+"\xFF"}let n=this.db.iterator(t);if(n[Symbol.asyncIterator])return mG(n);if(n.next!=null&&n.end!=null)return yG(n);throw new Error("Level returned incompatible iterator")}};async function*mG(r){for await(let[e,t]of r)yield{key:new Ye(e,!1),value:t};await r.close()}function yG(r){return{[Symbol.asyncIterator](){return{next:()=>new Promise((e,t)=>{r.next((n,i,o)=>{if(n)return t(n);if(i==null)return r.end(a=>{if(a)return t(a);e({done:!0,value:void 0})});e({done:!1,value:{key:new Ye(i,!1),value:o}})})}),return:()=>new Promise((e,t)=>{r.end(n=>{if(n)return t(n);e({done:!0,value:void 0})})})}}}}function $F(){let r=new Rp;return UT("fission-ipfs",e=>{let t={[Gd]:Gs,[Y_]:Gs,[Wd]:Vs,[Hd]:Vs,[Bs]:Ls,[Rv]:Ls};return Promise.resolve(t[e])},{root:new Of("fission-ipfs/root",{prefix:"",version:2}),blocks:new Lw(new Of("fission-ipfs/blocks",{prefix:"",version:2})),keys:new Of("fission-ipfs/keys",{prefix:"",version:2}),datastore:r,pins:new Of("fission-ipfs/pins",{prefix:"",version:2})},{repoLock:{lock:async()=>({close:async()=>{}}),locked:async()=>!1},autoMigrate:!1})}var h2={},wG=/^((?!chrome|android).)*safari/i.test(globalThis.navigator?.userAgent||""),jF=1*60*1e3,d2=5*60*1e3,p2={retryNumber:0,lastBackoff:0,currentBackoff:1e3},qF={config:{Addresses:{Delegates:[]},Bootstrap:[],Discovery:{webRTCStar:{Enabled:!1}},Pubsub:{Enabled:!1}},preload:{enabled:!1,addresses:[]},libp2p:{peerDiscovery:[],connectionManager:{autoDial:!1}},init:{algorithm:wG?H3:void 0},repo:$F()};async function w2(r){let e=await d0();if(e.length===0)throw new Error("\u{1F4A5} Couldn't start IPFS node, peer list is empty");let t=await r.create(qF);return e.forEach(n=>{h2[n.toString()]=null,y2(t,n)}),globalThis.addEventListener("online",async()=>{(await d0()).filter(n=>{let i=n.toString();return!i.includes("/localhost/")&&!i.includes("/127.0.0.1/")&&!i.includes("/0.0.0.0/")}).forEach(n=>{y2(t,n)})}),ke.debug&&console.log("\u{1F680} Started IPFS node"),t}var l2="ipfs_peers_1661540056";function m2(){let r=`${ke.endpoints.api}/ipfs/peers`;return fetch(r).then(e=>e.json()).then(e=>Array.isArray(e)?e:[]).then(e=>e.filter(t=>rr(t)&&t.includes("/wss/"))).catch(e=>{throw new Error("\u{1F4A5} Couldn't start IPFS node, failed to fetch peer list")})}async function d0(){let r,e=await h0.default.getItem(l2);return rr(e)&&e.trim()!==""?(r=JSON.parse(e),m2().then(t=>h0.default.setItem(l2,JSON.stringify(t))).catch(t=>{console.error(t)})):(r=await m2(),await h0.default.setItem(l2,JSON.stringify(r))),r.map(bD)}function sm(r,e,t,n){let i=null;t.currentBackoff<d2?i=setTimeout(()=>zF(r,e,t,n),t.currentBackoff):i=setTimeout(()=>zF(r,e,t,n),d2),h2[e.toString()]=i,b2(r,e).then(({latency:o})=>{let a={connected:!0,lastConnectedAt:Date.now(),latency:o};p0(e,a),i&&clearTimeout(i),i===h2[e.toString()]&&setTimeout(()=>sm(r,e,p2,a),jF)}).catch(()=>{})}async function zF(r,e,t,n){let i={...n,connected:!1,latency:null};p0(e,i);try{await r.swarm.disconnect(e),await r.swarm.connect(e)}catch{}if(t.currentBackoff<d2){let o={retryNumber:t.retryNumber+1,lastBackoff:t.currentBackoff,currentBackoff:t.lastBackoff+t.currentBackoff};sm(r,e,o,i)}else sm(r,e,t,i)}function y2(r,e){b2(r,e).then(({latency:t})=>r.swarm.connect(e,{timeout:60*1e3}).then(()=>{ke.debug&&console.log(`\u{1FA90} Connected to ${e}`);let n={connected:!0,lastConnectedAt:Date.now(),latency:t};p0(e,n),setTimeout(()=>sm(r,e,p2,n),jF)})).catch(()=>{ke.debug&&console.log(`\u{1FA93} Could not connect to ${e}`);let t={connected:!1,lastConnectedAt:null,latency:null};p0(e,t),sm(r,e,p2,t)})}async function b2(r,e){return r.libp2p.ping(e).then(t=>({latency:t}))}var Nf=[],v2=!1;function p0(r,e){Nf=Nf.filter(a=>a.peer!==r).concat({peer:r,status:e});let t=Nf.every(a=>!a.status.connected),n=Nf.reduce((a,{status:c})=>a>=(c.lastConnectedAt||0)?a:c.lastConnectedAt||0,0),i=Nf.filter(a=>a.status.latency!==null),o=i.length>0?Nf.reduce((a,c)=>a+(c.status.latency||0),0)/i.length:null;v2&&(console.table(Nf),console.log("offline",t),console.log("last connected at",n===0?null:n),console.log("average latency",o))}async function bG(){v2=!0,console.log("\u{1F4E1} Monitoring IPFS peers")}function vG(){v2=!1}var g2=null;async function _G(r,e){let t={},n=[],i=await d0();e=e!==void 0,console.log("\u{1F575}\uFE0F\u200D\u2640\uFE0F Monitoring IPFS bitswap requests"),await HF(),g2=setInterval(async()=>{i.map(async a=>{let c=a.getPeerId();if(!c)return;let l=D1(c);(await r.bitswap.wantlistForPeer(l,{timeout:120*1e3})).forEach(async m=>{let y=m.toString(),E=a+"-"+y;if(!n.includes(E)){let k=!!t[y],O=`${k?"\u{1F4E1}":"\u{1F52E}"} Peer ${a} requested CID ${y}`;if(t[y]=(t[y]||0)+1,k){e&&console.log(O+` (#${t[y]})`);return}else console.log(O);let ue=performance.now();n.push(E);let ne=await r.dag.get(m),me=`loaded locally in ${(performance.now()-ue).toFixed(2)} ms`;ne.value.Links?(console.log(`\u{1F9F1} ${y} is a \u{1F449} DAG structure (${me})`),(console.table||console.log)(ne.value.Links.map(be=>Xe(be)&&Rt(be,"Name")&&Rt(be,"Hash")?{name:be.Name,cid:be.Hash.toString()}:null).filter(be=>be))):(console.log(`\u{1F4E6} ${y} is \u{1F449} Data (${me})`),console.log(ne.value))}})})},20)}async function HF(){g2&&clearInterval(g2)}var WF="https://unpkg.com/ipfs-core@0.15.4/dist/index.min.js",y0=null,xG=r=>{y0=r},gi=async()=>(y0||(y0=await VF(await GF(WF))),y0),VF=r=>w2(r),GF=async r=>{if(!r)throw new Error("This function requires a URL to a CDN");return import(r).then(e=>self.IpfsCore)};ur();var am=new Uint8Array([8,1]);var EG=r=>us(r.Name,r.Tsize,De(r.Hash)),YF=r=>{let e=r?.value?.Data,t=r?.value?.Links?.map(EG);return Oa(e,t)};var Ya=async r=>{let t=await(await gi()).add(r,{cidVersion:1,pin:ke.shouldPin});return{cid:De(t.cid),size:t.size,isFile:!0}},JF=async r=>{let e=Ah(r),t=await gi(),n=[];await x2(e);for await(let i of t.cat(e))n.push(i);return n},sa=async r=>{let e=Ah(r),t=await JF(e);return pn(t)},um=async r=>{let e=Ah(r);return(await sa(e)).toString()},_2=async r=>{let e=Ah(r),t=await gi(),n=[];for await(let i of t.ls(e))n.push({...i,cid:De(i.cid)});return n},Rf=async r=>{let e=Ah(r),t=await gi();await x2(e);let n=await t.dag.get(e);return YF(n)},g0=async r=>{let e=await gi(),t=Oa(r.Data||new Uint8Array,r.Links.map(o=>us(o.Name||"",o.Tsize||0,o.Hash))),n=await e.dag.put(t,{storeCodec:"dag-pb",hashAlg:"sha2-256"}).then(De);await x2(n);let i=await mc(n);return{cid:n,size:i,isFile:!1}},cm=async r=>{let e=Oa(am,r);return g0(e)},mc=async r=>{let e=Ah(r);return(await(await gi()).files.stat(`/ipfs/${e}`)).cumulativeSize},x2=async r=>{if(!ke.shouldPin)return;let e=await gi();try{await e.pin.add(r,{recursive:!1})}catch(t){if(!Xe(t)||!rr(t.message)||!t.message||!t.message.includes("already pinned recursively"))throw t}},Ah=r=>{let e=we.asCID(r);if(!e)throw new Error(`Expected a CID class instance: Found ${r}`);return e};var Bo={};Re(Bo,{add:()=>SG,catAndDecode:()=>PG});var SG=async(r,e)=>{let t=Hv(r)?await jv(r):r,n=Mu(t);if(!By(e))return Ya(n);let i=Tr.AES_GCM,o=await sn.encrypt(n,e,i),a=Mu({alg:i,cip:o});return Ya(a)},PG=async(r,e)=>{let t=await sa(r);if(!By(e))return Fa(t);let n=Fa(t);if(!DG(n.alg)||!Fy(n.cip))throw new Error('Unexpected private block. Expected "alg" and "cip" field.');let i=n.alg,o=await sn.decrypt(n.cip,e,i);return Fa(o)};function DG(r){return rr(r)&&Object.values(Tr).includes(r)}var w0=r=>{let{name:e,cid:t,size:n}=r;return us(e,n,De(t))},XF=r=>{let{name:e="",cid:t,size:n,type:i}=r;return{name:e,cid:t,size:n,isFile:i!=="dir"}},Sh=r=>{let e=r.Name||"",t=r.Hash,n=r.Tsize||0;return{name:e,cid:t,size:n}},Jn=(r,e,t,n)=>({name:r,cid:e,size:n,isFile:t}),Ph=r=>r.reduce((e,t)=>(e[t.name]=t,e),{});var CG=async r=>sa(r),kG=async(r,e)=>Bo.catAndDecode(r,e),fm=async r=>Ya(r),A2=async(r,e)=>Bo.add(r,e),Ch=async r=>{let e=await Rf(r);return Ph(e.Links.map(Sh))},IG=async r=>{let e=await Rf(r),t=await Promise.all(e.Links.map(async n=>{let i=await Rf(n.Hash),o=Ph(i.Links.map(Sh));if(!!o.softLink){let l=await sa(De(o.softLink.cid)),h=new TextDecoder().decode(l);return JSON.parse(h)}let c=await Bo.catAndDecode(De(o.metadata.cid),null);return{...Sh(n),isFile:Rt(c,"isFile")?c.isFile:!1}}));return Ph(t)},Mf=async r=>{let e=Object.values(r).filter(t=>t!==void 0).map(async t=>{if(Jr(t)){let n=await Ya(JSON.stringify(t)),i=await g0(Oa(am,[us("softLink",n.size,n.cid)]));return us(t.name,i.size,i.cid)}else return t.Hash?t:w0(t)});return cm(await Promise.all(e))};var xs={};Re(xs,{checkValue:()=>ZF,get:()=>BG,getAndCheckValue:()=>P2,getValue:()=>QF,getValueFromLinks:()=>S2,normalizeFileContent:()=>v0,putAndMakeLink:()=>b0,putFile:()=>FG,putTree:()=>TG});ur();var TG=async(r,e,t,n)=>{let i=await Mf(r),o=Jn("userland",i.cid,!0,i.size),[a,c]=await Promise.all([b0("metadata",t),b0("skeleton",e)]),l=n!=null?Jn("previous",n,!1,await mc(n)):void 0,h={metadata:a,skeleton:c,userland:o,previous:l},{cid:m,size:y}=await Mf(h);return{cid:m,userland:De(o.cid),metadata:De(a.cid),size:y,isFile:!1,skeleton:e}},FG=async(r,e,t)=>{let n=await fm(await v0(r)),i=Jn("userland",n.cid,!0,n.size),o=await b0("metadata",e),a=t!=null?Jn("previous",t,!1,await mc(t)):void 0,c={metadata:o,userland:i,previous:a},{cid:l,size:h}=await Mf(c);return{cid:l,userland:De(i.cid),metadata:De(o.cid),size:h,isFile:!0,skeleton:{}}},b0=async(r,e)=>{let{cid:t,size:n}=await Bo.add(e,null);return Jn(r,t,!0,n)},BG=async r=>{let e=await Ch(r),t=await P2(e,"metadata",Zc),n=t.isFile?void 0:await P2(e,"skeleton",Ag),i=e.userland?.cid||null;if(!Ba(i))throw new Error("Could not find userland");let o=e.previous?.cid||void 0;return{userland:i,metadata:t,previous:o,skeleton:n}},QF=async(r,e)=>{let t=we.asCID(r);if(Ba(r)){if(!t)return null;let n=await Ch(t);return S2(n,e)}return S2(r,e)},S2=async(r,e)=>{let t=r[e]?.cid;return t?Bo.catAndDecode(De(t),null):null},P2=async(r,e,t,n=!1)=>{let i=await QF(r,e);return ZF(i,e,t,n)},ZF=(r,e,t,n=!1)=>{if(!qv(r)){if(n)return r;throw new Error(`Could not find header value: ${e}`)}if(t(r))return r;throw new Error(`Improperly formatted header value: ${e}`)};async function v0(r){if(r instanceof Uint8Array)return r;if(typeof Blob<"u"&&r instanceof Blob)return await vl.toUint8Array(r);let e=new TextEncoder;if(typeof r=="string")return e.encode(r);let t=JSON.stringify(r);return e.encode(t)}var _n={};Re(_n,{addNode:()=>mX,findLatestRevision:()=>DL,getByCID:()=>z0,getByName:()=>yX,getLatestByBareNameFilter:()=>gX,getLatestByCID:()=>PL,getLatestByName:()=>SL,getRevision:()=>Z2,readNode:()=>AL});var _0=r=>lm(r)||Xa(r)||Jr(r),Xa=r=>Xe(r)&&Zc(r.metadata)&&r.metadata.isFile&&rr(r.key)&&_l(r.content),lm=r=>Xe(r)&&Zc(r.metadata)&&r.metadata.isFile===!1&&es(r.revision)&&LG(r.links)&&eB(r.skeleton),D2=r=>z_(r)&&rr(r.key)&&rr(r.pointer),LG=r=>Xe(r)&&Object.values(r).every(e=>D2(e)||Jr(e)),eB=r=>Xe(r)&&Object.values(r).every(e=>OG(e)||Jr(e)),OG=r=>Xe(r)&&_l(r.cid)&&rr(r.key)&&eB(r.subSkeleton);var vL=Ie(wL(),1);var K0=r=>Array.prototype.map.call(r,e=>("00"+e.toString(16)).slice(-2)).join(""),bL=r=>{let e=new Uint8Array(r.length/2);for(let t=0;t<e.length;t++)e[t]=parseInt(r.slice(t*2,t*2+2),16);return e};var cX=1024,fX=16,_L=320,J2=async r=>{let e="0".repeat(cX/4);return Ro(e,r)},Ro=async(r,e)=>{let t=Q2(r),n=await bo.sha256Str(e);return t.add(n),await EL(t)},ru=async(r,e,t)=>await Ro(r,`${t}${e}`),nu=async r=>{let e=await X2(Q2(r));return lX(e)},lX=async r=>{let e=new Uint8Array(r.toBytes()),t=await bo.sha256(e);return K0(t)},xL=async(r,e=_L)=>{let t=await X2(Q2(r),e);return await EL(t)},X2=async(r,e=_L)=>{if(e>r.toBytes().byteLength*8)throw new Error("threshold is bigger than filter size");if(hX(r)>=e)return r;let n=r.toBytes(),i=n;do{let o=await bo.sha256(i);r.add(K0(o)),i=o}while(dX(n,r.toBytes()));return X2(r,e)},hX=r=>{let e=new Uint32Array(r.toBytes()),t=0;for(let n=0;n<e.length;n++)t+=pX(e[n]);return t},EL=r=>K0(r.toBytes()),Q2=r=>{let e=bL(r);return vL.BloomFilter.fromBytes(e,fX)},dX=(r,e)=>{if(r.byteLength!==e.byteLength)return!1;let t=new Uint8Array(r),n=new Uint8Array(e);for(let i=0;i<t.length;i++)if(t[i]!==n[i])return!1;return!0},pX=r=>{let e=r-(r>>1&1431655765),t=(e&858993459)+(e>>2&858993459);return(t+(t>>4)&252645135)*16843009>>24};var mX=async(r,e,t)=>{let{cid:n,size:i}=await A2(e,t),o=await ru(e.bareNameFilter,t,e.revision),a=await nu(o);if(await r.add(a,n),Xa(e)){let h=await Ro(e.bareNameFilter,e.key),m=await ru(h,e.key,e.revision),y=await nu(m);await r.add(y,De(e.content))}let[c,l]=Xa(e)?[{},!0]:[e.skeleton,!1];return{cid:n,name:a,key:t,size:i,isFile:l,skeleton:c}},AL=async(r,e)=>{let t=await Bo.catAndDecode(r,e);if(!_0(t))throw new Error(`Could not parse a valid filesystem object, ${r}`);return t},yX=async(r,e,t)=>{let n=await r.get(e);return n===null?null:z0(n,t)},z0=async(r,e)=>await AL(r,e),SL=async(r,e,t)=>{let n=await r.get(e);return n===null?null:PL(r,n,t)},PL=async(r,e,t)=>{let n=await z0(e,t),i=await DL(r,n.bareNameFilter,t,n.revision);return i?.cid?await z0(De(i?.cid),t):n},gX=async(r,e,t)=>{let n=await ru(e,t,1),i=await nu(n);return SL(r,i,t)},DL=async(r,e,t,n)=>{let i=n,o=null,a=0,c=null;for(;o===null;){let l=n+Math.pow(2,a),h=await Z2(r,e,t,l);h!==null?(c=h,i=l):o=l,a++}for(;i<o-1;){let l=Math.floor((o+i)/2),h=await Z2(r,e,t,l);h!==null?(c=h,i=l):o=l}return c},Z2=async(r,e,t,n)=>{let i=await ru(e,t,n),o=await nu(i),a=await r.get(o);return a?{cid:a,name:o,number:n}:null};var Cm=class{constructor(e){this.content=e,this.readOnly=!1}async put(){let{cid:e}=await this.putDetailed();return e}async updateContent(e){if(this.readOnly)throw new Error("File is read-only");return this.content=e,this}},Rh=Cm;var Mh=class extends Rh{static create(e){return new Mh(e)}static async fromCID(e){let t=await Tt.getFile(e);return new Mh(t)}static instanceOf(e){return Xe(e)&&Rt(e,"content")}async put(){let{cid:e}=await this.putDetailed();return e}async putDetailed(){return Tt.putFile(await xs.normalizeFileContent(this.content))}},j0=Mh;var e8=class{constructor(){this.readOnly=!1}async put(){let{cid:e}=await this.putDetailed();return e}async ls(e){let t=await this.get(e);if(t===null)throw new Error("Path does not exist");if(Or(t))throw new Error("Can not `ls` a file");return t.getLinks()}async cat(e){let t=await this.get(e);if(t===null)throw new Error("Path does not exist");if(!Or(t))throw new Error("Can not `cat` a directory");return t.content}async mkdir(e){return this.mkdirRecurse(e,()=>this.put())}async mkdirRecurse(e,t){let[n,...i]=e;if(!n)throw new Error("Invalid path: empty");let o=await this.getOrCreateDirectChild(n,t);if(Or(o))throw new Error(`There is a file along the given path: ${os(e)}`);return i.length&&await o.mkdirRecurse(i,()=>this.updateDirectChild(o,n,t)),this}async add(e,t){return await this.addRecurse(e,t,()=>this.put()),this}async addRecurse(e,t,n){let[i,...o]=e;if(!i)throw new Error("Invalid path: empty");if(o.length===0)await this.createOrUpdateChildFile(t,i,n);else{let a=await this.getOrCreateDirectChild(i,n);if(Or(a))throw new Error(`There is a file along the given path: ${os(e)}`);await a.addRecurse(o,t,async()=>{await this.updateDirectChild(a,i,n)})}return this}async rm(e){return await this.rmRecurse(e,()=>this.put()),this}async rmRecurse(e,t){let[n,...i]=e;if(!n)throw new Error("Invalid path: empty");if(i.length===0)this.removeDirectChild(n),t&&await t();else{let o=await this.getDirectChild(n);if(o===null)throw new Error("Invalid path: does not exist");if(Or(o))throw new Error(`There is a file along the given path: ${os(e)}`);await o.rmRecurse(i,async()=>{await this.updateDirectChild(o,n,t)})}return this}async mv(e,t){let n=await this.get(e);if(n===null)throw new Error(`Path does not exist: ${os(e)}`);if(t.length<1)throw new Error(`Path does not exist: ${os(t)}`);let i=t.slice(0,-1),o=await this.get(i);if(!o)await this.mkdir(i),o=await this.get(i);else if(Or(o))throw new Error(`Can not \`mv\` to a file: ${os(i)}`);return await this.rm(e),await[...t].reverse().reduce((a,c,l)=>a.then(async h=>{let m=t.slice(0,-(l+1)),y=m.length?await this.get(m):this;if(y&&!Or(y))return await y.updateDirectChild(h,c,null),y;throw new Error("Failed to update tree while moving node")}),Promise.resolve(n)),this}async exists(e){return await this.get(e)!==null}read(e){return this.get(e)}write(e,t){return this.add(e,t)}async getOrCreateDirectChild(e,t){let n=await this.getDirectChild(e);return n!==null?n:this.createChildTree(e,t)}async updateChild(e,t){let n=[];return await t.reduce(async(i,o,a)=>{let c=await i;if(n.push([o,c]),a+1===t.length)return c;let l=await c.getDirectChild(o);if(!Eg(l)){let h=t.slice(a+1);throw new Error(`Expected a tree at the given path: ${os(h)}`)}return l},Promise.resolve(this)),await n.reverse().reduce(async(i,[o,a])=>(await a.updateDirectChild(await i,o,null),a),Promise.resolve(e)),this}},Uh=e8;var iu=class extends Uh{constructor(t){super();this.type="BareTree",this.links=t,this.children={}}static async empty(){return new iu({})}static async fromCID(t){let n=Ph((await _2(t)).map(XF));return new iu(n)}static fromLinks(t){return new iu(t)}static instanceOf(t){return Xe(t)&&Rt(t,"links")&&Rt(t,"children")&&Rt(t,"type")&&t.type==="BareTree"}async createChildTree(t,n){let i=await iu.empty(),o=this.children[t];if(o){if(Or(o))throw new Error(`There is a file at the given path: ${t}`);return o}return await this.updateDirectChild(i,t,n),i}async createOrUpdateChildFile(t,n,i){let o=await this.getDirectChild(n),a;if(o===null)a=await j0.create(t);else if(j0.instanceOf(o))a=await o.updateContent(t);else throw new Error(`There is already a directory with that name: ${n}`);return await this.updateDirectChild(a,n,i),a}async putDetailed(){return Tt.putLinks(this.links)}async putAndUpdateLink(t,n,i){let o=await t.putDetailed();return this.updateLink(n,o),i&&await i(),this}async updateDirectChild(t,n,i){return this.children[n]=t,this.putAndUpdateLink(t,n,i)}removeDirectChild(t){return delete this.links[t],this.children[t]&&delete this.children[t],this}async getDirectChild(t){if(this.children[t])return this.children[t];let n=this.links[t]||null;if(n===null)return null;let i=De(n.cid),o=n.isFile?await j0.fromCID(i):await iu.fromCID(i);return this.children[t]?this.children[t]:(this.children[t]=o,o)}async get(t){let[n,...i]=t;if(!n)return this;let o=await this.getDirectChild(n);if(i.length){if(o===null||Or(o))return null}else return o;return o.get(i)}updateLink(t,n){let{cid:i,size:o,isFile:a}=n;return this.links[t]=Jn(t,i,a,o),this}getLinks(){return this.links}},ou=iu;var wX={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,a:!0,b:!0,c:!0,d:!0,e:!0,f:!0},bX=r=>wX[r]===!0,In=class{constructor(e){this.links=e,this.children={}}static create(){return new In({})}static async fromCID(e){let t=await Ch(e);return new In(t)}async putDetailed(){return Mf(this.links)}async put(){let{cid:e}=await this.putDetailed();return e}async add(e,t){if(!bX(e[0]))throw new Error("Not a valid name, must be hexadecimal");let n=this.nextTreeOrSiblingName(e);if(e===n)ke.debug&&this.links[e]?.cid!==t&&console.warn(`Adding \`${e}\` to the MMPT again with a different value. This should not happen. The original value will still be used and can loading issues on other ipfs repos. Current CID is \`${this.links[e]?.cid}\`, new CID is \`${t}\`.`);else if(n===null)this.links[e]=Jn(e,t,!0,0);else if(n.length===1)await(await this.getDirectChild(n)).add(e.slice(1),t),await this.putAndUpdateChildLink(n);else{let i=this.addEmptyChild(e[0]),o=this.links[n].cid;this.removeChild(n),await Promise.all([i.add(e.slice(1),t),i.add(n.slice(1),De(o))]),await this.putAndUpdateChildLink(e[0])}}async putAndUpdateChildLink(e){let t=this.links[e]?.cid,{cid:n,size:i}=await this.children[e].putDetailed(),o=this.links[e]?.cid;if(t!=o)return await this.putAndUpdateChildLink(e);this.links[e]=Jn(e,n,!1,i)}addEmptyChild(e){let t=In.create();return this.children[e]=t,t}async get(e){let t=this.nextTreeName(e);return t===null?null:t.length>1?De(this.links[t].cid):(await this.getDirectChild(t)).get(e.slice(1))}async exists(e){return await this.get(e)!==null}async members(){return(await Promise.all(Object.values(this.links).map(async({name:t,cid:n})=>t.length>1?[{name:t,cid:De(n)}]:(await(await In.fromCID(De(n))).members()).map(a=>({...a,name:t+a.name}))))).reduce((t,n)=>t.concat(n))}async getDirectChild(e){if(this.children[e])return this.children[e];let t=await In.fromCID(De(this.links[e].cid));return this.children[e]?this.children[e]:(this.children[e]=t,t)}removeChild(e){delete this.links[e],this.children[e]&&delete this.children[e]}directChildExists(e){return this.links[e]!==void 0||this.children[e]!==void 0}nextTreeName(e){return this.directChildExists(e[0])?e[0]:this.directChildExists(e)?e:null}nextTreeOrSiblingName(e){let t=e[0];return this.directChildExists(t)?t:Object.keys(this.links).find(n=>t===n[0])||null}};var wi=class{constructor(e){this.node=e}back(e=-1){let t=Math.abs(Math.min(e,-1));return Array.from({length:t},(n,i)=>i).reduce(n=>n.then(i=>i?wi._getPreviousVersion(i):null),Promise.resolve(this.node))}async prior(e){return wi._prior(this.node,e)}async list(e=5){let{acc:t}=await Array.from({length:e},(n,i)=>i).reduce((n,i)=>n.then(({node:o,acc:a})=>o?wi._getPreviousVersion(o).then(c=>({node:c,acc:[...a,{delta:-(i+1),timestamp:o.header.metadata.unixMeta.mtime}]})):Promise.resolve({node:null,acc:a})),wi._getPreviousVersion(this.node).then(n=>({node:n,acc:[]})));return t}static async _getPreviousVersion(e){return e.header.previous?e.constructor.fromCID(e.header.previous):Promise.resolve(null)}static async _prior(e,t){if(e.header.metadata.unixMeta.mtime<t)return e;let n=await wi._getPreviousVersion(e);return n?wi._prior(n,t):null}};var vX=r=>({mtime:Date.now(),ctime:Date.now(),mode:r?644:755,_type:r?"file":"dir"}),wc=(r,e)=>({isFile:r,version:e,unixMeta:vX(r)}),q0=r=>({...r,unixMeta:{...r.unixMeta,mtime:Date.now()}});var Yf=class extends Rh{constructor({content:t,header:n,cid:i}){super(t);this.cid=i,this.header=n,this.history=new wi(this)}static instanceOf(t){return Xe(t)&&Rt(t,"content")&&Rt(t,"header")&&q_(t.header)}static async create(t){return new Yf({content:t,header:{metadata:wc(!0,Hn)},cid:null})}static async fromCID(t){let n=await xs.get(t);return Yf.fromInfo(n,t)}static async fromInfo(t,n){let{userland:i,metadata:o,previous:a}=t,c=await Tt.getFile(De(i));return new Yf({content:c,header:{metadata:o,previous:a},cid:n})}async putDetailed(){let t=await xs.putFile(this.content,q0(this.header.metadata),this.cid);return this.cid=t.cid,t}},Kh=Yf;function CL(r){let e=r.slice(1);return e.length<1?null:e}var ti=class extends Uh{constructor({links:t,header:n,cid:i}){super();this.children={},this.cid=i,this.links=t,this.header=n,this.history=new wi(this)}static async empty(){return new ti({links:{},header:{metadata:wc(!1,Hn),skeleton:{}},cid:null})}static async fromCID(t){let n=await xs.get(t);if(!O3(n))throw new Error(`Could not parse a valid public tree at: ${t}`);return ti.fromInfo(n,t)}static async fromInfo(t,n){let{userland:i,metadata:o,previous:a,skeleton:c}=t,l=await Tt.getFileSystemLinks(De(i));return new ti({links:l,header:{metadata:o,previous:a,skeleton:c},cid:n})}static instanceOf(t){return Rt(t,"links")&&Rt(t,"header")&&L3(t.links)&&j_(t.header)}async createChildTree(t,n){let i=await ti.empty(),o=this.children[t];if(o){if(Kh.instanceOf(o))throw new Error(`There is a file at the given path: ${t}`);if(ti.instanceOf(o))return o;throw new Error(`Not a public tree at the given path: ${t}`)}return await this.updateDirectChild(i,t,n),i}async createOrUpdateChildFile(t,n,i){let o=await this.getDirectChild(n),a;if(o===null)a=await Kh.create(t);else if(Kh.instanceOf(o))a=await o.updateContent(t);else throw new Error(`There is already a directory with that name: ${n}`);return await this.updateDirectChild(a,n,i),a}async putDetailed(){let t=await xs.putTree(this.links,this.header.skeleton,this.header.metadata,this.cid);return this.header.previous=this.cid||void 0,this.cid=t.cid,t}async updateDirectChild(t,n,i){if(this.readOnly)throw new Error("Tree is read-only");this.children[n]=t;let o=await t.putDetailed();return this.updateLink(n,o),i&&await i(),this}removeDirectChild(t){return delete this.links[t],delete this.header.skeleton[t],this.children[t]&&delete this.children[t],this}async getDirectChild(t){let n=null;if(this.children[t])return this.children[t];let i=this.header.skeleton[t]||null;if(i===null)return null;if(Sg(i)){let o=De(i.cid);n=i.isFile?await Kh.fromCID(o):await ti.fromCID(o)}else if(Jr(i))return ti.resolveSoftLink(i);return this.children[t]?this.children[t]:(n&&(this.children[t]=n),n)}async get(t){if(t.length<1)return this;let n=await this.getRecurse(this.header.skeleton,t);if(Sg(n)){let i=De(n.cid),o=await xs.get(i);return N3(o)?Kh.fromInfo(o,i):ti.fromInfo(o,i)}return n}async getRecurse(t,n){let i=n[0],o=t[i]||null,a=CL(n);if(Jr(o)){let c=await ti.resolveSoftLink(o);return a?ti.instanceOf(c)?c.get(a).then(xX):null:c}else return o===null||a===null?o:o.subSkeleton?this.getRecurse(o.subSkeleton,a):null}assignLink({name:t,link:n,skeleton:i}){this.links[t]=n,this.header.skeleton[t]=i,this.header.metadata.unixMeta.mtime=Date.now()}static async resolveSoftLink(t){let[n,...i]=t.ipns.split("/"),o=Rd(i.join("/"));if(!(js("public",o)||js("p",o)))throw new Error("Mixing public and private soft links is not supported yet.");let c=n===await Pd({withFiles:!0})?await Jo():await Mc(n);if(!c)throw new Error(`Failed to resolve the soft link: ${t.ipns} - Could not resolve DNSLink`);let l=(await Tt.getSimpleLinks(De(c))).public.cid,h=Jc(o),y=await(await ti.fromCID(De(l))).get(ir(h));return y&&(y.readOnly=!0),y}getLinks(){return Object.values(this.links).reduce((t,n)=>{let i=this.header.skeleton[n.name];return{...t,[n.name]:i&&i.isFile!==void 0?{...n,isFile:i.isFile}:{...n}}},{})}updateLink(t,n){let{cid:i,metadata:o,userland:a,size:c,isFile:l,skeleton:h}=n;return this.assignLink({name:t,link:Jn(t,i,!1,c),skeleton:{cid:i,metadata:o,userland:a,subSkeleton:h,isFile:l}}),this}insertSoftLink({name:t,path:n,username:i}){let o={ipns:`${i}.files.${ke.endpoints.user}/public/${Lr(n)}`,name:t};return this.assignLink({name:t,link:o,skeleton:o}),this}};function xX(r){return r&&(r.readOnly=!0),r}var aa=ti;var Jf=class{constructor(e){this.node=e}async back(e=-1){let t=Math.min(e,-1),n=this.node.header?.revision;return n&&await this._getRevision(n+t)||null}async prior(e){return this.node.header.metadata.unixMeta.mtime<e?this.node:this._prior(this.node.header.revision-1,e)}async list(e=5){let t=this.node.header.revision;return Promise.all(Array.from({length:e},(n,i)=>{let o=i+1;return this._getRevisionInfoFromNumber(t-o).then(a=>({revisionInfo:a,delta:-o}))})).then(n=>n.filter(i=>!!i.revisionInfo)).then(n=>n.map(i=>{let o=i.revisionInfo.metadata.unixMeta.mtime;return{delta:i.delta,timestamp:o}}))}async _getRevision(e){let t=await this._getRevisionInfoFromNumber(e);return t&&await this.node.constructor.fromInfo(this.node.mmpt,this.node.key,t)}_getRevisionInfo(e){return _n.readNode(De(e.cid),this.node.key)}async _getRevisionInfoFromNumber(e){let{key:t,mmpt:n}=this.node,{bareNameFilter:i}=this.node.header,o=await _n.getRevision(n,i,t,e);return o&&this._getRevisionInfo(o)}async _prior(e,t){let n=await this._getRevisionInfoFromNumber(e);return n?.revision?n.metadata.unixMeta.mtime<t?this._getRevision(n.revision):this._prior(n.revision-1,t):null}};var bc=class extends Rh{constructor({content:t,mmpt:n,key:i,header:o}){super(t);this.header=o,this.history=new Jf(this),this.key=i,this.mmpt=n}static instanceOf(t){return Xe(t)&&Rt(t,"content")&&Rt(t,"mmpt")&&Rt(t,"header")&&Xa(t.header)}static async create(t,n,i,o){let a=await Ro(i,o),c=await sn.genKeyStr(),l=await Tt.putEncryptedFile(n,c);return new bc({content:n,mmpt:t,key:o,header:{bareNameFilter:a,key:c,revision:1,metadata:wc(!0,Hn),content:l.cid}})}static async fromBareNameFilter(t,n,i){let o=await _n.getLatestByBareNameFilter(t,n,i);return this.fromInfo(t,i,o)}static async fromLatestName(t,n,i){let o=await _n.getLatestByName(t,n,i);return bc.fromInfo(t,i,o)}static async fromName(t,n,i){let o=await _n.getByName(t,n,i);return bc.fromInfo(t,i,o)}static async fromInfo(t,n,i){if(!Xa(i))throw new Error("Could not parse a valid private file using the given key");let o=await Tt.getEncryptedFile(De(i.content),i.key);return new bc({content:o,key:n,mmpt:t,header:i})}async getName(){let{bareNameFilter:t,revision:n}=this.header,i=await ru(t,this.key,n);return nu(i)}async updateParentNameFilter(t){return this.header.bareNameFilter=await Ro(t,this.header.key),this}async updateContent(t){let n=await Tt.putEncryptedFile(t,this.header.key);return this.content=t,this.header={...this.header,revision:this.header.revision+1,content:n.cid},this}async putDetailed(){return _n.addNode(this.mmpt,{...this.header,metadata:q0(this.header.metadata)},this.key)}},Qi=bc;var or=class extends Uh{constructor({mmpt:t,key:n,header:i}){super();this.children={},this.header=i,this.history=new Jf(this),this.key=n,this.mmpt=t}static instanceOf(t){return Xe(t)&&Rt(t,"mmpt")&&Rt(t,"header")&&lm(t.header)}static async create(t,n,i){let o=i?await Ro(i,n):await J2(n);return new or({mmpt:t,key:n,header:{metadata:wc(!1,Hn),bareNameFilter:o,revision:1,links:{},skeleton:{}}})}static async fromBaseKey(t,n){let i=await J2(n);return this.fromBareNameFilter(t,i,n)}static async fromBareNameFilter(t,n,i){let o=await _n.getLatestByBareNameFilter(t,n,i);return this.fromInfo(t,i,o)}static async fromLatestName(t,n,i){let o=await _n.getLatestByName(t,n,i);return this.fromInfo(t,i,o)}static async fromName(t,n,i){let o=await _n.getByName(t,n,i);return this.fromInfo(t,i,o)}static async fromInfo(t,n,i){if(!lm(i))throw new Error("Could not parse a valid private tree using the given key");return new or({mmpt:t,key:n,header:i})}async createChildTree(t,n){let i=await sn.genKeyStr(),o=await or.create(this.mmpt,i,this.header.bareNameFilter),a=this.children[t];if(a){if(Qi.instanceOf(a))throw new Error(`There is a file at the given path: ${t}`);return a}return await this.updateDirectChild(o,t,n),o}async createOrUpdateChildFile(t,n,i){let o=await this.getDirectChild(n),a;if(o===null){let c=await sn.genKeyStr();a=await Qi.create(this.mmpt,t,this.header.bareNameFilter,c)}else if(Qi.instanceOf(o))a=await o.updateContent(t);else throw new Error(`There is already a directory with that name: ${n}`);return await this.updateDirectChild(a,n,i),a}async putDetailed(){let t=Object.assign({},this.header);return _n.addNode(this.mmpt,t,this.key)}async updateDirectChild(t,n,i){if(this.readOnly)throw new Error("Tree is read-only");await t.updateParentNameFilter(this.header.bareNameFilter),this.children[n]=t;let o=await t.putDetailed();return this.updateLink(n,o),i&&await i(),this}removeDirectChild(t){return this.header={...this.header,revision:this.header.revision+1,links:Sd(this.header.links,t),skeleton:Sd(this.header.skeleton,t)},this.children[t]&&delete this.children[t],this}async getDirectChild(t){let n=null;if(this.children[t])return this.children[t];let i=this.header.links[t];if(i===void 0)return null;if(D2(i))n=i.isFile?await Qi.fromLatestName(this.mmpt,i.pointer,i.key):await or.fromLatestName(this.mmpt,i.pointer,i.key);else if(Jr(i))return or.resolveSoftLink(i);return this.children[t]?this.children[t]:(n&&(this.children[t]=n),n)}async getName(){let{bareNameFilter:t,revision:n}=this.header,i=await ru(t,this.key,n);return nu(i)}async updateParentNameFilter(t){return this.header.bareNameFilter=await Ro(t,this.key),this}async get(t){if(t.length===0)return this;let[n,...i]=t,o=this.header.skeleton[n];return o===void 0?null:this.getRecurse(o,i)}async getRecurse(t,n){let[i,...o]=n;if(Jr(t)){let h=await or.resolveSoftLink(t);if(!h)return null;if(i===void 0)return h;if(or.instanceOf(h))return h.get(n).then(AX);throw new Error("Was expecting a directory at: "+os(n))}if(i===void 0)return EX(this.mmpt,t);let a=t.subSkeleton[i];if(a!==void 0)return this.getRecurse(a,o);let c=await _n.getLatestByCID(this.mmpt,De(t.cid),t.key);if(!lm(c))return null;let l=c.skeleton[i];return l===void 0?null:this.getRecurse(l,o)}assignLink({name:t,link:n,skeleton:i}){this.header.links[t]=n,this.header.skeleton[t]=i,this.header.revision=this.header.revision+1,this.header.metadata.unixMeta.mtime=Date.now()}static async resolveSoftLink(t){let n=t.ipns.split("/")[0];if(!t.privateName||!t.key)throw new Error("Mixing public and private soft links is not supported yet.");let i=n===await Pd({withFiles:!0})?await Jo():await Mc(n);if(!i)throw new Error(`Failed to resolve the soft link: ${t.ipns} - Could not resolve DNSLink`);let o=(await Tt.getSimpleLinks(De(i))).private.cid,a=await In.fromCID(De(o)),c=await _n.getLatestByName(a,t.privateName,t.key);if(!c)return null;let l=c.metadata.isFile?await Qi.fromInfo(a,t.key,c):await or.fromInfo(a,t.key,c);return l&&(l.readOnly=!0),l}getLinks(){return Wv(this.header.links,t=>{if(Jr(t))return{...t};{let{key:n,...i}=t;return{...i}}})}updateLink(t,n){let{cid:i,size:o,key:a,isFile:c,skeleton:l}=n,h=n.name;return this.assignLink({name:t,link:{name:t,key:a,pointer:h,size:o,isFile:c},skeleton:{cid:i,key:a,subSkeleton:l}}),this}insertSoftLink({name:t,username:n,key:i,privateName:o}){let a={ipns:`${n}.files.${ke.endpoints.user}`,name:t,privateName:o,key:i};return this.assignLink({name:t,link:a,skeleton:a}),this}};async function EX(r,e){let t=await _n.getLatestByCID(r,De(e.cid),e.key);return Xa(t)?await Qi.fromInfo(r,e.key,t):await or.fromInfo(r,e.key,t)}function AX(r){return r&&(r.readOnly=!0),r}Ed();var NX={},le,OL=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});OL.decode();var W0;function $h(){return W0.byteLength===0&&(W0=new Uint8Array(le.memory.buffer)),W0}function vc(r,e){return OL.decode($h().subarray(r,r+e))}var Dr=new Array(32).fill(void 0);Dr.push(void 0,null,!0,!1);var km=Dr.length;function _t(r){km===Dr.length&&Dr.push(Dr.length+1);let e=km;return km=Dr[e],Dr[e]=r,e}function Xt(r){return Dr[r]}function SX(r){r<36||(Dr[r]=km,km=r)}function Dt(r){let e=Xt(r);return SX(r),e}var _c=0,V0=new TextEncoder("utf-8"),PX=typeof V0.encodeInto=="function"?function(r,e){return V0.encodeInto(r,e)}:function(r,e){let t=V0.encode(r);return e.set(t),{read:r.length,written:t.length}};function G0(r,e,t){if(t===void 0){let c=V0.encode(r),l=e(c.length);return $h().subarray(l,l+c.length).set(c),_c=c.length,l}let n=r.length,i=e(n),o=$h(),a=0;for(;a<n;a++){let c=r.charCodeAt(a);if(c>127)break;o[i+a]=c}if(a!==n){a!==0&&(r=r.slice(a)),i=t(i,n,n=a+r.length*3);let c=$h().subarray(i+a,i+n);a+=PX(r,c).written}return _c=a,i}function DX(r){return r==null}var Y0;function Me(){return Y0.byteLength===0&&(Y0=new Int32Array(le.memory.buffer)),Y0}function t8(r){let e=typeof r;if(e=="number"||e=="boolean"||r==null)return`${r}`;if(e=="string")return`"${r}"`;if(e=="symbol"){let i=r.description;return i==null?"Symbol":`Symbol(${i})`}if(e=="function"){let i=r.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(r)){let i=r.length,o="[";i>0&&(o+=t8(r[0]));for(let a=1;a<i;a++)o+=", "+t8(r[a]);return o+="]",o}let t=/\[object ([^\]]+)\]/.exec(toString.call(r)),n;if(t.length>1)n=t[1];else return toString.call(r);if(n=="Object")try{return"Object("+JSON.stringify(r)+")"}catch{return"Object"}return r instanceof Error?`${r.name}: ${r.message}
${r.stack}`:n}var kL=new FinalizationRegistry(r=>{le.__wbindgen_export_2.get(r.dtor)(r.a,r.b)});function CX(r,e,t,n){let i={a:r,b:e,cnt:1,dtor:t},o=(...a)=>{i.cnt++;let c=i.a;i.a=0;try{return n(c,i.b,...a)}finally{--i.cnt===0?(le.__wbindgen_export_2.get(i.dtor)(c,i.b),kL.unregister(i)):i.a=c}};return o.original=i,kL.register(o,i,i),o}function kX(r,e,t){le._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h7b0db1e0f3ad4663(r,e,_t(t))}var Mn=32;function Zi(r){if(Mn==1)throw new Error("out of js stack");return Dr[--Mn]=r,Mn}function IX(r,e){let t=e(r.length*1);return $h().set(r,t/1),_c=r.length,t}function TX(r,e){if(!(r instanceof e))throw new Error(`expected instance of ${e.name}`);return r.ptr}function IL(r,e){return $h().subarray(r/1,r/1+e)}function TL(r,e){try{return r.apply(this,e)}catch(t){le.__wbindgen_exn_store(_t(t))}}function FX(r,e,t,n){le.wasm_bindgen__convert__closures__invoke2_mut__h0c25f4799d7222b7(r,e,_t(t),_t(n))}var ope=Object.freeze({DagProtobuf:112,112:"DagProtobuf",DagCbor:113,113:"DagCbor",DagJson:297,297:"DagJson",Raw:85,85:"Raw"}),spe=new FinalizationRegistry(r=>le.__wbg_foreignblockstore_free(r));var FL=new FinalizationRegistry(r=>le.__wbg_publicdirectory_free(r)),Ds=class{static __wrap(e){let t=Object.create(Ds.prototype);return t.ptr=e,FL.register(t,t.ptr,t),t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,FL.unregister(this),e}free(){let e=this.__destroy_into_raw();le.__wbg_publicdirectory_free(e)}constructor(e){try{let t=le.publicdirectory_new(Zi(e));return Ds.__wrap(t)}finally{Dr[Mn++]=void 0}}getNode(e,t){try{let a=le.__wbindgen_add_to_stack_pointer(-16);le.publicdirectory_getNode(a,this.ptr,Zi(e),_t(t));var n=Me()[a/4+0],i=Me()[a/4+1],o=Me()[a/4+2];if(o)throw Dt(i);return Dt(n)}finally{le.__wbindgen_add_to_stack_pointer(16),Dr[Mn++]=void 0}}lookupNode(e,t){try{let a=le.__wbindgen_add_to_stack_pointer(-16),c=G0(e,le.__wbindgen_malloc,le.__wbindgen_realloc),l=_c;le.publicdirectory_lookupNode(a,this.ptr,c,l,_t(t));var n=Me()[a/4+0],i=Me()[a/4+1],o=Me()[a/4+2];if(o)throw Dt(i);return Dt(n)}finally{le.__wbindgen_add_to_stack_pointer(16)}}store(e){try{let o=le.__wbindgen_add_to_stack_pointer(-16);le.publicdirectory_store(o,this.ptr,_t(e));var t=Me()[o/4+0],n=Me()[o/4+1],i=Me()[o/4+2];if(i)throw Dt(n);return Dt(t)}finally{le.__wbindgen_add_to_stack_pointer(16)}}static load(e,t){try{let a=le.__wbindgen_add_to_stack_pointer(-16);le.publicdirectory_load(a,_t(e),_t(t));var n=Me()[a/4+0],i=Me()[a/4+1],o=Me()[a/4+2];if(o)throw Dt(i);return Dt(n)}finally{le.__wbindgen_add_to_stack_pointer(16)}}read(e,t){try{let a=le.__wbindgen_add_to_stack_pointer(-16);le.publicdirectory_read(a,this.ptr,Zi(e),_t(t));var n=Me()[a/4+0],i=Me()[a/4+1],o=Me()[a/4+2];if(o)throw Dt(i);return Dt(n)}finally{le.__wbindgen_add_to_stack_pointer(16),Dr[Mn++]=void 0}}ls(e,t){try{let a=le.__wbindgen_add_to_stack_pointer(-16);le.publicdirectory_ls(a,this.ptr,Zi(e),_t(t));var n=Me()[a/4+0],i=Me()[a/4+1],o=Me()[a/4+2];if(o)throw Dt(i);return Dt(n)}finally{le.__wbindgen_add_to_stack_pointer(16),Dr[Mn++]=void 0}}rm(e,t){try{let a=le.__wbindgen_add_to_stack_pointer(-16);le.publicdirectory_rm(a,this.ptr,Zi(e),_t(t));var n=Me()[a/4+0],i=Me()[a/4+1],o=Me()[a/4+2];if(o)throw Dt(i);return Dt(n)}finally{le.__wbindgen_add_to_stack_pointer(16),Dr[Mn++]=void 0}}write(e,t,n,i){try{let l=le.__wbindgen_add_to_stack_pointer(-16),h=IX(t,le.__wbindgen_malloc),m=_c;le.publicdirectory_write(l,this.ptr,Zi(e),h,m,Zi(n),_t(i));var o=Me()[l/4+0],a=Me()[l/4+1],c=Me()[l/4+2];if(c)throw Dt(a);return Dt(o)}finally{le.__wbindgen_add_to_stack_pointer(16),Dr[Mn++]=void 0,Dr[Mn++]=void 0}}basicMv(e,t,n,i){try{let l=le.__wbindgen_add_to_stack_pointer(-16);le.publicdirectory_basicMv(l,this.ptr,Zi(e),Zi(t),Zi(n),_t(i));var o=Me()[l/4+0],a=Me()[l/4+1],c=Me()[l/4+2];if(c)throw Dt(a);return Dt(o)}finally{le.__wbindgen_add_to_stack_pointer(16),Dr[Mn++]=void 0,Dr[Mn++]=void 0,Dr[Mn++]=void 0}}mkdir(e,t,n){try{let c=le.__wbindgen_add_to_stack_pointer(-16);le.publicdirectory_mkdir(c,this.ptr,Zi(e),Zi(t),_t(n));var i=Me()[c/4+0],o=Me()[c/4+1],a=Me()[c/4+2];if(a)throw Dt(o);return Dt(i)}finally{le.__wbindgen_add_to_stack_pointer(16),Dr[Mn++]=void 0,Dr[Mn++]=void 0}}baseHistoryOn(e,t){try{let a=le.__wbindgen_add_to_stack_pointer(-16);TX(e,Ds),le.publicdirectory_baseHistoryOn(a,this.ptr,e.ptr,_t(t));var n=Me()[a/4+0],i=Me()[a/4+1],o=Me()[a/4+2];if(o)throw Dt(i);return Dt(n)}finally{le.__wbindgen_add_to_stack_pointer(16)}}previousCid(){let e=le.publicdirectory_previousCid(this.ptr);return Dt(e)}metadata(){try{let i=le.__wbindgen_add_to_stack_pointer(-16);le.publicdirectory_metadata(i,this.ptr);var e=Me()[i/4+0],t=Me()[i/4+1],n=Me()[i/4+2];if(n)throw Dt(t);return Dt(e)}finally{le.__wbindgen_add_to_stack_pointer(16)}}asNode(){let e=le.publicdirectory_asNode(this.ptr);return zh.__wrap(e)}getId(){try{let n=le.__wbindgen_add_to_stack_pointer(-16);le.publicdirectory_getId(n,this.ptr);var e=Me()[n/4+0],t=Me()[n/4+1];return vc(e,t)}finally{le.__wbindgen_add_to_stack_pointer(16),le.__wbindgen_free(e,t)}}},BL=new FinalizationRegistry(r=>le.__wbg_publicfile_free(r)),Xf=class{static __wrap(e){let t=Object.create(Xf.prototype);return t.ptr=e,BL.register(t,t.ptr,t),t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,BL.unregister(this),e}free(){let e=this.__destroy_into_raw();le.__wbg_publicfile_free(e)}constructor(e,t){try{let a=le.__wbindgen_add_to_stack_pointer(-16);le.publicfile_new(a,Zi(e),_t(t));var n=Me()[a/4+0],i=Me()[a/4+1],o=Me()[a/4+2];if(o)throw Dt(i);return Xf.__wrap(n)}finally{le.__wbindgen_add_to_stack_pointer(16),Dr[Mn++]=void 0}}getId(){try{let n=le.__wbindgen_add_to_stack_pointer(-16);le.publicfile_getId(n,this.ptr);var e=Me()[n/4+0],t=Me()[n/4+1];return vc(e,t)}finally{le.__wbindgen_add_to_stack_pointer(16),le.__wbindgen_free(e,t)}}store(e){try{let o=le.__wbindgen_add_to_stack_pointer(-16);le.publicfile_store(o,this.ptr,_t(e));var t=Me()[o/4+0],n=Me()[o/4+1],i=Me()[o/4+2];if(i)throw Dt(n);return Dt(t)}finally{le.__wbindgen_add_to_stack_pointer(16)}}static load(e,t){try{let a=le.__wbindgen_add_to_stack_pointer(-16);le.publicfile_load(a,_t(e),_t(t));var n=Me()[a/4+0],i=Me()[a/4+1],o=Me()[a/4+2];if(o)throw Dt(i);return Dt(n)}finally{le.__wbindgen_add_to_stack_pointer(16)}}previousCid(){let e=le.publicfile_previousCid(this.ptr);return Dt(e)}metadata(){try{let i=le.__wbindgen_add_to_stack_pointer(-16);le.publicfile_metadata(i,this.ptr);var e=Me()[i/4+0],t=Me()[i/4+1],n=Me()[i/4+2];if(n)throw Dt(t);return Dt(e)}finally{le.__wbindgen_add_to_stack_pointer(16)}}contentCid(){let e=le.publicfile_contentCid(this.ptr);return Dt(e)}},LL=new FinalizationRegistry(r=>le.__wbg_publicnode_free(r)),zh=class{static __wrap(e){let t=Object.create(zh.prototype);return t.ptr=e,LL.register(t,t.ptr,t),t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,LL.unregister(this),e}free(){let e=this.__destroy_into_raw();le.__wbg_publicnode_free(e)}asDir(){try{let i=le.__wbindgen_add_to_stack_pointer(-16);le.publicnode_asDir(i,this.ptr);var e=Me()[i/4+0],t=Me()[i/4+1],n=Me()[i/4+2];if(n)throw Dt(t);return Ds.__wrap(e)}finally{le.__wbindgen_add_to_stack_pointer(16)}}asFile(){try{let i=le.__wbindgen_add_to_stack_pointer(-16);le.publicnode_asFile(i,this.ptr);var e=Me()[i/4+0],t=Me()[i/4+1],n=Me()[i/4+2];if(n)throw Dt(t);return Xf.__wrap(e)}finally{le.__wbindgen_add_to_stack_pointer(16)}}isDir(){return le.publicnode_isDir(this.ptr)!==0}isFile(){return le.publicnode_isFile(this.ptr)!==0}getId(){try{let n=le.__wbindgen_add_to_stack_pointer(-16);le.publicnode_getId(n,this.ptr);var e=Me()[n/4+0],t=Me()[n/4+1];return vc(e,t)}finally{le.__wbindgen_add_to_stack_pointer(16),le.__wbindgen_free(e,t)}}};async function BX(r,e){if(typeof Response=="function"&&r instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(r,e)}catch(n){if(r.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n);else throw n}let t=await r.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{let t=await WebAssembly.instantiate(r,e);return t instanceof WebAssembly.Instance?{instance:t,module:r}:t}}function LX(){let r={};return r.wbg={},r.wbg.__wbg_publicnode_new=function(e){let t=zh.__wrap(e);return _t(t)},r.wbg.__wbindgen_string_new=function(e,t){let n=vc(e,t);return _t(n)},r.wbg.__wbg_publicdirectory_new=function(e){let t=Ds.__wrap(e);return _t(t)},r.wbg.__wbindgen_object_drop_ref=function(e){Dt(e)},r.wbg.__wbg_publicfile_new=function(e){let t=Xf.__wrap(e);return _t(t)},r.wbg.__wbindgen_string_get=function(e,t){let n=Xt(t),i=typeof n=="string"?n:void 0;var o=DX(i)?0:G0(i,le.__wbindgen_malloc,le.__wbindgen_realloc),a=_c;Me()[e/4+1]=a,Me()[e/4+0]=o},r.wbg.__wbg_putBlock_827f2832ade68391=function(e,t,n,i){var o=IL(t,n).slice();le.__wbindgen_free(t,n*1);let a=Xt(e).putBlock(o,i>>>0);return _t(a)},r.wbg.__wbg_getBlock_ff7c9c77a699829e=function(e,t,n){var i=IL(t,n).slice();le.__wbindgen_free(t,n*1);let o=Xt(e).getBlock(i);return _t(o)},r.wbg.__wbindgen_cb_drop=function(e){let t=Dt(e).original;return t.cnt--==1?(t.a=0,!0):!1},r.wbg.__wbindgen_bigint_new=function(e,t){let n=BigInt(vc(e,t));return _t(n)},r.wbg.__wbindgen_number_new=function(e){return _t(e)},r.wbg.__wbg_new_693216e109162396=function(){let e=new Error;return _t(e)},r.wbg.__wbg_stack_0ddaca5d1abfb52f=function(e,t){let n=Xt(t).stack,i=G0(n,le.__wbindgen_malloc,le.__wbindgen_realloc),o=_c;Me()[e/4+1]=o,Me()[e/4+0]=i},r.wbg.__wbg_error_09919627ac0992f5=function(e,t){try{console.error(vc(e,t))}finally{le.__wbindgen_free(e,t)}},r.wbg.__wbg_get_f0f4f1608ebf633e=function(e,t){let n=Xt(e)[t>>>0];return _t(n)},r.wbg.__wbg_length_93debb0e2e184ab6=function(e){return Xt(e).length},r.wbg.__wbg_new_2ab697f1555e0dbc=function(){let e=new Array;return _t(e)},r.wbg.__wbg_new_306ce8d57919e6ae=function(){let e=new Object;return _t(e)},r.wbg.__wbg_push_811c8b08bf4ff9d5=function(e,t){return Xt(e).push(Xt(t))},r.wbg.__wbg_new_651776e932b7e9c7=function(e,t){let n=new Error(vc(e,t));return _t(n)},r.wbg.__wbg_call_9855a4612eb496cb=function(){return TL(function(e,t,n){let i=Xt(e).call(Xt(t),Xt(n));return _t(i)},arguments)},r.wbg.__wbg_getTime_7c8d3b79f51e2b87=function(e){return Xt(e).getTime()},r.wbg.__wbg_new_78403b138428b684=function(e,t){try{var n={a:e,b:t},i=(a,c)=>{let l=n.a;n.a=0;try{return FX(l,n.b,a,c)}finally{n.a=l}};let o=new Promise(i);return _t(o)}finally{n.a=n.b=0}},r.wbg.__wbg_resolve_f269ce174f88b294=function(e){let t=Promise.resolve(Xt(e));return _t(t)},r.wbg.__wbg_then_1c698eedca15eed6=function(e,t){let n=Xt(e).then(Xt(t));return _t(n)},r.wbg.__wbg_then_4debc41d4fc92ce5=function(e,t,n){let i=Xt(e).then(Xt(t),Xt(n));return _t(i)},r.wbg.__wbg_buffer_de1150f91b23aa89=function(e){let t=Xt(e).buffer;return _t(t)},r.wbg.__wbg_newwithbyteoffsetandlength_9ca61320599a2c84=function(e,t,n){let i=new Uint8Array(Xt(e),t>>>0,n>>>0);return _t(i)},r.wbg.__wbg_new_97cf52648830a70d=function(e){let t=new Uint8Array(Xt(e));return _t(t)},r.wbg.__wbg_set_a0172b213e2469e9=function(e,t,n){Xt(e).set(Xt(t),n>>>0)},r.wbg.__wbg_length_e09c0b925ab8de5d=function(e){return Xt(e).length},r.wbg.__wbg_set_b12cd0ab82903c2f=function(){return TL(function(e,t,n){return Reflect.set(Xt(e),Xt(t),Xt(n))},arguments)},r.wbg.__wbindgen_debug_string=function(e,t){let n=t8(Xt(t)),i=G0(n,le.__wbindgen_malloc,le.__wbindgen_realloc),o=_c;Me()[e/4+1]=o,Me()[e/4+0]=i},r.wbg.__wbindgen_throw=function(e,t){throw new Error(vc(e,t))},r.wbg.__wbindgen_memory=function(){let e=le.memory;return _t(e)},r.wbg.__wbindgen_closure_wrapper943=function(e,t,n){let i=CX(e,t,418,kX);return _t(i)},r}function OX(r,e){return le=r.exports,NL.__wbindgen_wasm_module=e,Y0=new Int32Array(le.memory.buffer),W0=new Uint8Array(le.memory.buffer),le}async function NL(r){typeof r>"u"&&(r=new URL("wasm_wnfs_bg.wasm",NX.url));let e=LX();(typeof r=="string"||typeof Request=="function"&&r instanceof Request||typeof URL=="function"&&r instanceof URL)&&(r=fetch(r));let{instance:t,module:n}=await BX(await r,e);return OX(t,n)}var RL=NL;ur();jc();var RX={[Gd]:Gs,[Wd]:Vs,[Bs]:Ls},Im=class{constructor(e){this.ipfs=e}async getBlock(e){let t=we.decode(e);return await this.ipfs.block.get(t)}async putBlock(e,t){let n=RX[t].name;if(n==null)throw new Error(`Error during putBlock: Unknown codec: ${MX(t)}. Is it part of the multicodec table (https://github.com/multiformats/multicodec/blob/master/table.csv)?`);let i="sha2-256",o=1,a=!1;return(await this.ipfs.block.put(e,{format:n,mhtype:i,version:o,pin:a})).bytes}};function MX(r){let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,r),`0x${Ze(e,"hex").replace(/^(00)*/,"")}`}var ML=!1;async function UL(){if(!ML){ML=!0,Vr("\u23EC Loading WNFS WASM");let r=performance.now();await RL(ke.wnfsWasmLookup(Ny));let e=performance.now()-r;Vr(`\u{1F9EA} Loaded WNFS WASM (${e.toFixed(0)}ms)`)}}var xc=class{constructor(e,t,n,i){this.root=Promise.resolve(e),this.lastRoot=e,this.store=t,this.ipfs=n,this.readOnly=i}static async empty(e){await UL();let t=new Im(e),n=new Ds(new Date);return new xc(n,t,e,!1)}static async fromCID(e,t){await UL();let n=new Im(e),i=await Ds.load(t.bytes,n);return new xc(i,n,e,!1)}async atomically(e){let t=await this.root;this.root=e(t),await this.root}async withError(e,t){try{return await e}catch(n){throw console.error(`Error during WASM operation ${t}:`),n}}async ls(e){let t=await this.root,{result:n}=await this.withError(t.getNode(e,this.store),`ls(${e.join("/")})`);if(n==null)throw new Error(`Can't ls ${e.join("/")}: No such directory`);if(!n.isDir())throw new Error(`Can't ls ${e.join("/")}: Not a directory`);let i=n.asDir(),{result:o}=await this.withError(t.ls(e,this.store),`ls(${e.join("/")})`),a={};for(let c of o){let l=await i.lookupNode(c.name,this.store),h=l.isFile()?we.decode(await l.asFile().store(this.store)):we.decode(await l.asDir().store(this.store));a[c.name]={name:c.name,isFile:c.metadata.unixMeta.kind==="file",size:0,cid:h}}return a}async mkdir(e){return await this.atomically(async t=>{let{rootDir:n}=await this.withError(t.mkdir(e,new Date,this.store),`mkdir(${e.join("/")})`);return n}),this}async cat(e){let t=await this.root,{result:n}=await this.withError(t.read(e,this.store),`read(${e.join("/")})`),i=we.decode(n),o=[];for await(let a of this.ipfs.cat(i,{preload:!1}))o.push(a);return pn(o)}async add(e,t){let n=await v0(t),{cid:i}=await this.ipfs.add(n,{cidVersion:1,hashAlg:"sha2-256",rawLeaves:!0,wrapWithDirectory:!1,preload:!1,pin:!1});return await this.atomically(async o=>{let{rootDir:a}=await this.withError(o.write(e,i.bytes,new Date,this.store),`write(${e.join("/")})`);return a}),this}async rm(e){return await this.atomically(async t=>{let{rootDir:n}=await this.withError(t.rm(e,this.store),`rm(${e.join("/")})`);return n}),this}async mv(e,t){return await this.atomically(async n=>{let{rootDir:i}=await this.withError(n.basicMv(e,t,new Date,this.store),`basicMv(${e.join("/")}, ${t.join("/")})`);return i}),this}async get(e){let t=await this.root,{result:n}=await this.withError(t.getNode(e,this.store),`getNode(${e.join("/")})`);if(n==null)return null;if(n.isFile()){let i=n.asFile(),o=await this.cat(e),a=e.slice(0,-1),c=e[e.length-1];return new n8(o,a,c,this,i)}else if(n.isDir()){let i=n.asDir();return new r8(this.readOnly,e,this,i)}throw new Error("Unknown node type. Can only handle files and directories.")}async exists(e){let t=await this.root;try{return await t.getNode(e,this.store),!0}catch{return!1}}async historyStep(){return await this.atomically(async e=>{let{rootDir:t}=await e.baseHistoryOn(this.lastRoot,this.store);return this.lastRoot=e,t}),await this.root}async put(){let t=await(await this.historyStep()).store(this.store);return we.decode(t)}async putDetailed(){return{cid:await this.put(),size:0,isFile:!1}}},r8=class{constructor(e,t,n,i){this.readOnly=e,this.directory=t,this.publicRoot=n,this.cachedDir=i}checkMutability(e){if(this.readOnly)throw new Error(`Directory is read-only. Cannot ${e}`)}async updateCache(){let t=await(await this.publicRoot.root).getNode(this.directory,this.publicRoot.store);this.cachedDir=t.asDir()}get header(){return KL(this.cachedDir)}async ls(e){return await this.publicRoot.ls([...this.directory,...e])}async mkdir(e){return this.checkMutability(`mkdir at ${[...this.directory,...e].join("/")}`),await this.publicRoot.mkdir([...this.directory,...e]),await this.updateCache(),this}async cat(e){return await this.publicRoot.cat([...this.directory,...e])}async add(e,t){return this.checkMutability(`write at ${[...this.directory,...e].join("/")}`),await this.publicRoot.add([...this.directory,...e],t),await this.updateCache(),this}async rm(e){return this.checkMutability(`remove at ${[...this.directory,...e].join("/")}`),await this.publicRoot.rm([...this.directory,...e]),await this.updateCache(),this}async mv(e,t){return this.checkMutability(`mv from ${[...this.directory,...e].join("/")} to ${[...this.directory,...t].join("/")}`),await this.publicRoot.mv([...this.directory,...e],[...this.directory,...t]),await this.updateCache(),this}async get(e){return await this.publicRoot.get([...this.directory,...e])}async exists(e){return await this.publicRoot.exists([...this.directory,...e])}async put(){await this.publicRoot.put();let t=await(await this.publicRoot.root).store(this.publicRoot.store);return we.decode(t)}async putDetailed(){return{isFile:!1,size:0,cid:await this.put()}}},n8=class extends Cm{constructor(t,n,i,o,a){super(t);this.directory=n,this.filename=i,this.publicRoot=o,this.cachedFile=a}async updateCache(){let n=await(await this.publicRoot.root).getNode([...this.directory,this.filename],this.publicRoot.store);this.cachedFile=n.asFile()}get header(){return KL(this.cachedFile)}async updateContent(t){return await super.updateContent(t),await this.updateCache(),this}async putDetailed(){let t=await this.publicRoot.root,n=[...this.directory,this.filename],{result:i}=await t.getNode(n,this.publicRoot.store);if(i==null)throw new Error(`No file at /${n.join("/")}.`);if(!i.isFile())throw new Error(`Not a file at /${n.join("/")}`);let o=i.asFile();return{isFile:!0,size:0,cid:we.decode(await o.store(this.publicRoot.store))}}};function KL(r){let e=r.metadata(),t={isFile:e.unixMeta.kind==="file",version:e.version,unixMeta:{_type:e.unixMeta.kind,ctime:Number(e.unixMeta.created),mtime:Number(e.unixMeta.modified),mode:e.unixMeta.mode}},n=r.previousCid();return n==null?{metadata:t}:{metadata:t,previous:we.decode(n)}}var jh=class{constructor({links:e,mmpt:t,privateLog:n,sharedCounter:i,sharedLinks:o,publicTree:a,prettyTree:c,privateNodes:l}){this.links=e,this.mmpt=t,this.privateLog=n,this.sharedCounter=i,this.sharedLinks=o,this.publicTree=a,this.prettyTree=c,this.privateNodes=l}static async empty({rootKey:e,wnfsWasm:t}){t&&Vr("\u26A0\uFE0F Running an EXPERIMENTAL new version of the file system: 3.0.0");let n=t?await xc.empty(await gi()):await aa.empty(),i=await ou.empty(),o=In.create(),a=Lr(cn("private")),c=await or.create(o,e,null);await c.put();let l=new jh({links:{},mmpt:o,privateLog:[],sharedCounter:1,sharedLinks:{},publicTree:n,prettyTree:i,privateNodes:{[a]:c}});return await jh.storeRootKey(e),await l.setVersion(t?Rc:Hn),await Promise.all([l.updatePuttable("public",n),l.updatePuttable("p",i),l.updatePuttable("private",o)]),l}static async fromCID({cid:e,permissions:t}){let n=await Tt.getSimpleLinks(e),i=t?await $X(t):[],o=await $L(n),a=LS(o,Rc);a&&Vr("\u26A0\uFE0F Running an EXPERIMENTAL new version of the file system: 3.0.0");let c=n["public"]?.cid||null,l=c===null?await aa.empty():a?await xc.fromCID(await gi(),De(c)):await aa.fromCID(De(c)),h=n["p"]?await ou.fromCID(De(n["p"].cid)):await ou.empty(),m=n["private"]?.cid||null,y,E;m===null?(y=In.create(),E={}):(y=await In.fromCID(De(m)),E=await KX(i,y));let k=n["privateLog"]?.cid,T=k?await Rf(De(k)).then(me=>me.Links.map(Sh)).then(me=>me.sort((be,W)=>parseInt(be.name,10)-parseInt(W.name,10))):[],O=n["shared"]?.cid||null,ue=O?await this.getSharedLinks(De(O)):{},ne=n["sharedCounter"]?.cid||null,ve=ne?await Tt.getFile(De(ne)).then(me=>JSON.parse(Ze(me,"utf8"))):1,X=new jh({links:n,mmpt:y,privateLog:T,sharedCounter:ve,sharedLinks:ue,publicTree:l,prettyTree:h,privateNodes:E});return n["version"]==null&&await X.setVersion(Hn),X}async put(){let{cid:e}=await this.putDetailed();return e}async putDetailed(){return Tt.putLinks(this.links)}updateLink(e,t){let{cid:n,size:i,isFile:o}=t;return this.links[e]=Jn(e,n,o,i),this}async updatePuttable(e,t){return this.updateLink(e,await t.putDetailed())}static async storeRootKey(e){let t=cn("private"),n=await Ou({path:t});await Yr.importSymmKey(e,n)}static async retrieveRootKey(){let e=cn("private"),t=await Ou({path:e});return await Yr.exportSymmKey(t)}findPrivateNode(e){return i8(this.privateNodes,e)}async addPrivateLogEntry(e){let t=[...this.privateLog],n=Math.max(0,t.length-1),i=t[n]?.cid?(await um(De(t[n].cid))).split(","):[];i.length+1>jh.LOG_CHUNK_SIZE&&(n=n+1,i=[]);let a=await bo.sha256Str(e.toString()),c=[...i,a],l=await Tt.putFile(c.join(","));t[n]={name:n.toString(),cid:l.cid,size:l.size};let h=await cm(t.map(w0));this.updateLink("privateLog",{cid:h.cid,isFile:!1,size:await mc(h.cid)}),this.privateLog=t}async addShares(e){this.sharedLinks=e.reduce((o,a)=>({...o,[a.name]:a}),this.sharedLinks);let t=Object.values(this.sharedLinks).reduce((o,{cid:a,name:c,size:l})=>({...o,[c]:{cid:a,name:c,size:l}}),{}),i=await(await gi()).block.put(Mu(t),{format:Hd,mhtype:"sha2-256",pin:!1,version:1});return this.updateLink("shared",{cid:i,isFile:!1,size:await mc(i)}),this}static async getSharedLinks(e){let n=await(await gi()).block.get(e),i=Fa(n);if(!Xe(i))throw new Error("Invalid shared section, not an object");return Object.values(i).reduce((o,a)=>{if(!Xe(a))return o;let c=a.name?a.name:null,l=a.cid?De(a.cid):null;return!c||!l?o:{...o,[c]:{name:c,cid:l,size:a.size||0}}},{})}async setSharedCounter(e){this.sharedCounter=e;let{cid:t,size:n}=await Tt.putFile(JSON.stringify(e));return this.updateLink("sharedCounter",{cid:t,isFile:!0,size:n}),e}async bumpSharedCounter(){let e=this.sharedCounter+1;return this.setSharedCounter(e)}async setVersion(e){let t=await Tt.putFile(va(e));return this.updateLink("version",t)}async getVersion(){return await $L(this.links)}},Mo=jh;Mo.LOG_CHUNK_SIZE=1020;async function $L(r){let e=await Tt.getFile(De(r["version"].cid));return ml(Ze(e))??RS}async function UX(r,e){let t=await lg({path:e}),n=await wr(t);if(n)return n;let[i,o]=i8(r,e);if(!o)return null;let c=ir(e).slice(ir(i).length);return Qi.instanceOf(o)?c.length===0?o.header.bareNameFilter:null:(o.exists(c)||(un(e)?await o.mkdir(c):await o.add(c,"")),o.get(c).then(l=>l?l.header.bareNameFilter:null))}function i8(r,e){let t=r[Lr(e)];if(t)return[e,t];let n=P_(e);return n?i8(r,n):[e,null]}function KX(r,e){return zX(r).reduce((t,{path:n,key:i})=>t.then(async o=>{let a,c=ir(n);if(c.length===1&&c[0]==="private")a=await or.fromBaseKey(e,i);else{let h=await UX(o,n);if(!h)throw new Error(`Was trying to load the PrivateTree for the path \`${n}\`, but couldn't find the bare name filter for it.`);un(n)?a=await or.fromBareNameFilter(e,h,i):a=await Qi.fromBareNameFilter(e,h,i)}let l=Lr(n);return{...o,[l]:a}}),Promise.resolve({}))}async function $X(r){return ag(r).reduce(async(e,t)=>{if(js("public",t))return e;let n=await Ou({path:t}),i=await Yr.exportSymmKey(n),o={path:t,key:i};return e.then(a=>[...a,o])},Promise.resolve([]))}function zX(r){return r.sort((e,t)=>Lr(e.path).localeCompare(Lr(t.path)))}function J0({counter:r,recipientExchangeDid:e,senderRootDid:t}){return Zy(`${e}${t}${r}`)}function zL({entryIndexCid:r,symmKey:e,symmKeyAlgo:t}){let n=r;return{algo:t,key:typeof e=="string"?wt(e,"base64pad"):e,cid:n}}async function qL({bareFilter:r,shareKey:e}){let t=await bo.sha256Str(e);return xL(await Ro(r,t))}var X0=cn("public",".well-known","exchange");async function HL(r,e,{shareWith:t,sharedBy:n}){let i=Array.isArray(t)?t:t.startsWith("did:")?[t]:await qX(t),o=r.sharedCounter||1,a=r.mmpt,c=await Promise.all(i.map(async O=>[O,await J0({counter:o,recipientExchangeDid:O,senderRootDid:n.rootDid})])),l=await sn.genKeyStr(Tr.AES_GCM),h=await or.create(a,l,null);await Promise.all(e.map(async([O,ue])=>{let ne=await ue.getName();return h.insertSoftLink({key:ue.key,name:O,privateName:ne,username:n.username})}));let m=Tr.AES_GCM,y=Object.assign({},h.header),E=await fm(await sn.encrypt(new TextEncoder().encode(JSON.stringify(y)),h.key,m));if(c.length){let O=await qL({bareFilter:y.bareNameFilter,shareKey:c[0][1]});await a.add(O,E.cid)}let k=Mu(zL({entryIndexCid:E.cid.toString(),symmKey:h.key,symmKeyAlgo:m})),T=await Promise.all(c.map(async([O,ue])=>{let{publicKey:ne}=Yc(O),ve=await Gc.encrypt(k,ne),X=await Ya(ve);return{name:ue,cid:X.cid,size:X.size}}));return await r.addShares(T),{shareId:o.toString(),sharedBy:n}}async function qX(r){let e=await Hs(r);if(!e)throw new Error("This person doesn't have a filesystem yet.");let n=(await Tt.getSimpleLinks(e))["p"]?.cid||null;if(!n)throw new Error("This person's filesystem doesn't have a pretty tree.");let i=await ou.fromCID(De(n)),o=ir(Jc(X0)),a=await i.get(o);return a&&a instanceof ou?Object.keys(a.getLinks()):[]}var o8={};Re(o8,{NoPermissionError:()=>Qf});var Qf=class extends Error{constructor(e){super(e),this.name="NoPermissionError"}};var qh=class{constructor({root:e,permissions:t,localOnly:n}){this.localOnly=n||!1,this.proofs={},this.publishHooks=[],this.root=e,this._publishWhenOnline=[],this._publishing=!1,this._whenOnline=this._whenOnline.bind(this),this._beforeLeaving=this._beforeLeaving.bind(this);let i=globalThis;i.filesystems=i.filesystems||[],i.filesystems.push(this),t&&t.app&&t.app.creator&&t.app.name&&(this.appPath=WX(t));let o=async c=>{await pd(c.toString()),Vr("\u{1F4D3} Adding to the CID ledger:",c.toString())},a=T3(3e3,!1,(c,l)=>{if(globalThis.navigator.onLine)return this._publishing=[c,!0],I_(c,l).then(()=>{this._publishing&&this._publishing[0]===c&&(this._publishing=!1)});this._publishWhenOnline.push([c,l])},!1);this.publishHooks.push(o),this.publishHooks.push(a),this.localOnly||(globalThis.addEventListener("online",this._whenOnline),globalThis.addEventListener("beforeunload",this._beforeLeaving))}static async empty(e={}){let{permissions:t,localOnly:n}=e,i=e.rootKey||await sn.genKeyStr(),o=ke.fsVersion===va(Rc),a=await Mo.empty({rootKey:i,wnfsWasm:o});return new qh({root:a,permissions:t,localOnly:n})}static async fromCID(e,t={}){let{permissions:n,localOnly:i}=t,o=await Mo.fromCID({cid:e,permissions:n});return new qh({root:o,permissions:n,localOnly:i})}deactivate(){if(this.localOnly)return;let e=globalThis;e.filesystems=e.filesystems.filter(t=>t!==this),e.removeEventListener("online",this._whenOnline),e.removeEventListener("beforeunload",this._beforeLeaving)}async ls(e){if(zs(e))throw new Error("`ls` only accepts directory paths");return this.runOnNode(e,{public:async(t,n)=>t.ls(n),private:async(t,n)=>{if(Or(t))throw new Error("Tried to `ls` a file");return t.ls(n)}})}async mkdir(e,t={}){if(zs(e))throw new Error("`mkdir` only accepts directory paths");return await this.runMutationOnNode(e,{public:async(n,i)=>{await n.mkdir(i)},private:async(n,i)=>{if(Or(n))throw new Error("Tried to `mkdir` a file");await n.mkdir(i)}}),t.publish&&await this.publish(),this}async add(e,t,n={}){if(Jr(t)||F3(t)||B3(t)){if(zs(e))throw new Error("Can't add soft links to a file");await this.runMutationOnNode(e,{public:async(o,a)=>{let c=Array.isArray(t)?t:Xe(t)?Object.values(t):[t];await this.runOnChildTree(o,a,async l=>(c.forEach(h=>{(or.instanceOf(l)||aa.instanceOf(l))&&l.assignLink({name:h.name,link:h,skeleton:h})}),l))},private:async(o,a)=>{let c=Array.isArray(t)?t:Xe(t)?Object.values(t):[t];await this.runOnChildTree(o,a,async l=>(c.forEach(h=>{(or.instanceOf(l)||aa.instanceOf(l))&&l.assignLink({name:h.name,link:h,skeleton:h})}),l))}})}else{if(un(e))throw new Error("`add` only accepts file paths when working with regular files");await this.runMutationOnNode(e,{public:async(o,a)=>{await o.add(a,t)},private:async(o,a)=>{Or(o)?await o.updateContent(t):await o.add(a,t)}})}return n.publish&&await this.publish(),this}async cat(e){if(un(e))throw new Error("`cat` only accepts file paths");return this.runOnNode(e,{public:async(t,n)=>await t.cat(n),private:async(t,n)=>Or(t)?t.content:await t.cat(n)})}async read(e){if(un(e))throw new Error("`read` only accepts file paths");return this.cat(e)}async write(e,t,n={}){if(un(e))throw new Error("`write` only accepts file paths");return this.add(e,t,n)}async exists(e){return this.runOnNode(e,{public:async(t,n)=>await t.exists(n),private:async(t,n)=>Or(t)||await t.exists(n)})}async get(e){return this.runOnNode(e,{public:async(t,n)=>await t.get(n),private:async(t,n)=>Or(t)?t:await t.get(n)})}async mv(e,t){let n=ng(e,t);if(!A_(e,t)){let i=ig(e),o=ig(t);throw new Error(`Can't move to a different kind of path, from is a ${i} and to is a ${o}`)}if(!n)throw new Error("`mv` is only supported on the same tree for now");if(await this.exists(t))throw new Error("Destination already exists");return await this.runOnNode(e,{public:async(i,o)=>{let[a,...c]=ir(t);await i.mv(o,c)},private:async(i,o)=>{if(Or(i))throw new Error("Tried to `mv` within a file");let[a,...c]=ir(t);await i.mv(o,c)}}),this}async rm(e){return await this.runMutationOnNode(e,{public:async(t,n)=>{await t.rm(n)},private:async(t,n)=>{if(Or(t))throw new Error("Cannot `rm` a file you've asked permission for");await t.rm(n)}}),this}async symlink(e){let{at:t,referringTo:n,name:i}=e;if(t==null)throw new Error("Missing parameter `symlink.at`");if(zs(t))throw new Error("`symlink.at` only accepts directory paths");let o=e.username||await mn(),a=ng(t,n);if(!o)throw new Error("I need a username in order to use this method");if(!a)throw new Error("`link` is only supported on the same tree for now");if(!_o.lookupFilesystemUcan(cn("shared")))throw new Error("Not allowed to share private items");return await this.runMutationOnNode(t,{public:async(l,h)=>{if(!ou.instanceOf(l))if(aa.instanceOf(l))await this.runOnChildTree(l,h,async m=>(aa.instanceOf(m)&&m.insertSoftLink({path:Jc(n),name:i,username:o}),m));else throw new Error("Symlinks not supported in WASM-WNFS yet.")},private:async(l,h)=>{if(Or(l))throw new Error("Cannot add a soft link to a file");await this.runOnChildTree(l,h,async m=>{if(or.instanceOf(m)){let y=await this.runOnNode(n,{public:async()=>{throw new Error("File system hit a public node within a private node. This is not supported/this should not happen.")},private:async(E,k)=>{let T=Or(E)?E:await E.get(k);if(or.instanceOf(T))return T;if(Qi.instanceOf(T))return T;throw new Error("`symlink.referringTo` is not of the right type")}});if(!y)throw new Error("Could not find the item the symlink is referring to");m.insertSoftLink({name:i,username:o,key:y.key,privateName:await y.getName()})}return m})}}),this}async publish(){let e=Array.from(Object.entries(this.proofs));this.proofs={};let t=await this.root.put();return e.forEach(([n,i])=>{this.publishHooks.forEach(o=>o(t,i))}),t}async historyStep(){let e=this.root.publicTree;Rt(e,"historyStep")&&typeof e.historyStep=="function"&&await e.historyStep()}async acceptShare({shareId:e,sharedBy:t}){let n=await this.loadShare({shareId:e,sharedBy:t});return await this.add(cn("private","Shared with me",t),await n.ls([])),this}async loadShare({shareId:e,sharedBy:t}){let n=await Ca(),i=await Ti(t),o=await J0({counter:parseInt(e,10),recipientExchangeDid:n,senderRootDid:i}),a=await Hs(t);if(!a)throw new Error("This user doesn't have a filesystem yet.");let c=await Tt.getSimpleLinks(a),l=c["shared"]?.cid||null;if(!l)throw new Error("This user hasn't shared anything yet.");let h=await Mo.getSharedLinks(De(l)),m=Xe(h)?h[o]:null;if(!m)throw new Error("Couldn't find a matching share.");let y=Xe(m)?m.cid:null;if(!y)throw new Error("Couldn't find a matching share.");let E=await sa(De(y)),T=await(await Ii()).exchangeKey();if(!T.privateKey)throw new Error("Missing private key in exchange key-pair");let O=await Gc.decrypt(E,T.privateKey),ue=Fa(new Uint8Array(O));if(!Rt(ue,"cid"))throw new Error("Share payload is missing the `cid` property");if(!Rt(ue,"key"))throw new Error("Share payload is missing the `key` property");if(!Rt(ue,"algo"))throw new Error("Share payload is missing the `algo` property");let ne=ue.cid,ve=Ze(ue.key,"base64pad"),X=ue.algo;if(!c["private"]?.cid)throw new Error("This user's filesystem doesn't have a private branch");let be=await In.fromCID(De(c["private"]?.cid)),W=await sa(De(ne)),de=await sn.decrypt(W,ve,X),ge=JSON.parse(Ze(de,"utf8"));if(!_0(ge))throw new Error("The share payload did not point to a valid entry index");return await or.fromInfo(be,ve,ge)}async sharePrivate(e,{sharedBy:t,shareWith:n}){let i=e.filter(c=>js("private",c));if(!t){let c=await mn();if(!c)throw new Error("I need a username in order to use this method");t={rootDid:await x_(),username:c}}let o=await i.reduce(async(c,l)=>{let h=await c,m=D_(l),y=await this.get(l);return m&&(Qi.instanceOf(y)||or.instanceOf(y))?[...h,[m,y]]:h},Promise.resolve([]));if(!o.length)throw new Error("Didn't find any items to share");let a=await HL(this.root,o,{shareWith:n,sharedBy:t});return await this.root.bumpSharedCounter(),await this.root.updatePuttable("private",this.root.mmpt),await this.publish(),a}async addPublicExchangeKey(){let e=await Ca();await this.mkdir(Bu(X0,cn(e)))}async hasPublicExchangeKey(){let e=await Ca();return this.exists(Bu(X0,cn(e)))}resolveSymlink(e){return Rt(e,"privateName")?or.resolveSoftLink(e):aa.resolveSoftLink(e)}async checkMutationPermissionAndAddProof(e,t){let n=t?"make changes to":"query";if(!this.localOnly){let i=await _o.lookupFilesystemUcan(e),o=i&&cr(i);if(!i||!o||is(o)||!o.signature)throw new Qf(`I don't have the necessary permissions to ${n} the file system at "${Lr(e)}"`);this.proofs[o.signature]=i}}async runMutationOnNode(e,t){let n=ir(e),i=n[0],o=n.slice(1);if(await this.checkMutationPermissionAndAddProof(e,!0),i==="public")await t.public(this.root.publicTree,o),await t.public(this.root.prettyTree,o),await Promise.all([this.root.updatePuttable("public",this.root.publicTree),this.root.updatePuttable("p",this.root.prettyTree)]);else if(i==="private"){let[a,c]=this.root.findPrivateNode(e);if(!c)throw new Qf(`I don't have the necessary permissions to make changes to the file system at "${Lr(e)}"`);await t.private(c,n.slice(ir(a).length)),await c.put(),await this.root.updatePuttable("private",this.root.mmpt);let l=await this.root.mmpt.put();await this.root.addPrivateLogEntry(l)}else throw i==="p"?new Error("The pretty path is read only"):new Error("Not a valid FileSystem path")}async runOnNode(e,t){let n=ir(e),i=n[0],o=n.slice(1);if(await this.checkMutationPermissionAndAddProof(e,!1),i==="public")return await t.public(this.root.publicTree,o);if(i==="private"){let[a,c]=this.root.findPrivateNode(e);if(!c)throw new Qf(`I don't have the necessary permissions to query the file system at "${Lr(e)}"`);return await t.private(c,n.slice(ir(a).length))}else{if(i==="p")return await t.public(this.root.prettyTree,o);throw new Error("Not a valid FileSystem path")}}async runOnChildTree(e,t,n){let i=e;if(t.length){await i.exists(t)||await i.mkdir(t);let o=await i.get(t);if(Eg(o))i=o;else throw new Error("Path does not point to a directory")}return i=await n(i),t.length?await e.updateChild(i,t):e}_whenOnline(){let e=[...this._publishWhenOnline];this._publishWhenOnline=[],e.forEach(([t,n])=>{this.publishHooks.forEach(i=>i(t,n))})}_beforeLeaving(e){let t="Are you sure you want to leave? We don't control the browser so you may lose your data.";if(this._publishing||this._publishWhenOnline.length)return(e||globalThis.event).returnValue=t,t}},WL=qh;function WX(r){if(!r.app)throw Error("Only works with app permissions");let e=Md(r.app);return t=>t?Bu(e,t):e}var Hh=WL;async function Zf(r,e,t){let n,i;if(e=e||await mn()||void 0,!e)throw new Error("User hasn't authenticated yet");await Lu([]);let o=navigator.onLine?await Hs(e):null,[a,c]=o?await US(o.toString()):[-1,0];if(!navigator.onLine)n=De(await Jo());else if(!o)n=De(await Jo()),n?Vr("\u{1F4D3} No DNSLink, using local CID:",n.toString()):Vr("\u{1F4D3} Creating a new file system");else if(a===0)n=o,Vr("\u{1F4D3} DNSLink is up to date:",n.toString());else if(a>0){n=De(await Jo());let h=a===1?"1 newer local entry":a+" newer local entries";Vr("\u{1F4D3} DNSLink is outdated ("+h+"), using local CID:",n.toString())}else n=o,await pd(n.toString()),Vr("\u{1F4D3} DNSLink is newer:",n.toString());let l=r||void 0;if(n!=null&&(await VL(n),i=await Hh.fromCID(n,{permissions:l}),i!=null))return i;if(!t)throw new Error("Can't make new filesystem without a root AES key");return i=await Hh.empty({permissions:l,rootKey:t}),await YX(i),i}var Q0=async(r,e={reset:!1})=>{let{reset:t}=e,n=await mn();if(n){if(!t){let m=navigator.onLine?await Hs(n):null,y=await Jo();if(m!==null||y!==void 0)throw new Error('Bootstrap operation will "reset" an existing filesystem. Please set reset to true if this behavior is desired.')}}else throw new Error("Cannot bootstrap filesystem because an authed user could not be found.");let i=await YL(),o=await Hh.empty({permissions:r,rootKey:i}),a=await jt(),c=await wr("ucan"),l=await Fr({potency:"APPEND",resource:"*",proof:c||void 0,lifetimeInSeconds:60*60*24*30*12*1e3,audience:a,issuer:a});await Lu([Br(l)]);let h=await o.publish();return await Ey(),await pd(h.toString()),o};async function VL(r){let e=await Tt.getSimpleLinks(r),t=e["version"]==null?"1.0.0":new TextDecoder().decode(await Tt.getFile(De(e["version"].cid))),n=async()=>(await ke.userMessages.versionMismatch.newer(t),new Error(`Incompatible filesystem version. Version: ${t} Supported versions: ${fv.map(c=>va(c)).join(", ")}. Please upgrade this app's webnative version.`)),i=async()=>(await ke.userMessages.versionMismatch.older(t),new Error(`Incompatible filesystem version. Version: ${t} Supported versions: ${fv.map(c=>va(c)).join(", ")}. The user should migrate their filesystem.`)),o=ml(t);if(o==null)throw await n();let a=NS(o);if(a==="too-high")throw await n();if(a==="too-low")throw await i()}var GL={fs:{private:[Fu()],public:[Fu()]}},VX=async()=>await Zf(GL),GX=async(r={reset:!1})=>await Q0(GL,r);async function YX(r){await r.mkdir({directory:["private","Apps"]}),await r.mkdir({directory:["private","Audio"]}),await r.mkdir({directory:["private","Documents"]}),await r.mkdir({directory:["private","Photos"]}),await r.mkdir({directory:["private","Video"]}),await r.publish()}async function YL(){let r=await wr("readKey");if(r)return r;let e=await sn.genKeyStr();return await on("readKey",e),e}var s8=(i=>(i.NotAuthorised="NOT_AUTHORISED",i.AuthSucceeded="AUTH_SUCCEEDED",i.AuthCancelled="AUTH_CANCELLED",i.Continuation="CONTINUATION",i))(s8||{});function JL(r,e,t,n){return{kind:"permissionedAppState",scenario:"AUTH_SUCCEEDED",permissions:r,authenticated:!0,throughLobby:!0,fs:n,newUser:e,username:t}}function XL(r,e){return{kind:"permissionedAppState",scenario:"AUTH_CANCELLED",permissions:r,authenticated:!1,throughLobby:!0,cancellationReason:e}}function a8(r,e,t){return{kind:"permissionedAppState",scenario:"CONTINUATION",permissions:r,authenticated:!0,newUser:!1,throughLobby:!1,fs:t,username:e}}function Wh(r){return{kind:"permissionedAppState",scenario:"NOT_AUTHORISED",permissions:r,authenticated:!1}}var QL=["fission","ipfs","ipns","did","id","identity",".htaccess","htaccess",".htpasswd","htpasswd",".well-known","well-known","400","401","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","421","422","423","424","426","428","429","431","500","501","502","503","504","505","506","507","508","509","510","511","_domainkey","about","about-us","abuse","access","account","accounts","ad","add","admin","administration","administrator","ads","ads.txt","advertise","advertising","aes128-ctr","aes128-gcm","aes192-ctr","aes256-ctr","aes256-gcm","affiliate","affiliates","ajax","alert","alerts","alpha","amp","analytics","api","app","app-ads.txt","apps","asc","assets","atom","auth","authentication","authorize","autoconfig","autodiscover","avatar","backup","banner","banners","bbs","beta","billing","billings","blog","blogs","board","bookmark","bookmarks","broadcasthost","business","buy","cache","calendar","campaign","captcha","careers","cart","cas","categories","category","cdn","cgi","cgi-bin","chacha20-poly1305","change","channel","channels","chart","chat","checkout","clear","client","close","cloud","cms","com","comment","comments","community","compare","compose","config","connect","contact","contest","cookies","copy","copyright","count","cp","cpanel","create","crossdomain.xml","css","curve25519-sha256","customer","customers","customize","dashboard","db","deals","debug","delete","desc","destroy","dev","developer","developers","diffie-hellman-group-exchange-sha256","diffie-hellman-group14-sha1","disconnect","discuss","dns","dns0","dns1","dns2","dns3","dns4","docs","documentation","domain","download","downloads","downvote","draft","drop","ecdh-sha2-nistp256","ecdh-sha2-nistp384","ecdh-sha2-nistp521","edit","editor","email","enterprise","error","errors","event","events","example","exception","exit","explore","export","extensions","false","family","faq","faqs","favicon.ico","features","feed","feedback","feeds","file","files","filter","follow","follower","followers","following","fonts","forgot","forgot-password","forgotpassword","form","forms","forum","forums","friend","friends","ftp","get","git","go","graphql","group","groups","guest","guidelines","guides","head","header","help","hide","hmac-sha","hmac-sha1","hmac-sha1-etm","hmac-sha2-256","hmac-sha2-256-etm","hmac-sha2-512","hmac-sha2-512-etm","home","host","hosting","hostmaster","htpasswd","http","httpd","https","humans.txt","icons","images","imap","img","import","index","info","insert","investors","invitations","invite","invites","invoice","is","isatap","issues","it","jobs","join","js","json","keybase.txt","learn","legal","license","licensing","like","limit","live","load","local","localdomain","localhost","lock","login","logout","lost-password","m","mail","mail0","mail1","mail2","mail3","mail4","mail5","mail6","mail7","mail8","mail9","mailer-daemon","mailerdaemon","map","marketing","marketplace","master","me","media","member","members","message","messages","metrics","mis","mobile","moderator","modify","more","mx","mx1","my","net","network","new","news","newsletter","newsletters","next","nil","no-reply","nobody","noc","none","noreply","notification","notifications","ns","ns0","ns1","ns2","ns3","ns4","ns5","ns6","ns7","ns8","ns9","null","oauth","oauth2","offer","offers","online","openid","order","orders","overview","owa","owner","page","pages","partners","passwd","password","pay","payment","payments","photo","photos","pixel","plans","plugins","policies","policy","pop","pop3","popular","portal","portfolio","post","postfix","postmaster","poweruser","preferences","premium","press","previous","pricing","print","privacy","privacy-policy","private","prod","product","production","profile","profiles","project","projects","public","purchase","put","quota","recover","recovery","redirect","reduce","refund","refunds","register","registration","remove","replies","reply","report","request","request-password","reset","reset-password","response","return","returns","review","reviews","robots.txt","root","rootuser","rsa-sha2-2","rsa-sha2-512","rss","rules","sales","save","script","sdk","search","secure","security","select","services","session","sessions","settings","setup","share","shift","shop","signin","signup","site","sitemap","sites","smtp","sort","source","sql","ssh","ssh-rsa","ssl","ssladmin","ssladministrator","sslwebmaster","stage","staging","stat","static","statistics","stats","status","store","style","styles","stylesheet","stylesheets","subdomain","subscribe","sudo","super","superuser","support","survey","sync","sysadmin","system","tablet","tag","tags","team","telnet","terms","terms-of-use","test","testimonials","theme","themes","today","tools","topic","topics","tour","training","translate","translations","trending","trial","true","umac-128","umac-128-etm","umac-64","umac-64-etm","undefined","unfollow","unlike","unsubscribe","update","upgrade","usenet","user","username","users","uucp","var","verify","video","view","void","vote","vpn","webmail","webmaster","website","widget","widgets","wiki","wpad","write","www","www-data","www1","www2","www3","www4","you","yourname","yourusername","zlib"];async function Tm(r){let e=ke.getApiEndpoint();return!(await fetch(`${e}/user/data/${r}`)).ok}function Fm(r){return!r.startsWith("-")&&!r.endsWith("-")&&!r.startsWith("_")&&/^[a-zA-Z0-9_-]+$/.test(r)&&!QL.includes(r.toLowerCase())}var mr=class extends Error{constructor(e){super(e),this.name="LinkingError"}},Uo=class extends Error{constructor(e){super(e),this.name="LinkingWarning"}},bi=r=>{switch(r.name){case"LinkingWarning":EP(r.message);break;case"LinkingError":throw r;default:throw r}},Vh=(r,e,t)=>{try{let n=JSON.parse(r);return e(n)?{ok:!0,value:n}:{ok:!1,error:new Uo(`${t.participant} received an unexpected message in ${t.callSite}: ${r}. Ignoring message.`)}}catch{return{ok:!1,error:new Uo(`${t.participant} received a message in ${t.callSite} that it could not parse: ${r}. Ignoring message.`)}}};var Z0=async r=>{let{username:e,handleMessage:t}=r,n=await XX(e);if(!n)throw new mr(`Failed to lookup DID for ${e}`);let o=ke.getApiEndpoint().replace(/^https?:\/\//,"wss://"),a=`deviceLink#${n}`;console.log("Opening channel",a);let c=new WebSocket(`${o}/user/link/${n}`);await QX(c),c.onmessage=t;let l=eQ(c),h=ZX(c);return{send:l,close:h}},XX=async r=>{let e=await Ti(r);return e||new Promise(t=>{let i=0,o=setInterval(async()=>{if(console.log("Could not fetch root DID. Retrying"),e=await Ti(r).catch(a=>{throw clearInterval(o),a}),!e&&i<3){i++;return}clearInterval(o),t(e)},2e3)})},QX=async r=>new Promise((e,t)=>{r.onopen=()=>{e()},r.onerror=()=>{t("Websocket channel could not be opened")}}),ZX=r=>function(){r&&r.close(1e3)},eQ=r=>function(e){let t=typeof e=="string"?new TextEncoder().encode(e).buffer:e;r?.send(t)};var tQ=async r=>{let e=r.permissions||null,{autoRemoveUrlParams:t=!0,rootKey:n}=r,i=async l=>r.loadFileSystem===!1?void 0:await Zf(e,l,n),o=new URL(window.location.href),a=o.searchParams.get("authorised"),c=o.searchParams.get("cancelled");if(a){let l=o.searchParams.get("newUser")==="t",h=o.searchParams.get("username")||"";return await fQ(async()=>hQ(a==="via-postmessage"?await dQ():JSON.parse(await um(De(a)))),{tries:10,timeout:1e4,timeoutMessage:"Trying to retrieve UCAN(s) and readKey(s) from the auth lobby timed out after 10 seconds."}),await on(Os,h),t&&(o.searchParams.delete("authorised"),o.searchParams.delete("newUser"),o.searchParams.delete("username"),history.replaceState(null,document.title,o.toString())),e&&await hg(e)===!1?(console.warn("Unable to validate filesystem secrets"),Wh(e)):e&&ug(e,h)===!1?(console.warn("Unable to validate UCAN permissions"),Wh(e)):JL(e,l,h,await i(h))}else if(c){let l=(()=>{switch(c){case"DENIED":return"User denied authorisation";default:return"Unknown reason"}})();return XL(e,l)}else await Lu([]);return null},rQ=async r=>new Promise(e=>e({success:!1})),nQ=async r=>Fm(r),iQ=async r=>Tm(r),oQ=r=>Z0(r),sQ=async r=>{if(!await wr("readKey"))return!1;let t=await Ti(r),n=await wr("ucan");if(n){let i=$s(n),o=cr(n),{ptc:a}=o.payload;return t===i&&a==="SUPER_USER"}else{let i=await jt();return t===i}},aQ=async(r,e)=>{let t=await wr("readKey"),n=await wr("ucan"),i=await Fr({audience:e,issuer:await jt(),lifetimeInSeconds:60*60*24*30*12*1e3,potency:"SUPER_USER",proof:n});return{readKey:t,ucan:Br(i)}};function uQ(r){return Xe(r)&&"readKey"in r&&typeof r.readKey=="string"&&"ucan"in r&&typeof r.ucan=="string"}var cQ=async r=>{if(!uQ(r))throw new mr(`Consumer received invalid link device response from producer: Expected read key and ucan, but got ${JSON.stringify(r)}`);let{readKey:e,ucan:t}=r,n=cr(t);if(await Ks(n))await on("ucan",t),await on("readKey",e);else throw new mr(`Consumer received invalid link device response from producer. Given ucan is invalid: ${r.ucan}`)},eb={auth:{init:tQ,register:rQ,isUsernameValid:nQ,isUsernameAvailable:iQ,createChannel:oQ,checkCapability:sQ,delegateAccount:aQ,linkDevice:cQ}};async function fQ(r,e){return await Promise.race([(async()=>{let t=1;for(;t<=e.tries;){try{await r();return}catch(n){if(t==e.tries)throw n}t++}})(),new Promise((t,n)=>setTimeout(()=>n(new Error(e.timeoutMessage)),e.timeout))])}function lQ(r){return Xe(r)&&rr(r.sessionKey)&&rr(r.secrets)&&rr(r.iv)}async function hQ(r){let e=await Yr.decrypt(r.sessionKey),t=await sn.decryptGCM(r.secrets,e,r.iv),n=JSON.parse(t),i=n.fs,o=n.ucans;await Promise.all(Object.entries(i).map(async([a,{bareNameFilter:c,key:l}])=>{let h=Rd(a),m=await Ou({path:h}),y=await lg({path:h});await Yr.importSymmKey(l,m),await on(y,c)})),await Lu(o)}async function dQ(){let r=await new Promise(e=>{let t=document.createElement("iframe");t.id="webnative-secret-exchange",t.style.width="0",t.style.height="0",t.style.border="none",t.style.display="none",document.body.appendChild(t),t.onload=()=>{e(t)},t.src=`${ke.endpoints.lobby}/exchange.html`});try{let e=new Promise((n,i)=>{let o=10;window.addEventListener("message",c);function a(l){console.warn(`When importing UCANs & readKey(s): Can't parse: ${l}. Might be due to extensions.`),--o===0&&(window.removeEventListener("message",c),i(new Error("Couldn't parse message from auth lobby after 10 tries. See warnings above.")))}function c(l){if(new URL(l.origin).host!==new URL(ke.endpoints.lobby).host){console.log(`Got a message from ${l.origin} while waiting for login credentials. Ignoring.`);return}if(l.data==null)return;let h=null;try{h=JSON.parse(l.data)}catch{a(l.data);return}if(!lQ(h)){a(l.data);return}window.removeEventListener("message",c),n(h)}});if(r.contentWindow==null)throw new Error("Can't import UCANs & readKey(s): No access to its contentWindow");let t={webnative:"exchange-secrets",didExchange:await Ca()};return r.contentWindow.postMessage(t,r.src),await e}finally{document.body.removeChild(r)}}var ri=eb.auth;function tO(r){ri={...ri,...r}}var u8={};Re(u8,{debug:()=>mQ,endpoints:()=>bQ,fsVersion:()=>gQ,setImplementations:()=>Bm,shouldPin:()=>yQ,userMessages:()=>vQ,wnfsWasmLoopkup:()=>wQ});function mQ({enabled:r}){return ke.debug=r,ke.debug}function yQ({enabled:r}){return ke.shouldPin=r,ke.shouldPin}function gQ({version:r}){if(ml(r)==null)throw new Error(`Can't parse semantic version for fsVersion setup: ${r}`);return ke.fsVersion=r,ke.fsVersion}function wQ(r){if(typeof r!="function")throw new Error(`Expected a function as an argument to 'setup.wasmWnfsLookup', but got ${r}`);ke.wnfsWasmLookup=r}function bQ(r){return ke.endpoints={...ke.endpoints,...r},{...ke.endpoints}}function Bm(r){r.auth&&tO(r.auth),r.crypto&&p6(r.crypto),r.dns&&jS(r.dns),r.storage&&BS(r.storage)}function vQ(r){return ke.userMessages={...ke.userMessages,...r},{...ke.userMessages}}var f8={};Re(f8,{createAccount:()=>c8,isUsernameAvailable:()=>Tm,isUsernameValid:()=>Fm,resendVerificationEmail:()=>_Q,shareLink:()=>xQ,storeFileSystemRootKey:()=>EQ});async function c8(r){let e=ke.getApiEndpoint(),t=Br(await Fr({audience:await Di.did(),issuer:await jt()}));return{success:(await fetch(`${e}/user`,{method:"PUT",headers:{authorization:`Bearer ${t}`,"content-type":"application/json"},body:JSON.stringify(r)})).status<300}}async function _Q(){let r=ke.getApiEndpoint(),e=Object.values(Ea())[0];if(e===null)throw"Could not find your local UCAN";let t=Br(await Fr({audience:await Di.did(),issuer:await jt(),proof:e,potency:null}));return{success:(await fetch(`${r}/user/email/resend`,{method:"POST",headers:{authorization:`Bearer ${t}`}})).status<300}}function xQ(r){return ke.endpoints.lobby+"/#/share/"+encodeURIComponent(r.sharedBy.username)+"/"+encodeURIComponent(r.shareId)+"/"}function EQ(r){return Mo.storeRootKey(r)}var l8=async()=>new Promise(r=>r(null)),h8=async r=>{let{success:e}=await c8(r);return e?(await on(Os,r.username),{success:!0}):{success:!1}},d8=async r=>Fm(r),p8=async r=>Tm(r),m8=r=>Z0(r),AQ=async r=>{let e=await Ti(r),t=await wr("ucan");if(t){let n=$s(t),i=cr(t),{ptc:o}=i.payload;return e===n&&o==="SUPER_USER"}else{let n=await jt();return e===n}},SQ=async(r,e)=>{let t=await wr("ucan"),n=await Fr({audience:e,issuer:await jt(),lifetimeInSeconds:60*60*24*30*12*1e3,potency:"SUPER_USER",proof:t});return{token:Br(n)}},PQ=async r=>{let{token:e}=r,t=cr(e);await Ks(t)&&await on("ucan",e)},rO={auth:{init:l8,register:h8,isUsernameValid:d8,isUsernameAvailable:p8,createChannel:m8,checkCapability:AQ,delegateAccount:SQ,linkDevice:PQ}};var CQ=async r=>{if(!await wr("readKey"))return!1;let t=await Ti(r),n=await wr("ucan");if(n){let i=$s(n),o=cr(n),{ptc:a}=o.payload;return t===i&&a==="SUPER_USER"}else{let i=await jt();return t===i}},kQ=async(r,e)=>{let t=await wr("readKey"),n=await wr("ucan"),i=await Fr({audience:e,issuer:await jt(),lifetimeInSeconds:60*60*24*30*12*1e3,potency:"SUPER_USER",proof:n});return{readKey:t,ucan:Br(i)}};function IQ(r){return Xe(r)&&"readKey"in r&&typeof r.readKey=="string"&&"ucan"in r&&typeof r.ucan=="string"}var TQ=async r=>{if(!IQ(r))throw new mr(`Consumer received invalid link device response from producer: Expected read key and ucan, but got ${JSON.stringify(r)}`);let{readKey:e,ucan:t}=r,n=cr(t);if(await Ks(n)){await on("ucan",t),await on("readKey",e),await Mo.storeRootKey(e);let i=await jt(),o=await Fr({potency:"APPEND",resource:"*",proof:t,lifetimeInSeconds:60*60*24*30*12*1e3,audience:i,issuer:i});await Lu([Br(o)])}else throw new mr(`Consumer received invalid link device response from producer. Given ucan is invalid: ${r.ucan}`)},nO={auth:{init:l8,register:h8,isUsernameValid:d8,isUsernameAvailable:p8,createChannel:m8,checkCapability:CQ,delegateAccount:kQ,linkDevice:TQ}};var y8=(t=>(t.NotAuthed="NOT_AUTHORIZED",t.Authed="AUTHORIZED",t))(y8||{});function tb(r,e){return{kind:"appState",scenario:"AUTHORIZED",authenticated:!0,fs:e,username:r}}function iO(){return{kind:"appState",scenario:"NOT_AUTHORIZED",authenticated:!1}}async function BQ(){return mn()}async function LQ({withoutRedirect:r}={}){await pl(Os),await SP(),await Ey(),await Yr.clear(),(globalThis.filesystems||[]).forEach(e=>e.deactivate()),!r&&globalThis.location&&(globalThis.location.href=ke.endpoints.lobby)}async function OQ(r,e,t){let n=r?.app,i=r?.fs,o=r?.platform,a=r?.raw,c=r?.sharing,l=await Ca(),h=await jt(),m=!!document.body.querySelector("iframe#webnative-ipfs")&&typeof SharedWorker=="function";e=e||window.location.href;let y=[["didExchange",l],["didWrite",h],["redirectTo",e],["sdk",Oy.toString()],["sharedRepo",m?"t":"f"],["sharing",c?"t":"f"]].concat(n?[["appFolder",`${n.creator}/${n.name}`]]:[],i?.private?i.private.map(E=>["privatePath",Lr(E,{absolute:!0})]):[],i?.public?i.public.map(E=>["publicPath",Lr(E,{absolute:!0})]):[],a?[["raw",zv(JSON.stringify(a))]]:[],t?Object.entries(t):[]).concat((()=>{let E=o?.apps;switch(typeof E){case"string":return[["app",E]];case"object":return E.map(k=>["app",k]);default:return[]}})());window.location.href=ke.endpoints.lobby+"?"+y.map(([E,k])=>encodeURIComponent(E)+"="+encodeURIComponent(k)).join("&")}var g8={};Re(g8,{createConsumer:()=>sO,createProducer:()=>oO,isUsernameAvailable:()=>VQ,isUsernameValid:()=>WQ,register:()=>HQ});var Gh=class{constructor(){this.events=new Map}on(e,t){let n=this.events.get(e);n===void 0?this.events.set(e,new Set([t])):n.add(t)}removeListener(e,t){let n=this.events.get(e);n!==void 0&&(n.delete(t),n.size===0&&this.events.delete(e))}emit(e,t){this.events.get(e)?.forEach(n=>{n.apply(this,[t])})}};var oO=async r=>{let{username:e}=r;if(!await ri.checkCapability(e))throw new mr(`Producer cannot delegate for username ${e}`);let n=new Gh,i={username:e,sessionKey:null,step:"BROADCAST"},o=async m=>{let{data:y}=m,E=y.arrayBuffer?new TextDecoder().decode(await y.arrayBuffer()):y;if(i.step==="BROADCAST"){let{sessionKey:k,sessionKeyMessage:T}=await RQ(E);i.sessionKey=k,i.step="NEGOTIATION",h.send(T)}else if(i.step==="NEGOTIATION")if(i.sessionKey){let k=await MQ(i.sessionKey,E);if(i.step="DELEGATION",k.ok){let{pin:T,audience:O}=k.value,ue=()=>{let X=!1;return{confirmPin:async()=>{X||(X=!0,i.sessionKey?await UQ(i.sessionKey,e,O,a):bi(new mr("Producer missing session key when delegating account")))},rejectPin:async()=>{X||(X=!0,i.sessionKey?await KQ(i.sessionKey,a):bi(new mr("Producer missing session key when declining account delegation")))}}},{confirmPin:ne,rejectPin:ve}=ue();n?.emit("challenge",{pin:T,confirmPin:ne,rejectPin:ve})}else bi(k.error)}else bi(new mr("Producer missing session key when handling user challenge"));else i.step==="DELEGATION"&&bi(new Uo("Producer received an unexpected message while delegating an account. The message will be ignored."))},a=async(m,y)=>{await h.send(m),i.username!=null&&(n?.emit("link",{approved:y,username:i.username}),c())},c=()=>{i.sessionKey=null,i.step="BROADCAST"},l=async()=>{n?.emit("done",void 0),n=null,h.close()},h=await ri.createChannel({username:e,handleMessage:o});return{on:(...m)=>n?.on(...m),cancel:l}},RQ=async r=>{let e=await ci.makeKey({alg:Tr.AES_GCM,length:256}),t=await ci.exportKey(e),{publicKey:n}=Yc(r),i=await Us.importPublicKey(n,qc.SHA_256,Nt.Exchange),o=je.arrBufToStr(je.base64ToArrBuf(t),Ns.B16),a=await Us.encrypt(o,i),c=await Fr({issuer:await jt(),audience:r,lifetimeInSeconds:60*5,facts:[{sessionKey:t}],potency:null}),l=je.randomBuf(16),h=je.arrBufToBase64(await yt.subtle.encrypt({name:"AES-GCM",iv:l},e,wt(Br(c),"utf8"))),m=JSON.stringify({iv:je.arrBufToBase64(l),msg:h,sessionKey:je.arrBufToBase64(a)});return{sessionKey:e,sessionKeyMessage:m}},MQ=async(r,e)=>{let n=Vh(e,i=>Xe(i)&&"iv"in i&&typeof i.iv=="string"&&"msg"in i&&typeof i.msg=="string",{participant:"Producer",callSite:"handleUserChallenge"});if(n.ok){let{iv:i,msg:o}=n.value,a=je.base64ToArrBuf(i),c=null;try{c=Ze(await yt.subtle.decrypt({name:"AES-GCM",iv:a},r,je.base64ToArrBuf(o)),"utf8")}catch{return{ok:!1,error:new Uo("Ignoring message that could not be decrypted.")}}let l=JSON.parse(c),h=l.pin??null,m=l.did??null;return h!==null&&m!==null?{ok:!0,value:{pin:h,audience:m}}:{ok:!1,error:new mr(`Producer received invalid pin ${l.pin} or audience ${l.audience}`)}}else return n},UQ=async(r,e,t,n)=>{let i=await ri.delegateAccount(e,t),o=JSON.stringify(i),a=je.randomBuf(16),c=je.arrBufToBase64(await yt.subtle.encrypt({name:"AES-GCM",iv:a},r,wt(o,"utf8"))),l=JSON.stringify({iv:je.arrBufToBase64(a),msg:c});await n(l,!0)},KQ=async(r,e)=>{let t=JSON.stringify({linkStatus:"DENIED"}),n=je.randomBuf(16),i=je.arrBufToBase64(await yt.subtle.encrypt({name:"AES-GCM",iv:n},r,wt(t,"utf8"))),o=JSON.stringify({iv:je.arrBufToBase64(n),msg:i});await e(o,!1)};var sO=async r=>{let{username:e}=r,t=new Gh,n={username:e,sessionKey:null,temporaryRsaPair:null,step:"BROADCAST"},i=async l=>{let{data:h}=l,m=h.arrayBuffer?new TextDecoder().decode(await h.arrayBuffer()):h;if(n.step==="BROADCAST")bi(new Uo("Consumer is not ready to start linking"));else if(n.step==="NEGOTIATION")if(n.sessionKey)bi(new Uo("Consumer already received a session key"));else if(!n.temporaryRsaPair||!n.temporaryRsaPair.privateKey)bi(new mr("Consumer missing RSA key pair when handling session key message"));else{let y=await zQ(n.temporaryRsaPair.privateKey,m);if(y.ok){n.sessionKey=y.value;let{pin:E,challenge:k}=await jQ(n.sessionKey);a.send(k),t?.emit("challenge",{pin:Array.from(E)}),n.step="DELEGATION"}else bi(y.error)}else if(n.step==="DELEGATION")if(!n.sessionKey)bi(new mr("Consumer was missing session key when linking device"));else if(!n.username)bi(new mr("Consumer was missing username when linking device"));else{let y=await qQ(n.sessionKey,n.username,m);if(y.ok){let{approved:E}=y.value;t?.emit("link",{approved:E,username:n.username}),await o()}else bi(y.error)}},o=async()=>{t?.emit("done",void 0),t=null,a.close(),clearInterval(c)},a=await ri.createChannel({username:e,handleMessage:i}),c=setInterval(async()=>{if(n.sessionKey)clearInterval(c);else{let{temporaryRsaPair:l,temporaryDID:h}=await $Q();n.temporaryRsaPair=l,n.step="NEGOTIATION",await a.send(h)}},2e3);return{on:(...l)=>t?.on(...l),cancel:o}},$Q=async()=>{let r=nr.normalize(),{rsaSize:e,hashAlg:t}=r,n=await Us.makeKeypair(e,t,Nt.Exchange),i=await Us.getPublicKey(n),o=Dl(i,"rsa");return{temporaryRsaPair:n,temporaryDID:o}},zQ=async(r,e)=>{let n=Vh(e,i=>Xe(i)&&"iv"in i&&typeof i.iv=="string"&&"msg"in i&&typeof i.msg=="string"&&"sessionKey"in i&&typeof i.sessionKey=="string",{participant:"Consumer",callSite:"handleSessionKey"});if(n.ok){let{iv:i,msg:o,sessionKey:a}=n.value,c=je.base64ToArrBuf(i),l,h;try{let T=je.base64ToArrBuf(a);h=await Us.decrypt(T,r),l=await ci.importKey(je.arrBufToBase64(h),{alg:Tr.AES_GCM,length:256})}catch{return{ok:!1,error:new Uo(`Consumer received a session key in handleSessionKey that it could not decrypt: ${e}. Ignoring message`)}}let m=null;try{m=Ze(await yt.subtle.decrypt({name:"AES-GCM",iv:c},l,je.base64ToArrBuf(o)),"utf8")}catch{return{ok:!1,error:new mr("Consumer could not decrypt closed UCAN with provided session key.")}}let y=cr(m);if(await Ks(y)===!1)return{ok:!1,error:new mr("Consumer received an invalid closed UCAN")};if(y.payload.ptc)return{ok:!1,error:new mr("Consumer received a closed UCAN with potency. Closed UCAN must not have potency.")};let E=y.payload.fct[0]&&y.payload.fct[0].sessionKey;if(!E)return{ok:!1,error:new mr("Consumer received a closed UCAN that was missing a session key in facts.")};let k=je.arrBufToBase64(h);return E!==k?{ok:!1,error:new mr("Consumer received a closed UCAN session key does not match the session key")}:{ok:!0,value:l}}else return n},jQ=async r=>{let e=Array.from(new Uint8Array(je.randomBuf(6,{max:9}))),t=je.randomBuf(16),n=je.arrBufToBase64(await yt.subtle.encrypt({name:"AES-GCM",iv:t},r,wt(JSON.stringify({did:await jt(),pin:e}),"utf8"))),i=JSON.stringify({iv:je.arrBufToBase64(t),msg:n});return{pin:e,challenge:i}},qQ=async(r,e,t)=>{let i=Vh(t,o=>Xe(o)&&"iv"in o&&typeof o.iv=="string"&&"msg"in o&&typeof o.msg=="string",{participant:"Consumer",callSite:"linkDevice"});if(i.ok){let{iv:o,msg:a}=i.value,c=je.base64ToArrBuf(o),l=null;try{l=Ze(await yt.subtle.decrypt({name:"AES-GCM",iv:c},r,je.base64ToArrBuf(a)),"utf8")}catch{return{ok:!1,error:new Uo("Consumer ignoring message that could not be decrypted in linkDevice.")}}let h=Vh(l,Xe,{participant:"Consumer",callSite:"linkDevice"});return h.ok?h.value.linkStatus==="DENIED"?{ok:!0,value:{approved:!1}}:(await on(Os,e),await ri.linkDevice(h.value),{ok:!0,value:{approved:!0}}):h}else return i};var HQ=async r=>ri.register(r),WQ=async r=>ri.isUsernameValid(r),VQ=async r=>ri.isUsernameAvailable(r);var w8={};Re(w8,{create:()=>YQ,deleteByDomain:()=>JQ,index:()=>GQ,publish:()=>XQ});async function GQ(){let r=ke.getApiEndpoint(),e=await _o.lookupAppUcan("*");if(e===null)throw"Could not find your local UCAN";let t=Br(await Fr({audience:await Di.did(),issuer:await jt(),proof:e,potency:null})),i=await(await fetch(`${r}/app`,{method:"GET",headers:{authorization:`Bearer ${t}`}})).json();return Object.values(i).filter(o=>o.urls.length>0).map(({urls:o,insertedAt:a,modifiedAt:c})=>({domains:o,insertedAt:a,modifiedAt:c}))}async function YQ(r){let e=ke.getApiEndpoint(),t=await _o.lookupAppUcan("*");if(t===null)throw"Could not find your local UCAN";let n=Br(await Fr({audience:await Di.did(),issuer:await jt(),proof:t,potency:null})),i=rr(r)?`${e}/app?subdomain=${encodeURIComponent(r)}`:`${e}/app`,a=await(await fetch(i,{method:"POST",headers:{authorization:`Bearer ${n}`}})).json(),c=new Date().toISOString();return{domains:[a],insertedAt:c,modifiedAt:c}}async function JQ(r){let e=ke.getApiEndpoint(),t=await _o.lookupAppUcan(r);if(t===null)throw new Error("Could not find your local UCAN");let n=Br(await Fr({audience:await Di.did(),issuer:await jt(),proof:t,potency:null})),o=await(await fetch(`${e}/app`,{method:"GET",headers:{authorization:`Bearer ${n}`}})).json(),a=Object.entries(o).find(([c,l])=>l.urls.includes(r));if(a==null)throw new Error(`Couldn't find an app with domain ${r}`);await fetch(`${e}/app/${encodeURIComponent(a[0])}`,{method:"DELETE",headers:{authorization:`Bearer ${n}`}})}async function XQ(r,e){let t=ke.getApiEndpoint(),n=await _o.lookupAppUcan(r);if(n===null)throw"Could not find your local UCAN";let i=Br(await Fr({audience:await Di.did(),issuer:await jt(),proof:n,potency:null})),o=`${t}/app/${r}/${e}`;await fetch(o,{method:"PUT",headers:{authorization:`Bearer ${i}`}})}async function QQ(r){r=r||{};let{useWnfs:e=!1}=r;if(e?Bm(nO):Bm(rO),globalThis.isSecureContext===!1)throw"INSECURE_CONTEXT";if(await v8()===!1)throw"UNSUPPORTED_BROWSER";let t=await mn();if(t&&e){let n=navigator.onLine?await Hs(t):null,i=await Jo(),o={fs:{private:[Fu()],public:[Fu()]}};if(n===null&&i===void 0)return tb(t,await Q0(o));{let a=r.loadFileSystem===!1?void 0:await Zf(o,t);return tb(t,a)}}else return t?tb(t,void 0):iO()}async function ZQ(r){r=r||{};let e=r.permissions||null,{rootKey:t}=r;Bm(eb);let n=async a=>r.loadFileSystem===!1?void 0:await Zf(e,a,t);if(globalThis.isSecureContext===!1)throw"INSECURE_CONTEXT";if(await v8()===!1)throw"UNSUPPORTED_BROWSER";let i=await ri.init(r);if(i&&A6(i))return i;let o=await mn();if(o&&e){let a=await hg(e),c=ug(e,o);return a&&c?a8(e,o,await n(o)):Wh(e)}else return o?a8(e,o,await n(o)):Wh(e)}async function v8(){return b8.default.supports(b8.default.INDEXEDDB)&&await(()=>new Promise(r=>{let e=indexedDB.open("testDatabase");e.onsuccess=()=>r(!0),e.onerror=()=>r(!1)}))()}var eZ=Hh;return qn(tZ);})();
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
//# sourceMappingURL=index.umd.min.js.map

